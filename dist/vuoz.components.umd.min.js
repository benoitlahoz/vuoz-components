(function(t,e){"object"===typeof exports&&"object"===typeof module?module.exports=e(require("vue")):"function"===typeof define&&define.amd?define([],e):"object"===typeof exports?exports["vuoz.components"]=e(require("vue")):t["vuoz.components"]=e(t["Vue"])})("undefined"!==typeof self?self:this,(function(t){return function(t){var e={};function i(n){if(e[n])return e[n].exports;var r=e[n]={i:n,l:!1,exports:{}};return t[n].call(r.exports,r,r.exports,i),r.l=!0,r.exports}return i.m=t,i.c=e,i.d=function(t,e,n){i.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:n})},i.r=function(t){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},i.t=function(t,e){if(1&e&&(t=i(t)),8&e)return t;if(4&e&&"object"===typeof t&&t&&t.__esModule)return t;var n=Object.create(null);if(i.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var r in t)i.d(n,r,function(e){return t[e]}.bind(null,r));return n},i.n=function(t){var e=t&&t.__esModule?function(){return t["default"]}:function(){return t};return i.d(e,"a",e),e},i.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},i.p="",i(i.s="fae3")}({0:function(t,e){},"00ee":function(t,e,i){var n=i("b622"),r=n("toStringTag"),o={};o[r]="z",t.exports="[object z]"===String(o)},"0366":function(t,e,i){var n=i("1c0b");t.exports=function(t,e,i){if(n(t),void 0===e)return t;switch(i){case 0:return function(){return t.call(e)};case 1:return function(i){return t.call(e,i)};case 2:return function(i,n){return t.call(e,i,n)};case 3:return function(i,n,r){return t.call(e,i,n,r)}}return function(){return t.apply(e,arguments)}}},"0538":function(t,e,i){"use strict";var n=i("1c0b"),r=i("861d"),o=[].slice,s={},a=function(t,e,i){if(!(e in s)){for(var n=[],r=0;r<e;r++)n[r]="a["+r+"]";s[e]=Function("C,a","return new C("+n.join(",")+")")}return s[e](t,i)};t.exports=Function.bind||function(t){var e=n(this),i=o.call(arguments,1),s=function(){var n=i.concat(o.call(arguments));return this instanceof s?a(e,n.length,n):e.apply(t,n)};return r(e.prototype)&&(s.prototype=e.prototype),s}},"057f":function(t,e,i){var n=i("fc6a"),r=i("241c").f,o={}.toString,s="object"==typeof window&&window&&Object.getOwnPropertyNames?Object.getOwnPropertyNames(window):[],a=function(t){try{return r(t)}catch(e){return s.slice()}};t.exports.f=function(t){return s&&"[object Window]"==o.call(t)?a(t):r(n(t))}},"06aa":function(t,e){t.exports=function(t){var e={};function i(n){if(e[n])return e[n].exports;var r=e[n]={i:n,l:!1,exports:{}};return t[n].call(r.exports,r,r.exports,i),r.l=!0,r.exports}return i.m=t,i.c=e,i.d=function(t,e,n){i.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:n})},i.r=function(t){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},i.t=function(t,e){if(1&e&&(t=i(t)),8&e)return t;if(4&e&&"object"===typeof t&&t&&t.__esModule)return t;var n=Object.create(null);if(i.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var r in t)i.d(n,r,function(e){return t[e]}.bind(null,r));return n},i.n=function(t){var e=t&&t.__esModule?function(){return t["default"]}:function(){return t};return i.d(e,"a",e),e},i.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},i.p="",i(i.s="fb15")}({"18d2":function(t,e,i){"use strict";var n=i("18e9");t.exports=function(t){t=t||{};var e=t.reporter,i=t.batchProcessor,r=t.stateHandler.getState;if(!e)throw new Error("Missing required dependency: reporter.");function o(t,e){function i(){e(t)}if(n.isIE(8))r(t).object={proxy:i},t.attachEvent("onresize",i);else{var o=c(t);if(!o)throw new Error("Element is not detectable by this strategy.");o.contentDocument.defaultView.addEventListener("resize",i)}}function s(e){var i=t.important?" !important; ":"; ";return(e.join(i)+i).trim()}function a(t,o,a){a||(a=o,o=t,t=null),t=t||{};t.debug;function c(o,a){var c=s(["display: block","position: absolute","top: 0","left: 0","width: 100%","height: 100%","border: none","padding: 0","margin: 0","opacity: 0","z-index: -1000","pointer-events: none"]),l=!1,h=window.getComputedStyle(o),u=o.offsetWidth,f=o.offsetHeight;function d(){function i(){if("static"===h.position){o.style.setProperty("position","relative",t.important?"important":"");var i=function(e,i,n,r){function o(t){return t.replace(/[^-\d\.]/g,"")}var s=n[r];"auto"!==s&&"0"!==o(s)&&(e.warn("An element that is positioned static has style."+r+"="+s+" which is ignored due to the static positioning. The element will need to be positioned relative, so the style."+r+" will be set to 0. Element: ",i),i.style.setProperty(r,"0",t.important?"important":""))};i(e,o,h,"top"),i(e,o,h,"right"),i(e,o,h,"bottom"),i(e,o,h,"left")}}function s(){function t(e,i){if(!e.contentDocument){var n=r(e);return n.checkForObjectDocumentTimeoutId&&window.clearTimeout(n.checkForObjectDocumentTimeoutId),void(n.checkForObjectDocumentTimeoutId=setTimeout((function(){n.checkForObjectDocumentTimeoutId=0,t(e,i)}),100))}i(e.contentDocument)}l||i();var e=this;t(e,(function(t){a(o)}))}""!==h.position&&(i(h),l=!0);var u=document.createElement("object");u.style.cssText=c,u.tabIndex=-1,u.type="text/html",u.setAttribute("aria-hidden","true"),u.onload=s,n.isIE()||(u.data="about:blank"),r(o)&&(o.appendChild(u),r(o).object=u,n.isIE()&&(u.data="about:blank"))}r(o).startSize={width:u,height:f},i?i.add(d):d()}n.isIE(8)?a(o):c(o,a)}function c(t){return r(t).object}function l(t){if(r(t)){var e=c(t);e&&(n.isIE(8)?t.detachEvent("onresize",e.proxy):t.removeChild(e),r(t).checkForObjectDocumentTimeoutId&&window.clearTimeout(r(t).checkForObjectDocumentTimeoutId),delete r(t).object)}}return{makeDetectable:a,addListener:o,uninstall:l}}},"18e9":function(t,e,i){"use strict";var n=t.exports={};n.isIE=function(t){function e(){var t=navigator.userAgent.toLowerCase();return-1!==t.indexOf("msie")||-1!==t.indexOf("trident")||-1!==t.indexOf(" edge/")}if(!e())return!1;if(!t)return!0;var i=function(){var t,e=3,i=document.createElement("div"),n=i.getElementsByTagName("i");do{i.innerHTML="\x3c!--[if gt IE "+ ++e+"]><i></i><![endif]--\x3e"}while(n[0]);return e>4?e:t}();return t===i},n.isLegacyOpera=function(){return!!window.opera}},"2cef":function(t,e,i){"use strict";t.exports=function(){var t=1;function e(){return t++}return{generate:e}}},"49ad":function(t,e,i){"use strict";t.exports=function(t){var e={};function i(i){var n=t.get(i);return void 0===n?[]:e[n]||[]}function n(i,n){var r=t.get(i);e[r]||(e[r]=[]),e[r].push(n)}function r(t,e){for(var n=i(t),r=0,o=n.length;r<o;++r)if(n[r]===e){n.splice(r,1);break}}function o(t){var e=i(t);e&&(e.length=0)}return{get:i,add:n,removeListener:r,removeAllListeners:o}}},5058:function(t,e,i){"use strict";t.exports=function(t){var e=t.idGenerator,i=t.stateHandler.getState;function n(t){var e=i(t);return e&&void 0!==e.id?e.id:null}function r(t){var n=i(t);if(!n)throw new Error("setId required the element to have a resize detection state.");var r=e.generate();return n.id=r,r}return{get:n,set:r}}},"50bf":function(t,e,i){"use strict";var n=t.exports={};function r(t,e,i){var n=t[e];return void 0!==n&&null!==n||void 0===i?n:i}n.getOption=r},"5be5":function(t,e,i){"use strict";t.exports=function(t){var e=t.stateHandler.getState;function i(t){var i=e(t);return i&&!!i.isDetectable}function n(t){e(t).isDetectable=!0}function r(t){return!!e(t).busy}function o(t,i){e(t).busy=!!i}return{isDetectable:i,markAsDetectable:n,isBusy:r,markBusy:o}}},abb4:function(t,e,i){"use strict";t.exports=function(t){function e(){}var i={log:e,warn:e,error:e};if(!t&&window.console){var n=function(t,e){t[e]=function(){var t=console[e];if(t.apply)t.apply(console,arguments);else for(var i=0;i<arguments.length;i++)t(arguments[i])}};n(i,"log"),n(i,"warn"),n(i,"error")}return i}},b770:function(t,e,i){"use strict";var n=t.exports={};n.forEach=function(t,e){for(var i=0;i<t.length;i++){var n=e(t[i]);if(n)return n}}},c274:function(t,e,i){"use strict";var n=i("50bf");function r(){var t={},e=0,i=0,n=0;function r(r,o){o||(o=r,r=0),r>i?i=r:r<n&&(n=r),t[r]||(t[r]=[]),t[r].push(o),e++}function o(){for(var e=n;e<=i;e++)for(var r=t[e],o=0;o<r.length;o++){var s=r[o];s()}}function s(){return e}return{add:r,process:o,size:s}}t.exports=function(t){t=t||{};var e=t.reporter,i=n.getOption(t,"async",!0),o=n.getOption(t,"auto",!0);o&&!i&&(e&&e.warn("Invalid options combination. auto=true and async=false is invalid. Setting async=true."),i=!0);var s,a=r(),c=!1;function l(t,e){!c&&o&&i&&0===a.size()&&f(),a.add(t,e)}function h(){c=!0;while(a.size()){var t=a;a=r(),t.process()}c=!1}function u(t){c||(void 0===t&&(t=i),s&&(d(s),s=null),t?f():h())}function f(){s=p(h)}function d(t){var e=clearTimeout;return e(t)}function p(t){var e=function(t){return setTimeout(t,0)};return e(t)}return{add:l,force:u}}},c946:function(t,e,i){"use strict";var n=i("b770").forEach;t.exports=function(t){t=t||{};var e=t.reporter,i=t.batchProcessor,r=t.stateHandler.getState,o=(t.stateHandler.hasState,t.idHandler);if(!i)throw new Error("Missing required dependency: batchProcessor");if(!e)throw new Error("Missing required dependency: reporter.");var s=u(),a="erd_scroll_detection_scrollbar_style",c="erd_scroll_detection_container";function l(t){f(t,a,c)}function h(e){var i=t.important?" !important; ":"; ";return(e.join(i)+i).trim()}function u(){var t=500,e=500,i=document.createElement("div");i.style.cssText=h(["position: absolute","width: "+2*t+"px","height: "+2*e+"px","visibility: hidden","margin: 0","padding: 0"]);var n=document.createElement("div");n.style.cssText=h(["position: absolute","width: "+t+"px","height: "+e+"px","overflow: scroll","visibility: none","top: "+3*-t+"px","left: "+3*-e+"px","visibility: hidden","margin: 0","padding: 0"]),n.appendChild(i),document.body.insertBefore(n,document.body.firstChild);var r=t-n.clientWidth,o=e-n.clientHeight;return document.body.removeChild(n),{width:r,height:o}}function f(t,e,i){function n(i,n){n=n||function(e){t.head.appendChild(e)};var r=t.createElement("style");return r.innerHTML=i,r.id=e,n(r),r}if(!t.getElementById(e)){var r=i+"_animation",o=i+"_animation_active",s="/* Created by the element-resize-detector library. */\n";s+="."+i+" > div::-webkit-scrollbar { "+h(["display: none"])+" }\n\n",s+="."+o+" { "+h(["-webkit-animation-duration: 0.1s","animation-duration: 0.1s","-webkit-animation-name: "+r,"animation-name: "+r])+" }\n",s+="@-webkit-keyframes "+r+" { 0% { opacity: 1; } 50% { opacity: 0; } 100% { opacity: 1; } }\n",s+="@keyframes "+r+" { 0% { opacity: 1; } 50% { opacity: 0; } 100% { opacity: 1; } }",n(s)}}function d(t){t.className+=" "+c+"_animation_active"}function p(t,i,n){if(t.addEventListener)t.addEventListener(i,n);else{if(!t.attachEvent)return e.error("[scroll] Don't know how to add event listeners.");t.attachEvent("on"+i,n)}}function g(t,i,n){if(t.removeEventListener)t.removeEventListener(i,n);else{if(!t.detachEvent)return e.error("[scroll] Don't know how to remove event listeners.");t.detachEvent("on"+i,n)}}function v(t){return r(t).container.childNodes[0].childNodes[0].childNodes[0]}function m(t){return r(t).container.childNodes[0].childNodes[0].childNodes[1]}function y(t,e){var i=r(t).listeners;if(!i.push)throw new Error("Cannot add listener to an element that is not detectable.");r(t).listeners.push(e)}function b(t,a,l){function u(){if(t.debug){var i=Array.prototype.slice.call(arguments);if(i.unshift(o.get(a),"Scroll: "),e.log.apply)e.log.apply(null,i);else for(var n=0;n<i.length;n++)e.log(i[n])}}function f(t){function e(t){return t===t.ownerDocument.body||t.ownerDocument.body.contains(t)}return!e(t)||null===window.getComputedStyle(t)}function g(t){var e=r(t).container.childNodes[0],i=window.getComputedStyle(e);return!i.width||-1===i.width.indexOf("px")}function y(){var t=window.getComputedStyle(a),e={};return e.position=t.position,e.width=a.offsetWidth,e.height=a.offsetHeight,e.top=t.top,e.right=t.right,e.bottom=t.bottom,e.left=t.left,e.widthCSS=t.width,e.heightCSS=t.height,e}function b(){var t=y();r(a).startSize={width:t.width,height:t.height},u("Element start size",r(a).startSize)}function w(){r(a).listeners=[]}function x(){if(u("storeStyle invoked."),r(a)){var t=y();r(a).style=t}else u("Aborting because element has been uninstalled")}function _(t,e,i){r(t).lastWidth=e,r(t).lastHeight=i}function S(t){return v(t).childNodes[0]}function C(){return 2*s.width+1}function T(){return 2*s.height+1}function O(t){return t+10+C()}function k(t){return t+10+T()}function E(t){return 2*t+C()}function A(t){return 2*t+T()}function P(t,e,i){var n=v(t),r=m(t),o=O(e),s=k(i),a=E(e),c=A(i);n.scrollLeft=o,n.scrollTop=s,r.scrollLeft=a,r.scrollTop=c}function D(){var t=r(a).container;if(!t){t=document.createElement("div"),t.className=c,t.style.cssText=h(["visibility: hidden","display: inline","width: 0px","height: 0px","z-index: -1","overflow: hidden","margin: 0","padding: 0"]),r(a).container=t,d(t),a.appendChild(t);var e=function(){r(a).onRendered&&r(a).onRendered()};p(t,"animationstart",e),r(a).onAnimationStart=e}return t}function M(){function i(){var i=r(a).style;if("static"===i.position){a.style.setProperty("position","relative",t.important?"important":"");var n=function(t,e,i,n){function r(t){return t.replace(/[^-\d\.]/g,"")}var o=i[n];"auto"!==o&&"0"!==r(o)&&(t.warn("An element that is positioned static has style."+n+"="+o+" which is ignored due to the static positioning. The element will need to be positioned relative, so the style."+n+" will be set to 0. Element: ",e),e.style[n]=0)};n(e,a,i,"top"),n(e,a,i,"right"),n(e,a,i,"bottom"),n(e,a,i,"left")}}function n(t,e,i,n){return t=t?t+"px":"0",e=e?e+"px":"0",i=i?i+"px":"0",n=n?n+"px":"0",["left: "+t,"top: "+e,"right: "+n,"bottom: "+i]}if(u("Injecting elements"),r(a)){i();var o=r(a).container;o||(o=D());var l=s.width,f=s.height,d=h(["position: absolute","flex: none","overflow: hidden","z-index: -1","visibility: hidden","width: 100%","height: 100%","left: 0px","top: 0px"]),g=h(["position: absolute","flex: none","overflow: hidden","z-index: -1","visibility: hidden"].concat(n(-(1+l),-(1+f),-f,-l))),v=h(["position: absolute","flex: none","overflow: scroll","z-index: -1","visibility: hidden","width: 100%","height: 100%"]),m=h(["position: absolute","flex: none","overflow: scroll","z-index: -1","visibility: hidden","width: 100%","height: 100%"]),y=h(["position: absolute","left: 0","top: 0"]),b=h(["position: absolute","width: 200%","height: 200%"]),w=document.createElement("div"),x=document.createElement("div"),_=document.createElement("div"),S=document.createElement("div"),C=document.createElement("div"),T=document.createElement("div");w.dir="ltr",w.style.cssText=d,w.className=c,x.className=c,x.style.cssText=g,_.style.cssText=v,S.style.cssText=y,C.style.cssText=m,T.style.cssText=b,_.appendChild(S),C.appendChild(T),x.appendChild(_),x.appendChild(C),w.appendChild(x),o.appendChild(w),p(_,"scroll",O),p(C,"scroll",k),r(a).onExpandScroll=O,r(a).onShrinkScroll=k}else u("Aborting because element has been uninstalled");function O(){r(a).onExpand&&r(a).onExpand()}function k(){r(a).onShrink&&r(a).onShrink()}}function j(){function s(e,i,n){var r=S(e),o=O(i),s=k(n);r.style.setProperty("width",o+"px",t.important?"important":""),r.style.setProperty("height",s+"px",t.important?"important":"")}function c(n){var c=a.offsetWidth,h=a.offsetHeight,f=c!==r(a).lastWidth||h!==r(a).lastHeight;u("Storing current size",c,h),_(a,c,h),i.add(0,(function(){if(f)if(r(a))if(l()){if(t.debug){var i=a.offsetWidth,n=a.offsetHeight;i===c&&n===h||e.warn(o.get(a),"Scroll: Size changed before updating detector elements.")}s(a,c,h)}else u("Aborting because element container has not been initialized");else u("Aborting because element has been uninstalled")})),i.add(1,(function(){r(a)?l()?P(a,c,h):u("Aborting because element container has not been initialized"):u("Aborting because element has been uninstalled")})),f&&n&&i.add(2,(function(){r(a)?l()?n():u("Aborting because element container has not been initialized"):u("Aborting because element has been uninstalled")}))}function l(){return!!r(a).container}function h(){function t(){return void 0===r(a).lastNotifiedWidth}u("notifyListenersIfNeeded invoked");var e=r(a);return t()&&e.lastWidth===e.startSize.width&&e.lastHeight===e.startSize.height?u("Not notifying: Size is the same as the start size, and there has been no notification yet."):e.lastWidth===e.lastNotifiedWidth&&e.lastHeight===e.lastNotifiedHeight?u("Not notifying: Size already notified"):(u("Current size not notified, notifying..."),e.lastNotifiedWidth=e.lastWidth,e.lastNotifiedHeight=e.lastHeight,void n(r(a).listeners,(function(t){t(a)})))}function f(){if(u("startanimation triggered."),g(a))u("Ignoring since element is still unrendered...");else{u("Element rendered.");var t=v(a),e=m(a);0!==t.scrollLeft&&0!==t.scrollTop&&0!==e.scrollLeft&&0!==e.scrollTop||(u("Scrollbars out of sync. Updating detector elements..."),c(h))}}function d(){u("Scroll detected."),g(a)?u("Scroll event fired while unrendered. Ignoring..."):c(h)}if(u("registerListenersAndPositionElements invoked."),r(a)){r(a).onRendered=f,r(a).onExpand=d,r(a).onShrink=d;var p=r(a).style;s(a,p.width,p.height)}else u("Aborting because element has been uninstalled")}function R(){if(u("finalizeDomMutation invoked."),r(a)){var t=r(a).style;_(a,t.width,t.height),P(a,t.width,t.height)}else u("Aborting because element has been uninstalled")}function I(){l(a)}function z(){u("Installing..."),w(),b(),i.add(0,x),i.add(1,M),i.add(2,j),i.add(3,R),i.add(4,I)}l||(l=a,a=t,t=null),t=t||{},u("Making detectable..."),f(a)?(u("Element is detached"),D(),u("Waiting until element is attached..."),r(a).onRendered=function(){u("Element is now attached"),z()}):z()}function w(t){var e=r(t);e&&(e.onExpandScroll&&g(v(t),"scroll",e.onExpandScroll),e.onShrinkScroll&&g(m(t),"scroll",e.onShrinkScroll),e.onAnimationStart&&g(e.container,"animationstart",e.onAnimationStart),e.container&&t.removeChild(e.container))}return l(window.document),{makeDetectable:b,addListener:y,uninstall:w,initDocument:l}}},d6eb:function(t,e,i){"use strict";var n="_erd";function r(t){return t[n]={},o(t)}function o(t){return t[n]}function s(t){delete t[n]}t.exports={initState:r,getState:o,cleanState:s}},eec4:function(t,e,i){"use strict";var n=i("b770").forEach,r=i("5be5"),o=i("49ad"),s=i("2cef"),a=i("5058"),c=i("abb4"),l=i("18e9"),h=i("c274"),u=i("d6eb"),f=i("18d2"),d=i("c946");function p(t){return Array.isArray(t)||void 0!==t.length}function g(t){if(Array.isArray(t))return t;var e=[];return n(t,(function(t){e.push(t)})),e}function v(t){return t&&1===t.nodeType}function m(t,e,i){var n=t[e];return void 0!==n&&null!==n||void 0===i?n:i}t.exports=function(t){var e;if(t=t||{},t.idHandler)e={get:function(e){return t.idHandler.get(e,!0)},set:t.idHandler.set};else{var i=s(),y=a({idGenerator:i,stateHandler:u});e=y}var b=t.reporter;if(!b){var w=!1===b;b=c(w)}var x=m(t,"batchProcessor",h({reporter:b})),_={};_.callOnAdd=!!m(t,"callOnAdd",!0),_.debug=!!m(t,"debug",!1);var S,C=o(e),T=r({stateHandler:u}),O=m(t,"strategy","object"),k=m(t,"important",!1),E={reporter:b,batchProcessor:x,stateHandler:u,idHandler:e,important:k};if("scroll"===O&&(l.isLegacyOpera()?(b.warn("Scroll strategy is not supported on legacy Opera. Changing to object strategy."),O="object"):l.isIE(9)&&(b.warn("Scroll strategy is not supported on IE9. Changing to object strategy."),O="object")),"scroll"===O)S=d(E);else{if("object"!==O)throw new Error("Invalid strategy name: "+O);S=f(E)}var A={};function P(t,i,r){function o(t){var e=C.get(t);n(e,(function(e){e(t)}))}function s(t,e,i){C.add(e,i),t&&i(e)}if(r||(r=i,i=t,t={}),!i)throw new Error("At least one element required.");if(!r)throw new Error("Listener required.");if(v(i))i=[i];else{if(!p(i))return b.error("Invalid arguments. Must be a DOM element or a collection of DOM elements.");i=g(i)}var a=0,c=m(t,"callOnAdd",_.callOnAdd),l=m(t,"onReady",(function(){})),h=m(t,"debug",_.debug);n(i,(function(t){u.getState(t)||(u.initState(t),e.set(t));var f=e.get(t);if(h&&b.log("Attaching listener to element",f,t),!T.isDetectable(t))return h&&b.log(f,"Not detectable."),T.isBusy(t)?(h&&b.log(f,"System busy making it detectable"),s(c,t,r),A[f]=A[f]||[],void A[f].push((function(){a++,a===i.length&&l()}))):(h&&b.log(f,"Making detectable..."),T.markBusy(t,!0),S.makeDetectable({debug:h,important:k},t,(function(t){if(h&&b.log(f,"onElementDetectable"),u.getState(t)){T.markAsDetectable(t),T.markBusy(t,!1),S.addListener(t,o),s(c,t,r);var e=u.getState(t);if(e&&e.startSize){var d=t.offsetWidth,p=t.offsetHeight;e.startSize.width===d&&e.startSize.height===p||o(t)}A[f]&&n(A[f],(function(t){t()}))}else h&&b.log(f,"Element uninstalled before being detectable.");delete A[f],a++,a===i.length&&l()})));h&&b.log(f,"Already detecable, adding listener."),s(c,t,r),a++})),a===i.length&&l()}function D(t){if(!t)return b.error("At least one element is required.");if(v(t))t=[t];else{if(!p(t))return b.error("Invalid arguments. Must be a DOM element or a collection of DOM elements.");t=g(t)}n(t,(function(t){C.removeAllListeners(t),S.uninstall(t),u.cleanState(t)}))}function M(t){S.initDocument&&S.initDocument(t)}return{listenTo:P,removeListener:C.removeListener,removeAllListeners:C.removeAllListeners,uninstall:D,initDocument:M}}},f6fd:function(t,e){(function(t){var e="currentScript",i=t.getElementsByTagName("script");e in t||Object.defineProperty(t,e,{get:function(){try{throw new Error}catch(n){var t,e=(/.*at [^\(]*\((.*):.+:.+\)$/gi.exec(n.stack)||[!1])[1];for(t in i)if(i[t].src==e||"interactive"==i[t].readyState)return i[t];return null}}})})(document)},fb15:function(t,e,i){"use strict";var n;(i.r(e),i.d(e,"resize",(function(){return c})),"undefined"!==typeof window)&&(i("f6fd"),(n=window.document.currentScript)&&(n=n.src.match(/(.+\/)[^/]+\.js(\?.*)?$/))&&(i.p=n[1]));var r=i("eec4"),o=r({strategy:"scroll"});function s(t,e,i){var n={};e.value&&(n=e.value),o.listenTo(n,t,(function(t){var e=t.offsetWidth,n=t.offsetHeight;i.componentInstance?i.componentInstance.$emit("resize",{detail:{width:e,height:n}}):i.elm.dispatchEvent(new CustomEvent("resize",{detail:{width:e,height:n}}))}))}function a(t){o.uninstall(t)}var c={bind:s,unbind:a},l={install:function(t){t.directive("resize",c)}};e["default"]=l}})},"06cf":function(t,e,i){var n=i("83ab"),r=i("d1e7"),o=i("5c6c"),s=i("fc6a"),a=i("c04e"),c=i("5135"),l=i("0cfb"),h=Object.getOwnPropertyDescriptor;e.f=n?h:function(t,e){if(t=s(t),e=a(e,!0),l)try{return h(t,e)}catch(i){}if(c(t,e))return o(!r.f.call(t,e),t[e])}},"0cb2":function(t,e,i){var n=i("7b0b"),r=Math.floor,o="".replace,s=/\$([$&'`]|\d{1,2}|<[^>]*>)/g,a=/\$([$&'`]|\d{1,2})/g;t.exports=function(t,e,i,c,l,h){var u=i+t.length,f=c.length,d=a;return void 0!==l&&(l=n(l),d=s),o.call(h,d,(function(n,o){var s;switch(o.charAt(0)){case"$":return"$";case"&":return t;case"`":return e.slice(0,i);case"'":return e.slice(u);case"<":s=l[o.slice(1,-1)];break;default:var a=+o;if(0===a)return n;if(a>f){var h=r(a/10);return 0===h?n:h<=f?void 0===c[h-1]?o.charAt(1):c[h-1]+o.charAt(1):n}s=c[a-1]}return void 0===s?"":s}))}},"0cfb":function(t,e,i){var n=i("83ab"),r=i("d039"),o=i("cc12");t.exports=!n&&!r((function(){return 7!=Object.defineProperty(o("div"),"a",{get:function(){return 7}}).a}))},1:function(t,e){},1148:function(t,e,i){"use strict";var n=i("a691"),r=i("1d80");t.exports=function(t){var e=String(r(this)),i="",o=n(t);if(o<0||o==1/0)throw RangeError("Wrong number of repetitions");for(;o>0;(o>>>=1)&&(e+=e))1&o&&(i+=e);return i}},1276:function(t,e,i){"use strict";var n=i("d784"),r=i("44e7"),o=i("825a"),s=i("1d80"),a=i("4840"),c=i("8aa5"),l=i("50c4"),h=i("14c3"),u=i("9263"),f=i("d039"),d=[].push,p=Math.min,g=4294967295,v=!f((function(){return!RegExp(g,"y")}));n("split",2,(function(t,e,i){var n;return n="c"=="abbc".split(/(b)*/)[1]||4!="test".split(/(?:)/,-1).length||2!="ab".split(/(?:ab)*/).length||4!=".".split(/(.?)(.?)/).length||".".split(/()()/).length>1||"".split(/.?/).length?function(t,i){var n=String(s(this)),o=void 0===i?g:i>>>0;if(0===o)return[];if(void 0===t)return[n];if(!r(t))return e.call(n,t,o);var a,c,l,h=[],f=(t.ignoreCase?"i":"")+(t.multiline?"m":"")+(t.unicode?"u":"")+(t.sticky?"y":""),p=0,v=new RegExp(t.source,f+"g");while(a=u.call(v,n)){if(c=v.lastIndex,c>p&&(h.push(n.slice(p,a.index)),a.length>1&&a.index<n.length&&d.apply(h,a.slice(1)),l=a[0].length,p=c,h.length>=o))break;v.lastIndex===a.index&&v.lastIndex++}return p===n.length?!l&&v.test("")||h.push(""):h.push(n.slice(p)),h.length>o?h.slice(0,o):h}:"0".split(void 0,0).length?function(t,i){return void 0===t&&0===i?[]:e.call(this,t,i)}:e,[function(e,i){var r=s(this),o=void 0==e?void 0:e[t];return void 0!==o?o.call(e,r,i):n.call(String(r),e,i)},function(t,r){var s=i(n,t,this,r,n!==e);if(s.done)return s.value;var u=o(t),f=String(this),d=a(u,RegExp),m=u.unicode,y=(u.ignoreCase?"i":"")+(u.multiline?"m":"")+(u.unicode?"u":"")+(v?"y":"g"),b=new d(v?u:"^(?:"+u.source+")",y),w=void 0===r?g:r>>>0;if(0===w)return[];if(0===f.length)return null===h(b,f)?[f]:[];var x=0,_=0,S=[];while(_<f.length){b.lastIndex=v?_:0;var C,T=h(b,v?f:f.slice(_));if(null===T||(C=p(l(b.lastIndex+(v?0:_)),f.length))===x)_=c(f,_,m);else{if(S.push(f.slice(x,_)),S.length===w)return S;for(var O=1;O<=T.length-1;O++)if(S.push(T[O]),S.length===w)return S;_=x=C}}return S.push(f.slice(x)),S}]}),!v)},"14c3":function(t,e,i){var n=i("c6b6"),r=i("9263");t.exports=function(t,e){var i=t.exec;if("function"===typeof i){var o=i.call(t,e);if("object"!==typeof o)throw TypeError("RegExp exec method returned something other than an Object or null");return o}if("RegExp"!==n(t))throw TypeError("RegExp#exec called on incompatible receiver");return r.call(t,e)}},"159b":function(t,e,i){var n=i("da84"),r=i("fdbc"),o=i("17c2"),s=i("9112");for(var a in r){var c=n[a],l=c&&c.prototype;if(l&&l.forEach!==o)try{s(l,"forEach",o)}catch(h){l.forEach=o}}},"17c2":function(t,e,i){"use strict";var n=i("b727").forEach,r=i("a640"),o=r("forEach");t.exports=o?[].forEach:function(t){return n(this,t,arguments.length>1?arguments[1]:void 0)}},"19aa":function(t,e){t.exports=function(t,e,i){if(!(t instanceof e))throw TypeError("Incorrect "+(i?i+" ":"")+"invocation");return t}},"1be4":function(t,e,i){var n=i("d066");t.exports=n("document","documentElement")},"1c0b":function(t,e){t.exports=function(t){if("function"!=typeof t)throw TypeError(String(t)+" is not a function");return t}},"1c7e":function(t,e,i){var n=i("b622"),r=n("iterator"),o=!1;try{var s=0,a={next:function(){return{done:!!s++}},return:function(){o=!0}};a[r]=function(){return this},Array.from(a,(function(){throw 2}))}catch(c){}t.exports=function(t,e){if(!e&&!o)return!1;var i=!1;try{var n={};n[r]=function(){return{next:function(){return{done:i=!0}}}},t(n)}catch(c){}return i}},"1cdc":function(t,e,i){var n=i("342f");t.exports=/(iphone|ipod|ipad).*applewebkit/i.test(n)},"1d80":function(t,e){t.exports=function(t){if(void 0==t)throw TypeError("Can't call method on "+t);return t}},"1dde":function(t,e,i){var n=i("d039"),r=i("b622"),o=i("2d00"),s=r("species");t.exports=function(t){return o>=51||!n((function(){var e=[],i=e.constructor={};return i[s]=function(){return{foo:1}},1!==e[t](Boolean).foo}))}},"1fb5":function(t,e,i){"use strict";e.byteLength=h,e.toByteArray=f,e.fromByteArray=g;for(var n=[],r=[],o="undefined"!==typeof Uint8Array?Uint8Array:Array,s="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",a=0,c=s.length;a<c;++a)n[a]=s[a],r[s.charCodeAt(a)]=a;function l(t){var e=t.length;if(e%4>0)throw new Error("Invalid string. Length must be a multiple of 4");var i=t.indexOf("=");-1===i&&(i=e);var n=i===e?0:4-i%4;return[i,n]}function h(t){var e=l(t),i=e[0],n=e[1];return 3*(i+n)/4-n}function u(t,e,i){return 3*(e+i)/4-i}function f(t){var e,i,n=l(t),s=n[0],a=n[1],c=new o(u(t,s,a)),h=0,f=a>0?s-4:s;for(i=0;i<f;i+=4)e=r[t.charCodeAt(i)]<<18|r[t.charCodeAt(i+1)]<<12|r[t.charCodeAt(i+2)]<<6|r[t.charCodeAt(i+3)],c[h++]=e>>16&255,c[h++]=e>>8&255,c[h++]=255&e;return 2===a&&(e=r[t.charCodeAt(i)]<<2|r[t.charCodeAt(i+1)]>>4,c[h++]=255&e),1===a&&(e=r[t.charCodeAt(i)]<<10|r[t.charCodeAt(i+1)]<<4|r[t.charCodeAt(i+2)]>>2,c[h++]=e>>8&255,c[h++]=255&e),c}function d(t){return n[t>>18&63]+n[t>>12&63]+n[t>>6&63]+n[63&t]}function p(t,e,i){for(var n,r=[],o=e;o<i;o+=3)n=(t[o]<<16&16711680)+(t[o+1]<<8&65280)+(255&t[o+2]),r.push(d(n));return r.join("")}function g(t){for(var e,i=t.length,r=i%3,o=[],s=16383,a=0,c=i-r;a<c;a+=s)o.push(p(t,a,a+s>c?c:a+s));return 1===r?(e=t[i-1],o.push(n[e>>2]+n[e<<4&63]+"==")):2===r&&(e=(t[i-2]<<8)+t[i-1],o.push(n[e>>10]+n[e>>4&63]+n[e<<2&63]+"=")),o.join("")}r["-".charCodeAt(0)]=62,r["_".charCodeAt(0)]=63},2:function(t,e){},2266:function(t,e,i){var n=i("825a"),r=i("e95a"),o=i("50c4"),s=i("0366"),a=i("35a1"),c=i("2a62"),l=function(t,e){this.stopped=t,this.result=e};t.exports=function(t,e,i){var h,u,f,d,p,g,v,m=i&&i.that,y=!(!i||!i.AS_ENTRIES),b=!(!i||!i.IS_ITERATOR),w=!(!i||!i.INTERRUPTED),x=s(e,m,1+y+w),_=function(t){return h&&c(h),new l(!0,t)},S=function(t){return y?(n(t),w?x(t[0],t[1],_):x(t[0],t[1])):w?x(t,_):x(t)};if(b)h=t;else{if(u=a(t),"function"!=typeof u)throw TypeError("Target is not iterable");if(r(u)){for(f=0,d=o(t.length);d>f;f++)if(p=S(t[f]),p&&p instanceof l)return p;return new l(!1)}h=u.call(t)}g=h.next;while(!(v=g.call(h)).done){try{p=S(v.value)}catch(C){throw c(h),C}if("object"==typeof p&&p&&p instanceof l)return p}return new l(!1)}},2374:function(t,e,i){!function(t,i){i(e)}(0,(function(t){"use strict";var e=function(t,i){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i])})(t,i)};function n(t,i){function n(){this.constructor=t}e(t,i),t.prototype=null===i?Object.create(i):(n.prototype=i.prototype,new n)}
/*!
     * Copyright (c) 2017 Vladimir Agafonkin (rewrite by Jun Kato in TypeScript for PSBrush implementation)
     *
     * Simplify.js, a high-performance JS polyline simplification library
     * https://mourner.github.io/simplify-js/
     * @license BSD-2-Clause
     */var r=function(){function t(){this._tolerance=1,this.sqTolerance=1}return Object.defineProperty(t.prototype,"tolerance",{get:function(){return this._tolerance},set:function(t){"number"!=typeof t&&(t=1),this._tolerance=t,this.sqTolerance=t*t},enumerable:!1,configurable:!0}),t.prototype.getSquareDistance=function(t,e){var i=t.x-e.x,n=t.y-e.y;return i*i+n*n},t.prototype.getSquareSegmentDistance=function(t,e,i){var n=e.x,r=e.y,o=i.x-n,s=i.y-r;if(0!==o||0!==s){var a=((t.x-n)*o+(t.y-r)*s)/(o*o+s*s);a>1?(n=i.x,r=i.y):a>0&&(n+=o*a,r+=s*a)}return(o=t.x-n)*o+(s=t.y-r)*s},t.prototype.simplifyRadialDistance=function(t){for(var e,i=t[0],n=[i],r=1,o=t.length;r<o;r++)e=t[r],this.getSquareDistance(e,i)>this.sqTolerance&&(n.push(e),i=e);return i!==e&&n.push(e),n},t.prototype.simplifyDouglasPeucker=function(t){var e,i,n,r,o=t.length,s=new("undefined"!=typeof Uint8Array?Uint8Array:Array)(o),a=0,c=o-1,l=[],h=[];for(s[a]=s[c]=1;c;){for(i=0,e=a+1;e<c;e++)(n=this.getSquareSegmentDistance(t[e],t[a],t[c]))>i&&(r=e,i=n);i>this.sqTolerance&&(s[r]=1,l.push(a,r,r,c)),c=l.pop(),a=l.pop()}for(e=0;e<o;e++)s[e]&&h.push(t[e]);return h},t.prototype.do=function(t,e){return t=e?t:this.simplifyRadialDistance(t),this.simplifyDouglasPeucker(t)},t}(),o=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.pressureCoeff=100,e}return n(e,t),e.prototype.getSquareDistance=function(t,e){var i=t.x-e.x,n=t.y-e.y,r=t.pressure-e.pressure;return i*i+n*n+r*r*this.pressureCoeff},e.prototype.getSquareSegmentDistance=function(t,e,i){var n=e.x,r=e.y,o=e.pressure,s=i.x-n,a=i.y-r,c=i.pressure-o;if(0!==s||0!==a||0!==c){var l=((t.x-n)*s+(t.y-r)*a+(t.pressure-o)*c*this.pressureCoeff)/(s*s+a*a+c*c*this.pressureCoeff);l>1?(n=i.x,r=i.y,o=i.pressure):l>0&&(n+=s*l,r+=a*l,o+=c*l)}return(s=t.x-n)*s+(a=t.y-r)*a+(c=t.pressure-o)*c*this.pressureCoeff},e}(r);function s(t){return t.touches&&t.touches.length>0?t.touches[0].force:"mouse"===t.pointerType||"number"!=typeof t.pressure?.5:t.pressure}var a="undefined"==typeof fabric?i("7a94").fabric:fabric,c=function(t){function e(e,i,n){var r=t.call(this,e,i)||this;return r.type="PSPoint",r.pressure=n,r}return n(e,t),e.prototype.midPointFrom=function(i){var n=t.prototype.midPointFrom.call(this,i);return new e(n.x,n.y,(this.pressure+i.pressure)/2)},e.prototype.clone=function(){return new e(this.x,this.y,this.pressure)},e}(a.Point);c.fromObject=function(t,e){e&&e(new c(t.x,t.y,t.pressure))},a.PSPoint=c;var l="undefined"==typeof fabric?i("7a94").fabric:fabric,h=l.util.array.min,u=l.util.array.max,f=l.util.object.extend,d=l.util.createClass(l.Object,{type:"PSStroke",strokePoints:null,startTime:null,endTime:null,cacheProperties:l.Object.prototype.cacheProperties.concat("strokePoints","startTime","endTime","fillRule"),stateProperties:l.Object.prototype.stateProperties.concat("strokePoints","startTime","endTime"),initialize:function(t,e){e=e||{},this.callSuper("initialize",e),this.startTime=e.startTime,this.endTime=e.endTime,this.strokePoints=(t||[]).concat(),this._setPositionDimensions(e)},_setPositionDimensions:function(t){var e=this._parseDimensions();this.width=e.width,this.height=e.height,void 0===t.left&&void 0===t.top&&(this.left=e.left,this.top=e.top),this.strokeOffset=this.strokeOffset||{x:e.left+this.width/2,y:e.top+this.height/2}},_renderStroke:function(t){var e,i=this.strokeWidth/1e3,n=this.strokePoints[0],r=this.strokePoints[1],o=n,s=this.strokePoints.length,a=1,l=1,h=s>2,u=-this.strokeOffset.x,f=-this.strokeOffset.y;for(h&&(a=this.strokePoints[2].x<r.x?-1:this.strokePoints[2].x===r.x?0:1,l=this.strokePoints[2].y<r.y?-1:this.strokePoints[2].y===r.y?0:1),2===this.strokePoints.length&&n.x===r.x&&n.y===r.y&&(n=new c(n.x,n.y,n.pressure),r=new c(r.x,r.y,r.pressure),n.x-=i,r.x+=i,o.x=n.x),t.strokeStyle=this.stroke,t.lineCap=this.strokeLineCap,t.lineJoin=this.strokeLineJoin,e=1,s=this.strokePoints.length;e<s;e++)t.beginPath(),t.moveTo(o.x-a*i+u,o.y-l*i+f),t.lineWidth=n.pressure*this.strokeWidth,o=n.midPointFrom(r),t.quadraticCurveTo(n.x-a*i+u,n.y-l*i+f,o.x-a*i+u,o.y-l*i+f),n=this.strokePoints[e],r=this.strokePoints[e+1],t.stroke()},_render:function(t){this._renderStroke(t),this._renderPaintInOrder(t)},toString:function(){return"#<Stroke ("+this.complexity()+'): { "top": '+this.top+', "left": '+this.left+" }>"},toObject:function(t){return f(this.callSuper("toObject",t),{strokePoints:this.strokePoints.map((function(t){return t.clone()})),startTime:this.startTime,endTime:this.endTime,top:this.top,left:this.left})},_toSVG:function(){for(var t=['<g transform="translate(',String(-this.strokeOffset.x),",",String(-this.strokeOffset.y),')" ',"COMMON_PARTS",">\n"],e=null,i=0;i<this.strokePoints.length;i++){var n=this.strokePoints[i];if(e){var r=e.x,o=e.y,s=n.x,a=n.y;t.push("<line ",'x1="',String(r),'" y1="',String(o),'" x2="',String(s),'" y2="',String(a),'" ','stroke-width="',String(e.pressure*this.strokeWidth),'" ','stroke-linecap="round" />\n')}e=n}return t.push("</g>\n"),t},toClipPathSVG:function(t){return"\t"+this._createBaseClipPathSVGMarkup(this._toSVG(),{reviver:t})},toSVG:function(t){return this._createBaseSVGMarkup(this._toSVG(),{reviver:t})},complexity:function(){return this.strokePoints.length},_parseDimensions:function(){function t(){this.bounds=[],this.aX=[],this.aY=[],this.x=0,this.y=0}t.prototype._done=function(){var t=this;this.bounds.forEach((function(e){t.aX.push(e.x),t.aY.push(e.y)})),this.aX.push(this.x),this.aY.push(this.y)},t.prototype.moveTo=function(t,e){this.x=t,this.y=e,this.bounds=[],this._done()},t.prototype.quadraticCurveTo=function(t,e,i,n){this.bounds=l.util.getBoundsOfCurve(this.x,this.y,t,e,t,e,i,n),this.x=i,this.y=n,this._done()},t.prototype.calcBounds=function(){var t=h(this.aX)||0,e=h(this.aY)||0;return{left:t,top:e,width:(u(this.aX)||0)-t,height:(u(this.aY)||0)-e}};var e,i,n=new t,r=this.strokePoints[0],o=this.strokePoints[1],s=r;if(2===this.strokePoints.length&&r.x===o.x&&r.y===o.y){var a=this.strokeWidth/1e3;r=new c(r.x,r.y,r.pressure),o=new c(o.x,o.y,o.pressure),r.x-=a,o.x+=a,s.x=r.x}for(e=1,i=this.strokePoints.length;e<i;e++)n.moveTo(s.x,s.y),n.lineWidth=r.pressure*this.strokeWidth,s=r.midPointFrom(o),n.quadraticCurveTo(r.x,r.y,s.x,s.y),r=this.strokePoints[e],o=this.strokePoints[e+1];return n.calcBounds()}});d.fromObject=function(t,e){l.util.enlivenPatterns([t.fill,t.stroke],(function(i){void 0!==i[0]&&(t.fill=i[0]),void 0!==i[1]&&(t.stroke=i[1]),l.util.enlivenObjects([t.clipPath],(function(i){t.clipPath=i[0],l.util.enlivenObjects(t.strokePoints,(function(i){var n=new d(i,t);e&&e(n)}),null,null)}),null,null)}))},l.PSStroke=d;
/*!
     * Copyright (c) 2020 Arch Inc. (Jun Kato, Kenta Hara)
     *
     * fabricjs-psbrush, a lightweight pressure-sensitive brush implementation for Fabric.js
     * @license MIT
     */
var p="undefined"==typeof fabric?i("7a94").fabric:fabric,g=1e-4,v=.07999999821186066,m=p.util.createClass(p.BaseBrush,{simplify:null,pressureCoeff:100,simplifyTolerance:0,simplifyHighestQuality:!1,pressureIgnoranceOnStart:-1,opacity:1,currentStartTime:null,initialize:function(t){this.simplify=new o,this.canvas=t,this._points=[]},_drawSegment:function(t,e,i){var n=e.midPointFrom(i);return t.lineWidth=e.pressure*this.width,t.quadraticCurveTo(e.x,e.y,n.x,n.y),n},onMouseDown:function(t,e){var i=e?e.pointer:t,n=e?e.e:t.e||null;this._prepareForDrawing(i,n),this._captureDrawingPath(i,n),this._render()},onMouseMove:function(t,e){var i=e?e.pointer:t,n=e?e.e:t.e||null;if(this._captureDrawingPath(i,n)&&this._points.length>1)if(this.needsFullRender)this.canvas.clearContext(this.canvas.contextTop),this._render();else{var r=this._points,o=r.length,s=this.canvas.contextTop;this._saveAndTransform(s),this.oldEnd&&(s.beginPath(),s.moveTo(this.oldEnd.x,this.oldEnd.y)),this.oldEnd=this._drawSegment(s,r[o-2],r[o-1],!0),s.stroke(),s.restore()}},onMouseUp:function(t){this.oldEnd=void 0,this._finalizeAndAddPath()},_prepareForDrawing:function(t,e){var i=s(e),n=new c(t.x,t.y,i===v?g:i);this._reset(),this._addPoint(n),this.canvas.contextTop.moveTo(n.x,n.y),this.currentStartTime=Date.now()},_addPoint:function(t){return!(this._points.length>1&&t.eq(this._points[this._points.length-1]))&&(this._points.push(t),!0)},_reset:function(){this._points.length=0,this._setBrushStyles();var t=new p.Color(this.color);this.needsFullRender=t.getAlpha()<1,this._setShadow()},_captureDrawingPath:function(t,e){var i=s(e),n=this.pressureIgnoranceOnStart>Date.now()-this.currentStartTime,r=Array.isArray(this._points)&&this._points.length>0,o=r?this._points[this._points.length-1].pressure:g,a=new c(t.x,t.y,n?g:i===v?o:Math.max(g,i));return!this.pressureShouldBeIgnored&&r&&o===g&&a.pressure!==g&&(this._points.forEach((function(t){return t.pressure=Math.max(t.pressure,a.pressure)})),this._redrawSegments(this._points)),this._addPoint(a)},_redrawSegments:function(t){var e=this,i=this.canvas.contextTop;this._saveAndTransform(i),this.oldEnd&&i.closePath();var n=this._points[0];i.moveTo(n.x,n.y),i.beginPath(),this._points.forEach((function(t){e.oldEnd=e._drawSegment(i,n,t,!0),n=t})),i.stroke(),i.restore()},_render:function(){var t,e,i=this.canvas.contextTop,n=this._points[0],r=this._points[1],o=n;if(this._saveAndTransform(i),2===this._points.length&&n.x===r.x&&n.y===r.y){var s=n.pressure*this.width/1e3;n=new c(n.x,n.y,n.pressure),r=new c(r.x,r.y,r.pressure),n.x-=s,r.x+=s,o.x=n.x}var a=i.globalCompositeOperation,l=i.globalAlpha;for(i.globalCompositeOperation="destination-atop",i.globalAlpha=this.opacity,t=1,e=this._points.length;t<e;t++)i.beginPath(),i.moveTo(o.x,o.y),o=this._drawSegment(i,n,r),i.closePath(),i.stroke(),n=this._points[t],r=this._points[t+1];i.restore(),i.globalCompositeOperation=a,i.globalAlpha=l},convertPointsToSVGPath:function(t){var e,i=[],n=this.width/1e3,r=new c(t[0].x,t[0].y,t[0].pressure),o=new c(t[1].x,t[1].y,t[1].pressure),s=r,a=t.length,l=1,h=1,u=a>2;for(u&&(l=t[2].x<o.x?-1:t[2].x===o.x?0:1,h=t[2].y<o.y?-1:t[2].y===o.y?0:1),e=1;e<a;e++)i.push("M ",s.x-l*n," ",s.y-h*n," "),r.eq(o)||(s=r.midPointFrom(o),i.push("Q ",r.x," ",r.y," ",s.x," ",s.y," ")),r=t[e],e+1<t.length&&(o=t[e+1]);return u&&(l=r.x>t[e-2].x?1:r.x===t[e-2].x?0:-1,h=r.y>t[e-2].y?1:r.y===t[e-2].y?0:-1),i.push("L ",r.x+l*n," ",r.y+h*n),i},createPSStroke:function(t){var e=new d(t,{fill:null,stroke:this.color,strokeWidth:this.width,strokeLineCap:this.strokeLineCap,strokeMiterLimit:this.strokeMiterLimit,strokeLineJoin:this.strokeLineJoin,strokeDashArray:this.strokeDashArray}),i=new p.Point(e.left+e.width/2,e.top+e.height/2);return i=e.translateToGivenOrigin(i,"center","center",e.originX,e.originY),e.top=i.y,e.left=i.x,this.shadow&&(this.shadow.affectStroke=!0,e.setShadow(this.shadow)),e},_finalizeAndAddPath:function(){if(this.canvas.contextTop.closePath(),this.simplifyTolerance>0&&(this.simplify.pressureCoeff=this.pressureCoeff,this.simplify.tolerance=this.simplifyTolerance,this._points=this.simplify.do(this._points,this.simplifyHighestQuality)),"M 0 0 Q 0 0 0 0 L 0 0"!==this.convertPointsToSVGPath(this._points).join("")){var t=this.createPSStroke(this._points);t.opacity=this.opacity,t.startTime=this.currentStartTime,t.endTime=Date.now(),this.canvas.clearContext(this.canvas.contextTop),this.canvas.add(t),t.setCoords(),this._resetShadow(),this.canvas.fire("path:created",{path:t})}else this.canvas.requestRenderAll()}});p.PSBrush=m,t.PSBrush=m,t.PSPoint=c,t.PSStroke=d,t.Simplify=r,t.getPressure=s,t.isPSPoint=function(t){return t&&"PSPoint"===t.type},t.isPSStroke=function(t){return t&&"PSStroke"===t.type},Object.defineProperty(t,"__esModule",{value:!0})}))},"23cb":function(t,e,i){var n=i("a691"),r=Math.max,o=Math.min;t.exports=function(t,e){var i=n(t);return i<0?r(i+e,0):o(i,e)}},"23e7":function(t,e,i){var n=i("da84"),r=i("06cf").f,o=i("9112"),s=i("6eeb"),a=i("ce4e"),c=i("e893"),l=i("94ca");t.exports=function(t,e){var i,h,u,f,d,p,g=t.target,v=t.global,m=t.stat;if(h=v?n:m?n[g]||a(g,{}):(n[g]||{}).prototype,h)for(u in e){if(d=e[u],t.noTargetGet?(p=r(h,u),f=p&&p.value):f=h[u],i=l(v?u:g+(m?".":"#")+u,t.forced),!i&&void 0!==f){if(typeof d===typeof f)continue;c(d,f)}(t.sham||f&&f.sham)&&o(d,"sham",!0),s(h,u,d,t)}}},"241c":function(t,e,i){var n=i("ca84"),r=i("7839"),o=r.concat("length","prototype");e.f=Object.getOwnPropertyNames||function(t){return n(t,o)}},2532:function(t,e,i){"use strict";var n=i("23e7"),r=i("5a34"),o=i("1d80"),s=i("ab13");n({target:"String",proto:!0,forced:!s("includes")},{includes:function(t){return!!~String(o(this)).indexOf(r(t),arguments.length>1?arguments[1]:void 0)}})},"25f0":function(t,e,i){"use strict";var n=i("6eeb"),r=i("825a"),o=i("d039"),s=i("ad6d"),a="toString",c=RegExp.prototype,l=c[a],h=o((function(){return"/a/b"!=l.call({source:"a",flags:"b"})})),u=l.name!=a;(h||u)&&n(RegExp.prototype,a,(function(){var t=r(this),e=String(t.source),i=t.flags,n=String(void 0===i&&t instanceof RegExp&&!("flags"in c)?s.call(t):i);return"/"+e+"/"+n}),{unsafe:!0})},2626:function(t,e,i){"use strict";var n=i("d066"),r=i("9bf2"),o=i("b622"),s=i("83ab"),a=o("species");t.exports=function(t){var e=n(t),i=r.f;s&&e&&!e[a]&&i(e,a,{configurable:!0,get:function(){return this}})}},"2a62":function(t,e,i){var n=i("825a");t.exports=function(t){var e=t["return"];if(void 0!==e)return n(e.call(t)).value}},"2cf4":function(t,e,i){var n,r,o,s=i("da84"),a=i("d039"),c=i("0366"),l=i("1be4"),h=i("cc12"),u=i("1cdc"),f=i("605d"),d=s.location,p=s.setImmediate,g=s.clearImmediate,v=s.process,m=s.MessageChannel,y=s.Dispatch,b=0,w={},x="onreadystatechange",_=function(t){if(w.hasOwnProperty(t)){var e=w[t];delete w[t],e()}},S=function(t){return function(){_(t)}},C=function(t){_(t.data)},T=function(t){s.postMessage(t+"",d.protocol+"//"+d.host)};p&&g||(p=function(t){var e=[],i=1;while(arguments.length>i)e.push(arguments[i++]);return w[++b]=function(){("function"==typeof t?t:Function(t)).apply(void 0,e)},n(b),b},g=function(t){delete w[t]},f?n=function(t){v.nextTick(S(t))}:y&&y.now?n=function(t){y.now(S(t))}:m&&!u?(r=new m,o=r.port2,r.port1.onmessage=C,n=c(o.postMessage,o,1)):s.addEventListener&&"function"==typeof postMessage&&!s.importScripts&&d&&"file:"!==d.protocol&&!a(T)?(n=T,s.addEventListener("message",C,!1)):n=x in h("script")?function(t){l.appendChild(h("script"))[x]=function(){l.removeChild(this),_(t)}}:function(t){setTimeout(S(t),0)}),t.exports={set:p,clear:g}},"2d00":function(t,e,i){var n,r,o=i("da84"),s=i("342f"),a=o.process,c=a&&a.versions,l=c&&c.v8;l?(n=l.split("."),r=n[0]+n[1]):s&&(n=s.match(/Edge\/(\d+)/),(!n||n[1]>=74)&&(n=s.match(/Chrome\/(\d+)/),n&&(r=n[1]))),t.exports=r&&+r},3410:function(t,e,i){var n=i("23e7"),r=i("d039"),o=i("7b0b"),s=i("e163"),a=i("e177"),c=r((function(){s(1)}));n({target:"Object",stat:!0,forced:c,sham:!a},{getPrototypeOf:function(t){return s(o(t))}})},"342f":function(t,e,i){var n=i("d066");t.exports=n("navigator","userAgent")||""},"35a1":function(t,e,i){var n=i("f5df"),r=i("3f8c"),o=i("b622"),s=o("iterator");t.exports=function(t){if(void 0!=t)return t[s]||t["@@iterator"]||r[n(t)]}},"37e8":function(t,e,i){var n=i("83ab"),r=i("9bf2"),o=i("825a"),s=i("df75");t.exports=n?Object.defineProperties:function(t,e){o(t);var i,n=s(e),a=n.length,c=0;while(a>c)r.f(t,i=n[c++],e[i]);return t}},"3bbe":function(t,e,i){var n=i("861d");t.exports=function(t){if(!n(t)&&null!==t)throw TypeError("Can't set "+String(t)+" as a prototype");return t}},"3ca3":function(t,e,i){"use strict";var n=i("6547").charAt,r=i("69f3"),o=i("7dd0"),s="String Iterator",a=r.set,c=r.getterFor(s);o(String,"String",(function(t){a(this,{type:s,string:String(t),index:0})}),(function(){var t,e=c(this),i=e.string,r=e.index;return r>=i.length?{value:void 0,done:!0}:(t=n(i,r),e.index+=t.length,{value:t,done:!1})}))},"3f8c":function(t,e){t.exports={}},"408a":function(t,e,i){var n=i("c6b6");t.exports=function(t){if("number"!=typeof t&&"Number"!=n(t))throw TypeError("Incorrect invocation");return+t}},"428f":function(t,e,i){var n=i("da84");t.exports=n},"44ad":function(t,e,i){var n=i("d039"),r=i("c6b6"),o="".split;t.exports=n((function(){return!Object("z").propertyIsEnumerable(0)}))?function(t){return"String"==r(t)?o.call(t,""):Object(t)}:Object},"44d2":function(t,e,i){var n=i("b622"),r=i("7c73"),o=i("9bf2"),s=n("unscopables"),a=Array.prototype;void 0==a[s]&&o.f(a,s,{configurable:!0,value:r(null)}),t.exports=function(t){a[s][t]=!0}},"44de":function(t,e,i){var n=i("da84");t.exports=function(t,e){var i=n.console;i&&i.error&&(1===arguments.length?i.error(t):i.error(t,e))}},"44e7":function(t,e,i){var n=i("861d"),r=i("c6b6"),o=i("b622"),s=o("match");t.exports=function(t){var e;return n(t)&&(void 0!==(e=t[s])?!!e:"RegExp"==r(t))}},4840:function(t,e,i){var n=i("825a"),r=i("1c0b"),o=i("b622"),s=o("species");t.exports=function(t,e){var i,o=n(t).constructor;return void 0===o||void 0==(i=n(o)[s])?e:r(i)}},4930:function(t,e,i){var n=i("605d"),r=i("2d00"),o=i("d039");t.exports=!!Object.getOwnPropertySymbols&&!o((function(){return!Symbol.sham&&(n?38===r:r>37&&r<41)}))},"498a":function(t,e,i){"use strict";var n=i("23e7"),r=i("58a8").trim,o=i("c8d2");n({target:"String",proto:!0,forced:o("trim")},{trim:function(){return r(this)}})},"4ae1":function(t,e,i){var n=i("23e7"),r=i("d066"),o=i("1c0b"),s=i("825a"),a=i("861d"),c=i("7c73"),l=i("0538"),h=i("d039"),u=r("Reflect","construct"),f=h((function(){function t(){}return!(u((function(){}),[],t)instanceof t)})),d=!h((function(){u((function(){}))})),p=f||d;n({target:"Reflect",stat:!0,forced:p,sham:p},{construct:function(t,e){o(t),s(e);var i=arguments.length<3?t:o(arguments[2]);if(d&&!f)return u(t,e,i);if(t==i){switch(e.length){case 0:return new t;case 1:return new t(e[0]);case 2:return new t(e[0],e[1]);case 3:return new t(e[0],e[1],e[2]);case 4:return new t(e[0],e[1],e[2],e[3])}var n=[null];return n.push.apply(n,e),new(l.apply(t,n))}var r=i.prototype,h=c(a(r)?r:Object.prototype),p=Function.apply.call(t,h,e);return a(p)?p:h}})},"4d64":function(t,e,i){var n=i("fc6a"),r=i("50c4"),o=i("23cb"),s=function(t){return function(e,i,s){var a,c=n(e),l=r(c.length),h=o(s,l);if(t&&i!=i){while(l>h)if(a=c[h++],a!=a)return!0}else for(;l>h;h++)if((t||h in c)&&c[h]===i)return t||h||0;return!t&&-1}};t.exports={includes:s(!0),indexOf:s(!1)}},"4de4":function(t,e,i){"use strict";var n=i("23e7"),r=i("b727").filter,o=i("1dde"),s=o("filter");n({target:"Array",proto:!0,forced:!s},{filter:function(t){return r(this,t,arguments.length>1?arguments[1]:void 0)}})},"50c4":function(t,e,i){var n=i("a691"),r=Math.min;t.exports=function(t){return t>0?r(n(t),9007199254740991):0}},5135:function(t,e){var i={}.hasOwnProperty;t.exports=function(t,e){return i.call(t,e)}},5319:function(t,e,i){"use strict";var n=i("d784"),r=i("825a"),o=i("50c4"),s=i("a691"),a=i("1d80"),c=i("8aa5"),l=i("0cb2"),h=i("14c3"),u=Math.max,f=Math.min,d=function(t){return void 0===t?t:String(t)};n("replace",2,(function(t,e,i,n){var p=n.REGEXP_REPLACE_SUBSTITUTES_UNDEFINED_CAPTURE,g=n.REPLACE_KEEPS_$0,v=p?"$":"$0";return[function(i,n){var r=a(this),o=void 0==i?void 0:i[t];return void 0!==o?o.call(i,r,n):e.call(String(r),i,n)},function(t,n){if(!p&&g||"string"===typeof n&&-1===n.indexOf(v)){var a=i(e,t,this,n);if(a.done)return a.value}var m=r(t),y=String(this),b="function"===typeof n;b||(n=String(n));var w=m.global;if(w){var x=m.unicode;m.lastIndex=0}var _=[];while(1){var S=h(m,y);if(null===S)break;if(_.push(S),!w)break;var C=String(S[0]);""===C&&(m.lastIndex=c(y,o(m.lastIndex),x))}for(var T="",O=0,k=0;k<_.length;k++){S=_[k];for(var E=String(S[0]),A=u(f(s(S.index),y.length),0),P=[],D=1;D<S.length;D++)P.push(d(S[D]));var M=S.groups;if(b){var j=[E].concat(P,A,y);void 0!==M&&j.push(M);var R=String(n.apply(void 0,j))}else R=l(E,y,A,P,M,n);A>=O&&(T+=y.slice(O,A)+R,O=A+E.length)}return T+y.slice(O)}]}))},5692:function(t,e,i){var n=i("c430"),r=i("c6cd");(t.exports=function(t,e){return r[t]||(r[t]=void 0!==e?e:{})})("versions",[]).push({version:"3.10.0",mode:n?"pure":"global",copyright:"Â© 2021 Denis Pushkarev (zloirock.ru)"})},"56ef":function(t,e,i){var n=i("d066"),r=i("241c"),o=i("7418"),s=i("825a");t.exports=n("Reflect","ownKeys")||function(t){var e=r.f(s(t)),i=o.f;return i?e.concat(i(t)):e}},5899:function(t,e){t.exports="\t\n\v\f\r Â áââââââââââââ¯âã\u2028\u2029\ufeff"},"58a8":function(t,e,i){var n=i("1d80"),r=i("5899"),o="["+r+"]",s=RegExp("^"+o+o+"*"),a=RegExp(o+o+"*$"),c=function(t){return function(e){var i=String(n(e));return 1&t&&(i=i.replace(s,"")),2&t&&(i=i.replace(a,"")),i}};t.exports={start:c(1),end:c(2),trim:c(3)}},"5a34":function(t,e,i){var n=i("44e7");t.exports=function(t){if(n(t))throw TypeError("The method doesn't accept regular expressions");return t}},"5c6c":function(t,e){t.exports=function(t,e){return{enumerable:!(1&t),configurable:!(2&t),writable:!(4&t),value:e}}},"605d":function(t,e,i){var n=i("c6b6"),r=i("da84");t.exports="process"==n(r.process)},6547:function(t,e,i){var n=i("a691"),r=i("1d80"),o=function(t){return function(e,i){var o,s,a=String(r(e)),c=n(i),l=a.length;return c<0||c>=l?t?"":void 0:(o=a.charCodeAt(c),o<55296||o>56319||c+1===l||(s=a.charCodeAt(c+1))<56320||s>57343?t?a.charAt(c):o:t?a.slice(c,c+2):s-56320+(o-55296<<10)+65536)}};t.exports={codeAt:o(!1),charAt:o(!0)}},"65f0":function(t,e,i){var n=i("861d"),r=i("e8b5"),o=i("b622"),s=o("species");t.exports=function(t,e){var i;return r(t)&&(i=t.constructor,"function"!=typeof i||i!==Array&&!r(i.prototype)?n(i)&&(i=i[s],null===i&&(i=void 0)):i=void 0),new(void 0===i?Array:i)(0===e?0:e)}},"69f3":function(t,e,i){var n,r,o,s=i("7f9a"),a=i("da84"),c=i("861d"),l=i("9112"),h=i("5135"),u=i("c6cd"),f=i("f772"),d=i("d012"),p=a.WeakMap,g=function(t){return o(t)?r(t):n(t,{})},v=function(t){return function(e){var i;if(!c(e)||(i=r(e)).type!==t)throw TypeError("Incompatible receiver, "+t+" required");return i}};if(s){var m=u.state||(u.state=new p),y=m.get,b=m.has,w=m.set;n=function(t,e){return e.facade=t,w.call(m,t,e),e},r=function(t){return y.call(m,t)||{}},o=function(t){return b.call(m,t)}}else{var x=f("state");d[x]=!0,n=function(t,e){return e.facade=t,l(t,x,e),e},r=function(t){return h(t,x)?t[x]:{}},o=function(t){return h(t,x)}}t.exports={set:n,get:r,has:o,enforce:g,getterFor:v}},"6eeb":function(t,e,i){var n=i("da84"),r=i("9112"),o=i("5135"),s=i("ce4e"),a=i("8925"),c=i("69f3"),l=c.get,h=c.enforce,u=String(String).split("String");(t.exports=function(t,e,i,a){var c,l=!!a&&!!a.unsafe,f=!!a&&!!a.enumerable,d=!!a&&!!a.noTargetGet;"function"==typeof i&&("string"!=typeof e||o(i,"name")||r(i,"name",e),c=h(i),c.source||(c.source=u.join("string"==typeof e?e:""))),t!==n?(l?!d&&t[e]&&(f=!0):delete t[e],f?t[e]=i:r(t,e,i)):f?t[e]=i:s(e,i)})(Function.prototype,"toString",(function(){return"function"==typeof this&&l(this).source||a(this)}))},7035:function(t,e,i){},7037:function(t,e,i){function n(e){return"function"===typeof Symbol&&"symbol"===typeof Symbol.iterator?(t.exports=n=function(t){return typeof t},t.exports["default"]=t.exports,t.exports.__esModule=!0):(t.exports=n=function(t){return t&&"function"===typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},t.exports["default"]=t.exports,t.exports.__esModule=!0),n(e)}i("a4d3"),i("e01a"),i("d3b7"),i("d28b"),i("3ca3"),i("e260"),i("ddb0"),t.exports=n,t.exports["default"]=t.exports,t.exports.__esModule=!0},7156:function(t,e,i){var n=i("861d"),r=i("d2bb");t.exports=function(t,e,i){var o,s;return r&&"function"==typeof(o=e.constructor)&&o!==i&&n(s=o.prototype)&&s!==i.prototype&&r(t,s),t}},7418:function(t,e){e.f=Object.getOwnPropertySymbols},"746f":function(t,e,i){var n=i("428f"),r=i("5135"),o=i("e538"),s=i("9bf2").f;t.exports=function(t){var e=n.Symbol||(n.Symbol={});r(e,t)||s(e,t,{value:o.f(t)})}},7839:function(t,e){t.exports=["constructor","hasOwnProperty","isPrototypeOf","propertyIsEnumerable","toLocaleString","toString","valueOf"]},"7a94":function(t,e,i){(function(t){
/*! Fabric.js Copyright 2008-2015, Printio (Juriy Zaytsev, Maxim Chernyak) */
var n=n||{version:"4.4.0"};if(e.fabric=n,"undefined"!==typeof document&&"undefined"!==typeof window)document instanceof("undefined"!==typeof HTMLDocument?HTMLDocument:Document)?n.document=document:n.document=document.implementation.createHTMLDocument(""),n.window=window;else{var r=i(0),o=new r.JSDOM(decodeURIComponent("%3C!DOCTYPE%20html%3E%3Chtml%3E%3Chead%3E%3C%2Fhead%3E%3Cbody%3E%3C%2Fbody%3E%3C%2Fhtml%3E"),{features:{FetchExternalResources:["img"]},resources:"usable"}).window;n.document=o.document,n.jsdomImplForWrapper=i(1).implForWrapper,n.nodeCanvas=i(2).Canvas,n.window=o,DOMParser=n.window.DOMParser}function s(t){var e=t.targetCanvas,i=e.width,n=e.height,r=t.destinationWidth,o=t.destinationHeight;i===r&&n===o||(e.width=r,e.height=o)}function a(t,e){var i=t.canvas,n=e.targetCanvas,r=n.getContext("2d");r.translate(0,n.height),r.scale(1,-1);var o=i.height-n.height;r.drawImage(i,0,o,n.width,n.height,0,0,n.width,n.height)}function c(t,e){var i=e.targetCanvas,n=i.getContext("2d"),r=e.destinationWidth,o=e.destinationHeight,s=r*o*4,a=new Uint8Array(this.imageBuffer,0,s),c=new Uint8ClampedArray(this.imageBuffer,0,s);t.readPixels(0,0,r,o,t.RGBA,t.UNSIGNED_BYTE,a);var l=new ImageData(c,r,o);n.putImageData(l,0,0)}n.isTouchSupported="ontouchstart"in n.window||"ontouchstart"in n.document||n.window&&n.window.navigator&&n.window.navigator.maxTouchPoints>0,n.isLikelyNode="undefined"!==typeof t&&"undefined"===typeof window,n.SHARED_ATTRIBUTES=["display","transform","fill","fill-opacity","fill-rule","opacity","stroke","stroke-dasharray","stroke-linecap","stroke-dashoffset","stroke-linejoin","stroke-miterlimit","stroke-opacity","stroke-width","id","paint-order","vector-effect","instantiated_by_use","clip-path"],n.DPI=96,n.reNum="(?:[-+]?(?:\\d+|\\d*\\.\\d+)(?:[eE][-+]?\\d+)?)",n.commaWsp="(?:\\s+,?\\s*|,\\s*)",n.rePathCommand=/([-+]?((\d+\.\d+)|((\d+)|(\.\d+)))(?:[eE][-+]?\d+)?)/gi,n.reNonWord=/[ \n\.,;!\?\-]/,n.fontPaths={},n.iMatrix=[1,0,0,1,0,0],n.svgNS="http://www.w3.org/2000/svg",n.perfLimitSizeTotal=2097152,n.maxCacheSideLimit=4096,n.minCacheSideLimit=256,n.charWidthsCache={},n.textureSize=2048,n.disableStyleCopyPaste=!1,n.enableGLFiltering=!0,n.devicePixelRatio=n.window.devicePixelRatio||n.window.webkitDevicePixelRatio||n.window.mozDevicePixelRatio||1,n.browserShadowBlurConstant=1,n.arcToSegmentsCache={},n.boundsOfCurveCache={},n.cachesBoundsOfCurve=!0,n.forceGLPutImageData=!1,n.initFilterBackend=function(){return n.enableGLFiltering&&n.isWebglSupported&&n.isWebglSupported(n.textureSize)?(console.log("max texture size: "+n.maxTextureSize),new n.WebglFilterBackend({tileSize:n.textureSize})):n.Canvas2dFilterBackend?new n.Canvas2dFilterBackend:void 0},"undefined"!==typeof document&&"undefined"!==typeof window&&(window.fabric=n),function(){function t(t,e){if(this.__eventListeners[t]){var i=this.__eventListeners[t];e?i[i.indexOf(e)]=!1:n.util.array.fill(i,!1)}}function e(t,e){if(this.__eventListeners||(this.__eventListeners={}),1===arguments.length)for(var i in t)this.on(i,t[i]);else this.__eventListeners[t]||(this.__eventListeners[t]=[]),this.__eventListeners[t].push(e);return this}function i(e,i){if(!this.__eventListeners)return this;if(0===arguments.length)for(e in this.__eventListeners)t.call(this,e);else if(1===arguments.length&&"object"===typeof arguments[0])for(var n in e)t.call(this,n,e[n]);else t.call(this,e,i);return this}function r(t,e){if(!this.__eventListeners)return this;var i=this.__eventListeners[t];if(!i)return this;for(var n=0,r=i.length;n<r;n++)i[n]&&i[n].call(this,e||{});return this.__eventListeners[t]=i.filter((function(t){return!1!==t})),this}n.Observable={fire:r,on:e,off:i}}(),n.Collection={_objects:[],add:function(){if(this._objects.push.apply(this._objects,arguments),this._onObjectAdded)for(var t=0,e=arguments.length;t<e;t++)this._onObjectAdded(arguments[t]);return this.renderOnAddRemove&&this.requestRenderAll(),this},insertAt:function(t,e,i){var n=this._objects;return i?n[e]=t:n.splice(e,0,t),this._onObjectAdded&&this._onObjectAdded(t),this.renderOnAddRemove&&this.requestRenderAll(),this},remove:function(){for(var t,e=this._objects,i=!1,n=0,r=arguments.length;n<r;n++)t=e.indexOf(arguments[n]),-1!==t&&(i=!0,e.splice(t,1),this._onObjectRemoved&&this._onObjectRemoved(arguments[n]));return this.renderOnAddRemove&&i&&this.requestRenderAll(),this},forEachObject:function(t,e){for(var i=this.getObjects(),n=0,r=i.length;n<r;n++)t.call(e,i[n],n,i);return this},getObjects:function(t){return"undefined"===typeof t?this._objects.concat():this._objects.filter((function(e){return e.type===t}))},item:function(t){return this._objects[t]},isEmpty:function(){return 0===this._objects.length},size:function(){return this._objects.length},contains:function(t){return this._objects.indexOf(t)>-1},complexity:function(){return this._objects.reduce((function(t,e){return t+=e.complexity?e.complexity():0,t}),0)}},n.CommonMethods={_setOptions:function(t){for(var e in t)this.set(e,t[e])},_initGradient:function(t,e){!t||!t.colorStops||t instanceof n.Gradient||this.set(e,new n.Gradient(t))},_initPattern:function(t,e,i){!t||!t.source||t instanceof n.Pattern?i&&i():this.set(e,new n.Pattern(t,i))},_setObject:function(t){for(var e in t)this._set(e,t[e])},set:function(t,e){return"object"===typeof t?this._setObject(t):this._set(t,e),this},_set:function(t,e){this[t]=e},toggle:function(t){var e=this.get(t);return"boolean"===typeof e&&this.set(t,!e),this},get:function(t){return this[t]}},function(t){var e=Math.sqrt,i=Math.atan2,r=Math.pow,o=Math.PI/180,s=Math.PI/2;n.util={cos:function(t){if(0===t)return 1;t<0&&(t=-t);var e=t/s;switch(e){case 1:case 3:return 0;case 2:return-1}return Math.cos(t)},sin:function(t){if(0===t)return 0;var e=t/s,i=1;switch(t<0&&(i=-1),e){case 1:return i;case 2:return 0;case 3:return-i}return Math.sin(t)},removeFromArray:function(t,e){var i=t.indexOf(e);return-1!==i&&t.splice(i,1),t},getRandomInt:function(t,e){return Math.floor(Math.random()*(e-t+1))+t},degreesToRadians:function(t){return t*o},radiansToDegrees:function(t){return t/o},rotatePoint:function(t,e,i){t.subtractEquals(e);var r=n.util.rotateVector(t,i);return new n.Point(r.x,r.y).addEquals(e)},rotateVector:function(t,e){var i=n.util.sin(e),r=n.util.cos(e),o=t.x*r-t.y*i,s=t.x*i+t.y*r;return{x:o,y:s}},transformPoint:function(t,e,i){return i?new n.Point(e[0]*t.x+e[2]*t.y,e[1]*t.x+e[3]*t.y):new n.Point(e[0]*t.x+e[2]*t.y+e[4],e[1]*t.x+e[3]*t.y+e[5])},makeBoundingBoxFromPoints:function(t,e){if(e)for(var i=0;i<t.length;i++)t[i]=n.util.transformPoint(t[i],e);var r=[t[0].x,t[1].x,t[2].x,t[3].x],o=n.util.array.min(r),s=n.util.array.max(r),a=s-o,c=[t[0].y,t[1].y,t[2].y,t[3].y],l=n.util.array.min(c),h=n.util.array.max(c),u=h-l;return{left:o,top:l,width:a,height:u}},invertTransform:function(t){var e=1/(t[0]*t[3]-t[1]*t[2]),i=[e*t[3],-e*t[1],-e*t[2],e*t[0]],r=n.util.transformPoint({x:t[4],y:t[5]},i,!0);return i[4]=-r.x,i[5]=-r.y,i},toFixed:function(t,e){return parseFloat(Number(t).toFixed(e))},parseUnit:function(t,e){var i=/\D{0,2}$/.exec(t),r=parseFloat(t);switch(e||(e=n.Text.DEFAULT_SVG_FONT_SIZE),i[0]){case"mm":return r*n.DPI/25.4;case"cm":return r*n.DPI/2.54;case"in":return r*n.DPI;case"pt":return r*n.DPI/72;case"pc":return r*n.DPI/72*12;case"em":return r*e;default:return r}},falseFunction:function(){return!1},getKlass:function(t,e){return t=n.util.string.camelize(t.charAt(0).toUpperCase()+t.slice(1)),n.util.resolveNamespace(e)[t]},getSvgAttributes:function(t){var e=["instantiated_by_use","style","id","class"];switch(t){case"linearGradient":e=e.concat(["x1","y1","x2","y2","gradientUnits","gradientTransform"]);break;case"radialGradient":e=e.concat(["gradientUnits","gradientTransform","cx","cy","r","fx","fy","fr"]);break;case"stop":e=e.concat(["offset","stop-color","stop-opacity"]);break}return e},resolveNamespace:function(e){if(!e)return n;var i,r=e.split("."),o=r.length,s=t||n.window;for(i=0;i<o;++i)s=s[r[i]];return s},loadImage:function(t,e,i,r){if(t){var o=n.util.createImage(),s=function(){e&&e.call(i,o,!1),o=o.onload=o.onerror=null};o.onload=s,o.onerror=function(){n.log("Error loading "+o.src),e&&e.call(i,null,!0),o=o.onload=o.onerror=null},0!==t.indexOf("data")&&void 0!==r&&null!==r&&(o.crossOrigin=r),"data:image/svg"===t.substring(0,14)&&(o.onload=null,n.util.loadImageInDom(o,s)),o.src=t}else e&&e.call(i,t)},loadImageInDom:function(t,e){var i=n.document.createElement("div");i.style.width=i.style.height="1px",i.style.left=i.style.top="-100%",i.style.position="absolute",i.appendChild(t),n.document.querySelector("body").appendChild(i),t.onload=function(){e(),i.parentNode.removeChild(i),i=null}},enlivenObjects:function(t,e,i,r){t=t||[];var o=[],s=0,a=t.length;function c(){++s===a&&e&&e(o.filter((function(t){return t})))}a?t.forEach((function(t,e){if(t&&t.type){var s=n.util.getKlass(t.type,i);s.fromObject(t,(function(i,n){n||(o[e]=i),r&&r(t,i,n),c()}))}else c()})):e&&e(o)},enlivenPatterns:function(t,e){function i(){++o===s&&e&&e(r)}t=t||[];var r=[],o=0,s=t.length;s?t.forEach((function(t,e){t&&t.source?new n.Pattern(t,(function(t){r[e]=t,i()})):(r[e]=t,i())})):e&&e(r)},groupSVGElements:function(t,e,i){var r;return t&&1===t.length?t[0]:(e&&(e.width&&e.height?e.centerPoint={x:e.width/2,y:e.height/2}:(delete e.width,delete e.height)),r=new n.Group(t,e),"undefined"!==typeof i&&(r.sourcePath=i),r)},populateWithProperties:function(t,e,i){if(i&&"[object Array]"===Object.prototype.toString.call(i))for(var n=0,r=i.length;n<r;n++)i[n]in t&&(e[i[n]]=t[i[n]])},drawDashedLine:function(t,n,r,o,s,a){var c=o-n,l=s-r,h=e(c*c+l*l),u=i(l,c),f=a.length,d=0,p=!0;t.save(),t.translate(n,r),t.moveTo(0,0),t.rotate(u),n=0;while(h>n)n+=a[d++%f],n>h&&(n=h),t[p?"lineTo":"moveTo"](n,0),p=!p;t.restore()},createCanvasElement:function(){return n.document.createElement("canvas")},copyCanvasElement:function(t){var e=n.util.createCanvasElement();return e.width=t.width,e.height=t.height,e.getContext("2d").drawImage(t,0,0),e},toDataURL:function(t,e,i){return t.toDataURL("image/"+e,i)},createImage:function(){return n.document.createElement("img")},multiplyTransformMatrices:function(t,e,i){return[t[0]*e[0]+t[2]*e[1],t[1]*e[0]+t[3]*e[1],t[0]*e[2]+t[2]*e[3],t[1]*e[2]+t[3]*e[3],i?0:t[0]*e[4]+t[2]*e[5]+t[4],i?0:t[1]*e[4]+t[3]*e[5]+t[5]]},qrDecompose:function(t){var n=i(t[1],t[0]),s=r(t[0],2)+r(t[1],2),a=e(s),c=(t[0]*t[3]-t[2]*t[1])/a,l=i(t[0]*t[2]+t[1]*t[3],s);return{angle:n/o,scaleX:a,scaleY:c,skewX:l/o,skewY:0,translateX:t[4],translateY:t[5]}},calcRotateMatrix:function(t){if(!t.angle)return n.iMatrix.concat();var e=n.util.degreesToRadians(t.angle),i=n.util.cos(e),r=n.util.sin(e);return[i,r,-r,i,0,0]},calcDimensionsMatrix:function(t){var e="undefined"===typeof t.scaleX?1:t.scaleX,i="undefined"===typeof t.scaleY?1:t.scaleY,r=[t.flipX?-e:e,0,0,t.flipY?-i:i,0,0],o=n.util.multiplyTransformMatrices,s=n.util.degreesToRadians;return t.skewX&&(r=o(r,[1,0,Math.tan(s(t.skewX)),1],!0)),t.skewY&&(r=o(r,[1,Math.tan(s(t.skewY)),0,1],!0)),r},composeMatrix:function(t){var e=[1,0,0,1,t.translateX||0,t.translateY||0],i=n.util.multiplyTransformMatrices;return t.angle&&(e=i(e,n.util.calcRotateMatrix(t))),(1!==t.scaleX||1!==t.scaleY||t.skewX||t.skewY||t.flipX||t.flipY)&&(e=i(e,n.util.calcDimensionsMatrix(t))),e},resetObjectTransform:function(t){t.scaleX=1,t.scaleY=1,t.skewX=0,t.skewY=0,t.flipX=!1,t.flipY=!1,t.rotate(0)},saveObjectTransform:function(t){return{scaleX:t.scaleX,scaleY:t.scaleY,skewX:t.skewX,skewY:t.skewY,angle:t.angle,left:t.left,flipX:t.flipX,flipY:t.flipY,top:t.top}},isTransparent:function(t,e,i,n){n>0&&(e>n?e-=n:e=0,i>n?i-=n:i=0);var r,o,s=!0,a=t.getImageData(e,i,2*n||1,2*n||1),c=a.data.length;for(r=3;r<c;r+=4)if(o=a.data[r],s=o<=0,!1===s)break;return a=null,s},parsePreserveAspectRatioAttribute:function(t){var e,i="meet",n="Mid",r="Mid",o=t.split(" ");return o&&o.length&&(i=o.pop(),"meet"!==i&&"slice"!==i?(e=i,i="meet"):o.length&&(e=o.pop())),n="none"!==e?e.slice(1,4):"none",r="none"!==e?e.slice(5,8):"none",{meetOrSlice:i,alignX:n,alignY:r}},clearFabricFontCache:function(t){t=(t||"").toLowerCase(),t?n.charWidthsCache[t]&&delete n.charWidthsCache[t]:n.charWidthsCache={}},limitDimsByArea:function(t,e){var i=Math.sqrt(e*t),n=Math.floor(e/i);return{x:Math.floor(i),y:n}},capValue:function(t,e,i){return Math.max(t,Math.min(e,i))},findScaleToFit:function(t,e){return Math.min(e.width/t.width,e.height/t.height)},findScaleToCover:function(t,e){return Math.max(e.width/t.width,e.height/t.height)},matrixToSVG:function(t){return"matrix("+t.map((function(t){return n.util.toFixed(t,n.Object.NUM_FRACTION_DIGITS)})).join(" ")+")"},removeTransformFromObject:function(t,e){var i=n.util.invertTransform(e),r=n.util.multiplyTransformMatrices(i,t.calcOwnMatrix());n.util.applyTransformToObject(t,r)},addTransformToObject:function(t,e){n.util.applyTransformToObject(t,n.util.multiplyTransformMatrices(e,t.calcOwnMatrix()))},applyTransformToObject:function(t,e){var i=n.util.qrDecompose(e),r=new n.Point(i.translateX,i.translateY);t.flipX=!1,t.flipY=!1,t.set("scaleX",i.scaleX),t.set("scaleY",i.scaleY),t.skewX=i.skewX,t.skewY=i.skewY,t.angle=i.angle,t.setPositionByOrigin(r,"center","center")},sizeAfterTransform:function(t,e,i){var r=t/2,o=e/2,s=[{x:-r,y:-o},{x:r,y:-o},{x:-r,y:o},{x:r,y:o}],a=n.util.calcDimensionsMatrix(i),c=n.util.makeBoundingBoxFromPoints(s,a);return{x:c.width,y:c.height}}}}(e),function(){var t=Array.prototype.join,e={m:2,l:2,h:1,v:1,c:6,s:4,q:4,t:2,a:7},i={m:"l",M:"L"};function r(t,e,i,r,o,s,a,c,l,h,u){var f=n.util.cos(t),d=n.util.sin(t),p=n.util.cos(e),g=n.util.sin(e),v=i*o*p-r*s*g+a,m=r*o*p+i*s*g+c,y=h+l*(-i*o*d-r*s*f),b=u+l*(-r*o*d+i*s*f),w=v+l*(i*o*g+r*s*p),x=m+l*(r*o*g-i*s*p);return["C",y,b,w,x,v,m]}function o(t,e,i,o,a,c,l){var h=Math.PI,u=l*h/180,f=n.util.sin(u),d=n.util.cos(u),p=0,g=0;i=Math.abs(i),o=Math.abs(o);var v=-d*t*.5-f*e*.5,m=-d*e*.5+f*t*.5,y=i*i,b=o*o,w=m*m,x=v*v,_=y*b-y*w-b*x,S=0;if(_<0){var C=Math.sqrt(1-_/(y*b));i*=C,o*=C}else S=(a===c?-1:1)*Math.sqrt(_/(y*w+b*x));var T=S*i*m/o,O=-S*o*v/i,k=d*T-f*O+.5*t,E=f*T+d*O+.5*e,A=s(1,0,(v-T)/i,(m-O)/o),P=s((v-T)/i,(m-O)/o,(-v-T)/i,(-m-O)/o);0===c&&P>0?P-=2*h:1===c&&P<0&&(P+=2*h);for(var D=Math.ceil(Math.abs(P/h*2)),M=[],j=P/D,R=8/3*Math.sin(j/4)*Math.sin(j/4)/Math.sin(j/2),I=A+j,z=0;z<D;z++)M[z]=r(A,I,d,f,i,o,k,E,R,p,g),p=M[z][5],g=M[z][6],A=I,I+=j;return M}function s(t,e,i,n){var r=Math.atan2(e,t),o=Math.atan2(n,i);return o>=r?o-r:2*Math.PI-(r-o)}function a(e,i,r,o,s,a,c,l){var h;if(n.cachesBoundsOfCurve&&(h=t.call(arguments),n.boundsOfCurveCache[h]))return n.boundsOfCurveCache[h];var u,f,d,p,g,v,m,y,b=Math.sqrt,w=Math.min,x=Math.max,_=Math.abs,S=[],C=[[],[]];f=6*e-12*r+6*s,u=-3*e+9*r-9*s+3*c,d=3*r-3*e;for(var T=0;T<2;++T)if(T>0&&(f=6*i-12*o+6*a,u=-3*i+9*o-9*a+3*l,d=3*o-3*i),_(u)<1e-12){if(_(f)<1e-12)continue;p=-d/f,0<p&&p<1&&S.push(p)}else m=f*f-4*d*u,m<0||(y=b(m),g=(-f+y)/(2*u),0<g&&g<1&&S.push(g),v=(-f-y)/(2*u),0<v&&v<1&&S.push(v));var O,k,E,A=S.length,P=A;while(A--)p=S[A],E=1-p,O=E*E*E*e+3*E*E*p*r+3*E*p*p*s+p*p*p*c,C[0][A]=O,k=E*E*E*i+3*E*E*p*o+3*E*p*p*a+p*p*p*l,C[1][A]=k;C[0][P]=e,C[1][P]=i,C[0][P+1]=c,C[1][P+1]=l;var D=[{x:w.apply(null,C[0]),y:w.apply(null,C[1])},{x:x.apply(null,C[0]),y:x.apply(null,C[1])}];return n.cachesBoundsOfCurve&&(n.boundsOfCurveCache[h]=D),D}function c(t,e,i){for(var n=i[1],r=i[2],s=i[3],a=i[4],c=i[5],l=i[6],h=i[7],u=o(l-t,h-e,n,r,a,c,s),f=0,d=u.length;f<d;f++)u[f][1]+=t,u[f][2]+=e,u[f][3]+=t,u[f][4]+=e,u[f][5]+=t,u[f][6]+=e;return u}function l(t){var e,i,n,r,o,s,a=0,l=0,h=t.length,u=0,f=0,d=[];for(i=0;i<h;++i){switch(n=!1,e=t[i].slice(0),e[0]){case"l":e[0]="L",e[1]+=a,e[2]+=l;case"L":a=e[1],l=e[2];break;case"h":e[1]+=a;case"H":e[0]="L",e[2]=l,a=e[1];break;case"v":e[1]+=l;case"V":e[0]="L",l=e[1],e[1]=a,e[2]=l;break;case"m":e[0]="M",e[1]+=a,e[2]+=l;case"M":a=e[1],l=e[2],u=e[1],f=e[2];break;case"c":e[0]="C",e[1]+=a,e[2]+=l,e[3]+=a,e[4]+=l,e[5]+=a,e[6]+=l;case"C":o=e[3],s=e[4],a=e[5],l=e[6];break;case"s":e[0]="S",e[1]+=a,e[2]+=l,e[3]+=a,e[4]+=l;case"S":"C"===r?(o=2*a-o,s=2*l-s):(o=a,s=l),a=e[3],l=e[4],e[0]="C",e[5]=e[3],e[6]=e[4],e[3]=e[1],e[4]=e[2],e[1]=o,e[2]=s,o=e[3],s=e[4];break;case"q":e[0]="Q",e[1]+=a,e[2]+=l,e[3]+=a,e[4]+=l;case"Q":o=e[1],s=e[2],a=e[3],l=e[4];break;case"t":e[0]="T",e[1]+=a,e[2]+=l;case"T":"Q"===r?(o=2*a-o,s=2*l-s):(o=a,s=l),e[0]="Q",a=e[1],l=e[2],e[1]=o,e[2]=s,e[3]=a,e[4]=l;break;case"a":e[0]="A",e[6]+=a,e[7]+=l;case"A":n=!0,d=d.concat(c(a,l,e)),a=e[6],l=e[7];break;case"z":case"Z":a=u,l=f;break;default:}n||d.push(e),r=e[0]}return d}function h(t,e,i,n){return Math.sqrt((i-t)*(i-t)+(n-e)*(n-e))}function u(t){return t*t*t}function f(t){return 3*t*t*(1-t)}function d(t){return 3*t*(1-t)*(1-t)}function p(t){return(1-t)*(1-t)*(1-t)}function g(t,e,i,n,r,o,s,a){return function(c){var l=u(c),h=f(c),g=d(c),v=p(c);return{x:s*l+r*h+i*g+t*v,y:a*l+o*h+n*g+e*v}}}function v(t,e,i,n,r,o,s,a){return function(c){var l=1-c,h=3*l*l*(i-t)+6*l*c*(r-i)+3*c*c*(s-r),u=3*l*l*(n-e)+6*l*c*(o-n)+3*c*c*(a-o);return Math.atan2(u,h)}}function m(t){return t*t}function y(t){return 2*t*(1-t)}function b(t){return(1-t)*(1-t)}function w(t,e,i,n,r,o){return function(s){var a=m(s),c=y(s),l=b(s);return{x:r*a+i*c+t*l,y:o*a+n*c+e*l}}}function x(t,e,i,n,r,o){return function(s){var a=1-s,c=2*a*(i-t)+2*s*(r-i),l=2*a*(n-e)+2*s*(o-n);return Math.atan2(l,c)}}function _(t,e,i){var n,r,o={x:e,y:i},s=0;for(r=.01;r<=1;r+=.01)n=t(r),s+=h(o.x,o.y,n.x,n.y),o=n;return s}function S(t,e){var i,n,r,o=0,s=0,a=t.iterator,c={x:t.x,y:t.y},l=.01,u=t.angleFinder;while(s<e&&o<=1&&l>1e-4)i=a(o),r=o,n=h(c.x,c.y,i.x,i.y),n+s>e?(l/=2,o-=l):(c=i,o+=l,s+=n);return i.angle=u(r),i}function C(t){for(var e,i,n,r,o=0,s=t.length,a=0,c=0,l=0,u=0,f=[],d=0;d<s;d++){switch(e=t[d],n={x:a,y:c,command:e[0]},e[0]){case"M":n.length=0,l=a=e[1],u=c=e[2];break;case"L":n.length=h(a,c,e[1],e[2]),a=e[1],c=e[2];break;case"C":i=g(a,c,e[1],e[2],e[3],e[4],e[5],e[6]),r=v(a,c,e[1],e[2],e[3],e[4],e[5],e[6]),n.iterator=i,n.angleFinder=r,n.length=_(i,a,c),a=e[5],c=e[6];break;case"Q":i=w(a,c,e[1],e[2],e[3],e[4]),r=x(a,c,e[1],e[2],e[3],e[4]),n.iterator=i,n.angleFinder=r,n.length=_(i,a,c),a=e[3],c=e[4];break;case"Z":case"z":n.destX=l,n.destY=u,n.length=h(a,c,l,u),a=l,c=u;break}o+=n.length,f.push(n)}return f.push({length:o,x:a,y:c}),f}function T(t,e,i){i||(i=C(t));var r=0;while(e-i[r].length>0&&r<i.length-2)e-=i[r].length,r++;var o,s=i[r],a=e/s.length,c=s.command,l=t[r];switch(c){case"M":return{x:s.x,y:s.y,angle:0};case"Z":case"z":return o=new n.Point(s.x,s.y).lerp(new n.Point(s.destX,s.destY),a),o.angle=Math.atan2(s.destY-s.y,s.destX-s.x),o;case"L":return o=new n.Point(s.x,s.y).lerp(new n.Point(l[1],l[2]),a),o.angle=Math.atan2(l[2]-s.y,l[1]-s.x),o;case"C":return S(s,e);case"Q":return S(s,e)}}function O(t){var r,o,s,a,c,l=[],h=[],u=n.rePathCommand,f="[-+]?(?:\\d*\\.\\d+|\\d+\\.?)(?:[eE][-+]?\\d+)?\\s*",d="("+f+")"+n.commaWsp,p="([01])"+n.commaWsp+"?",g=d+"?"+d+"?"+d+p+p+d+"?("+f+")",v=new RegExp(g,"g");if(!t||!t.match)return l;c=t.match(/[mzlhvcsqta][^mzlhvcsqta]*/gi);for(var m,y=0,b=c.length;y<b;y++){r=c[y],a=r.slice(1).trim(),h.length=0;var w=r.charAt(0);if(m=[w],"a"===w.toLowerCase())for(var x;x=v.exec(a);)for(var _=1;_<x.length;_++)h.push(x[_]);else while(s=u.exec(a))h.push(s[0]);_=0;for(var S=h.length;_<S;_++)o=parseFloat(h[_]),isNaN(o)||m.push(o);var C=e[w.toLowerCase()],T=i[w]||w;if(m.length-1>C)for(var O=1,k=m.length;O<k;O+=C)l.push([w].concat(m.slice(O,O+C))),w=T;else l.push(m)}return l}function k(t,e,i,n,r,s,c,l,h){for(var u,f=0,d=0,p=[],g=o(l-t,h-e,i,n,s,c,r),v=0,m=g.length;v<m;v++)u=a(f,d,g[v][1],g[v][2],g[v][3],g[v][4],g[v][5],g[v][6]),p.push({x:u[0].x+t,y:u[0].y+e}),p.push({x:u[1].x+t,y:u[1].y+e}),f=g[v][5],d=g[v][6];return p}function E(t,e,i,n){n=n.slice(0).unshift("X");var r=c(e,i,n);r.forEach((function(e){t.bezierCurveTo.apply(t,e.slice(1))}))}n.util.parsePath=O,n.util.makePathSimpler=l,n.util.getPathSegmentsInfo=C,n.util.fromArcToBeziers=c,n.util.fromArcToBeizers=c,n.util.getBoundsOfCurve=a,n.util.getPointOnPath=T,n.util.getBoundsOfArc=k,n.util.drawArc=E}(),function(){var t=Array.prototype.slice;function e(e,i){for(var n=t.call(arguments,2),r=[],o=0,s=e.length;o<s;o++)r[o]=n.length?e[o][i].apply(e[o],n):e[o][i].call(e[o]);return r}function i(t,e){return s(t,e,(function(t,e){return t>=e}))}function r(t,e){return s(t,e,(function(t,e){return t<e}))}function o(t,e){var i=t.length;while(i--)t[i]=e;return t}function s(t,e,i){if(t&&0!==t.length){var n=t.length-1,r=e?t[n][e]:t[n];if(e)while(n--)i(t[n][e],r)&&(r=t[n][e]);else while(n--)i(t[n],r)&&(r=t[n]);return r}}n.util.array={fill:o,invoke:e,min:r,max:i}}(),function(){function t(e,i,r){if(r)if(!n.isLikelyNode&&i instanceof Element)e=i;else if(i instanceof Array){e=[];for(var o=0,s=i.length;o<s;o++)e[o]=t({},i[o],r)}else if(i&&"object"===typeof i)for(var a in i)"canvas"===a||"group"===a?e[a]=null:i.hasOwnProperty(a)&&(e[a]=t({},i[a],r));else e=i;else for(var a in i)e[a]=i[a];return e}function e(e,i){return t({},e,i)}n.util.object={extend:t,clone:e},n.util.object.extend(n.util,n.Observable)}(),function(){function t(t){return t.replace(/-+(.)?/g,(function(t,e){return e?e.toUpperCase():""}))}function e(t,e){return t.charAt(0).toUpperCase()+(e?t.slice(1):t.slice(1).toLowerCase())}function i(t){return t.replace(/&/g,"&amp;").replace(/"/g,"&quot;").replace(/'/g,"&apos;").replace(/</g,"&lt;").replace(/>/g,"&gt;")}function r(t){var e,i=0,n=[];for(i=0,e;i<t.length;i++)!1!==(e=o(t,i))&&n.push(e);return n}function o(t,e){var i=t.charCodeAt(e);if(isNaN(i))return"";if(i<55296||i>57343)return t.charAt(e);if(55296<=i&&i<=56319){if(t.length<=e+1)throw"High surrogate without following low surrogate";var n=t.charCodeAt(e+1);if(56320>n||n>57343)throw"High surrogate without following low surrogate";return t.charAt(e)+t.charAt(e+1)}if(0===e)throw"Low surrogate without preceding high surrogate";var r=t.charCodeAt(e-1);if(55296>r||r>56319)throw"Low surrogate without preceding high surrogate";return!1}n.util.string={camelize:t,capitalize:e,escapeXml:i,graphemeSplit:r}}(),function(){var t=Array.prototype.slice,e=function(){},i=function(){for(var t in{toString:1})if("toString"===t)return!1;return!0}(),r=function(t,e,n){for(var r in e)r in t.prototype&&"function"===typeof t.prototype[r]&&(e[r]+"").indexOf("callSuper")>-1?t.prototype[r]=function(t){return function(){var i=this.constructor.superclass;this.constructor.superclass=n;var r=e[t].apply(this,arguments);if(this.constructor.superclass=i,"initialize"!==t)return r}}(r):t.prototype[r]=e[r],i&&(e.toString!==Object.prototype.toString&&(t.prototype.toString=e.toString),e.valueOf!==Object.prototype.valueOf&&(t.prototype.valueOf=e.valueOf))};function o(){}function s(e){var i=null,n=this;while(n.constructor.superclass){var r=n.constructor.superclass.prototype[e];if(n[e]!==r){i=r;break}n=n.constructor.superclass.prototype}return i?arguments.length>1?i.apply(this,t.call(arguments,1)):i.call(this):console.log("tried to callSuper "+e+", method not found in prototype chain",this)}function a(){var i=null,n=t.call(arguments,0);function a(){this.initialize.apply(this,arguments)}"function"===typeof n[0]&&(i=n.shift()),a.superclass=i,a.subclasses=[],i&&(o.prototype=i.prototype,a.prototype=new o,i.subclasses.push(a));for(var c=0,l=n.length;c<l;c++)r(a,n[c],i);return a.prototype.initialize||(a.prototype.initialize=e),a.prototype.constructor=a,a.prototype.callSuper=s,a}n.util.createClass=a}(),function(){var t=!!n.document.createElement("div").attachEvent,e=["touchstart","touchmove","touchend"];function i(t){var e=t.changedTouches;return e&&e[0]?e[0]:t}n.util.addListener=function(e,i,n,r){e&&e.addEventListener(i,n,!t&&r)},n.util.removeListener=function(e,i,n,r){e&&e.removeEventListener(i,n,!t&&r)},n.util.getPointer=function(t){var e=t.target,r=n.util.getScrollLeftTop(e),o=i(t);return{x:o.clientX+r.left,y:o.clientY+r.top}},n.util.isTouchEvent=function(t){return e.indexOf(t.type)>-1||"touch"===t.pointerType}}(),function(){function t(t,e){var i=t.style;if(!i)return t;if("string"===typeof e)return t.style.cssText+=";"+e,e.indexOf("opacity")>-1?s(t,e.match(/opacity:\s*(\d?\.?\d*)/)[1]):t;for(var n in e)if("opacity"===n)s(t,e[n]);else{var r="float"===n||"cssFloat"===n?"undefined"===typeof i.styleFloat?"cssFloat":"styleFloat":n;i[r]=e[n]}return t}var e=n.document.createElement("div"),i="string"===typeof e.style.opacity,r="string"===typeof e.style.filter,o=/alpha\s*\(\s*opacity\s*=\s*([^\)]+)\)/,s=function(t){return t};i?s=function(t,e){return t.style.opacity=e,t}:r&&(s=function(t,e){var i=t.style;return t.currentStyle&&!t.currentStyle.hasLayout&&(i.zoom=1),o.test(i.filter)?(e=e>=.9999?"":"alpha(opacity="+100*e+")",i.filter=i.filter.replace(o,e)):i.filter+=" alpha(opacity="+100*e+")",t}),n.util.setStyle=t}(),function(){var t=Array.prototype.slice;function e(t){return"string"===typeof t?n.document.getElementById(t):t}var i,r,o=function(e){return t.call(e,0)};try{i=o(n.document.childNodes)instanceof Array}catch(p){}function s(t,e){var i=n.document.createElement(t);for(var r in e)"class"===r?i.className=e[r]:"for"===r?i.htmlFor=e[r]:i.setAttribute(r,e[r]);return i}function a(t,e){t&&-1===(" "+t.className+" ").indexOf(" "+e+" ")&&(t.className+=(t.className?" ":"")+e)}function c(t,e,i){return"string"===typeof e&&(e=s(e,i)),t.parentNode&&t.parentNode.replaceChild(e,t),e.appendChild(t),e}function l(t){var e=0,i=0,r=n.document.documentElement,o=n.document.body||{scrollLeft:0,scrollTop:0};while(t&&(t.parentNode||t.host))if(t=t.parentNode||t.host,t===n.document?(e=o.scrollLeft||r.scrollLeft||0,i=o.scrollTop||r.scrollTop||0):(e+=t.scrollLeft||0,i+=t.scrollTop||0),1===t.nodeType&&"fixed"===t.style.position)break;return{left:e,top:i}}function h(t){var e,i,n=t&&t.ownerDocument,o={left:0,top:0},s={left:0,top:0},a={borderLeftWidth:"left",borderTopWidth:"top",paddingLeft:"left",paddingTop:"top"};if(!n)return s;for(var c in a)s[a[c]]+=parseInt(r(t,c),10)||0;return e=n.documentElement,"undefined"!==typeof t.getBoundingClientRect&&(o=t.getBoundingClientRect()),i=l(t),{left:o.left+i.left-(e.clientLeft||0)+s.left,top:o.top+i.top-(e.clientTop||0)+s.top}}function u(t){var e=n.jsdomImplForWrapper(t);return e._canvas||e._image}function f(t){if(n.isLikelyNode){var e=n.jsdomImplForWrapper(t);e&&(e._image=null,e._canvas=null,e._currentSrc=null,e._attributes=null,e._classList=null)}}function d(t,e){t.imageSmoothingEnabled=t.imageSmoothingEnabled||t.webkitImageSmoothingEnabled||t.mozImageSmoothingEnabled||t.msImageSmoothingEnabled||t.oImageSmoothingEnabled,t.imageSmoothingEnabled=e}i||(o=function(t){var e=new Array(t.length),i=t.length;while(i--)e[i]=t[i];return e}),r=n.document.defaultView&&n.document.defaultView.getComputedStyle?function(t,e){var i=n.document.defaultView.getComputedStyle(t,null);return i?i[e]:void 0}:function(t,e){var i=t.style[e];return!i&&t.currentStyle&&(i=t.currentStyle[e]),i},function(){var t=n.document.documentElement.style,e="userSelect"in t?"userSelect":"MozUserSelect"in t?"MozUserSelect":"WebkitUserSelect"in t?"WebkitUserSelect":"KhtmlUserSelect"in t?"KhtmlUserSelect":"";function i(t){return"undefined"!==typeof t.onselectstart&&(t.onselectstart=n.util.falseFunction),e?t.style[e]="none":"string"===typeof t.unselectable&&(t.unselectable="on"),t}function r(t){return"undefined"!==typeof t.onselectstart&&(t.onselectstart=null),e?t.style[e]="":"string"===typeof t.unselectable&&(t.unselectable=""),t}n.util.makeElementUnselectable=i,n.util.makeElementSelectable=r}(),n.util.setImageSmoothing=d,n.util.getById=e,n.util.toArray=o,n.util.addClass=a,n.util.makeElement=s,n.util.wrapElement=c,n.util.getScrollLeftTop=l,n.util.getElementOffset=h,n.util.getNodeCanvas=u,n.util.cleanUpJsdomNode=f}(),function(){function t(t,e){return t+(/\?/.test(t)?"&":"?")+e}function e(){}function i(i,r){r||(r={});var o=r.method?r.method.toUpperCase():"GET",s=r.onComplete||function(){},a=new n.window.XMLHttpRequest,c=r.body||r.parameters;return a.onreadystatechange=function(){4===a.readyState&&(s(a),a.onreadystatechange=e)},"GET"===o&&(c=null,"string"===typeof r.parameters&&(i=t(i,r.parameters))),a.open(o,i,!0),"POST"!==o&&"PUT"!==o||a.setRequestHeader("Content-Type","application/x-www-form-urlencoded"),a.send(c),a}n.util.request=i}(),n.log=console.log,n.warn=console.warn,function(){function t(){return!1}function e(t,e,i,n){return-i*Math.cos(t/n*(Math.PI/2))+i+e}function i(i){s((function(n){i||(i={});var r,o=n||+new Date,a=i.duration||500,c=o+a,l=i.onChange||t,h=i.abort||t,u=i.onComplete||t,f=i.easing||e,d="startValue"in i?i.startValue:0,p="endValue"in i?i.endValue:100,g=i.byValue||p-d;i.onStart&&i.onStart(),function t(e){r=e||+new Date;var i=r>c?a:r-o,n=i/a,v=f(i,d,g,a),m=Math.abs((v-d)/g);if(!h())return r>c?(l(p,1,1),void u(p,1,1)):(l(v,m,n),void s(t));u(p,1,1)}(o)}))}var r=n.window.requestAnimationFrame||n.window.webkitRequestAnimationFrame||n.window.mozRequestAnimationFrame||n.window.oRequestAnimationFrame||n.window.msRequestAnimationFrame||function(t){return n.window.setTimeout(t,1e3/60)},o=n.window.cancelAnimationFrame||n.window.clearTimeout;function s(){return r.apply(n.window,arguments)}function a(){return o.apply(n.window,arguments)}n.util.animate=i,n.util.requestAnimFrame=s,n.util.cancelAnimFrame=a}(),function(){function t(t,e,i){var n="rgba("+parseInt(t[0]+i*(e[0]-t[0]),10)+","+parseInt(t[1]+i*(e[1]-t[1]),10)+","+parseInt(t[2]+i*(e[2]-t[2]),10);return n+=","+(t&&e?parseFloat(t[3]+i*(e[3]-t[3])):1),n+=")",n}function e(e,i,r,o){var s=new n.Color(e).getSource(),a=new n.Color(i).getSource(),c=o.onComplete,l=o.onChange;o=o||{},n.util.animate(n.util.object.extend(o,{duration:r||500,startValue:s,endValue:a,byValue:a,easing:function(e,i,n,r){var s=o.colorEasing?o.colorEasing(e,r):1-Math.cos(e/r*(Math.PI/2));return t(i,n,s)},onComplete:function(e,i,n){if(c)return c(t(a,a,0),i,n)},onChange:function(e,i,n){if(l){if(Array.isArray(e))return l(t(e,e,0),i,n);l(e,i,n)}}}))}n.util.animateColor=e}(),function(){function t(t,e,i,n){return t<Math.abs(e)?(t=e,n=i/4):n=0===e&&0===t?i/(2*Math.PI)*Math.asin(1):i/(2*Math.PI)*Math.asin(e/t),{a:t,c:e,p:i,s:n}}function e(t,e,i){return t.a*Math.pow(2,10*(e-=1))*Math.sin((e*i-t.s)*(2*Math.PI)/t.p)}function i(t,e,i,n){return i*((t=t/n-1)*t*t+1)+e}function r(t,e,i,n){return t/=n/2,t<1?i/2*t*t*t+e:i/2*((t-=2)*t*t+2)+e}function o(t,e,i,n){return i*(t/=n)*t*t*t+e}function s(t,e,i,n){return-i*((t=t/n-1)*t*t*t-1)+e}function a(t,e,i,n){return t/=n/2,t<1?i/2*t*t*t*t+e:-i/2*((t-=2)*t*t*t-2)+e}function c(t,e,i,n){return i*(t/=n)*t*t*t*t+e}function l(t,e,i,n){return i*((t=t/n-1)*t*t*t*t+1)+e}function h(t,e,i,n){return t/=n/2,t<1?i/2*t*t*t*t*t+e:i/2*((t-=2)*t*t*t*t+2)+e}function u(t,e,i,n){return-i*Math.cos(t/n*(Math.PI/2))+i+e}function f(t,e,i,n){return i*Math.sin(t/n*(Math.PI/2))+e}function d(t,e,i,n){return-i/2*(Math.cos(Math.PI*t/n)-1)+e}function p(t,e,i,n){return 0===t?e:i*Math.pow(2,10*(t/n-1))+e}function g(t,e,i,n){return t===n?e+i:i*(1-Math.pow(2,-10*t/n))+e}function v(t,e,i,n){return 0===t?e:t===n?e+i:(t/=n/2,t<1?i/2*Math.pow(2,10*(t-1))+e:i/2*(2-Math.pow(2,-10*--t))+e)}function m(t,e,i,n){return-i*(Math.sqrt(1-(t/=n)*t)-1)+e}function y(t,e,i,n){return i*Math.sqrt(1-(t=t/n-1)*t)+e}function b(t,e,i,n){return t/=n/2,t<1?-i/2*(Math.sqrt(1-t*t)-1)+e:i/2*(Math.sqrt(1-(t-=2)*t)+1)+e}function w(i,n,r,o){var s=1.70158,a=0,c=r;if(0===i)return n;if(i/=o,1===i)return n+r;a||(a=.3*o);var l=t(c,r,a,s);return-e(l,i,o)+n}function x(e,i,n,r){var o=1.70158,s=0,a=n;if(0===e)return i;if(e/=r,1===e)return i+n;s||(s=.3*r);var c=t(a,n,s,o);return c.a*Math.pow(2,-10*e)*Math.sin((e*r-c.s)*(2*Math.PI)/c.p)+c.c+i}function _(i,n,r,o){var s=1.70158,a=0,c=r;if(0===i)return n;if(i/=o/2,2===i)return n+r;a||(a=o*(.3*1.5));var l=t(c,r,a,s);return i<1?-.5*e(l,i,o)+n:l.a*Math.pow(2,-10*(i-=1))*Math.sin((i*o-l.s)*(2*Math.PI)/l.p)*.5+l.c+n}function S(t,e,i,n,r){return void 0===r&&(r=1.70158),i*(t/=n)*t*((r+1)*t-r)+e}function C(t,e,i,n,r){return void 0===r&&(r=1.70158),i*((t=t/n-1)*t*((r+1)*t+r)+1)+e}function T(t,e,i,n,r){return void 0===r&&(r=1.70158),t/=n/2,t<1?i/2*(t*t*((1+(r*=1.525))*t-r))+e:i/2*((t-=2)*t*((1+(r*=1.525))*t+r)+2)+e}function O(t,e,i,n){return i-k(n-t,0,i,n)+e}function k(t,e,i,n){return(t/=n)<1/2.75?i*(7.5625*t*t)+e:t<2/2.75?i*(7.5625*(t-=1.5/2.75)*t+.75)+e:t<2.5/2.75?i*(7.5625*(t-=2.25/2.75)*t+.9375)+e:i*(7.5625*(t-=2.625/2.75)*t+.984375)+e}function E(t,e,i,n){return t<n/2?.5*O(2*t,0,i,n)+e:.5*k(2*t-n,0,i,n)+.5*i+e}n.util.ease={easeInQuad:function(t,e,i,n){return i*(t/=n)*t+e},easeOutQuad:function(t,e,i,n){return-i*(t/=n)*(t-2)+e},easeInOutQuad:function(t,e,i,n){return t/=n/2,t<1?i/2*t*t+e:-i/2*(--t*(t-2)-1)+e},easeInCubic:function(t,e,i,n){return i*(t/=n)*t*t+e},easeOutCubic:i,easeInOutCubic:r,easeInQuart:o,easeOutQuart:s,easeInOutQuart:a,easeInQuint:c,easeOutQuint:l,easeInOutQuint:h,easeInSine:u,easeOutSine:f,easeInOutSine:d,easeInExpo:p,easeOutExpo:g,easeInOutExpo:v,easeInCirc:m,easeOutCirc:y,easeInOutCirc:b,easeInElastic:w,easeOutElastic:x,easeInOutElastic:_,easeInBack:S,easeOutBack:C,easeInOutBack:T,easeInBounce:O,easeOutBounce:k,easeInOutBounce:E}}(),function(t){"use strict";var e=t.fabric||(t.fabric={}),i=e.util.object.extend,n=e.util.object.clone,r=e.util.toFixed,o=e.util.parseUnit,s=e.util.multiplyTransformMatrices,a=["path","circle","polygon","polyline","ellipse","rect","line","image","text"],c=["symbol","image","marker","pattern","view","svg"],l=["pattern","defs","symbol","metadata","clipPath","mask","desc"],h=["symbol","g","a","svg","clipPath","defs"],u={cx:"left",x:"left",r:"radius",cy:"top",y:"top",display:"visible",visibility:"visible",transform:"transformMatrix","fill-opacity":"fillOpacity","fill-rule":"fillRule","font-family":"fontFamily","font-size":"fontSize","font-style":"fontStyle","font-weight":"fontWeight","letter-spacing":"charSpacing","paint-order":"paintFirst","stroke-dasharray":"strokeDashArray","stroke-dashoffset":"strokeDashOffset","stroke-linecap":"strokeLineCap","stroke-linejoin":"strokeLineJoin","stroke-miterlimit":"strokeMiterLimit","stroke-opacity":"strokeOpacity","stroke-width":"strokeWidth","text-decoration":"textDecoration","text-anchor":"textAnchor",opacity:"opacity","clip-path":"clipPath","clip-rule":"clipRule","vector-effect":"strokeUniform","image-rendering":"imageSmoothing"},f={stroke:"strokeOpacity",fill:"fillOpacity"},d="font-size",p="clip-path";function g(t){return t in u?u[t]:t}function v(t,i,n,r){var a,c="[object Array]"===Object.prototype.toString.call(i);if("fill"!==t&&"stroke"!==t||"none"!==i){if("strokeUniform"===t)return"non-scaling-stroke"===i;if("strokeDashArray"===t)i="none"===i?null:i.replace(/,/g," ").split(/\s+/).map(parseFloat);else if("transformMatrix"===t)i=n&&n.transformMatrix?s(n.transformMatrix,e.parseTransformAttribute(i)):e.parseTransformAttribute(i);else if("visible"===t)i="none"!==i&&"hidden"!==i,n&&!1===n.visible&&(i=!1);else if("opacity"===t)i=parseFloat(i),n&&"undefined"!==typeof n.opacity&&(i*=n.opacity);else if("textAnchor"===t)i="start"===i?"left":"end"===i?"right":"center";else if("charSpacing"===t)a=o(i,r)/r*1e3;else if("paintFirst"===t){var l=i.indexOf("fill"),h=i.indexOf("stroke");i="fill";(l>-1&&h>-1&&h<l||-1===l&&h>-1)&&(i="stroke")}else{if("href"===t||"xlink:href"===t||"font"===t)return i;if("imageSmoothing"===t)return"optimizeQuality"===i;a=c?i.map(o):o(i,r)}}else i="";return!c&&isNaN(a)?i:a}function m(t){return new RegExp("^("+t.join("|")+")\\b","i")}function y(t){for(var i in f)if("undefined"!==typeof t[f[i]]&&""!==t[i]){if("undefined"===typeof t[i]){if(!e.Object.prototype[i])continue;t[i]=e.Object.prototype[i]}if(0!==t[i].indexOf("url(")){var n=new e.Color(t[i]);t[i]=n.setAlpha(r(n.getAlpha()*t[f[i]],2)).toRgba()}}return t}function b(t,e){var i,n,r,o,s=[];for(r=0,o=e.length;r<o;r++)i=e[r],n=t.getElementsByTagName(i),s=s.concat(Array.prototype.slice.call(n));return s}function w(t,e){var i,n;t.replace(/;\s*$/,"").split(";").forEach((function(t){var r=t.split(":");i=r[0].trim().toLowerCase(),n=r[1].trim(),e[i]=n}))}function x(t,e){var i,n;for(var r in t)"undefined"!==typeof t[r]&&(i=r.toLowerCase(),n=t[r],e[i]=n)}function _(t,i){var n={};for(var r in e.cssRules[i])if(S(t,r.split(" ")))for(var o in e.cssRules[i][r])n[o]=e.cssRules[i][r][o];return n}function S(t,e){var i,n=!0;return i=T(t,e.pop()),i&&e.length&&(n=C(t,e)),i&&n&&0===e.length}function C(t,e){var i,n=!0;while(t.parentNode&&1===t.parentNode.nodeType&&e.length)n&&(i=e.pop()),t=t.parentNode,n=T(t,i);return 0===e.length}function T(t,e){var i,n,r=t.nodeName,o=t.getAttribute("class"),s=t.getAttribute("id");if(i=new RegExp("^"+r,"i"),e=e.replace(i,""),s&&e.length&&(i=new RegExp("#"+s+"(?![a-zA-Z\\-]+)","i"),e=e.replace(i,"")),o&&e.length)for(o=o.split(" "),n=o.length;n--;)i=new RegExp("\\."+o[n]+"(?![a-zA-Z\\-]+)","i"),e=e.replace(i,"");return 0===e.length}function O(t,e){var i;if(t.getElementById&&(i=t.getElementById(e)),i)return i;var n,r,o,s=t.getElementsByTagName("*");for(r=0,o=s.length;r<o;r++)if(n=s[r],e===n.getAttribute("id"))return n}function k(t){var i=b(t,["use","svg:use"]),n=0;while(i.length&&n<i.length){var r,o,s,a,c,l=i[n],h=(l.getAttribute("xlink:href")||l.getAttribute("href")).substr(1),u=l.getAttribute("x")||0,f=l.getAttribute("y")||0,d=O(t,h).cloneNode(!0),p=(d.getAttribute("transform")||"")+" translate("+u+", "+f+")",g=i.length,v=e.svgNS;if(A(d),/^svg$/i.test(d.nodeName)){var m=d.ownerDocument.createElementNS(v,"g");for(s=0,a=d.attributes,c=a.length;s<c;s++)o=a.item(s),m.setAttributeNS(v,o.nodeName,o.nodeValue);while(d.firstChild)m.appendChild(d.firstChild);d=m}for(s=0,a=l.attributes,c=a.length;s<c;s++)o=a.item(s),"x"!==o.nodeName&&"y"!==o.nodeName&&"xlink:href"!==o.nodeName&&"href"!==o.nodeName&&("transform"===o.nodeName?p=o.nodeValue+" "+p:d.setAttribute(o.nodeName,o.nodeValue));d.setAttribute("transform",p),d.setAttribute("instantiated_by_use","1"),d.removeAttribute("id"),r=l.parentNode,r.replaceChild(d,l),i.length===g&&n++}}e.svgValidTagNamesRegEx=m(a),e.svgViewBoxElementsRegEx=m(c),e.svgInvalidAncestorsRegEx=m(l),e.svgValidParentsRegEx=m(h),e.cssRules={},e.gradientDefs={},e.clipPaths={},e.parseTransformAttribute=function(){function t(t,i){var n=e.util.cos(i[0]),r=e.util.sin(i[0]),o=0,s=0;3===i.length&&(o=i[1],s=i[2]),t[0]=n,t[1]=r,t[2]=-r,t[3]=n,t[4]=o-(n*o-r*s),t[5]=s-(r*o+n*s)}function i(t,e){var i=e[0],n=2===e.length?e[1]:e[0];t[0]=i,t[3]=n}function n(t,i,n){t[n]=Math.tan(e.util.degreesToRadians(i[0]))}function r(t,e){t[4]=e[0],2===e.length&&(t[5]=e[1])}var o=e.iMatrix,s=e.reNum,a=e.commaWsp,c="(?:(skewX)\\s*\\(\\s*("+s+")\\s*\\))",l="(?:(skewY)\\s*\\(\\s*("+s+")\\s*\\))",h="(?:(rotate)\\s*\\(\\s*("+s+")(?:"+a+"("+s+")"+a+"("+s+"))?\\s*\\))",u="(?:(scale)\\s*\\(\\s*("+s+")(?:"+a+"("+s+"))?\\s*\\))",f="(?:(translate)\\s*\\(\\s*("+s+")(?:"+a+"("+s+"))?\\s*\\))",d="(?:(matrix)\\s*\\(\\s*("+s+")"+a+"("+s+")"+a+"("+s+")"+a+"("+s+")"+a+"("+s+")"+a+"("+s+")\\s*\\))",p="(?:"+d+"|"+f+"|"+u+"|"+h+"|"+c+"|"+l+")",g="(?:"+p+"(?:"+a+"*"+p+")*)",v="^\\s*(?:"+g+"?)\\s*$",m=new RegExp(v),y=new RegExp(p,"g");return function(s){var a=o.concat(),c=[];if(!s||s&&!m.test(s))return a;s.replace(y,(function(s){var l=new RegExp(p).exec(s).filter((function(t){return!!t})),h=l[1],u=l.slice(2).map(parseFloat);switch(h){case"translate":r(a,u);break;case"rotate":u[0]=e.util.degreesToRadians(u[0]),t(a,u);break;case"scale":i(a,u);break;case"skewX":n(a,u,2);break;case"skewY":n(a,u,1);break;case"matrix":a=u;break}c.push(a.concat()),a=o.concat()}));var l=c[0];while(c.length>1)c.shift(),l=e.util.multiplyTransformMatrices(l,c[0]);return l}}();var E=new RegExp("^\\s*("+e.reNum+"+)\\s*,?\\s*("+e.reNum+"+)\\s*,?\\s*("+e.reNum+"+)\\s*,?\\s*("+e.reNum+"+)\\s*$");function A(t){if(e.svgViewBoxElementsRegEx.test(t.nodeName)){var i,n,r,s,a=t.getAttribute("viewBox"),c=1,l=1,h=0,u=0,f=t.getAttribute("width"),d=t.getAttribute("height"),p=t.getAttribute("x")||0,g=t.getAttribute("y")||0,v=t.getAttribute("preserveAspectRatio")||"",m=!a||!(a=a.match(E)),y=!f||!d||"100%"===f||"100%"===d,b=m&&y,w={},x="",_=0,S=0;if(w.width=0,w.height=0,w.toBeParsed=b,m&&(p||g)&&"#document"!==t.parentNode.nodeName&&(x=" translate("+o(p)+" "+o(g)+") ",r=(t.getAttribute("transform")||"")+x,t.setAttribute("transform",r),t.removeAttribute("x"),t.removeAttribute("y")),b)return w;if(m)return w.width=o(f),w.height=o(d),w;if(h=-parseFloat(a[1]),u=-parseFloat(a[2]),i=parseFloat(a[3]),n=parseFloat(a[4]),w.minX=h,w.minY=u,w.viewBoxWidth=i,w.viewBoxHeight=n,y?(w.width=i,w.height=n):(w.width=o(f),w.height=o(d),c=w.width/i,l=w.height/n),v=e.util.parsePreserveAspectRatioAttribute(v),"none"!==v.alignX&&("meet"===v.meetOrSlice&&(l=c=c>l?l:c),"slice"===v.meetOrSlice&&(l=c=c>l?c:l),_=w.width-i*c,S=w.height-n*c,"Mid"===v.alignX&&(_/=2),"Mid"===v.alignY&&(S/=2),"Min"===v.alignX&&(_=0),"Min"===v.alignY&&(S=0)),1===c&&1===l&&0===h&&0===u&&0===p&&0===g)return w;if((p||g)&&"#document"!==t.parentNode.nodeName&&(x=" translate("+o(p)+" "+o(g)+") "),r=x+" matrix("+c+" 0 0 "+l+" "+(h*c+_)+" "+(u*l+S)+") ","svg"===t.nodeName){s=t.ownerDocument.createElementNS(e.svgNS,"g");while(t.firstChild)s.appendChild(t.firstChild);t.appendChild(s)}else s=t,s.removeAttribute("x"),s.removeAttribute("y"),r=s.getAttribute("transform")+r;return s.setAttribute("transform",r),w}}function P(t,e){while(t&&(t=t.parentNode))if(t.nodeName&&e.test(t.nodeName.replace("svg:",""))&&!t.getAttribute("instantiated_by_use"))return!0;return!1}function D(t,e){var i=["gradientTransform","x1","x2","y1","y2","gradientUnits","cx","cy","r","fx","fy"],n="xlink:href",r=e.getAttribute(n).substr(1),o=O(t,r);if(o&&o.getAttribute(n)&&D(t,o),i.forEach((function(t){o&&!e.hasAttribute(t)&&o.hasAttribute(t)&&e.setAttribute(t,o.getAttribute(t))})),!e.children.length){var s=o.cloneNode(!0);while(s.firstChild)e.appendChild(s.firstChild)}e.removeAttribute(n)}e.parseSVGDocument=function(t,i,r,o){if(t){k(t);var s,a,c=e.Object.__uid++,l=A(t),h=e.util.toArray(t.getElementsByTagName("*"));if(l.crossOrigin=o&&o.crossOrigin,l.svgUid=c,0===h.length&&e.isLikelyNode){h=t.selectNodes('//*[name(.)!="svg"]');var u=[];for(s=0,a=h.length;s<a;s++)u[s]=h[s];h=u}var f=h.filter((function(t){return A(t),e.svgValidTagNamesRegEx.test(t.nodeName.replace("svg:",""))&&!P(t,e.svgInvalidAncestorsRegEx)}));if(!f||f&&!f.length)i&&i([],{});else{var d={};h.filter((function(t){return"clipPath"===t.nodeName.replace("svg:","")})).forEach((function(t){var i=t.getAttribute("id");d[i]=e.util.toArray(t.getElementsByTagName("*")).filter((function(t){return e.svgValidTagNamesRegEx.test(t.nodeName.replace("svg:",""))}))})),e.gradientDefs[c]=e.getGradientDefs(t),e.cssRules[c]=e.getCSSRules(t),e.clipPaths[c]=d,e.parseElements(f,(function(t,n){i&&(i(t,l,n,h),delete e.gradientDefs[c],delete e.cssRules[c],delete e.clipPaths[c])}),n(l),r,o)}}};var M=new RegExp("(normal|italic)?\\s*(normal|small-caps)?\\s*(normal|bold|bolder|lighter|100|200|300|400|500|600|700|800|900)?\\s*("+e.reNum+"(?:px|cm|mm|em|pt|pc|in)*)(?:\\/(normal|"+e.reNum+"))?\\s+(.*)");i(e,{parseFontDeclaration:function(t,e){var i=t.match(M);if(i){var n=i[1],r=i[3],s=i[4],a=i[5],c=i[6];n&&(e.fontStyle=n),r&&(e.fontWeight=isNaN(parseFloat(r))?r:parseFloat(r)),s&&(e.fontSize=o(s)),c&&(e.fontFamily=c),a&&(e.lineHeight="normal"===a?1:a)}},getGradientDefs:function(t){var e,i=["linearGradient","radialGradient","svg:linearGradient","svg:radialGradient"],n=b(t,i),r=0,o={};r=n.length;while(r--)e=n[r],e.getAttribute("xlink:href")&&D(t,e),o[e.getAttribute("id")]=e;return o},parseAttributes:function(t,n,r){if(t){var s,a,c,l={};"undefined"===typeof r&&(r=t.getAttribute("svgUid")),t.parentNode&&e.svgValidParentsRegEx.test(t.parentNode.nodeName)&&(l=e.parseAttributes(t.parentNode,n,r));var h=n.reduce((function(e,i){return s=t.getAttribute(i),s&&(e[i]=s),e}),{}),u=i(_(t,r),e.parseStyleAttribute(t));h=i(h,u),u[p]&&t.setAttribute(p,u[p]),a=c=l.fontSize||e.Text.DEFAULT_SVG_FONT_SIZE,h[d]&&(h[d]=a=o(h[d],c));var f,m,b={};for(var w in h)f=g(w),m=v(f,h[w],l,a),b[f]=m;b&&b.font&&e.parseFontDeclaration(b.font,b);var x=i(l,b);return e.svgValidParentsRegEx.test(t.nodeName)?x:y(x)}},parseElements:function(t,i,n,r,o){new e.ElementsParser(t,i,n,r,o).parse()},parseStyleAttribute:function(t){var e={},i=t.getAttribute("style");return i?("string"===typeof i?w(i,e):x(i,e),e):e},parsePointsAttribute:function(t){if(!t)return null;t=t.replace(/,/g," ").trim(),t=t.split(/\s+/);var e,i,n=[];for(e=0,i=t.length;e<i;e+=2)n.push({x:parseFloat(t[e]),y:parseFloat(t[e+1])});return n},getCSSRules:function(t){var i,n,r,o=t.getElementsByTagName("style"),s={};for(i=0,n=o.length;i<n;i++){var a=o[i].textContent;a=a.replace(/\/\*[\s\S]*?\*\//g,""),""!==a.trim()&&(r=a.match(/[^{]*\{[\s\S]*?\}/g),r=r.map((function(t){return t.trim()})),r.forEach((function(t){var r=t.match(/([\s\S]*?)\s*\{([^}]*)\}/),o={},a=r[2].trim(),c=a.replace(/;$/,"").split(/\s*;\s*/);for(i=0,n=c.length;i<n;i++){var l=c[i].split(/\s*:\s*/),h=l[0],u=l[1];o[h]=u}t=r[1],t.split(",").forEach((function(t){t=t.replace(/^svg/i,"").trim(),""!==t&&(s[t]?e.util.object.extend(s[t],o):s[t]=e.util.object.clone(o))}))})))}return s},loadSVGFromURL:function(t,i,n,r){function o(t){var o=t.responseXML;if(!o||!o.documentElement)return i&&i(null),!1;e.parseSVGDocument(o.documentElement,(function(t,e,n,r){i&&i(t,e,n,r)}),n,r)}t=t.replace(/^\n\s*/,"").trim(),new e.util.request(t,{method:"get",onComplete:o})},loadSVGFromString:function(t,i,n,r){var o=new e.window.DOMParser,s=o.parseFromString(t.trim(),"text/xml");e.parseSVGDocument(s.documentElement,(function(t,e,n,r){i(t,e,n,r)}),n,r)}})}(e),n.ElementsParser=function(t,e,i,n,r,o){this.elements=t,this.callback=e,this.options=i,this.reviver=n,this.svgUid=i&&i.svgUid||0,this.parsingOptions=r,this.regexUrl=/^url\(['"]?#([^'"]+)['"]?\)/g,this.doc=o},function(t){t.parse=function(){this.instances=new Array(this.elements.length),this.numElements=this.elements.length,this.createObjects()},t.createObjects=function(){var t=this;this.elements.forEach((function(e,i){e.setAttribute("svgUid",t.svgUid),t.createObject(e,i)}))},t.findTag=function(t){return n[n.util.string.capitalize(t.tagName.replace("svg:",""))]},t.createObject=function(t,e){var i=this.findTag(t);if(i&&i.fromElement)try{i.fromElement(t,this.createCallback(e,t),this.options)}catch(r){n.log(r)}else this.checkIfDone()},t.createCallback=function(t,e){var i=this;return function(r){var o;i.resolveGradient(r,e,"fill"),i.resolveGradient(r,e,"stroke"),r instanceof n.Image&&r._originalElement&&(o=r.parsePreserveAspectRatioAttribute(e)),r._removeTransformMatrix(o),i.resolveClipPath(r,e),i.reviver&&i.reviver(e,r),i.instances[t]=r,i.checkIfDone()}},t.extractPropertyDefinition=function(t,e,i){var r=t[e],o=this.regexUrl;if(o.test(r)){o.lastIndex=0;var s=o.exec(r)[1];return o.lastIndex=0,n[i][this.svgUid][s]}},t.resolveGradient=function(t,e,i){var r=this.extractPropertyDefinition(t,i,"gradientDefs");if(r){var o=e.getAttribute(i+"-opacity"),s=n.Gradient.fromElement(r,t,o,this.options);t.set(i,s)}},t.createClipPathCallback=function(t,e){return function(t){t._removeTransformMatrix(),t.fillRule=t.clipRule,e.push(t)}},t.resolveClipPath=function(t,e){var i,r,o,s,a,c=this.extractPropertyDefinition(t,"clipPath","clipPaths");if(c){s=[],o=n.util.invertTransform(t.calcTransformMatrix());var l=c[0].parentNode,h=e;while(h.parentNode&&h.getAttribute("clip-path")!==t.clipPath)h=h.parentNode;h.parentNode.appendChild(l);for(var u=0;u<c.length;u++)i=c[u],r=this.findTag(i),r.fromElement(i,this.createClipPathCallback(t,s),this.options);c=1===s.length?s[0]:new n.Group(s),a=n.util.multiplyTransformMatrices(o,c.calcTransformMatrix()),c.clipPath&&this.resolveClipPath(c,h);var f=n.util.qrDecompose(a);c.flipX=!1,c.flipY=!1,c.set("scaleX",f.scaleX),c.set("scaleY",f.scaleY),c.angle=f.angle,c.skewX=f.skewX,c.skewY=0,c.setPositionByOrigin({x:f.translateX,y:f.translateY},"center","center"),t.clipPath=c}else delete t.clipPath},t.checkIfDone=function(){0===--this.numElements&&(this.instances=this.instances.filter((function(t){return null!=t})),this.callback(this.instances,this.elements))}}(n.ElementsParser.prototype),function(t){"use strict";var e=t.fabric||(t.fabric={});function i(t,e){this.x=t,this.y=e}e.Point?e.warn("fabric.Point is already defined"):(e.Point=i,i.prototype={type:"point",constructor:i,add:function(t){return new i(this.x+t.x,this.y+t.y)},addEquals:function(t){return this.x+=t.x,this.y+=t.y,this},scalarAdd:function(t){return new i(this.x+t,this.y+t)},scalarAddEquals:function(t){return this.x+=t,this.y+=t,this},subtract:function(t){return new i(this.x-t.x,this.y-t.y)},subtractEquals:function(t){return this.x-=t.x,this.y-=t.y,this},scalarSubtract:function(t){return new i(this.x-t,this.y-t)},scalarSubtractEquals:function(t){return this.x-=t,this.y-=t,this},multiply:function(t){return new i(this.x*t,this.y*t)},multiplyEquals:function(t){return this.x*=t,this.y*=t,this},divide:function(t){return new i(this.x/t,this.y/t)},divideEquals:function(t){return this.x/=t,this.y/=t,this},eq:function(t){return this.x===t.x&&this.y===t.y},lt:function(t){return this.x<t.x&&this.y<t.y},lte:function(t){return this.x<=t.x&&this.y<=t.y},gt:function(t){return this.x>t.x&&this.y>t.y},gte:function(t){return this.x>=t.x&&this.y>=t.y},lerp:function(t,e){return"undefined"===typeof e&&(e=.5),e=Math.max(Math.min(1,e),0),new i(this.x+(t.x-this.x)*e,this.y+(t.y-this.y)*e)},distanceFrom:function(t){var e=this.x-t.x,i=this.y-t.y;return Math.sqrt(e*e+i*i)},midPointFrom:function(t){return this.lerp(t)},min:function(t){return new i(Math.min(this.x,t.x),Math.min(this.y,t.y))},max:function(t){return new i(Math.max(this.x,t.x),Math.max(this.y,t.y))},toString:function(){return this.x+","+this.y},setXY:function(t,e){return this.x=t,this.y=e,this},setX:function(t){return this.x=t,this},setY:function(t){return this.y=t,this},setFromPoint:function(t){return this.x=t.x,this.y=t.y,this},swap:function(t){var e=this.x,i=this.y;this.x=t.x,this.y=t.y,t.x=e,t.y=i},clone:function(){return new i(this.x,this.y)}})}(e),function(t){"use strict";var e=t.fabric||(t.fabric={});function i(t){this.status=t,this.points=[]}e.Intersection?e.warn("fabric.Intersection is already defined"):(e.Intersection=i,e.Intersection.prototype={constructor:i,appendPoint:function(t){return this.points.push(t),this},appendPoints:function(t){return this.points=this.points.concat(t),this}},e.Intersection.intersectLineLine=function(t,n,r,o){var s,a=(o.x-r.x)*(t.y-r.y)-(o.y-r.y)*(t.x-r.x),c=(n.x-t.x)*(t.y-r.y)-(n.y-t.y)*(t.x-r.x),l=(o.y-r.y)*(n.x-t.x)-(o.x-r.x)*(n.y-t.y);if(0!==l){var h=a/l,u=c/l;0<=h&&h<=1&&0<=u&&u<=1?(s=new i("Intersection"),s.appendPoint(new e.Point(t.x+h*(n.x-t.x),t.y+h*(n.y-t.y)))):s=new i}else s=new i(0===a||0===c?"Coincident":"Parallel");return s},e.Intersection.intersectLinePolygon=function(t,e,n){var r,o,s,a,c=new i,l=n.length;for(a=0;a<l;a++)r=n[a],o=n[(a+1)%l],s=i.intersectLineLine(t,e,r,o),c.appendPoints(s.points);return c.points.length>0&&(c.status="Intersection"),c},e.Intersection.intersectPolygonPolygon=function(t,e){var n,r=new i,o=t.length;for(n=0;n<o;n++){var s=t[n],a=t[(n+1)%o],c=i.intersectLinePolygon(s,a,e);r.appendPoints(c.points)}return r.points.length>0&&(r.status="Intersection"),r},e.Intersection.intersectPolygonRectangle=function(t,n,r){var o=n.min(r),s=n.max(r),a=new e.Point(s.x,o.y),c=new e.Point(o.x,s.y),l=i.intersectLinePolygon(o,a,t),h=i.intersectLinePolygon(a,s,t),u=i.intersectLinePolygon(s,c,t),f=i.intersectLinePolygon(c,o,t),d=new i;return d.appendPoints(l.points),d.appendPoints(h.points),d.appendPoints(u.points),d.appendPoints(f.points),d.points.length>0&&(d.status="Intersection"),d})}(e),function(t){"use strict";var e=t.fabric||(t.fabric={});function i(t){t?this._tryParsingColor(t):this.setSource([0,0,0,1])}function n(t,e,i){return i<0&&(i+=1),i>1&&(i-=1),i<1/6?t+6*(e-t)*i:i<.5?e:i<2/3?t+(e-t)*(2/3-i)*6:t}e.Color?e.warn("fabric.Color is already defined."):(e.Color=i,e.Color.prototype={_tryParsingColor:function(t){var e;t in i.colorNameMap&&(t=i.colorNameMap[t]),"transparent"===t&&(e=[255,255,255,0]),e||(e=i.sourceFromHex(t)),e||(e=i.sourceFromRgb(t)),e||(e=i.sourceFromHsl(t)),e||(e=[0,0,0,1]),e&&this.setSource(e)},_rgbToHsl:function(t,i,n){t/=255,i/=255,n/=255;var r,o,s,a=e.util.array.max([t,i,n]),c=e.util.array.min([t,i,n]);if(s=(a+c)/2,a===c)r=o=0;else{var l=a-c;switch(o=s>.5?l/(2-a-c):l/(a+c),a){case t:r=(i-n)/l+(i<n?6:0);break;case i:r=(n-t)/l+2;break;case n:r=(t-i)/l+4;break}r/=6}return[Math.round(360*r),Math.round(100*o),Math.round(100*s)]},getSource:function(){return this._source},setSource:function(t){this._source=t},toRgb:function(){var t=this.getSource();return"rgb("+t[0]+","+t[1]+","+t[2]+")"},toRgba:function(){var t=this.getSource();return"rgba("+t[0]+","+t[1]+","+t[2]+","+t[3]+")"},toHsl:function(){var t=this.getSource(),e=this._rgbToHsl(t[0],t[1],t[2]);return"hsl("+e[0]+","+e[1]+"%,"+e[2]+"%)"},toHsla:function(){var t=this.getSource(),e=this._rgbToHsl(t[0],t[1],t[2]);return"hsla("+e[0]+","+e[1]+"%,"+e[2]+"%,"+t[3]+")"},toHex:function(){var t,e,i,n=this.getSource();return t=n[0].toString(16),t=1===t.length?"0"+t:t,e=n[1].toString(16),e=1===e.length?"0"+e:e,i=n[2].toString(16),i=1===i.length?"0"+i:i,t.toUpperCase()+e.toUpperCase()+i.toUpperCase()},toHexa:function(){var t,e=this.getSource();return t=Math.round(255*e[3]),t=t.toString(16),t=1===t.length?"0"+t:t,this.toHex()+t.toUpperCase()},getAlpha:function(){return this.getSource()[3]},setAlpha:function(t){var e=this.getSource();return e[3]=t,this.setSource(e),this},toGrayscale:function(){var t=this.getSource(),e=parseInt((.3*t[0]+.59*t[1]+.11*t[2]).toFixed(0),10),i=t[3];return this.setSource([e,e,e,i]),this},toBlackWhite:function(t){var e=this.getSource(),i=(.3*e[0]+.59*e[1]+.11*e[2]).toFixed(0),n=e[3];return t=t||127,i=Number(i)<Number(t)?0:255,this.setSource([i,i,i,n]),this},overlayWith:function(t){t instanceof i||(t=new i(t));var e,n=[],r=this.getAlpha(),o=.5,s=this.getSource(),a=t.getSource();for(e=0;e<3;e++)n.push(Math.round(s[e]*(1-o)+a[e]*o));return n[3]=r,this.setSource(n),this}},e.Color.reRGBa=/^rgba?\(\s*(\d{1,3}(?:\.\d+)?\%?)\s*,\s*(\d{1,3}(?:\.\d+)?\%?)\s*,\s*(\d{1,3}(?:\.\d+)?\%?)\s*(?:\s*,\s*((?:\d*\.?\d+)?)\s*)?\)$/i,e.Color.reHSLa=/^hsla?\(\s*(\d{1,3})\s*,\s*(\d{1,3}\%)\s*,\s*(\d{1,3}\%)\s*(?:\s*,\s*(\d+(?:\.\d+)?)\s*)?\)$/i,e.Color.reHex=/^#?([0-9a-f]{8}|[0-9a-f]{6}|[0-9a-f]{4}|[0-9a-f]{3})$/i,e.Color.colorNameMap={aliceblue:"#F0F8FF",antiquewhite:"#FAEBD7",aqua:"#00FFFF",aquamarine:"#7FFFD4",azure:"#F0FFFF",beige:"#F5F5DC",bisque:"#FFE4C4",black:"#000000",blanchedalmond:"#FFEBCD",blue:"#0000FF",blueviolet:"#8A2BE2",brown:"#A52A2A",burlywood:"#DEB887",cadetblue:"#5F9EA0",chartreuse:"#7FFF00",chocolate:"#D2691E",coral:"#FF7F50",cornflowerblue:"#6495ED",cornsilk:"#FFF8DC",crimson:"#DC143C",cyan:"#00FFFF",darkblue:"#00008B",darkcyan:"#008B8B",darkgoldenrod:"#B8860B",darkgray:"#A9A9A9",darkgrey:"#A9A9A9",darkgreen:"#006400",darkkhaki:"#BDB76B",darkmagenta:"#8B008B",darkolivegreen:"#556B2F",darkorange:"#FF8C00",darkorchid:"#9932CC",darkred:"#8B0000",darksalmon:"#E9967A",darkseagreen:"#8FBC8F",darkslateblue:"#483D8B",darkslategray:"#2F4F4F",darkslategrey:"#2F4F4F",darkturquoise:"#00CED1",darkviolet:"#9400D3",deeppink:"#FF1493",deepskyblue:"#00BFFF",dimgray:"#696969",dimgrey:"#696969",dodgerblue:"#1E90FF",firebrick:"#B22222",floralwhite:"#FFFAF0",forestgreen:"#228B22",fuchsia:"#FF00FF",gainsboro:"#DCDCDC",ghostwhite:"#F8F8FF",gold:"#FFD700",goldenrod:"#DAA520",gray:"#808080",grey:"#808080",green:"#008000",greenyellow:"#ADFF2F",honeydew:"#F0FFF0",hotpink:"#FF69B4",indianred:"#CD5C5C",indigo:"#4B0082",ivory:"#FFFFF0",khaki:"#F0E68C",lavender:"#E6E6FA",lavenderblush:"#FFF0F5",lawngreen:"#7CFC00",lemonchiffon:"#FFFACD",lightblue:"#ADD8E6",lightcoral:"#F08080",lightcyan:"#E0FFFF",lightgoldenrodyellow:"#FAFAD2",lightgray:"#D3D3D3",lightgrey:"#D3D3D3",lightgreen:"#90EE90",lightpink:"#FFB6C1",lightsalmon:"#FFA07A",lightseagreen:"#20B2AA",lightskyblue:"#87CEFA",lightslategray:"#778899",lightslategrey:"#778899",lightsteelblue:"#B0C4DE",lightyellow:"#FFFFE0",lime:"#00FF00",limegreen:"#32CD32",linen:"#FAF0E6",magenta:"#FF00FF",maroon:"#800000",mediumaquamarine:"#66CDAA",mediumblue:"#0000CD",mediumorchid:"#BA55D3",mediumpurple:"#9370DB",mediumseagreen:"#3CB371",mediumslateblue:"#7B68EE",mediumspringgreen:"#00FA9A",mediumturquoise:"#48D1CC",mediumvioletred:"#C71585",midnightblue:"#191970",mintcream:"#F5FFFA",mistyrose:"#FFE4E1",moccasin:"#FFE4B5",navajowhite:"#FFDEAD",navy:"#000080",oldlace:"#FDF5E6",olive:"#808000",olivedrab:"#6B8E23",orange:"#FFA500",orangered:"#FF4500",orchid:"#DA70D6",palegoldenrod:"#EEE8AA",palegreen:"#98FB98",paleturquoise:"#AFEEEE",palevioletred:"#DB7093",papayawhip:"#FFEFD5",peachpuff:"#FFDAB9",peru:"#CD853F",pink:"#FFC0CB",plum:"#DDA0DD",powderblue:"#B0E0E6",purple:"#800080",rebeccapurple:"#663399",red:"#FF0000",rosybrown:"#BC8F8F",royalblue:"#4169E1",saddlebrown:"#8B4513",salmon:"#FA8072",sandybrown:"#F4A460",seagreen:"#2E8B57",seashell:"#FFF5EE",sienna:"#A0522D",silver:"#C0C0C0",skyblue:"#87CEEB",slateblue:"#6A5ACD",slategray:"#708090",slategrey:"#708090",snow:"#FFFAFA",springgreen:"#00FF7F",steelblue:"#4682B4",tan:"#D2B48C",teal:"#008080",thistle:"#D8BFD8",tomato:"#FF6347",turquoise:"#40E0D0",violet:"#EE82EE",wheat:"#F5DEB3",white:"#FFFFFF",whitesmoke:"#F5F5F5",yellow:"#FFFF00",yellowgreen:"#9ACD32"},e.Color.fromRgb=function(t){return i.fromSource(i.sourceFromRgb(t))},e.Color.sourceFromRgb=function(t){var e=t.match(i.reRGBa);if(e){var n=parseInt(e[1],10)/(/%$/.test(e[1])?100:1)*(/%$/.test(e[1])?255:1),r=parseInt(e[2],10)/(/%$/.test(e[2])?100:1)*(/%$/.test(e[2])?255:1),o=parseInt(e[3],10)/(/%$/.test(e[3])?100:1)*(/%$/.test(e[3])?255:1);return[parseInt(n,10),parseInt(r,10),parseInt(o,10),e[4]?parseFloat(e[4]):1]}},e.Color.fromRgba=i.fromRgb,e.Color.fromHsl=function(t){return i.fromSource(i.sourceFromHsl(t))},e.Color.sourceFromHsl=function(t){var e=t.match(i.reHSLa);if(e){var r,o,s,a=(parseFloat(e[1])%360+360)%360/360,c=parseFloat(e[2])/(/%$/.test(e[2])?100:1),l=parseFloat(e[3])/(/%$/.test(e[3])?100:1);if(0===c)r=o=s=l;else{var h=l<=.5?l*(c+1):l+c-l*c,u=2*l-h;r=n(u,h,a+1/3),o=n(u,h,a),s=n(u,h,a-1/3)}return[Math.round(255*r),Math.round(255*o),Math.round(255*s),e[4]?parseFloat(e[4]):1]}},e.Color.fromHsla=i.fromHsl,e.Color.fromHex=function(t){return i.fromSource(i.sourceFromHex(t))},e.Color.sourceFromHex=function(t){if(t.match(i.reHex)){var e=t.slice(t.indexOf("#")+1),n=3===e.length||4===e.length,r=8===e.length||4===e.length,o=n?e.charAt(0)+e.charAt(0):e.substring(0,2),s=n?e.charAt(1)+e.charAt(1):e.substring(2,4),a=n?e.charAt(2)+e.charAt(2):e.substring(4,6),c=r?n?e.charAt(3)+e.charAt(3):e.substring(6,8):"FF";return[parseInt(o,16),parseInt(s,16),parseInt(a,16),parseFloat((parseInt(c,16)/255).toFixed(2))]}},e.Color.fromSource=function(t){var e=new i;return e.setSource(t),e})}(e),function(t){"use strict";var e=t.fabric||(t.fabric={}),i=["e","se","s","sw","w","nw","n","ne","e"],n=["ns","nesw","ew","nwse"],r={},o="left",s="top",a="right",c="bottom",l="center",h={top:c,bottom:s,left:a,right:o,center:l},u=e.util.radiansToDegrees,f=Math.sign||function(t){return(t>0)-(t<0)||+t};function d(t,e){var i=t.angle+u(Math.atan2(e.y,e.x))+360;return Math.round(i%360/45)}function p(t,i){var n=i.transform.target,r=n.canvas,o=e.util.object.clone(i);o.target=n,r&&r.fire("object:"+t,o),n.fire(t,i)}function g(t,e){var i=e.canvas,n=i.uniScaleKey,r=t[n];return i.uniformScaling&&!r||!i.uniformScaling&&r}function v(t){return t.originX===l&&t.originY===l}function m(t,e,i){var n=t.lockScalingX,r=t.lockScalingY;return!(!n||!r)||(!(e||!n&&!r||!i)||(!(!n||"x"!==e)||!(!r||"y"!==e)))}function y(t,e,n){var r="not-allowed",o=g(t,n),s="";if(0!==e.x&&0===e.y?s="x":0===e.x&&0!==e.y&&(s="y"),m(n,s,o))return r;var a=d(n,e);return i[a]+"-resize"}function b(t,e,i){var r="not-allowed";if(0!==e.x&&i.lockSkewingY)return r;if(0!==e.y&&i.lockSkewingX)return r;var o=d(i,e)%4;return n[o]+"-resize"}function w(t,e,i){return t[i.canvas.altActionKey]?r.skewCursorStyleHandler(t,e,i):r.scaleCursorStyleHandler(t,e,i)}function x(t,e,i){var n=t[i.canvas.altActionKey];return 0===e.x?n?"skewX":"scaleY":0===e.y?n?"skewY":"scaleX":void 0}function _(t,e,i){return i.lockRotation?"not-allowed":e.cursorStyle}function S(t,e,i,n){return{e:t,transform:e,pointer:{x:i,y:n}}}function C(t){return function(e,i,n,r){var o=i.target,s=o.getCenterPoint(),a=o.translateToOriginPoint(s,i.originX,i.originY),c=t(e,i,n,r);return o.setPositionByOrigin(a,i.originX,i.originY),c}}function T(t,i,n,r,o){var s=t.target,a=s.controls[t.corner],c=s.canvas.getZoom(),l=s.padding/c,h=s.toLocalPoint(new e.Point(r,o),i,n);return h.x>=l&&(h.x-=l),h.x<=-l&&(h.x+=l),h.y>=l&&(h.y-=l),h.y<=l&&(h.y+=l),h.x-=a.offsetX,h.y-=a.offsetY,h}function O(t){return t.flipX!==t.flipY}function k(t,e,i,n,r){if(0!==t[e]){var o=t._getTransformedDimensions()[n],s=r/o*t[i];t.set(i,s)}}function E(t,e,i,n){var r,l=e.target,h=l._getTransformedDimensions(0,l.skewY),f=T(e,e.originX,e.originY,i,n),d=Math.abs(2*f.x)-h.x,g=l.skewX;d<2?r=0:(r=u(Math.atan2(d/l.scaleX,h.y/l.scaleY)),e.originX===o&&e.originY===c&&(r=-r),e.originX===a&&e.originY===s&&(r=-r),O(l)&&(r=-r));var v=g!==r;if(v){var m=l._getTransformedDimensions().y;l.set("skewX",r),k(l,"skewY","scaleY","y",m),p("skewing",S(t,e,i,n))}return v}function A(t,e,i,n){var r,l=e.target,h=l._getTransformedDimensions(l.skewX,0),f=T(e,e.originX,e.originY,i,n),d=Math.abs(2*f.y)-h.y,g=l.skewY;d<2?r=0:(r=u(Math.atan2(d/l.scaleY,h.x/l.scaleX)),e.originX===o&&e.originY===c&&(r=-r),e.originX===a&&e.originY===s&&(r=-r),O(l)&&(r=-r));var v=g!==r;if(v){var m=l._getTransformedDimensions().x;l.set("skewY",r),k(l,"skewX","scaleX","x",m),p("skewing",S(t,e,i,n))}return v}function P(t,e,i,n){var r,c=e.target,h=c.skewX,u=e.originY;if(c.lockSkewingX)return!1;if(0===h){var f=T(e,l,l,i,n);r=f.x>0?o:a}else h>0&&(r=u===s?o:a),h<0&&(r=u===s?a:o),O(c)&&(r=r===o?a:o);e.originX=r;var d=C(E);return d(t,e,i,n)}function D(t,e,i,n){var r,a=e.target,h=a.skewY,u=e.originX;if(a.lockSkewingY)return!1;if(0===h){var f=T(e,l,l,i,n);r=f.y>0?s:c}else h>0&&(r=u===o?s:c),h<0&&(r=u===o?c:s),O(a)&&(r=r===s?c:s);e.originY=r;var d=C(A);return d(t,e,i,n)}function M(t,e,i,n){var r=e,o=r.target,s=o.translateToOriginPoint(o.getCenterPoint(),r.originX,r.originY);if(o.lockRotation)return!1;var a=Math.atan2(r.ey-s.y,r.ex-s.x),c=Math.atan2(n-s.y,i-s.x),l=u(c-a+r.theta),h=!0;if(o.snapAngle>0){var f=o.snapAngle,d=o.snapThreshold||f,g=Math.ceil(l/f)*f,v=Math.floor(l/f)*f;Math.abs(l-v)<d?l=v:Math.abs(l-g)<d&&(l=g)}return l<0&&(l=360+l),l%=360,h=o.angle!==l,o.angle=l,h&&p("rotating",S(t,e,i,n)),h}function j(t,e,i,n,r){r=r||{};var o,s,a,c,l,u,d=e.target,y=d.lockScalingX,b=d.lockScalingY,w=r.by,x=g(t,d),_=m(d,w,x),C=e.gestureScale;if(_)return!1;if(C)s=e.scaleX*C,a=e.scaleY*C;else{if(o=T(e,e.originX,e.originY,i,n),l="y"!==w?f(o.x):1,u="x"!==w?f(o.y):1,e.signX||(e.signX=l),e.signY||(e.signY=u),d.lockScalingFlip&&(e.signX!==l||e.signY!==u))return!1;if(c=d._getTransformedDimensions(),x&&!w){var O,k=Math.abs(o.x)+Math.abs(o.y),E=e.original,A=Math.abs(c.x*E.scaleX/d.scaleX)+Math.abs(c.y*E.scaleY/d.scaleY),P=k/A;s=E.scaleX*P,a=E.scaleY*P}else s=Math.abs(o.x*d.scaleX/c.x),a=Math.abs(o.y*d.scaleY/c.y);v(e)&&(s*=2,a*=2),e.signX!==l&&"y"!==w&&(e.originX=h[e.originX],s*=-1,e.signX=l),e.signY!==u&&"x"!==w&&(e.originY=h[e.originY],a*=-1,e.signY=u)}var D=d.scaleX,M=d.scaleY;return w?("x"===w&&d.set("scaleX",s),"y"===w&&d.set("scaleY",a)):(!y&&d.set("scaleX",s),!b&&d.set("scaleY",a)),O=D!==d.scaleX||M!==d.scaleY,O&&p("scaling",S(t,e,i,n)),O}function R(t,e,i,n){return j(t,e,i,n)}function I(t,e,i,n){return j(t,e,i,n,{by:"x"})}function z(t,e,i,n){return j(t,e,i,n,{by:"y"})}function L(t,e,i,n){return t[e.target.canvas.altActionKey]?r.skewHandlerX(t,e,i,n):r.scalingY(t,e,i,n)}function F(t,e,i,n){return t[e.target.canvas.altActionKey]?r.skewHandlerY(t,e,i,n):r.scalingX(t,e,i,n)}function B(t,e,i,n){var r,o=e.target,s=T(e,e.originX,e.originY,i,n),a=o.strokeWidth/(o.strokeUniform?o.scaleX:1),c=v(e)?2:1,l=o.width,h=Math.abs(s.x*c/o.scaleX)-a;return o.set("width",Math.max(h,0)),r=l!==h,r&&p("resizing",S(t,e,i,n)),r}function N(t,e,i,n){var r=e.target,o=i-e.offsetX,s=n-e.offsetY,a=!r.get("lockMovementX")&&r.left!==o,c=!r.get("lockMovementY")&&r.top!==s;return a&&r.set("left",o),c&&r.set("top",s),(a||c)&&p("moving",S(t,e,i,n)),a||c}r.scaleCursorStyleHandler=y,r.skewCursorStyleHandler=b,r.scaleSkewCursorStyleHandler=w,r.rotationWithSnapping=C(M),r.scalingEqually=C(R),r.scalingX=C(I),r.scalingY=C(z),r.scalingYOrSkewingX=L,r.scalingXOrSkewingY=F,r.changeWidth=C(B),r.skewHandlerX=P,r.skewHandlerY=D,r.dragHandler=N,r.scaleOrSkewActionName=x,r.rotationStyleHandler=_,r.fireEvent=p,r.wrapWithFixedAnchor=C,r.getLocalPoint=T,e.controlsUtils=r}(e),function(t){"use strict";var e=t.fabric||(t.fabric={}),i=e.util.degreesToRadians,n=e.controlsUtils;function r(t,e,i,n,r){n=n||{};var o,s=this.sizeX||n.cornerSize||r.cornerSize,a=this.sizeY||n.cornerSize||r.cornerSize,c="undefined"!==typeof n.transparentCorners?n.transparentCorners:this.transparentCorners,l=c?"stroke":"fill",h=!c&&(n.cornerStrokeColor||r.cornerStrokeColor),u=e,f=i;t.save(),t.fillStyle=n.cornerColor||r.cornerColor,t.strokeStyle=n.cornerStrokeColor||r.cornerStrokeColor,s>a?(o=s,t.scale(1,a/s),f=i*s/a):a>s?(o=a,t.scale(s/a,1),u=e*a/s):o=s,t.lineWidth=1,t.beginPath(),t.arc(u,f,o/2,0,2*Math.PI,!1),t[l](),h&&t.stroke(),t.restore()}function o(t,e,n,r,o){r=r||{};var s=this.sizeX||r.cornerSize||o.cornerSize,a=this.sizeY||r.cornerSize||o.cornerSize,c="undefined"!==typeof r.transparentCorners?r.transparentCorners:o.transparentCorners,l=c?"stroke":"fill",h=!c&&(r.cornerStrokeColor||o.cornerStrokeColor),u=s/2,f=a/2;t.save(),t.fillStyle=r.cornerColor||o.cornerColor,t.strokeStyle=r.cornerStrokeColor||o.cornerStrokeColor,t.lineWidth=1,t.translate(e,n),t.rotate(i(o.angle)),t[l+"Rect"](-u,-f,s,a),h&&t.strokeRect(-u,-f,s,a),t.restore()}n.renderCircleControl=r,n.renderSquareControl=o}(e),function(t){"use strict";var e=t.fabric||(t.fabric={});function i(t){for(var e in t)this[e]=t[e]}e.Control=i,e.Control.prototype={visible:!0,actionName:"scale",angle:0,x:0,y:0,offsetX:0,offsetY:0,sizeX:null,sizeY:null,touchSizeX:null,touchSizeY:null,cursorStyle:"crosshair",withConnection:!1,actionHandler:function(){},mouseDownHandler:function(){},mouseUpHandler:function(){},getActionHandler:function(){return this.actionHandler},getMouseDownHandler:function(){return this.mouseDownHandler},getMouseUpHandler:function(){return this.mouseUpHandler},cursorStyleHandler:function(t,e){return e.cursorStyle},getActionName:function(t,e){return e.actionName},getVisibility:function(t,e){var i=t._controlsVisibility;return i&&"undefined"!==typeof i[e]?i[e]:this.visible},setVisibility:function(t){this.visible=t},positionHandler:function(t,i){var n=e.util.transformPoint({x:this.x*t.x+this.offsetX,y:this.y*t.y+this.offsetY},i);return n},calcCornerCoords:function(t,i,n,r,o){var s,a,c,l,h=o?this.touchSizeX:this.sizeX,u=o?this.touchSizeY:this.sizeY;if(h&&u&&h!==u){var f=Math.atan2(u,h),d=Math.sqrt(h*h+u*u)/2,p=f-e.util.degreesToRadians(t),g=Math.PI/2-f-e.util.degreesToRadians(t);s=d*e.util.cos(p),a=d*e.util.sin(p),c=d*e.util.cos(g),l=d*e.util.sin(g)}else{var v=h&&u?h:i;d=.7071067812*v;p=e.util.degreesToRadians(45-t);s=c=d*e.util.cos(p),a=l=d*e.util.sin(p)}return{tl:{x:n-l,y:r-c},tr:{x:n+s,y:r-a},bl:{x:n-s,y:r+a},br:{x:n+l,y:r+c}}},render:function(t,i,n,r,o){switch(r=r||{},r.cornerStyle||o.cornerStyle){case"circle":e.controlsUtils.renderCircleControl.call(this,t,i,n,r,o);break;default:e.controlsUtils.renderSquareControl.call(this,t,i,n,r,o)}}}}(e),function(){function t(t,e){var i,r,o,s,a=t.getAttribute("style"),c=t.getAttribute("offset")||0;if(c=parseFloat(c)/(/%$/.test(c)?100:1),c=c<0?0:c>1?1:c,a){var l=a.split(/\s*;\s*/);for(""===l[l.length-1]&&l.pop(),s=l.length;s--;){var h=l[s].split(/\s*:\s*/),u=h[0].trim(),f=h[1].trim();"stop-color"===u?i=f:"stop-opacity"===u&&(o=f)}}return i||(i=t.getAttribute("stop-color")||"rgb(0,0,0)"),o||(o=t.getAttribute("stop-opacity")),i=new n.Color(i),r=i.getAlpha(),o=isNaN(parseFloat(o))?1:parseFloat(o),o*=r*e,{offset:c,color:i.toRgb(),opacity:o}}function e(t){return{x1:t.getAttribute("x1")||0,y1:t.getAttribute("y1")||0,x2:t.getAttribute("x2")||"100%",y2:t.getAttribute("y2")||0}}function i(t){return{x1:t.getAttribute("fx")||t.getAttribute("cx")||"50%",y1:t.getAttribute("fy")||t.getAttribute("cy")||"50%",r1:0,x2:t.getAttribute("cx")||"50%",y2:t.getAttribute("cy")||"50%",r2:t.getAttribute("r")||"50%"}}var r=n.util.object.clone;function o(t,e,i,n){var r,o;Object.keys(e).forEach((function(t){r=e[t],"Infinity"===r?o=1:"-Infinity"===r?o=0:(o=parseFloat(e[t],10),"string"===typeof r&&/^(\d+\.\d+)%|(\d+)%$/.test(r)&&(o*=.01,"pixels"===n&&("x1"!==t&&"x2"!==t&&"r2"!==t||(o*=i.viewBoxWidth||i.width),"y1"!==t&&"y2"!==t||(o*=i.viewBoxHeight||i.height)))),e[t]=o}))}n.Gradient=n.util.createClass({offsetX:0,offsetY:0,gradientTransform:null,gradientUnits:"pixels",type:"linear",initialize:function(t){t||(t={}),t.coords||(t.coords={});var e,i=this;Object.keys(t).forEach((function(e){i[e]=t[e]})),this.id?this.id+="_"+n.Object.__uid++:this.id=n.Object.__uid++,e={x1:t.coords.x1||0,y1:t.coords.y1||0,x2:t.coords.x2||0,y2:t.coords.y2||0},"radial"===this.type&&(e.r1=t.coords.r1||0,e.r2=t.coords.r2||0),this.coords=e,this.colorStops=t.colorStops.slice()},addColorStop:function(t){for(var e in t){var i=new n.Color(t[e]);this.colorStops.push({offset:parseFloat(e),color:i.toRgb(),opacity:i.getAlpha()})}return this},toObject:function(t){var e={type:this.type,coords:this.coords,colorStops:this.colorStops,offsetX:this.offsetX,offsetY:this.offsetY,gradientUnits:this.gradientUnits,gradientTransform:this.gradientTransform?this.gradientTransform.concat():this.gradientTransform};return n.util.populateWithProperties(this,e,t),e},toSVG:function(t,e){var i,o,s,a,c=r(this.coords,!0),l=(e=e||{},r(this.colorStops,!0)),h=c.r1>c.r2,u=this.gradientTransform?this.gradientTransform.concat():n.iMatrix.concat(),f=-this.offsetX,d=-this.offsetY,p=!!e.additionalTransform,g="pixels"===this.gradientUnits?"userSpaceOnUse":"objectBoundingBox";if(l.sort((function(t,e){return t.offset-e.offset})),"objectBoundingBox"===g?(f/=t.width,d/=t.height):(f+=t.width/2,d+=t.height/2),"path"===t.type&&"percentage"!==this.gradientUnits&&(f-=t.pathOffset.x,d-=t.pathOffset.y),u[4]-=f,u[5]-=d,a='id="SVGID_'+this.id+'" gradientUnits="'+g+'"',a+=' gradientTransform="'+(p?e.additionalTransform+" ":"")+n.util.matrixToSVG(u)+'" ',"linear"===this.type?s=["<linearGradient ",a,' x1="',c.x1,'" y1="',c.y1,'" x2="',c.x2,'" y2="',c.y2,'">\n']:"radial"===this.type&&(s=["<radialGradient ",a,' cx="',h?c.x1:c.x2,'" cy="',h?c.y1:c.y2,'" r="',h?c.r1:c.r2,'" fx="',h?c.x2:c.x1,'" fy="',h?c.y2:c.y1,'">\n']),"radial"===this.type){if(h)for(l=l.concat(),l.reverse(),i=0,o=l.length;i<o;i++)l[i].offset=1-l[i].offset;var v=Math.min(c.r1,c.r2);if(v>0){var m=Math.max(c.r1,c.r2),y=v/m;for(i=0,o=l.length;i<o;i++)l[i].offset+=y*(1-l[i].offset)}}for(i=0,o=l.length;i<o;i++){var b=l[i];s.push("<stop ",'offset="',100*b.offset+"%",'" style="stop-color:',b.color,"undefined"!==typeof b.opacity?";stop-opacity: "+b.opacity:";",'"/>\n')}return s.push("linear"===this.type?"</linearGradient>\n":"</radialGradient>\n"),s.join("")},toLive:function(t){var e,i,r,o=n.util.object.clone(this.coords);if(this.type){for("linear"===this.type?e=t.createLinearGradient(o.x1,o.y1,o.x2,o.y2):"radial"===this.type&&(e=t.createRadialGradient(o.x1,o.y1,o.r1,o.x2,o.y2,o.r2)),i=0,r=this.colorStops.length;i<r;i++){var s=this.colorStops[i].color,a=this.colorStops[i].opacity,c=this.colorStops[i].offset;"undefined"!==typeof a&&(s=new n.Color(s).setAlpha(a).toRgba()),e.addColorStop(c,s)}return e}}}),n.util.object.extend(n.Gradient,{fromElement:function(r,s,a,c){var l=parseFloat(a)/(/%$/.test(a)?100:1);l=l<0?0:l>1?1:l,isNaN(l)&&(l=1);var h,u,f,d,p=r.getElementsByTagName("stop"),g="userSpaceOnUse"===r.getAttribute("gradientUnits")?"pixels":"percentage",v=r.getAttribute("gradientTransform")||"",m=[],y=0,b=0;for("linearGradient"===r.nodeName||"LINEARGRADIENT"===r.nodeName?(h="linear",u=e(r)):(h="radial",u=i(r)),f=p.length;f--;)m.push(t(p[f],l));d=n.parseTransformAttribute(v),o(s,u,c,g),"pixels"===g&&(y=-s.left,b=-s.top);var w=new n.Gradient({id:r.getAttribute("id"),type:h,coords:u,colorStops:m,gradientUnits:g,gradientTransform:d,offsetX:y,offsetY:b});return w}})}(),function(){"use strict";var t=n.util.toFixed;n.Pattern=n.util.createClass({repeat:"repeat",offsetX:0,offsetY:0,crossOrigin:"",patternTransform:null,initialize:function(t,e){if(t||(t={}),this.id=n.Object.__uid++,this.setOptions(t),!t.source||t.source&&"string"!==typeof t.source)e&&e(this);else{var i=this;this.source=n.util.createImage(),n.util.loadImage(t.source,(function(t,n){i.source=t,e&&e(i,n)}),null,this.crossOrigin)}},toObject:function(e){var i,r,o=n.Object.NUM_FRACTION_DIGITS;return"string"===typeof this.source.src?i=this.source.src:"object"===typeof this.source&&this.source.toDataURL&&(i=this.source.toDataURL()),r={type:"pattern",source:i,repeat:this.repeat,crossOrigin:this.crossOrigin,offsetX:t(this.offsetX,o),offsetY:t(this.offsetY,o),patternTransform:this.patternTransform?this.patternTransform.concat():null},n.util.populateWithProperties(this,r,e),r},toSVG:function(t){var e="function"===typeof this.source?this.source():this.source,i=e.width/t.width,n=e.height/t.height,r=this.offsetX/t.width,o=this.offsetY/t.height,s="";return"repeat-x"!==this.repeat&&"no-repeat"!==this.repeat||(n=1,o&&(n+=Math.abs(o))),"repeat-y"!==this.repeat&&"no-repeat"!==this.repeat||(i=1,r&&(i+=Math.abs(r))),e.src?s=e.src:e.toDataURL&&(s=e.toDataURL()),'<pattern id="SVGID_'+this.id+'" x="'+r+'" y="'+o+'" width="'+i+'" height="'+n+'">\n<image x="0" y="0" width="'+e.width+'" height="'+e.height+'" xlink:href="'+s+'"></image>\n</pattern>\n'},setOptions:function(t){for(var e in t)this[e]=t[e]},toLive:function(t){var e=this.source;if(!e)return"";if("undefined"!==typeof e.src){if(!e.complete)return"";if(0===e.naturalWidth||0===e.naturalHeight)return""}return t.createPattern(e,this.repeat)}})}(),function(t){"use strict";var e=t.fabric||(t.fabric={}),i=e.util.toFixed;e.Shadow?e.warn("fabric.Shadow is already defined."):(e.Shadow=e.util.createClass({color:"rgb(0,0,0)",blur:0,offsetX:0,offsetY:0,affectStroke:!1,includeDefaultValues:!0,nonScaling:!1,initialize:function(t){for(var i in"string"===typeof t&&(t=this._parseShadow(t)),t)this[i]=t[i];this.id=e.Object.__uid++},_parseShadow:function(t){var i=t.trim(),n=e.Shadow.reOffsetsAndBlur.exec(i)||[],r=i.replace(e.Shadow.reOffsetsAndBlur,"")||"rgb(0,0,0)";return{color:r.trim(),offsetX:parseInt(n[1],10)||0,offsetY:parseInt(n[2],10)||0,blur:parseInt(n[3],10)||0}},toString:function(){return[this.offsetX,this.offsetY,this.blur,this.color].join("px ")},toSVG:function(t){var n=40,r=40,o=e.Object.NUM_FRACTION_DIGITS,s=e.util.rotateVector({x:this.offsetX,y:this.offsetY},e.util.degreesToRadians(-t.angle)),a=20,c=new e.Color(this.color);return t.width&&t.height&&(n=100*i((Math.abs(s.x)+this.blur)/t.width,o)+a,r=100*i((Math.abs(s.y)+this.blur)/t.height,o)+a),t.flipX&&(s.x*=-1),t.flipY&&(s.y*=-1),'<filter id="SVGID_'+this.id+'" y="-'+r+'%" height="'+(100+2*r)+'%" x="-'+n+'%" width="'+(100+2*n)+'%" >\n\t<feGaussianBlur in="SourceAlpha" stdDeviation="'+i(this.blur?this.blur/2:0,o)+'"></feGaussianBlur>\n\t<feOffset dx="'+i(s.x,o)+'" dy="'+i(s.y,o)+'" result="oBlur" ></feOffset>\n\t<feFlood flood-color="'+c.toRgb()+'" flood-opacity="'+c.getAlpha()+'"/>\n\t<feComposite in2="oBlur" operator="in" />\n\t<feMerge>\n\t\t<feMergeNode></feMergeNode>\n\t\t<feMergeNode in="SourceGraphic"></feMergeNode>\n\t</feMerge>\n</filter>\n'},toObject:function(){if(this.includeDefaultValues)return{color:this.color,blur:this.blur,offsetX:this.offsetX,offsetY:this.offsetY,affectStroke:this.affectStroke,nonScaling:this.nonScaling};var t={},i=e.Shadow.prototype;return["color","blur","offsetX","offsetY","affectStroke","nonScaling"].forEach((function(e){this[e]!==i[e]&&(t[e]=this[e])}),this),t}}),e.Shadow.reOffsetsAndBlur=/(?:\s|^)(-?\d+(?:px)?(?:\s?|$))?(-?\d+(?:px)?(?:\s?|$))?(\d+(?:px)?)?(?:\s?|$)(?:$|\s)/)}(e),function(){"use strict";if(n.StaticCanvas)n.warn("fabric.StaticCanvas is already defined.");else{var t=n.util.object.extend,e=n.util.getElementOffset,i=n.util.removeFromArray,r=n.util.toFixed,o=n.util.transformPoint,s=n.util.invertTransform,a=n.util.getNodeCanvas,c=n.util.createCanvasElement,l=new Error("Could not initialize `canvas` element");n.StaticCanvas=n.util.createClass(n.CommonMethods,{initialize:function(t,e){e||(e={}),this.renderAndResetBound=this.renderAndReset.bind(this),this.requestRenderAllBound=this.requestRenderAll.bind(this),this._initStatic(t,e)},backgroundColor:"",backgroundImage:null,overlayColor:"",overlayImage:null,includeDefaultValues:!0,stateful:!1,renderOnAddRemove:!0,controlsAboveOverlay:!1,allowTouchScrolling:!1,imageSmoothingEnabled:!0,viewportTransform:n.iMatrix.concat(),backgroundVpt:!0,overlayVpt:!0,enableRetinaScaling:!0,vptCoords:{},skipOffscreen:!0,clipPath:void 0,_initStatic:function(t,e){var i=this.requestRenderAllBound;this._objects=[],this._createLowerCanvas(t),this._initOptions(e),this.interactive||this._initRetinaScaling(),e.overlayImage&&this.setOverlayImage(e.overlayImage,i),e.backgroundImage&&this.setBackgroundImage(e.backgroundImage,i),e.backgroundColor&&this.setBackgroundColor(e.backgroundColor,i),e.overlayColor&&this.setOverlayColor(e.overlayColor,i),this.calcOffset()},_isRetinaScaling:function(){return 1!==n.devicePixelRatio&&this.enableRetinaScaling},getRetinaScaling:function(){return this._isRetinaScaling()?n.devicePixelRatio:1},_initRetinaScaling:function(){if(this._isRetinaScaling()){var t=n.devicePixelRatio;this.__initRetinaScaling(t,this.lowerCanvasEl,this.contextContainer),this.upperCanvasEl&&this.__initRetinaScaling(t,this.upperCanvasEl,this.contextTop)}},__initRetinaScaling:function(t,e,i){e.setAttribute("width",this.width*t),e.setAttribute("height",this.height*t),i.scale(t,t)},calcOffset:function(){return this._offset=e(this.lowerCanvasEl),this},setOverlayImage:function(t,e,i){return this.__setBgOverlayImage("overlayImage",t,e,i)},setBackgroundImage:function(t,e,i){return this.__setBgOverlayImage("backgroundImage",t,e,i)},setOverlayColor:function(t,e){return this.__setBgOverlayColor("overlayColor",t,e)},setBackgroundColor:function(t,e){return this.__setBgOverlayColor("backgroundColor",t,e)},__setBgOverlayImage:function(t,e,i,r){return"string"===typeof e?n.util.loadImage(e,(function(e,o){if(e){var s=new n.Image(e,r);this[t]=s,s.canvas=this}i&&i(e,o)}),this,r&&r.crossOrigin):(r&&e.setOptions(r),this[t]=e,e&&(e.canvas=this),i&&i(e,!1)),this},__setBgOverlayColor:function(t,e,i){return this[t]=e,this._initGradient(e,t),this._initPattern(e,t,i),this},_createCanvasElement:function(){var t=c();if(!t)throw l;if(t.style||(t.style={}),"undefined"===typeof t.getContext)throw l;return t},_initOptions:function(t){var e=this.lowerCanvasEl;this._setOptions(t),this.width=this.width||parseInt(e.width,10)||0,this.height=this.height||parseInt(e.height,10)||0,this.lowerCanvasEl.style&&(e.width=this.width,e.height=this.height,e.style.width=this.width+"px",e.style.height=this.height+"px",this.viewportTransform=this.viewportTransform.slice())},_createLowerCanvas:function(t){t&&t.getContext?this.lowerCanvasEl=t:this.lowerCanvasEl=n.util.getById(t)||this._createCanvasElement(),n.util.addClass(this.lowerCanvasEl,"lower-canvas"),this.interactive&&this._applyCanvasStyle(this.lowerCanvasEl),this.contextContainer=this.lowerCanvasEl.getContext("2d")},getWidth:function(){return this.width},getHeight:function(){return this.height},setWidth:function(t,e){return this.setDimensions({width:t},e)},setHeight:function(t,e){return this.setDimensions({height:t},e)},setDimensions:function(t,e){var i;for(var n in e=e||{},t)i=t[n],e.cssOnly||(this._setBackstoreDimension(n,t[n]),i+="px",this.hasLostContext=!0),e.backstoreOnly||this._setCssDimension(n,i);return this._isCurrentlyDrawing&&this.freeDrawingBrush&&this.freeDrawingBrush._setBrushStyles(),this._initRetinaScaling(),this.calcOffset(),e.cssOnly||this.requestRenderAll(),this},_setBackstoreDimension:function(t,e){return this.lowerCanvasEl[t]=e,this.upperCanvasEl&&(this.upperCanvasEl[t]=e),this.cacheCanvasEl&&(this.cacheCanvasEl[t]=e),this[t]=e,this},_setCssDimension:function(t,e){return this.lowerCanvasEl.style[t]=e,this.upperCanvasEl&&(this.upperCanvasEl.style[t]=e),this.wrapperEl&&(this.wrapperEl.style[t]=e),this},getZoom:function(){return this.viewportTransform[0]},setViewportTransform:function(t){var e,i,n,r=this._activeObject,o=this.backgroundImage,s=this.overlayImage;for(this.viewportTransform=t,i=0,n=this._objects.length;i<n;i++)e=this._objects[i],e.group||e.setCoords(!0);return r&&r.setCoords(),o&&o.setCoords(!0),s&&s.setCoords(!0),this.calcViewportBoundaries(),this.renderOnAddRemove&&this.requestRenderAll(),this},zoomToPoint:function(t,e){var i=t,n=this.viewportTransform.slice(0);t=o(t,s(this.viewportTransform)),n[0]=e,n[3]=e;var r=o(t,n);return n[4]+=i.x-r.x,n[5]+=i.y-r.y,this.setViewportTransform(n)},setZoom:function(t){return this.zoomToPoint(new n.Point(0,0),t),this},absolutePan:function(t){var e=this.viewportTransform.slice(0);return e[4]=-t.x,e[5]=-t.y,this.setViewportTransform(e)},relativePan:function(t){return this.absolutePan(new n.Point(-t.x-this.viewportTransform[4],-t.y-this.viewportTransform[5]))},getElement:function(){return this.lowerCanvasEl},_onObjectAdded:function(t){this.stateful&&t.setupState(),t._set("canvas",this),t.setCoords(),this.fire("object:added",{target:t}),t.fire("added")},_onObjectRemoved:function(t){this.fire("object:removed",{target:t}),t.fire("removed"),delete t.canvas},clearContext:function(t){return t.clearRect(0,0,this.width,this.height),this},getContext:function(){return this.contextContainer},clear:function(){return this._objects.length=0,this.backgroundImage=null,this.overlayImage=null,this.backgroundColor="",this.overlayColor="",this._hasITextHandlers&&(this.off("mouse:up",this._mouseUpITextHandler),this._iTextInstances=null,this._hasITextHandlers=!1),this.clearContext(this.contextContainer),this.fire("canvas:cleared"),this.renderOnAddRemove&&this.requestRenderAll(),this},renderAll:function(){var t=this.contextContainer;return this.renderCanvas(t,this._objects),this},renderAndReset:function(){this.isRendering=0,this.renderAll()},requestRenderAll:function(){return this.isRendering||(this.isRendering=n.util.requestAnimFrame(this.renderAndResetBound)),this},calcViewportBoundaries:function(){var t={},e=this.width,i=this.height,r=s(this.viewportTransform);return t.tl=o({x:0,y:0},r),t.br=o({x:e,y:i},r),t.tr=new n.Point(t.br.x,t.tl.y),t.bl=new n.Point(t.tl.x,t.br.y),this.vptCoords=t,t},cancelRequestedRender:function(){this.isRendering&&(n.util.cancelAnimFrame(this.isRendering),this.isRendering=0)},renderCanvas:function(t,e){var i=this.viewportTransform,r=this.clipPath;this.cancelRequestedRender(),this.calcViewportBoundaries(),this.clearContext(t),n.util.setImageSmoothing(t,this.imageSmoothingEnabled),this.fire("before:render",{ctx:t}),this._renderBackground(t),t.save(),t.transform(i[0],i[1],i[2],i[3],i[4],i[5]),this._renderObjects(t,e),t.restore(),!this.controlsAboveOverlay&&this.interactive&&this.drawControls(t),r&&(r.canvas=this,r.shouldCache(),r._transformDone=!0,r.renderCache({forClipping:!0}),this.drawClipPathOnCanvas(t)),this._renderOverlay(t),this.controlsAboveOverlay&&this.interactive&&this.drawControls(t),this.fire("after:render",{ctx:t})},drawClipPathOnCanvas:function(t){var e=this.viewportTransform,i=this.clipPath;t.save(),t.transform(e[0],e[1],e[2],e[3],e[4],e[5]),t.globalCompositeOperation="destination-in",i.transform(t),t.scale(1/i.zoomX,1/i.zoomY),t.drawImage(i._cacheCanvas,-i.cacheTranslationX,-i.cacheTranslationY),t.restore()},_renderObjects:function(t,e){var i,n;for(i=0,n=e.length;i<n;++i)e[i]&&e[i].render(t)},_renderBackgroundOrOverlay:function(t,e){var i=this[e+"Color"],n=this[e+"Image"],r=this.viewportTransform,o=this[e+"Vpt"];if(i||n){if(i){t.save(),t.beginPath(),t.moveTo(0,0),t.lineTo(this.width,0),t.lineTo(this.width,this.height),t.lineTo(0,this.height),t.closePath(),t.fillStyle=i.toLive?i.toLive(t,this):i,o&&t.transform(r[0],r[1],r[2],r[3],r[4],r[5]),t.transform(1,0,0,1,i.offsetX||0,i.offsetY||0);var s=i.gradientTransform||i.patternTransform;s&&t.transform(s[0],s[1],s[2],s[3],s[4],s[5]),t.fill(),t.restore()}n&&(t.save(),o&&t.transform(r[0],r[1],r[2],r[3],r[4],r[5]),n.render(t),t.restore())}},_renderBackground:function(t){this._renderBackgroundOrOverlay(t,"background")},_renderOverlay:function(t){this._renderBackgroundOrOverlay(t,"overlay")},getCenter:function(){return{top:this.height/2,left:this.width/2}},centerObjectH:function(t){return this._centerObject(t,new n.Point(this.getCenter().left,t.getCenterPoint().y))},centerObjectV:function(t){return this._centerObject(t,new n.Point(t.getCenterPoint().x,this.getCenter().top))},centerObject:function(t){var e=this.getCenter();return this._centerObject(t,new n.Point(e.left,e.top))},viewportCenterObject:function(t){var e=this.getVpCenter();return this._centerObject(t,e)},viewportCenterObjectH:function(t){var e=this.getVpCenter();return this._centerObject(t,new n.Point(e.x,t.getCenterPoint().y)),this},viewportCenterObjectV:function(t){var e=this.getVpCenter();return this._centerObject(t,new n.Point(t.getCenterPoint().x,e.y))},getVpCenter:function(){var t=this.getCenter(),e=s(this.viewportTransform);return o({x:t.left,y:t.top},e)},_centerObject:function(t,e){return t.setPositionByOrigin(e,"center","center"),t.setCoords(),this.renderOnAddRemove&&this.requestRenderAll(),this},toDatalessJSON:function(t){return this.toDatalessObject(t)},toObject:function(t){return this._toObjectMethod("toObject",t)},toDatalessObject:function(t){return this._toObjectMethod("toDatalessObject",t)},_toObjectMethod:function(e,i){var r=this.clipPath,o={version:n.version,objects:this._toObjects(e,i)};return r&&(o.clipPath=this._toObject(this.clipPath,e,i)),t(o,this.__serializeBgOverlay(e,i)),n.util.populateWithProperties(this,o,i),o},_toObjects:function(t,e){return this._objects.filter((function(t){return!t.excludeFromExport})).map((function(i){return this._toObject(i,t,e)}),this)},_toObject:function(t,e,i){var n;this.includeDefaultValues||(n=t.includeDefaultValues,t.includeDefaultValues=!1);var r=t[e](i);return this.includeDefaultValues||(t.includeDefaultValues=n),r},__serializeBgOverlay:function(t,e){var i={},n=this.backgroundImage,r=this.overlayImage;return this.backgroundColor&&(i.background=this.backgroundColor.toObject?this.backgroundColor.toObject(e):this.backgroundColor),this.overlayColor&&(i.overlay=this.overlayColor.toObject?this.overlayColor.toObject(e):this.overlayColor),n&&!n.excludeFromExport&&(i.backgroundImage=this._toObject(n,t,e)),r&&!r.excludeFromExport&&(i.overlayImage=this._toObject(r,t,e)),i},svgViewportTransformation:!0,toSVG:function(t,e){t||(t={}),t.reviver=e;var i=[];return this._setSVGPreamble(i,t),this._setSVGHeader(i,t),this.clipPath&&i.push('<g clip-path="url(#'+this.clipPath.clipPathId+')" >\n'),this._setSVGBgOverlayColor(i,"background"),this._setSVGBgOverlayImage(i,"backgroundImage",e),this._setSVGObjects(i,e),this.clipPath&&i.push("</g>\n"),this._setSVGBgOverlayColor(i,"overlay"),this._setSVGBgOverlayImage(i,"overlayImage",e),i.push("</svg>"),i.join("")},_setSVGPreamble:function(t,e){e.suppressPreamble||t.push('<?xml version="1.0" encoding="',e.encoding||"UTF-8",'" standalone="no" ?>\n','<!DOCTYPE svg PUBLIC "-//W3C//DTD SVG 1.1//EN" ','"http://www.w3.org/Graphics/SVG/1.1/DTD/svg11.dtd">\n')},_setSVGHeader:function(t,e){var i,o=e.width||this.width,s=e.height||this.height,a='viewBox="0 0 '+this.width+" "+this.height+'" ',c=n.Object.NUM_FRACTION_DIGITS;e.viewBox?a='viewBox="'+e.viewBox.x+" "+e.viewBox.y+" "+e.viewBox.width+" "+e.viewBox.height+'" ':this.svgViewportTransformation&&(i=this.viewportTransform,a='viewBox="'+r(-i[4]/i[0],c)+" "+r(-i[5]/i[3],c)+" "+r(this.width/i[0],c)+" "+r(this.height/i[3],c)+'" '),t.push("<svg ",'xmlns="http://www.w3.org/2000/svg" ','xmlns:xlink="http://www.w3.org/1999/xlink" ','version="1.1" ','width="',o,'" ','height="',s,'" ',a,'xml:space="preserve">\n',"<desc>Created with Fabric.js ",n.version,"</desc>\n","<defs>\n",this.createSVGFontFacesMarkup(),this.createSVGRefElementsMarkup(),this.createSVGClipPathMarkup(e),"</defs>\n")},createSVGClipPathMarkup:function(t){var e=this.clipPath;return e?(e.clipPathId="CLIPPATH_"+n.Object.__uid++,'<clipPath id="'+e.clipPathId+'" >\n'+this.clipPath.toClipPathSVG(t.reviver)+"</clipPath>\n"):""},createSVGRefElementsMarkup:function(){var t=this,e=["background","overlay"].map((function(e){var i=t[e+"Color"];if(i&&i.toLive){var r=t[e+"Vpt"],o=t.viewportTransform,s={width:t.width/(r?o[0]:1),height:t.height/(r?o[3]:1)};return i.toSVG(s,{additionalTransform:r?n.util.matrixToSVG(o):""})}}));return e.join("")},createSVGFontFacesMarkup:function(){var t,e,i,r,o,s,a,c,l,h="",u={},f=n.fontPaths,d=[];for(this._objects.forEach((function t(e){d.push(e),e._objects&&e._objects.forEach(t)})),c=0,l=d.length;c<l;c++)if(t=d[c],e=t.fontFamily,-1!==t.type.indexOf("text")&&!u[e]&&f[e]&&(u[e]=!0,t.styles))for(o in i=t.styles,i)for(a in r=i[o],r)s=r[a],e=s.fontFamily,!u[e]&&f[e]&&(u[e]=!0);for(var p in u)h+=["\t\t@font-face {\n","\t\t\tfont-family: '",p,"';\n","\t\t\tsrc: url('",f[p],"');\n","\t\t}\n"].join("");return h&&(h=['\t<style type="text/css">',"<![CDATA[\n",h,"]]>","</style>\n"].join("")),h},_setSVGObjects:function(t,e){var i,n,r,o=this._objects;for(n=0,r=o.length;n<r;n++)i=o[n],i.excludeFromExport||this._setSVGObject(t,i,e)},_setSVGObject:function(t,e,i){t.push(e.toSVG(i))},_setSVGBgOverlayImage:function(t,e,i){this[e]&&!this[e].excludeFromExport&&this[e].toSVG&&t.push(this[e].toSVG(i))},_setSVGBgOverlayColor:function(t,e){var i=this[e+"Color"],r=this.viewportTransform,o=this.width,s=this.height;if(i)if(i.toLive){var a=i.repeat,c=n.util.invertTransform(r),l=this[e+"Vpt"],h=l?n.util.matrixToSVG(c):"";t.push('<rect transform="'+h+" translate(",o/2,",",s/2,')"',' x="',i.offsetX-o/2,'" y="',i.offsetY-s/2,'" ','width="',"repeat-y"===a||"no-repeat"===a?i.source.width:o,'" height="',"repeat-x"===a||"no-repeat"===a?i.source.height:s,'" fill="url(#SVGID_'+i.id+')"',"></rect>\n")}else t.push('<rect x="0" y="0" width="100%" height="100%" ','fill="',i,'"',"></rect>\n")},sendToBack:function(t){if(!t)return this;var e,n,r,o=this._activeObject;if(t===o&&"activeSelection"===t.type)for(r=o._objects,e=r.length;e--;)n=r[e],i(this._objects,n),this._objects.unshift(n);else i(this._objects,t),this._objects.unshift(t);return this.renderOnAddRemove&&this.requestRenderAll(),this},bringToFront:function(t){if(!t)return this;var e,n,r,o=this._activeObject;if(t===o&&"activeSelection"===t.type)for(r=o._objects,e=0;e<r.length;e++)n=r[e],i(this._objects,n),this._objects.push(n);else i(this._objects,t),this._objects.push(t);return this.renderOnAddRemove&&this.requestRenderAll(),this},sendBackwards:function(t,e){if(!t)return this;var n,r,o,s,a,c=this._activeObject,l=0;if(t===c&&"activeSelection"===t.type)for(a=c._objects,n=0;n<a.length;n++)r=a[n],o=this._objects.indexOf(r),o>0+l&&(s=o-1,i(this._objects,r),this._objects.splice(s,0,r)),l++;else o=this._objects.indexOf(t),0!==o&&(s=this._findNewLowerIndex(t,o,e),i(this._objects,t),this._objects.splice(s,0,t));return this.renderOnAddRemove&&this.requestRenderAll(),this},_findNewLowerIndex:function(t,e,i){var n,r;if(i)for(n=e,r=e-1;r>=0;--r){var o=t.intersectsWithObject(this._objects[r])||t.isContainedWithinObject(this._objects[r])||this._objects[r].isContainedWithinObject(t);if(o){n=r;break}}else n=e-1;return n},bringForward:function(t,e){if(!t)return this;var n,r,o,s,a,c=this._activeObject,l=0;if(t===c&&"activeSelection"===t.type)for(a=c._objects,n=a.length;n--;)r=a[n],o=this._objects.indexOf(r),o<this._objects.length-1-l&&(s=o+1,i(this._objects,r),this._objects.splice(s,0,r)),l++;else o=this._objects.indexOf(t),o!==this._objects.length-1&&(s=this._findNewUpperIndex(t,o,e),i(this._objects,t),this._objects.splice(s,0,t));return this.renderOnAddRemove&&this.requestRenderAll(),this},_findNewUpperIndex:function(t,e,i){var n,r,o;if(i)for(n=e,r=e+1,o=this._objects.length;r<o;++r){var s=t.intersectsWithObject(this._objects[r])||t.isContainedWithinObject(this._objects[r])||this._objects[r].isContainedWithinObject(t);if(s){n=r;break}}else n=e+1;return n},moveTo:function(t,e){return i(this._objects,t),this._objects.splice(e,0,t),this.renderOnAddRemove&&this.requestRenderAll()},dispose:function(){return this.isRendering&&(n.util.cancelAnimFrame(this.isRendering),this.isRendering=0),this.forEachObject((function(t){t.dispose&&t.dispose()})),this._objects=[],this.backgroundImage&&this.backgroundImage.dispose&&this.backgroundImage.dispose(),this.backgroundImage=null,this.overlayImage&&this.overlayImage.dispose&&this.overlayImage.dispose(),this.overlayImage=null,this._iTextInstances=null,this.contextContainer=null,n.util.cleanUpJsdomNode(this.lowerCanvasEl),this.lowerCanvasEl=void 0,this},toString:function(){return"#<fabric.Canvas ("+this.complexity()+"): { objects: "+this._objects.length+" }>"}}),t(n.StaticCanvas.prototype,n.Observable),t(n.StaticCanvas.prototype,n.Collection),t(n.StaticCanvas.prototype,n.DataURLExporter),t(n.StaticCanvas,{EMPTY_JSON:'{"objects": [], "background": "white"}',supports:function(t){var e=c();if(!e||!e.getContext)return null;var i=e.getContext("2d");if(!i)return null;switch(t){case"setLineDash":return"undefined"!==typeof i.setLineDash;default:return null}}}),n.StaticCanvas.prototype.toJSON=n.StaticCanvas.prototype.toObject,n.isLikelyNode&&(n.StaticCanvas.prototype.createPNGStream=function(){var t=a(this.lowerCanvasEl);return t&&t.createPNGStream()},n.StaticCanvas.prototype.createJPEGStream=function(t){var e=a(this.lowerCanvasEl);return e&&e.createJPEGStream(t)})}}(),n.BaseBrush=n.util.createClass({color:"rgb(0, 0, 0)",width:1,shadow:null,strokeLineCap:"round",strokeLineJoin:"round",strokeMiterLimit:10,strokeDashArray:null,limitedToCanvasSize:!1,_setBrushStyles:function(){var t=this.canvas.contextTop;t.strokeStyle=this.color,t.lineWidth=this.width,t.lineCap=this.strokeLineCap,t.miterLimit=this.strokeMiterLimit,t.lineJoin=this.strokeLineJoin,n.StaticCanvas.supports("setLineDash")&&t.setLineDash(this.strokeDashArray||[])},_saveAndTransform:function(t){var e=this.canvas.viewportTransform;t.save(),t.transform(e[0],e[1],e[2],e[3],e[4],e[5])},_setShadow:function(){if(this.shadow){var t=this.canvas,e=this.shadow,i=t.contextTop,r=t.getZoom();t&&t._isRetinaScaling()&&(r*=n.devicePixelRatio),i.shadowColor=e.color,i.shadowBlur=e.blur*r,i.shadowOffsetX=e.offsetX*r,i.shadowOffsetY=e.offsetY*r}},needsFullRender:function(){var t=new n.Color(this.color);return t.getAlpha()<1||!!this.shadow},_resetShadow:function(){var t=this.canvas.contextTop;t.shadowColor="",t.shadowBlur=t.shadowOffsetX=t.shadowOffsetY=0},_isOutSideCanvas:function(t){return t.x<0||t.x>this.canvas.getWidth()||t.y<0||t.y>this.canvas.getHeight()}}),function(){n.PencilBrush=n.util.createClass(n.BaseBrush,{decimate:.4,initialize:function(t){this.canvas=t,this._points=[]},_drawSegment:function(t,e,i){var n=e.midPointFrom(i);return t.quadraticCurveTo(e.x,e.y,n.x,n.y),n},onMouseDown:function(t,e){this.canvas._isMainEvent(e.e)&&(this._prepareForDrawing(t),this._captureDrawingPath(t),this._render())},onMouseMove:function(t,e){if(this.canvas._isMainEvent(e.e)&&(!0!==this.limitedToCanvasSize||!this._isOutSideCanvas(t))&&this._captureDrawingPath(t)&&this._points.length>1)if(this.needsFullRender())this.canvas.clearContext(this.canvas.contextTop),this._render();else{var i=this._points,n=i.length,r=this.canvas.contextTop;this._saveAndTransform(r),this.oldEnd&&(r.beginPath(),r.moveTo(this.oldEnd.x,this.oldEnd.y)),this.oldEnd=this._drawSegment(r,i[n-2],i[n-1],!0),r.stroke(),r.restore()}},onMouseUp:function(t){return!this.canvas._isMainEvent(t.e)||(this.oldEnd=void 0,this._finalizeAndAddPath(),!1)},_prepareForDrawing:function(t){var e=new n.Point(t.x,t.y);this._reset(),this._addPoint(e),this.canvas.contextTop.moveTo(e.x,e.y)},_addPoint:function(t){return!(this._points.length>1&&t.eq(this._points[this._points.length-1]))&&(this._points.push(t),!0)},_reset:function(){this._points=[],this._setBrushStyles(),this._setShadow()},_captureDrawingPath:function(t){var e=new n.Point(t.x,t.y);return this._addPoint(e)},_render:function(){var t,e,i=this.canvas.contextTop,r=this._points[0],o=this._points[1];if(this._saveAndTransform(i),i.beginPath(),2===this._points.length&&r.x===o.x&&r.y===o.y){var s=this.width/1e3;r=new n.Point(r.x,r.y),o=new n.Point(o.x,o.y),r.x-=s,o.x+=s}for(i.moveTo(r.x,r.y),t=1,e=this._points.length;t<e;t++)this._drawSegment(i,r,o),r=this._points[t],o=this._points[t+1];i.lineTo(r.x,r.y),i.stroke(),i.restore()},convertPointsToSVGPath:function(t){var e,i=[],r=this.width/1e3,o=new n.Point(t[0].x,t[0].y),s=new n.Point(t[1].x,t[1].y),a=t.length,c=1,l=0,h=a>2;for(h&&(c=t[2].x<s.x?-1:t[2].x===s.x?0:1,l=t[2].y<s.y?-1:t[2].y===s.y?0:1),i.push("M ",o.x-c*r," ",o.y-l*r," "),e=1;e<a;e++){if(!o.eq(s)){var u=o.midPointFrom(s);i.push("Q ",o.x," ",o.y," ",u.x," ",u.y," ")}o=t[e],e+1<t.length&&(s=t[e+1])}return h&&(c=o.x>t[e-2].x?1:o.x===t[e-2].x?0:-1,l=o.y>t[e-2].y?1:o.y===t[e-2].y?0:-1),i.push("L ",o.x+c*r," ",o.y+l*r),i},createPath:function(t){var e=new n.Path(t,{fill:null,stroke:this.color,strokeWidth:this.width,strokeLineCap:this.strokeLineCap,strokeMiterLimit:this.strokeMiterLimit,strokeLineJoin:this.strokeLineJoin,strokeDashArray:this.strokeDashArray});return this.shadow&&(this.shadow.affectStroke=!0,e.shadow=new n.Shadow(this.shadow)),e},decimatePoints:function(t,e){if(t.length<=2)return t;var i,r,o=this.canvas.getZoom(),s=Math.pow(e/o,2),a=t.length-1,c=t[0],l=[c];for(i=1;i<a;i++)r=Math.pow(c.x-t[i].x,2)+Math.pow(c.y-t[i].y,2),r>=s&&(c=t[i],l.push(c));return 1===l.length&&l.push(new n.Point(l[0].x,l[0].y)),l},_finalizeAndAddPath:function(){var t=this.canvas.contextTop;t.closePath(),this.decimate&&(this._points=this.decimatePoints(this._points,this.decimate));var e=this.convertPointsToSVGPath(this._points).join("");if("M 0 0 Q 0 0 0 0 L 0 0"!==e){var i=this.createPath(e);this.canvas.clearContext(this.canvas.contextTop),this.canvas.fire("before:path:created",{path:i}),this.canvas.add(i),this.canvas.requestRenderAll(),i.setCoords(),this._resetShadow(),this.canvas.fire("path:created",{path:i})}else this.canvas.requestRenderAll()}})}(),n.CircleBrush=n.util.createClass(n.BaseBrush,{width:10,initialize:function(t){this.canvas=t,this.points=[]},drawDot:function(t){var e=this.addPoint(t),i=this.canvas.contextTop;this._saveAndTransform(i),this.dot(i,e),i.restore()},dot:function(t,e){t.fillStyle=e.fill,t.beginPath(),t.arc(e.x,e.y,e.radius,0,2*Math.PI,!1),t.closePath(),t.fill()},onMouseDown:function(t){this.points.length=0,this.canvas.clearContext(this.canvas.contextTop),this._setShadow(),this.drawDot(t)},_render:function(){var t,e,i=this.canvas.contextTop,n=this.points;for(this._saveAndTransform(i),t=0,e=n.length;t<e;t++)this.dot(i,n[t]);i.restore()},onMouseMove:function(t){!0===this.limitedToCanvasSize&&this._isOutSideCanvas(t)||(this.needsFullRender()?(this.canvas.clearContext(this.canvas.contextTop),this.addPoint(t),this._render()):this.drawDot(t))},onMouseUp:function(){var t,e,i=this.canvas.renderOnAddRemove;this.canvas.renderOnAddRemove=!1;var r=[];for(t=0,e=this.points.length;t<e;t++){var o=this.points[t],s=new n.Circle({radius:o.radius,left:o.x,top:o.y,originX:"center",originY:"center",fill:o.fill});this.shadow&&(s.shadow=new n.Shadow(this.shadow)),r.push(s)}var a=new n.Group(r);a.canvas=this.canvas,this.canvas.fire("before:path:created",{path:a}),this.canvas.add(a),this.canvas.fire("path:created",{path:a}),this.canvas.clearContext(this.canvas.contextTop),this._resetShadow(),this.canvas.renderOnAddRemove=i,this.canvas.requestRenderAll()},addPoint:function(t){var e=new n.Point(t.x,t.y),i=n.util.getRandomInt(Math.max(0,this.width-20),this.width+20)/2,r=new n.Color(this.color).setAlpha(n.util.getRandomInt(0,100)/100).toRgba();return e.radius=i,e.fill=r,this.points.push(e),e}}),n.SprayBrush=n.util.createClass(n.BaseBrush,{width:10,density:20,dotWidth:1,dotWidthVariance:1,randomOpacity:!1,optimizeOverlapping:!0,initialize:function(t){this.canvas=t,this.sprayChunks=[]},onMouseDown:function(t){this.sprayChunks.length=0,this.canvas.clearContext(this.canvas.contextTop),this._setShadow(),this.addSprayChunk(t),this.render(this.sprayChunkPoints)},onMouseMove:function(t){!0===this.limitedToCanvasSize&&this._isOutSideCanvas(t)||(this.addSprayChunk(t),this.render(this.sprayChunkPoints))},onMouseUp:function(){var t=this.canvas.renderOnAddRemove;this.canvas.renderOnAddRemove=!1;for(var e=[],i=0,r=this.sprayChunks.length;i<r;i++)for(var o=this.sprayChunks[i],s=0,a=o.length;s<a;s++){var c=new n.Rect({width:o[s].width,height:o[s].width,left:o[s].x+1,top:o[s].y+1,originX:"center",originY:"center",fill:this.color});e.push(c)}this.optimizeOverlapping&&(e=this._getOptimizedRects(e));var l=new n.Group(e);this.shadow&&l.set("shadow",new n.Shadow(this.shadow)),this.canvas.fire("before:path:created",{path:l}),this.canvas.add(l),this.canvas.fire("path:created",{path:l}),this.canvas.clearContext(this.canvas.contextTop),this._resetShadow(),this.canvas.renderOnAddRemove=t,this.canvas.requestRenderAll()},_getOptimizedRects:function(t){var e,i,n,r={};for(i=0,n=t.length;i<n;i++)e=t[i].left+""+t[i].top,r[e]||(r[e]=t[i]);var o=[];for(e in r)o.push(r[e]);return o},render:function(t){var e,i,n=this.canvas.contextTop;for(n.fillStyle=this.color,this._saveAndTransform(n),e=0,i=t.length;e<i;e++){var r=t[e];"undefined"!==typeof r.opacity&&(n.globalAlpha=r.opacity),n.fillRect(r.x,r.y,r.width,r.width)}n.restore()},_render:function(){var t,e,i=this.canvas.contextTop;for(i.fillStyle=this.color,this._saveAndTransform(i),t=0,e=this.sprayChunks.length;t<e;t++)this.render(this.sprayChunks[t]);i.restore()},addSprayChunk:function(t){this.sprayChunkPoints=[];var e,i,r,o,s=this.width/2;for(o=0;o<this.density;o++){e=n.util.getRandomInt(t.x-s,t.x+s),i=n.util.getRandomInt(t.y-s,t.y+s),r=this.dotWidthVariance?n.util.getRandomInt(Math.max(1,this.dotWidth-this.dotWidthVariance),this.dotWidth+this.dotWidthVariance):this.dotWidth;var a=new n.Point(e,i);a.width=r,this.randomOpacity&&(a.opacity=n.util.getRandomInt(0,100)/100),this.sprayChunkPoints.push(a)}this.sprayChunks.push(this.sprayChunkPoints)}}),n.PatternBrush=n.util.createClass(n.PencilBrush,{getPatternSrc:function(){var t=20,e=5,i=n.util.createCanvasElement(),r=i.getContext("2d");return i.width=i.height=t+e,r.fillStyle=this.color,r.beginPath(),r.arc(t/2,t/2,t/2,0,2*Math.PI,!1),r.closePath(),r.fill(),i},getPatternSrcFunction:function(){return String(this.getPatternSrc).replace("this.color",'"'+this.color+'"')},getPattern:function(){return this.canvas.contextTop.createPattern(this.source||this.getPatternSrc(),"repeat")},_setBrushStyles:function(){this.callSuper("_setBrushStyles"),this.canvas.contextTop.strokeStyle=this.getPattern()},createPath:function(t){var e=this.callSuper("createPath",t),i=e._getLeftTopCoords().scalarAdd(e.strokeWidth/2);return e.stroke=new n.Pattern({source:this.source||this.getPatternSrcFunction(),offsetX:-i.x,offsetY:-i.y}),e}}),function(){var t=n.util.getPointer,e=n.util.degreesToRadians,i=Math.abs,r=n.StaticCanvas.supports("setLineDash"),o=n.util.isTouchEvent,s=.5;for(var a in n.Canvas=n.util.createClass(n.StaticCanvas,{initialize:function(t,e){e||(e={}),this.renderAndResetBound=this.renderAndReset.bind(this),this.requestRenderAllBound=this.requestRenderAll.bind(this),this._initStatic(t,e),this._initInteractive(),this._createCacheCanvas()},uniformScaling:!0,uniScaleKey:"shiftKey",centeredScaling:!1,centeredRotation:!1,centeredKey:"altKey",altActionKey:"shiftKey",interactive:!0,selection:!0,selectionKey:"shiftKey",altSelectionKey:null,selectionColor:"rgba(100, 100, 255, 0.3)",selectionDashArray:[],selectionBorderColor:"rgba(255, 255, 255, 0.3)",selectionLineWidth:1,selectionFullyContained:!1,hoverCursor:"move",moveCursor:"move",defaultCursor:"default",freeDrawingCursor:"crosshair",rotationCursor:"crosshair",notAllowedCursor:"not-allowed",containerClass:"canvas-container",perPixelTargetFind:!1,targetFindTolerance:0,skipTargetFind:!1,isDrawingMode:!1,preserveObjectStacking:!1,snapAngle:0,snapThreshold:null,stopContextMenu:!1,fireRightClick:!1,fireMiddleClick:!1,targets:[],_hoveredTarget:null,_hoveredTargets:[],_initInteractive:function(){this._currentTransform=null,this._groupSelector=null,this._initWrapperElement(),this._createUpperCanvas(),this._initEventListeners(),this._initRetinaScaling(),this.freeDrawingBrush=n.PencilBrush&&new n.PencilBrush(this),this.calcOffset()},_chooseObjectsToRender:function(){var t,e,i,n=this.getActiveObjects();if(n.length>0&&!this.preserveObjectStacking){e=[],i=[];for(var r=0,o=this._objects.length;r<o;r++)t=this._objects[r],-1===n.indexOf(t)?e.push(t):i.push(t);n.length>1&&(this._activeObject._objects=i),e.push.apply(e,i)}else e=this._objects;return e},renderAll:function(){!this.contextTopDirty||this._groupSelector||this.isDrawingMode||(this.clearContext(this.contextTop),this.contextTopDirty=!1),this.hasLostContext&&this.renderTopLayer(this.contextTop);var t=this.contextContainer;return this.renderCanvas(t,this._chooseObjectsToRender()),this},renderTopLayer:function(t){t.save(),this.isDrawingMode&&this._isCurrentlyDrawing&&(this.freeDrawingBrush&&this.freeDrawingBrush._render(),this.contextTopDirty=!0),this.selection&&this._groupSelector&&(this._drawSelection(t),this.contextTopDirty=!0),t.restore()},renderTop:function(){var t=this.contextTop;return this.clearContext(t),this.renderTopLayer(t),this.fire("after:render"),this},_normalizePointer:function(t,e){var i=t.calcTransformMatrix(),r=n.util.invertTransform(i),o=this.restorePointerVpt(e);return n.util.transformPoint(o,r)},isTargetTransparent:function(t,e,i){if(t.shouldCache()&&t._cacheCanvas&&t!==this._activeObject){var r=this._normalizePointer(t,{x:e,y:i}),o=Math.max(t.cacheTranslationX+r.x*t.zoomX,0),s=Math.max(t.cacheTranslationY+r.y*t.zoomY,0),a=n.util.isTransparent(t._cacheContext,Math.round(o),Math.round(s),this.targetFindTolerance);return a}var c=this.contextCache,l=t.selectionBackgroundColor,h=this.viewportTransform;t.selectionBackgroundColor="",this.clearContext(c),c.save(),c.transform(h[0],h[1],h[2],h[3],h[4],h[5]),t.render(c),c.restore(),t.selectionBackgroundColor=l;a=n.util.isTransparent(c,e,i,this.targetFindTolerance);return a},_isSelectionKeyPressed:function(t){var e=!1;return e="[object Array]"===Object.prototype.toString.call(this.selectionKey)?!!this.selectionKey.find((function(e){return!0===t[e]})):t[this.selectionKey],e},_shouldClearSelection:function(t,e){var i=this.getActiveObjects(),n=this._activeObject;return!e||e&&n&&i.length>1&&-1===i.indexOf(e)&&n!==e&&!this._isSelectionKeyPressed(t)||e&&!e.evented||e&&!e.selectable&&n&&n!==e},_shouldCenterTransform:function(t,e,i){var n;if(t)return"scale"===e||"scaleX"===e||"scaleY"===e||"resizing"===e?n=this.centeredScaling||t.centeredScaling:"rotate"===e&&(n=this.centeredRotation||t.centeredRotation),n?!i:i},_getOriginFromCorner:function(t,e){var i={x:t.originX,y:t.originY};return"ml"===e||"tl"===e||"bl"===e?i.x="right":"mr"!==e&&"tr"!==e&&"br"!==e||(i.x="left"),"tl"===e||"mt"===e||"tr"===e?i.y="bottom":"bl"!==e&&"mb"!==e&&"br"!==e||(i.y="top"),i},_getActionFromCorner:function(t,e,i,n){if(!e||!t)return"drag";var r=n.controls[e];return r.getActionName(i,r,n)},_setupCurrentTransform:function(t,i,r){if(i){var o=this.getPointer(t),s=i.__corner,a=i.controls[s],c=r&&s?a.getActionHandler(t,i,a):n.controlsUtils.dragHandler,l=this._getActionFromCorner(r,s,t,i),h=this._getOriginFromCorner(i,s),u=t[this.centeredKey],f={target:i,action:l,actionHandler:c,corner:s,scaleX:i.scaleX,scaleY:i.scaleY,skewX:i.skewX,skewY:i.skewY,offsetX:o.x-i.left,offsetY:o.y-i.top,originX:h.x,originY:h.y,ex:o.x,ey:o.y,lastX:o.x,lastY:o.y,theta:e(i.angle),width:i.width*i.scaleX,shiftKey:t.shiftKey,altKey:u,original:n.util.saveObjectTransform(i)};this._shouldCenterTransform(i,l,u)&&(f.originX="center",f.originY="center"),f.original.originX=h.x,f.original.originY=h.y,this._currentTransform=f,this._beforeTransform(t)}},setCursor:function(t){this.upperCanvasEl.style.cursor=t},_drawSelection:function(t){var e=this._groupSelector,o=e.left,a=e.top,c=i(o),l=i(a);if(this.selectionColor&&(t.fillStyle=this.selectionColor,t.fillRect(e.ex-(o>0?0:-o),e.ey-(a>0?0:-a),c,l)),this.selectionLineWidth&&this.selectionBorderColor)if(t.lineWidth=this.selectionLineWidth,t.strokeStyle=this.selectionBorderColor,this.selectionDashArray.length>1&&!r){var h=e.ex+s-(o>0?0:c),u=e.ey+s-(a>0?0:l);t.beginPath(),n.util.drawDashedLine(t,h,u,h+c,u,this.selectionDashArray),n.util.drawDashedLine(t,h,u+l-1,h+c,u+l-1,this.selectionDashArray),n.util.drawDashedLine(t,h,u,h,u+l,this.selectionDashArray),n.util.drawDashedLine(t,h+c-1,u,h+c-1,u+l,this.selectionDashArray),t.closePath(),t.stroke()}else n.Object.prototype._setLineDash.call(this,t,this.selectionDashArray),t.strokeRect(e.ex+s-(o>0?0:c),e.ey+s-(a>0?0:l),c,l)},findTarget:function(t,e){if(!this.skipTargetFind){var i,n,r=!0,s=this.getPointer(t,r),a=this._activeObject,c=this.getActiveObjects(),l=o(t),h=c.length>1&&!e||1===c.length;if(this.targets=[],h&&a._findTargetCorner(s,l))return a;if(c.length>1&&!e&&a===this._searchPossibleTargets([a],s))return a;if(1===c.length&&a===this._searchPossibleTargets([a],s)){if(!this.preserveObjectStacking)return a;i=a,n=this.targets,this.targets=[]}var u=this._searchPossibleTargets(this._objects,s);return t[this.altSelectionKey]&&u&&i&&u!==i&&(u=i,this.targets=n),u}},_checkTarget:function(t,e,i){if(e&&e.visible&&e.evented&&e.containsPoint(t)){if(!this.perPixelTargetFind&&!e.perPixelTargetFind||e.isEditing)return!0;var n=this.isTargetTransparent(e,i.x,i.y);if(!n)return!0}},_searchPossibleTargets:function(t,e){var i,r,o=t.length;while(o--){var s=t[o],a=s.group?this._normalizePointer(s.group,e):e;if(this._checkTarget(a,s,e)){i=t[o],i.subTargetCheck&&i instanceof n.Group&&(r=this._searchPossibleTargets(i._objects,e),r&&this.targets.push(r));break}}return i},restorePointerVpt:function(t){return n.util.transformPoint(t,n.util.invertTransform(this.viewportTransform))},getPointer:function(e,i){if(this._absolutePointer&&!i)return this._absolutePointer;if(this._pointer&&i)return this._pointer;var n,r=t(e),o=this.upperCanvasEl,s=o.getBoundingClientRect(),a=s.width||0,c=s.height||0;a&&c||("top"in s&&"bottom"in s&&(c=Math.abs(s.top-s.bottom)),"right"in s&&"left"in s&&(a=Math.abs(s.right-s.left))),this.calcOffset(),r.x=r.x-this._offset.left,r.y=r.y-this._offset.top,i||(r=this.restorePointerVpt(r));var l=this.getRetinaScaling();return 1!==l&&(r.x/=l,r.y/=l),n=0===a||0===c?{width:1,height:1}:{width:o.width/a,height:o.height/c},{x:r.x*n.width,y:r.y*n.height}},_createUpperCanvas:function(){var t=this.lowerCanvasEl.className.replace(/\s*lower-canvas\s*/,""),e=this.lowerCanvasEl,i=this.upperCanvasEl;i?i.className="":(i=this._createCanvasElement(),this.upperCanvasEl=i),n.util.addClass(i,"upper-canvas "+t),this.wrapperEl.appendChild(i),this._copyCanvasStyle(e,i),this._applyCanvasStyle(i),this.contextTop=i.getContext("2d")},_createCacheCanvas:function(){this.cacheCanvasEl=this._createCanvasElement(),this.cacheCanvasEl.setAttribute("width",this.width),this.cacheCanvasEl.setAttribute("height",this.height),this.contextCache=this.cacheCanvasEl.getContext("2d")},_initWrapperElement:function(){this.wrapperEl=n.util.wrapElement(this.lowerCanvasEl,"div",{class:this.containerClass}),n.util.setStyle(this.wrapperEl,{width:this.width+"px",height:this.height+"px",position:"relative"}),n.util.makeElementUnselectable(this.wrapperEl)},_applyCanvasStyle:function(t){var e=this.width||t.width,i=this.height||t.height;n.util.setStyle(t,{position:"absolute",width:e+"px",height:i+"px",left:0,top:0,"touch-action":this.allowTouchScrolling?"manipulation":"none","-ms-touch-action":this.allowTouchScrolling?"manipulation":"none"}),t.width=e,t.height=i,n.util.makeElementUnselectable(t)},_copyCanvasStyle:function(t,e){e.style.cssText=t.style.cssText},getSelectionContext:function(){return this.contextTop},getSelectionElement:function(){return this.upperCanvasEl},getActiveObject:function(){return this._activeObject},getActiveObjects:function(){var t=this._activeObject;return t?"activeSelection"===t.type&&t._objects?t._objects.slice(0):[t]:[]},_onObjectRemoved:function(t){t===this._activeObject&&(this.fire("before:selection:cleared",{target:t}),this._discardActiveObject(),this.fire("selection:cleared",{target:t}),t.fire("deselected")),t===this._hoveredTarget&&(this._hoveredTarget=null,this._hoveredTargets=[]),this.callSuper("_onObjectRemoved",t)},_fireSelectionEvents:function(t,e){var i=!1,n=this.getActiveObjects(),r=[],o=[];t.forEach((function(t){-1===n.indexOf(t)&&(i=!0,t.fire("deselected",{e:e,target:t}),o.push(t))})),n.forEach((function(n){-1===t.indexOf(n)&&(i=!0,n.fire("selected",{e:e,target:n}),r.push(n))})),t.length>0&&n.length>0?i&&this.fire("selection:updated",{e:e,selected:r,deselected:o,updated:r[0]||o[0],target:this._activeObject}):n.length>0?this.fire("selection:created",{e:e,selected:r,target:this._activeObject}):t.length>0&&this.fire("selection:cleared",{e:e,deselected:o})},setActiveObject:function(t,e){var i=this.getActiveObjects();return this._setActiveObject(t,e),this._fireSelectionEvents(i,e),this},_setActiveObject:function(t,e){return this._activeObject!==t&&(!!this._discardActiveObject(e,t)&&(!t.onSelect({e:e})&&(this._activeObject=t,!0)))},_discardActiveObject:function(t,e){var i=this._activeObject;if(i){if(i.onDeselect({e:t,object:e}))return!1;this._activeObject=null}return!0},discardActiveObject:function(t){var e=this.getActiveObjects(),i=this.getActiveObject();return e.length&&this.fire("before:selection:cleared",{target:i,e:t}),this._discardActiveObject(t),this._fireSelectionEvents(e,t),this},dispose:function(){var t=this.wrapperEl;return this.removeListeners(),t.removeChild(this.upperCanvasEl),t.removeChild(this.lowerCanvasEl),this.contextCache=null,this.contextTop=null,["upperCanvasEl","cacheCanvasEl"].forEach(function(t){n.util.cleanUpJsdomNode(this[t]),this[t]=void 0}.bind(this)),t.parentNode&&t.parentNode.replaceChild(this.lowerCanvasEl,this.wrapperEl),delete this.wrapperEl,n.StaticCanvas.prototype.dispose.call(this),this},clear:function(){return this.discardActiveObject(),this.clearContext(this.contextTop),this.callSuper("clear")},drawControls:function(t){var e=this._activeObject;e&&e._renderControls(t)},_toObject:function(t,e,i){var n=this._realizeGroupTransformOnObject(t),r=this.callSuper("_toObject",t,e,i);return this._unwindGroupTransformOnObject(t,n),r},_realizeGroupTransformOnObject:function(t){if(t.group&&"activeSelection"===t.group.type&&this._activeObject===t.group){var e=["angle","flipX","flipY","left","scaleX","scaleY","skewX","skewY","top"],i={};return e.forEach((function(e){i[e]=t[e]})),n.util.addTransformToObject(t,this._activeObject.calcOwnMatrix()),i}return null},_unwindGroupTransformOnObject:function(t,e){e&&t.set(e)},_setSVGObject:function(t,e,i){var n=this._realizeGroupTransformOnObject(e);this.callSuper("_setSVGObject",t,e,i),this._unwindGroupTransformOnObject(e,n)},setViewportTransform:function(t){this.renderOnAddRemove&&this._activeObject&&this._activeObject.isEditing&&this._activeObject.clearContextTop(),n.StaticCanvas.prototype.setViewportTransform.call(this,t)}}),n.StaticCanvas)"prototype"!==a&&(n.Canvas[a]=n.StaticCanvas[a])}(),function(){var t=n.util.addListener,e=n.util.removeListener,i=3,r=2,o=1,s={passive:!1};function a(t,e){return t.button&&t.button===e-1}n.util.object.extend(n.Canvas.prototype,{mainTouchId:null,_initEventListeners:function(){this.removeListeners(),this._bindEvents(),this.addOrRemove(t,"add")},_getEventPrefix:function(){return this.enablePointerEvents?"pointer":"mouse"},addOrRemove:function(t,e){var i=this.upperCanvasEl,r=this._getEventPrefix();t(n.window,"resize",this._onResize),t(i,r+"down",this._onMouseDown),t(i,r+"move",this._onMouseMove,s),t(i,r+"out",this._onMouseOut),t(i,r+"enter",this._onMouseEnter),t(i,"wheel",this._onMouseWheel),t(i,"contextmenu",this._onContextMenu),t(i,"dblclick",this._onDoubleClick),t(i,"dragover",this._onDragOver),t(i,"dragenter",this._onDragEnter),t(i,"dragleave",this._onDragLeave),t(i,"drop",this._onDrop),this.enablePointerEvents||t(i,"touchstart",this._onTouchStart,s),"undefined"!==typeof eventjs&&e in eventjs&&(eventjs[e](i,"gesture",this._onGesture),eventjs[e](i,"drag",this._onDrag),eventjs[e](i,"orientation",this._onOrientationChange),eventjs[e](i,"shake",this._onShake),eventjs[e](i,"longpress",this._onLongPress))},removeListeners:function(){this.addOrRemove(e,"remove");var t=this._getEventPrefix();e(n.document,t+"up",this._onMouseUp),e(n.document,"touchend",this._onTouchEnd,s),e(n.document,t+"move",this._onMouseMove,s),e(n.document,"touchmove",this._onMouseMove,s)},_bindEvents:function(){this.eventsBound||(this._onMouseDown=this._onMouseDown.bind(this),this._onTouchStart=this._onTouchStart.bind(this),this._onMouseMove=this._onMouseMove.bind(this),this._onMouseUp=this._onMouseUp.bind(this),this._onTouchEnd=this._onTouchEnd.bind(this),this._onResize=this._onResize.bind(this),this._onGesture=this._onGesture.bind(this),this._onDrag=this._onDrag.bind(this),this._onShake=this._onShake.bind(this),this._onLongPress=this._onLongPress.bind(this),this._onOrientationChange=this._onOrientationChange.bind(this),this._onMouseWheel=this._onMouseWheel.bind(this),this._onMouseOut=this._onMouseOut.bind(this),this._onMouseEnter=this._onMouseEnter.bind(this),this._onContextMenu=this._onContextMenu.bind(this),this._onDoubleClick=this._onDoubleClick.bind(this),this._onDragOver=this._onDragOver.bind(this),this._onDragEnter=this._simpleEventHandler.bind(this,"dragenter"),this._onDragLeave=this._simpleEventHandler.bind(this,"dragleave"),this._onDrop=this._simpleEventHandler.bind(this,"drop"),this.eventsBound=!0)},_onGesture:function(t,e){this.__onTransformGesture&&this.__onTransformGesture(t,e)},_onDrag:function(t,e){this.__onDrag&&this.__onDrag(t,e)},_onMouseWheel:function(t){this.__onMouseWheel(t)},_onMouseOut:function(t){var e=this._hoveredTarget;this.fire("mouse:out",{target:e,e:t}),this._hoveredTarget=null,e&&e.fire("mouseout",{e:t});var i=this;this._hoveredTargets.forEach((function(n){i.fire("mouse:out",{target:e,e:t}),n&&e.fire("mouseout",{e:t})})),this._hoveredTargets=[],this._iTextInstances&&this._iTextInstances.forEach((function(t){t.isEditing&&t.hiddenTextarea.focus()}))},_onMouseEnter:function(t){this._currentTransform||this.findTarget(t)||(this.fire("mouse:over",{target:null,e:t}),this._hoveredTarget=null,this._hoveredTargets=[])},_onOrientationChange:function(t,e){this.__onOrientationChange&&this.__onOrientationChange(t,e)},_onShake:function(t,e){this.__onShake&&this.__onShake(t,e)},_onLongPress:function(t,e){this.__onLongPress&&this.__onLongPress(t,e)},_onDragOver:function(t){t.preventDefault();var e=this._simpleEventHandler("dragover",t);this._fireEnterLeaveEvents(e,t)},_onContextMenu:function(t){return this.stopContextMenu&&(t.stopPropagation(),t.preventDefault()),!1},_onDoubleClick:function(t){this._cacheTransformEventData(t),this._handleEvent(t,"dblclick"),this._resetTransformEventData(t)},getPointerId:function(t){var e=t.changedTouches;return e?e[0]&&e[0].identifier:this.enablePointerEvents?t.pointerId:-1},_isMainEvent:function(t){return!0===t.isPrimary||!1!==t.isPrimary&&("touchend"===t.type&&0===t.touches.length||(!t.changedTouches||t.changedTouches[0].identifier===this.mainTouchId))},_onTouchStart:function(i){i.preventDefault(),null===this.mainTouchId&&(this.mainTouchId=this.getPointerId(i)),this.__onMouseDown(i),this._resetTransformEventData();var r=this.upperCanvasEl,o=this._getEventPrefix();t(n.document,"touchend",this._onTouchEnd,s),t(n.document,"touchmove",this._onMouseMove,s),e(r,o+"down",this._onMouseDown)},_onMouseDown:function(i){this.__onMouseDown(i),this._resetTransformEventData();var r=this.upperCanvasEl,o=this._getEventPrefix();e(r,o+"move",this._onMouseMove,s),t(n.document,o+"up",this._onMouseUp),t(n.document,o+"move",this._onMouseMove,s)},_onTouchEnd:function(i){if(!(i.touches.length>0)){this.__onMouseUp(i),this._resetTransformEventData(),this.mainTouchId=null;var r=this._getEventPrefix();e(n.document,"touchend",this._onTouchEnd,s),e(n.document,"touchmove",this._onMouseMove,s);var o=this;this._willAddMouseDown&&clearTimeout(this._willAddMouseDown),this._willAddMouseDown=setTimeout((function(){t(o.upperCanvasEl,r+"down",o._onMouseDown),o._willAddMouseDown=0}),400)}},_onMouseUp:function(i){this.__onMouseUp(i),this._resetTransformEventData();var r=this.upperCanvasEl,o=this._getEventPrefix();this._isMainEvent(i)&&(e(n.document,o+"up",this._onMouseUp),e(n.document,o+"move",this._onMouseMove,s),t(r,o+"move",this._onMouseMove,s))},_onMouseMove:function(t){!this.allowTouchScrolling&&t.preventDefault&&t.preventDefault(),this.__onMouseMove(t)},_onResize:function(){this.calcOffset()},_shouldRender:function(t){var e=this._activeObject;return!!(!!e!==!!t||e&&t&&e!==t)||(e&&e.isEditing,!1)},__onMouseUp:function(t){var e,s=this._currentTransform,c=this._groupSelector,l=!1,h=!c||0===c.left&&0===c.top;if(this._cacheTransformEventData(t),e=this._target,this._handleEvent(t,"up:before"),a(t,i))this.fireRightClick&&this._handleEvent(t,"up",i,h);else{if(a(t,r))return this.fireMiddleClick&&this._handleEvent(t,"up",r,h),void this._resetTransformEventData();if(this.isDrawingMode&&this._isCurrentlyDrawing)this._onMouseUpInDrawingMode(t);else if(this._isMainEvent(t)){if(s&&(this._finalizeCurrentTransform(t),l=s.actionPerformed),!h){var u=e===this._activeObject;this._maybeGroupObjects(t),l||(l=this._shouldRender(e)||!u&&e===this._activeObject)}if(e){if(e.selectable&&e!==this._activeObject&&"up"===e.activeOn)this.setActiveObject(e,t),l=!0;else{var f=e._findTargetCorner(this.getPointer(t,!0),n.util.isTouchEvent(t)),d=e.controls[f],p=d&&d.getMouseUpHandler(t,e,d);if(p){var g=this.getPointer(t);p(t,s,g.x,g.y)}}e.isMoving=!1}this._setCursorFromEvent(t,e),this._handleEvent(t,"up",o,h),this._groupSelector=null,this._currentTransform=null,e&&(e.__corner=0),l?this.requestRenderAll():h||this.renderTop()}}},_simpleEventHandler:function(t,e){var i=this.findTarget(e),n=this.targets,r={e:e,target:i,subTargets:n};if(this.fire(t,r),i&&i.fire(t,r),!n)return i;for(var o=0;o<n.length;o++)n[o].fire(t,r);return i},_handleEvent:function(t,e,i,n){var r=this._target,s=this.targets||[],a={e:t,target:r,subTargets:s,button:i||o,isClick:n||!1,pointer:this._pointer,absolutePointer:this._absolutePointer,transform:this._currentTransform};"up"===e&&(a.currentTarget=this.findTarget(t),a.currentSubTargets=this.targets),this.fire("mouse:"+e,a),r&&r.fire("mouse"+e,a);for(var c=0;c<s.length;c++)s[c].fire("mouse"+e,a)},_finalizeCurrentTransform:function(t){var e,i=this._currentTransform,n=i.target,r={e:t,target:n,transform:i,action:i.action};n._scaling&&(n._scaling=!1),n.setCoords(),(i.actionPerformed||this.stateful&&n.hasStateChanged())&&(i.actionPerformed&&(e=this._addEventOptions(r,i),this._fire(e,r)),this._fire("modified",r))},_addEventOptions:function(t,e){var i,n;switch(e.action){case"scaleX":i="scaled",n="x";break;case"scaleY":i="scaled",n="y";break;case"skewX":i="skewed",n="x";break;case"skewY":i="skewed",n="y";break;case"scale":i="scaled",n="equally";break;case"rotate":i="rotated";break;case"drag":i="moved";break}return t.by=n,i},_onMouseDownInDrawingMode:function(t){this._isCurrentlyDrawing=!0,this.getActiveObject()&&this.discardActiveObject(t).requestRenderAll();var e=this.getPointer(t);this.freeDrawingBrush.onMouseDown(e,{e:t,pointer:e}),this._handleEvent(t,"down")},_onMouseMoveInDrawingMode:function(t){if(this._isCurrentlyDrawing){var e=this.getPointer(t);this.freeDrawingBrush.onMouseMove(e,{e:t,pointer:e})}this.setCursor(this.freeDrawingCursor),this._handleEvent(t,"move")},_onMouseUpInDrawingMode:function(t){var e=this.getPointer(t);this._isCurrentlyDrawing=this.freeDrawingBrush.onMouseUp({e:t,pointer:e}),this._handleEvent(t,"up")},__onMouseDown:function(t){this._cacheTransformEventData(t),this._handleEvent(t,"down:before");var e=this._target;if(a(t,i))this.fireRightClick&&this._handleEvent(t,"down",i);else if(a(t,r))this.fireMiddleClick&&this._handleEvent(t,"down",r);else if(this.isDrawingMode)this._onMouseDownInDrawingMode(t);else if(this._isMainEvent(t)&&!this._currentTransform){var o=this._pointer;this._previousPointer=o;var s=this._shouldRender(e),c=this._shouldGroup(t,e);if(this._shouldClearSelection(t,e)?this.discardActiveObject(t):c&&(this._handleGrouping(t,e),e=this._activeObject),!this.selection||e&&(e.selectable||e.isEditing||e===this._activeObject)||(this._groupSelector={ex:o.x,ey:o.y,top:0,left:0}),e){var l=e===this._activeObject;e.selectable&&"down"===e.activeOn&&this.setActiveObject(e,t);var h=e._findTargetCorner(this.getPointer(t,!0),n.util.isTouchEvent(t));if(e.__corner=h,e===this._activeObject&&(h||!c)){this._setupCurrentTransform(t,e,l);var u=e.controls[h],f=(o=this.getPointer(t),u&&u.getMouseDownHandler(t,e,u));f&&f(t,this._currentTransform,o.x,o.y)}}this._handleEvent(t,"down"),(s||c)&&this.requestRenderAll()}},_resetTransformEventData:function(){this._target=null,this._pointer=null,this._absolutePointer=null},_cacheTransformEventData:function(t){this._resetTransformEventData(),this._pointer=this.getPointer(t,!0),this._absolutePointer=this.restorePointerVpt(this._pointer),this._target=this._currentTransform?this._currentTransform.target:this.findTarget(t)||null},_beforeTransform:function(t){var e=this._currentTransform;this.stateful&&e.target.saveState(),this.fire("before:transform",{e:t,transform:e})},__onMouseMove:function(t){var e,i;if(this._handleEvent(t,"move:before"),this._cacheTransformEventData(t),this.isDrawingMode)this._onMouseMoveInDrawingMode(t);else if(this._isMainEvent(t)){var n=this._groupSelector;n?(i=this._pointer,n.left=i.x-n.ex,n.top=i.y-n.ey,this.renderTop()):this._currentTransform?this._transformObject(t):(e=this.findTarget(t)||null,this._setCursorFromEvent(t,e),this._fireOverOutEvents(e,t)),this._handleEvent(t,"move"),this._resetTransformEventData()}},_fireOverOutEvents:function(t,e){var i=this._hoveredTarget,n=this._hoveredTargets,r=this.targets,o=Math.max(n.length,r.length);this.fireSyntheticInOutEvents(t,e,{oldTarget:i,evtOut:"mouseout",canvasEvtOut:"mouse:out",evtIn:"mouseover",canvasEvtIn:"mouse:over"});for(var s=0;s<o;s++)this.fireSyntheticInOutEvents(r[s],e,{oldTarget:n[s],evtOut:"mouseout",evtIn:"mouseover"});this._hoveredTarget=t,this._hoveredTargets=this.targets.concat()},_fireEnterLeaveEvents:function(t,e){var i=this._draggedoverTarget,n=this._hoveredTargets,r=this.targets,o=Math.max(n.length,r.length);this.fireSyntheticInOutEvents(t,e,{oldTarget:i,evtOut:"dragleave",evtIn:"dragenter"});for(var s=0;s<o;s++)this.fireSyntheticInOutEvents(r[s],e,{oldTarget:n[s],evtOut:"dragleave",evtIn:"dragenter"});this._draggedoverTarget=t},fireSyntheticInOutEvents:function(t,e,i){var n,r,o,s,a=i.oldTarget,c=a!==t,l=i.canvasEvtIn,h=i.canvasEvtOut;c&&(n={e:e,target:t,previousTarget:a},r={e:e,target:a,nextTarget:t}),s=t&&c,o=a&&c,o&&(h&&this.fire(h,r),a.fire(i.evtOut,r)),s&&(l&&this.fire(l,n),t.fire(i.evtIn,n))},__onMouseWheel:function(t){this._cacheTransformEventData(t),this._handleEvent(t,"wheel"),this._resetTransformEventData()},_transformObject:function(t){var e=this.getPointer(t),i=this._currentTransform;i.reset=!1,i.shiftKey=t.shiftKey,i.altKey=t[this.centeredKey],this._performTransformAction(t,i,e),i.actionPerformed&&this.requestRenderAll()},_performTransformAction:function(t,e,i){var n=i.x,r=i.y,o=e.action,s=!1,a=e.actionHandler;a&&(s=a(t,e,n,r)),"drag"===o&&s&&(e.target.isMoving=!0,this.setCursor(e.target.moveCursor||this.moveCursor)),e.actionPerformed=e.actionPerformed||s},_fire:n.controlsUtils.fireEvent,_setCursorFromEvent:function(t,e){if(!e)return this.setCursor(this.defaultCursor),!1;var i=e.hoverCursor||this.hoverCursor,n=this._activeObject&&"activeSelection"===this._activeObject.type?this._activeObject:null,r=(!n||!n.contains(e))&&e._findTargetCorner(this.getPointer(t,!0));r?this.setCursor(this.getCornerCursor(r,e,t)):(e.subTargetCheck&&this.targets.concat().reverse().map((function(t){i=t.hoverCursor||i})),this.setCursor(i))},getCornerCursor:function(t,e,i){var n=e.controls[t];return n.cursorStyleHandler(i,n,e)}})}(),function(){var t=Math.min,e=Math.max;n.util.object.extend(n.Canvas.prototype,{_shouldGroup:function(t,e){var i=this._activeObject;return i&&this._isSelectionKeyPressed(t)&&e&&e.selectable&&this.selection&&(i!==e||"activeSelection"===i.type)&&!e.onSelect({e:t})},_handleGrouping:function(t,e){var i=this._activeObject;i.__corner||(e!==i||(e=this.findTarget(t,!0),e&&e.selectable))&&(i&&"activeSelection"===i.type?this._updateActiveSelection(e,t):this._createActiveSelection(e,t))},_updateActiveSelection:function(t,e){var i=this._activeObject,n=i._objects.slice(0);i.contains(t)?(i.removeWithUpdate(t),this._hoveredTarget=t,this._hoveredTargets=this.targets.concat(),1===i.size()&&this._setActiveObject(i.item(0),e)):(i.addWithUpdate(t),this._hoveredTarget=i,this._hoveredTargets=this.targets.concat()),this._fireSelectionEvents(n,e)},_createActiveSelection:function(t,e){var i=this.getActiveObjects(),n=this._createGroup(t);this._hoveredTarget=n,this._setActiveObject(n,e),this._fireSelectionEvents(i,e)},_createGroup:function(t){var e=this._objects,i=e.indexOf(this._activeObject)<e.indexOf(t),r=i?[this._activeObject,t]:[t,this._activeObject];return this._activeObject.isEditing&&this._activeObject.exitEditing(),new n.ActiveSelection(r,{canvas:this})},_groupSelectedObjects:function(t){var e,i=this._collectObjects(t);1===i.length?this.setActiveObject(i[0],t):i.length>1&&(e=new n.ActiveSelection(i.reverse(),{canvas:this}),this.setActiveObject(e,t))},_collectObjects:function(i){for(var r,o=[],s=this._groupSelector.ex,a=this._groupSelector.ey,c=s+this._groupSelector.left,l=a+this._groupSelector.top,h=new n.Point(t(s,c),t(a,l)),u=new n.Point(e(s,c),e(a,l)),f=!this.selectionFullyContained,d=s===c&&a===l,p=this._objects.length;p--;)if(r=this._objects[p],r&&r.selectable&&r.visible&&(f&&r.intersectsWithRect(h,u)||r.isContainedWithinRect(h,u)||f&&r.containsPoint(h)||f&&r.containsPoint(u))&&(o.push(r),d))break;return o.length>1&&(o=o.filter((function(t){return!t.onSelect({e:i})}))),o},_maybeGroupObjects:function(t){this.selection&&this._groupSelector&&this._groupSelectedObjects(t),this.setCursor(this.defaultCursor),this._groupSelector=null}})}(),function(){n.util.object.extend(n.StaticCanvas.prototype,{toDataURL:function(t){t||(t={});var e=t.format||"png",i=t.quality||1,r=(t.multiplier||1)*(t.enableRetinaScaling?this.getRetinaScaling():1),o=this.toCanvasElement(r,t);return n.util.toDataURL(o,e,i)},toCanvasElement:function(t,e){t=t||1,e=e||{};var i=(e.width||this.width)*t,r=(e.height||this.height)*t,o=this.getZoom(),s=this.width,a=this.height,c=o*t,l=this.viewportTransform,h=(l[4]-(e.left||0))*t,u=(l[5]-(e.top||0))*t,f=this.interactive,d=[c,0,0,c,h,u],p=this.enableRetinaScaling,g=n.util.createCanvasElement(),v=this.contextTop;return g.width=i,g.height=r,this.contextTop=null,this.enableRetinaScaling=!1,this.interactive=!1,this.viewportTransform=d,this.width=i,this.height=r,this.calcViewportBoundaries(),this.renderCanvas(g.getContext("2d"),this._objects),this.viewportTransform=l,this.width=s,this.height=a,this.calcViewportBoundaries(),this.interactive=f,this.enableRetinaScaling=p,this.contextTop=v,g}})}(),n.util.object.extend(n.StaticCanvas.prototype,{loadFromJSON:function(t,e,i){if(t){var r="string"===typeof t?JSON.parse(t):n.util.object.clone(t),o=this,s=r.clipPath,a=this.renderOnAddRemove;return this.renderOnAddRemove=!1,delete r.clipPath,this._enlivenObjects(r.objects,(function(t){o.clear(),o._setBgOverlay(r,(function(){s?o._enlivenObjects([s],(function(i){o.clipPath=i[0],o.__setupCanvas.call(o,r,t,a,e)})):o.__setupCanvas.call(o,r,t,a,e)}))}),i),this}},__setupCanvas:function(t,e,i,n){var r=this;e.forEach((function(t,e){r.insertAt(t,e)})),this.renderOnAddRemove=i,delete t.objects,delete t.backgroundImage,delete t.overlayImage,delete t.background,delete t.overlay,this._setOptions(t),this.renderAll(),n&&n()},_setBgOverlay:function(t,e){var i={backgroundColor:!1,overlayColor:!1,backgroundImage:!1,overlayImage:!1};if(t.backgroundImage||t.overlayImage||t.background||t.overlay){var n=function(){i.backgroundImage&&i.overlayImage&&i.backgroundColor&&i.overlayColor&&e&&e()};this.__setBgOverlay("backgroundImage",t.backgroundImage,i,n),this.__setBgOverlay("overlayImage",t.overlayImage,i,n),this.__setBgOverlay("backgroundColor",t.background,i,n),this.__setBgOverlay("overlayColor",t.overlay,i,n)}else e&&e()},__setBgOverlay:function(t,e,i,r){var o=this;if(!e)return i[t]=!0,void(r&&r());"backgroundImage"===t||"overlayImage"===t?n.util.enlivenObjects([e],(function(e){o[t]=e[0],i[t]=!0,r&&r()})):this["set"+n.util.string.capitalize(t,!0)](e,(function(){i[t]=!0,r&&r()}))},_enlivenObjects:function(t,e,i){t&&0!==t.length?n.util.enlivenObjects(t,(function(t){e&&e(t)}),null,i):e&&e([])},_toDataURL:function(t,e){this.clone((function(i){e(i.toDataURL(t))}))},_toDataURLWithMultiplier:function(t,e,i){this.clone((function(n){i(n.toDataURLWithMultiplier(t,e))}))},clone:function(t,e){var i=JSON.stringify(this.toJSON(e));this.cloneWithoutData((function(e){e.loadFromJSON(i,(function(){t&&t(e)}))}))},cloneWithoutData:function(t){var e=n.util.createCanvasElement();e.width=this.width,e.height=this.height;var i=new n.Canvas(e);this.backgroundImage?(i.setBackgroundImage(this.backgroundImage.src,(function(){i.renderAll(),t&&t(i)})),i.backgroundImageOpacity=this.backgroundImageOpacity,i.backgroundImageStretch=this.backgroundImageStretch):t&&t(i)}}),function(t){"use strict";var e=t.fabric||(t.fabric={}),i=e.util.object.extend,n=e.util.object.clone,r=e.util.toFixed,o=e.util.string.capitalize,s=e.util.degreesToRadians,a=e.StaticCanvas.supports("setLineDash"),c=!e.isLikelyNode,l=2;e.Object||(e.Object=e.util.createClass(e.CommonMethods,{type:"object",originX:"left",originY:"top",top:0,left:0,width:0,height:0,scaleX:1,scaleY:1,flipX:!1,flipY:!1,opacity:1,angle:0,skewX:0,skewY:0,cornerSize:13,touchCornerSize:24,transparentCorners:!0,hoverCursor:null,moveCursor:null,padding:0,borderColor:"rgb(178,204,255)",borderDashArray:null,cornerColor:"rgb(178,204,255)",cornerStrokeColor:null,cornerStyle:"rect",cornerDashArray:null,centeredScaling:!1,centeredRotation:!0,fill:"rgb(0,0,0)",fillRule:"nonzero",globalCompositeOperation:"source-over",backgroundColor:"",selectionBackgroundColor:"",stroke:null,strokeWidth:1,strokeDashArray:null,strokeDashOffset:0,strokeLineCap:"butt",strokeLineJoin:"miter",strokeMiterLimit:4,shadow:null,borderOpacityWhenMoving:.4,borderScaleFactor:1,minScaleLimit:0,selectable:!0,evented:!0,visible:!0,hasControls:!0,hasBorders:!0,perPixelTargetFind:!1,includeDefaultValues:!0,lockMovementX:!1,lockMovementY:!1,lockRotation:!1,lockScalingX:!1,lockScalingY:!1,lockSkewingX:!1,lockSkewingY:!1,lockScalingFlip:!1,excludeFromExport:!1,objectCaching:c,statefullCache:!1,noScaleCache:!0,strokeUniform:!1,dirty:!0,__corner:0,paintFirst:"fill",activeOn:"down",stateProperties:"top left width height scaleX scaleY flipX flipY originX originY transformMatrix stroke strokeWidth strokeDashArray strokeLineCap strokeDashOffset strokeLineJoin strokeMiterLimit angle opacity fill globalCompositeOperation shadow visible backgroundColor skewX skewY fillRule paintFirst clipPath strokeUniform".split(" "),cacheProperties:"fill stroke strokeWidth strokeDashArray width height paintFirst strokeUniform strokeLineCap strokeDashOffset strokeLineJoin strokeMiterLimit backgroundColor clipPath".split(" "),colorProperties:"fill stroke backgroundColor".split(" "),clipPath:void 0,inverted:!1,absolutePositioned:!1,initialize:function(t){t&&this.setOptions(t)},_createCacheCanvas:function(){this._cacheProperties={},this._cacheCanvas=e.util.createCanvasElement(),this._cacheContext=this._cacheCanvas.getContext("2d"),this._updateCacheCanvas(),this.dirty=!0},_limitCacheSize:function(t){var i=e.perfLimitSizeTotal,n=t.width,r=t.height,o=e.maxCacheSideLimit,s=e.minCacheSideLimit;if(n<=o&&r<=o&&n*r<=i)return n<s&&(t.width=s),r<s&&(t.height=s),t;var a=n/r,c=e.util.limitDimsByArea(a,i),l=e.util.capValue,h=l(s,c.x,o),u=l(s,c.y,o);return n>h&&(t.zoomX/=n/h,t.width=h,t.capped=!0),r>u&&(t.zoomY/=r/u,t.height=u,t.capped=!0),t},_getCacheCanvasDimensions:function(){var t=this.getTotalObjectScaling(),e=this._getTransformedDimensions(0,0),i=e.x*t.scaleX/this.scaleX,n=e.y*t.scaleY/this.scaleY;return{width:i+l,height:n+l,zoomX:t.scaleX,zoomY:t.scaleY,x:i,y:n}},_updateCacheCanvas:function(){var t=this.canvas;if(this.noScaleCache&&t&&t._currentTransform){var i=t._currentTransform.target,n=t._currentTransform.action;if(this===i&&n.slice&&"scale"===n.slice(0,5))return!1}var r,o,s=this._cacheCanvas,a=this._limitCacheSize(this._getCacheCanvasDimensions()),c=e.minCacheSideLimit,l=a.width,h=a.height,u=a.zoomX,f=a.zoomY,d=l!==this.cacheWidth||h!==this.cacheHeight,p=this.zoomX!==u||this.zoomY!==f,g=d||p,v=0,m=0,y=!1;if(d){var b=this._cacheCanvas.width,w=this._cacheCanvas.height,x=l>b||h>w,_=(l<.9*b||h<.9*w)&&b>c&&w>c;y=x||_,x&&!a.capped&&(l>c||h>c)&&(v=.1*l,m=.1*h)}return!!g&&(y?(s.width=Math.ceil(l+v),s.height=Math.ceil(h+m)):(this._cacheContext.setTransform(1,0,0,1,0,0),this._cacheContext.clearRect(0,0,s.width,s.height)),r=a.x/2,o=a.y/2,this.cacheTranslationX=Math.round(s.width/2-r)+r,this.cacheTranslationY=Math.round(s.height/2-o)+o,this.cacheWidth=l,this.cacheHeight=h,this._cacheContext.translate(this.cacheTranslationX,this.cacheTranslationY),this._cacheContext.scale(u,f),this.zoomX=u,this.zoomY=f,!0)},setOptions:function(t){this._setOptions(t),this._initGradient(t.fill,"fill"),this._initGradient(t.stroke,"stroke"),this._initPattern(t.fill,"fill"),this._initPattern(t.stroke,"stroke")},transform:function(t){var e=this.group&&!this.group._transformDone||this.group&&this.canvas&&t===this.canvas.contextTop,i=this.calcTransformMatrix(!e);t.transform(i[0],i[1],i[2],i[3],i[4],i[5])},toObject:function(t){var i=e.Object.NUM_FRACTION_DIGITS,n={type:this.type,version:e.version,originX:this.originX,originY:this.originY,left:r(this.left,i),top:r(this.top,i),width:r(this.width,i),height:r(this.height,i),fill:this.fill&&this.fill.toObject?this.fill.toObject():this.fill,stroke:this.stroke&&this.stroke.toObject?this.stroke.toObject():this.stroke,strokeWidth:r(this.strokeWidth,i),strokeDashArray:this.strokeDashArray?this.strokeDashArray.concat():this.strokeDashArray,strokeLineCap:this.strokeLineCap,strokeDashOffset:this.strokeDashOffset,strokeLineJoin:this.strokeLineJoin,strokeUniform:this.strokeUniform,strokeMiterLimit:r(this.strokeMiterLimit,i),scaleX:r(this.scaleX,i),scaleY:r(this.scaleY,i),angle:r(this.angle,i),flipX:this.flipX,flipY:this.flipY,opacity:r(this.opacity,i),shadow:this.shadow&&this.shadow.toObject?this.shadow.toObject():this.shadow,visible:this.visible,backgroundColor:this.backgroundColor,fillRule:this.fillRule,paintFirst:this.paintFirst,globalCompositeOperation:this.globalCompositeOperation,skewX:r(this.skewX,i),skewY:r(this.skewY,i)};return this.clipPath&&(n.clipPath=this.clipPath.toObject(t),n.clipPath.inverted=this.clipPath.inverted,n.clipPath.absolutePositioned=this.clipPath.absolutePositioned),e.util.populateWithProperties(this,n,t),this.includeDefaultValues||(n=this._removeDefaultValues(n)),n},toDatalessObject:function(t){return this.toObject(t)},_removeDefaultValues:function(t){var i=e.util.getKlass(t.type).prototype,n=i.stateProperties;return n.forEach((function(e){if("left"!==e&&"top"!==e){t[e]===i[e]&&delete t[e];var n="[object Array]"===Object.prototype.toString.call(t[e])&&"[object Array]"===Object.prototype.toString.call(i[e]);n&&0===t[e].length&&0===i[e].length&&delete t[e]}})),t},toString:function(){return"#<fabric."+o(this.type)+">"},getObjectScaling:function(){var t=e.util.qrDecompose(this.calcTransformMatrix());return{scaleX:Math.abs(t.scaleX),scaleY:Math.abs(t.scaleY)}},getTotalObjectScaling:function(){var t=this.getObjectScaling(),e=t.scaleX,i=t.scaleY;if(this.canvas){var n=this.canvas.getZoom(),r=this.canvas.getRetinaScaling();e*=n*r,i*=n*r}return{scaleX:e,scaleY:i}},getObjectOpacity:function(){var t=this.opacity;return this.group&&(t*=this.group.getObjectOpacity()),t},_set:function(t,i){var n="scaleX"===t||"scaleY"===t,r=this[t]!==i,o=!1;return n&&(i=this._constrainScale(i)),"scaleX"===t&&i<0?(this.flipX=!this.flipX,i*=-1):"scaleY"===t&&i<0?(this.flipY=!this.flipY,i*=-1):"shadow"!==t||!i||i instanceof e.Shadow?"dirty"===t&&this.group&&this.group.set("dirty",i):i=new e.Shadow(i),this[t]=i,r&&(o=this.group&&this.group.isOnACache(),this.cacheProperties.indexOf(t)>-1?(this.dirty=!0,o&&this.group.set("dirty",!0)):o&&this.stateProperties.indexOf(t)>-1&&this.group.set("dirty",!0)),this},setOnGroup:function(){},getViewportTransform:function(){return this.canvas&&this.canvas.viewportTransform?this.canvas.viewportTransform:e.iMatrix.concat()},isNotVisible:function(){return 0===this.opacity||!this.width&&!this.height&&0===this.strokeWidth||!this.visible},render:function(t){this.isNotVisible()||this.canvas&&this.canvas.skipOffscreen&&!this.group&&!this.isOnScreen()||(t.save(),this._setupCompositeOperation(t),this.drawSelectionBackground(t),this.transform(t),this._setOpacity(t),this._setShadow(t,this),this.shouldCache()?(this.renderCache(),this.drawCacheOnCanvas(t)):(this._removeCacheCanvas(),this.dirty=!1,this.drawObject(t),this.objectCaching&&this.statefullCache&&this.saveState({propertySet:"cacheProperties"})),t.restore())},renderCache:function(t){t=t||{},this._cacheCanvas||this._createCacheCanvas(),this.isCacheDirty()&&(this.statefullCache&&this.saveState({propertySet:"cacheProperties"}),this.drawObject(this._cacheContext,t.forClipping),this.dirty=!1)},_removeCacheCanvas:function(){this._cacheCanvas=null,this.cacheWidth=0,this.cacheHeight=0},hasStroke:function(){return this.stroke&&"transparent"!==this.stroke&&0!==this.strokeWidth},hasFill:function(){return this.fill&&"transparent"!==this.fill},needsItsOwnCache:function(){return!("stroke"!==this.paintFirst||!this.hasFill()||!this.hasStroke()||"object"!==typeof this.shadow)||!!this.clipPath},shouldCache:function(){return this.ownCaching=this.needsItsOwnCache()||this.objectCaching&&(!this.group||!this.group.isOnACache()),this.ownCaching},willDrawShadow:function(){return!!this.shadow&&(0!==this.shadow.offsetX||0!==this.shadow.offsetY)},drawClipPathOnCache:function(t){var i=this.clipPath;if(t.save(),i.inverted?t.globalCompositeOperation="destination-out":t.globalCompositeOperation="destination-in",i.absolutePositioned){var n=e.util.invertTransform(this.calcTransformMatrix());t.transform(n[0],n[1],n[2],n[3],n[4],n[5])}i.transform(t),t.scale(1/i.zoomX,1/i.zoomY),t.drawImage(i._cacheCanvas,-i.cacheTranslationX,-i.cacheTranslationY),t.restore()},drawObject:function(t,e){var i=this.fill,n=this.stroke;e?(this.fill="black",this.stroke="",this._setClippingProperties(t)):this._renderBackground(t),this._render(t),this._drawClipPath(t),this.fill=i,this.stroke=n},_drawClipPath:function(t){var e=this.clipPath;e&&(e.canvas=this.canvas,e.shouldCache(),e._transformDone=!0,e.renderCache({forClipping:!0}),this.drawClipPathOnCache(t))},drawCacheOnCanvas:function(t){t.scale(1/this.zoomX,1/this.zoomY),t.drawImage(this._cacheCanvas,-this.cacheTranslationX,-this.cacheTranslationY)},isCacheDirty:function(t){if(this.isNotVisible())return!1;if(this._cacheCanvas&&!t&&this._updateCacheCanvas())return!0;if(this.dirty||this.clipPath&&this.clipPath.absolutePositioned||this.statefullCache&&this.hasStateChanged("cacheProperties")){if(this._cacheCanvas&&!t){var e=this.cacheWidth/this.zoomX,i=this.cacheHeight/this.zoomY;this._cacheContext.clearRect(-e/2,-i/2,e,i)}return!0}return!1},_renderBackground:function(t){if(this.backgroundColor){var e=this._getNonTransformedDimensions();t.fillStyle=this.backgroundColor,t.fillRect(-e.x/2,-e.y/2,e.x,e.y),this._removeShadow(t)}},_setOpacity:function(t){this.group&&!this.group._transformDone?t.globalAlpha=this.getObjectOpacity():t.globalAlpha*=this.opacity},_setStrokeStyles:function(t,e){var i=e.stroke;i&&(t.lineWidth=e.strokeWidth,t.lineCap=e.strokeLineCap,t.lineDashOffset=e.strokeDashOffset,t.lineJoin=e.strokeLineJoin,t.miterLimit=e.strokeMiterLimit,i.toLive?"percentage"===i.gradientUnits||i.gradientTrasnform||i.patternTransform?this._applyPatternForTransformedGradient(t,i):(t.strokeStyle=i.toLive(t,this),this._applyPatternGradientTransform(t,i)):t.strokeStyle=e.stroke)},_setFillStyles:function(t,e){var i=e.fill;i&&(i.toLive?(t.fillStyle=i.toLive(t,this),this._applyPatternGradientTransform(t,e.fill)):t.fillStyle=i)},_setClippingProperties:function(t){t.globalAlpha=1,t.strokeStyle="transparent",t.fillStyle="#000000"},_setLineDash:function(t,e,i){e&&0!==e.length&&(1&e.length&&e.push.apply(e,e),a?t.setLineDash(e):i&&i(t))},_renderControls:function(t,i){var n,r,o,a=this.getViewportTransform(),c=this.calcTransformMatrix();i=i||{},r="undefined"!==typeof i.hasBorders?i.hasBorders:this.hasBorders,o="undefined"!==typeof i.hasControls?i.hasControls:this.hasControls,c=e.util.multiplyTransformMatrices(a,c),n=e.util.qrDecompose(c),t.save(),t.translate(n.translateX,n.translateY),t.lineWidth=1*this.borderScaleFactor,this.group||(t.globalAlpha=this.isMoving?this.borderOpacityWhenMoving:1),i.forActiveSelection?(t.rotate(s(n.angle)),r&&this.drawBordersInGroup(t,n,i)):(t.rotate(s(this.angle)),r&&this.drawBorders(t,i)),o&&this.drawControls(t,i),t.restore()},_setShadow:function(t){if(this.shadow){var i,n=this.shadow,r=this.canvas,o=r&&r.viewportTransform[0]||1,s=r&&r.viewportTransform[3]||1;i=n.nonScaling?{scaleX:1,scaleY:1}:this.getObjectScaling(),r&&r._isRetinaScaling()&&(o*=e.devicePixelRatio,s*=e.devicePixelRatio),t.shadowColor=n.color,t.shadowBlur=n.blur*e.browserShadowBlurConstant*(o+s)*(i.scaleX+i.scaleY)/4,t.shadowOffsetX=n.offsetX*o*i.scaleX,t.shadowOffsetY=n.offsetY*s*i.scaleY}},_removeShadow:function(t){this.shadow&&(t.shadowColor="",t.shadowBlur=t.shadowOffsetX=t.shadowOffsetY=0)},_applyPatternGradientTransform:function(t,e){if(!e||!e.toLive)return{offsetX:0,offsetY:0};var i=e.gradientTransform||e.patternTransform,n=-this.width/2+e.offsetX||0,r=-this.height/2+e.offsetY||0;return"percentage"===e.gradientUnits?t.transform(this.width,0,0,this.height,n,r):t.transform(1,0,0,1,n,r),i&&t.transform(i[0],i[1],i[2],i[3],i[4],i[5]),{offsetX:n,offsetY:r}},_renderPaintInOrder:function(t){"stroke"===this.paintFirst?(this._renderStroke(t),this._renderFill(t)):(this._renderFill(t),this._renderStroke(t))},_render:function(){},_renderFill:function(t){this.fill&&(t.save(),this._setFillStyles(t,this),"evenodd"===this.fillRule?t.fill("evenodd"):t.fill(),t.restore())},_renderStroke:function(t){if(this.stroke&&0!==this.strokeWidth){if(this.shadow&&!this.shadow.affectStroke&&this._removeShadow(t),t.save(),this.strokeUniform&&this.group){var e=this.getObjectScaling();t.scale(1/e.scaleX,1/e.scaleY)}else this.strokeUniform&&t.scale(1/this.scaleX,1/this.scaleY);this._setLineDash(t,this.strokeDashArray,this._renderDashedStroke),this._setStrokeStyles(t,this),t.stroke(),t.restore()}},_applyPatternForTransformedGradient:function(t,i){var n,r=this._limitCacheSize(this._getCacheCanvasDimensions()),o=e.util.createCanvasElement(),s=this.canvas.getRetinaScaling(),a=r.x/this.scaleX/s,c=r.y/this.scaleY/s;o.width=a,o.height=c,n=o.getContext("2d"),n.beginPath(),n.moveTo(0,0),n.lineTo(a,0),n.lineTo(a,c),n.lineTo(0,c),n.closePath(),n.translate(a/2,c/2),n.scale(r.zoomX/this.scaleX/s,r.zoomY/this.scaleY/s),this._applyPatternGradientTransform(n,i),n.fillStyle=i.toLive(t),n.fill(),t.translate(-this.width/2-this.strokeWidth/2,-this.height/2-this.strokeWidth/2),t.scale(s*this.scaleX/r.zoomX,s*this.scaleY/r.zoomY),t.strokeStyle=n.createPattern(o,"no-repeat")},_findCenterFromElement:function(){return{x:this.left+this.width/2,y:this.top+this.height/2}},_assignTransformMatrixProps:function(){if(this.transformMatrix){var t=e.util.qrDecompose(this.transformMatrix);this.flipX=!1,this.flipY=!1,this.set("scaleX",t.scaleX),this.set("scaleY",t.scaleY),this.angle=t.angle,this.skewX=t.skewX,this.skewY=0}},_removeTransformMatrix:function(t){var i=this._findCenterFromElement();this.transformMatrix&&(this._assignTransformMatrixProps(),i=e.util.transformPoint(i,this.transformMatrix)),this.transformMatrix=null,t&&(this.scaleX*=t.scaleX,this.scaleY*=t.scaleY,this.cropX=t.cropX,this.cropY=t.cropY,i.x+=t.offsetLeft,i.y+=t.offsetTop,this.width=t.width,this.height=t.height),this.setPositionByOrigin(i,"center","center")},clone:function(t,i){var n=this.toObject(i);this.constructor.fromObject?this.constructor.fromObject(n,t):e.Object._fromObject("Object",n,t)},cloneAsImage:function(t,i){var n=this.toCanvasElement(i);return t&&t(new e.Image(n)),this},toCanvasElement:function(t){t||(t={});var i=e.util,n=i.saveObjectTransform(this),r=this.group,o=this.shadow,s=Math.abs,a=(t.multiplier||1)*(t.enableRetinaScaling?e.devicePixelRatio:1);delete this.group,t.withoutTransform&&i.resetObjectTransform(this),t.withoutShadow&&(this.shadow=null);var c,l,h,u,f=e.util.createCanvasElement(),d=this.getBoundingRect(!0,!0),p=this.shadow,g={x:0,y:0};p&&(l=p.blur,c=p.nonScaling?{scaleX:1,scaleY:1}:this.getObjectScaling(),g.x=2*Math.round(s(p.offsetX)+l)*s(c.scaleX),g.y=2*Math.round(s(p.offsetY)+l)*s(c.scaleY)),h=d.width+g.x,u=d.height+g.y,f.width=Math.ceil(h),f.height=Math.ceil(u);var v=new e.StaticCanvas(f,{enableRetinaScaling:!1,renderOnAddRemove:!1,skipOffscreen:!1});"jpeg"===t.format&&(v.backgroundColor="#fff"),this.setPositionByOrigin(new e.Point(v.width/2,v.height/2),"center","center");var m=this.canvas;v.add(this);var y=v.toCanvasElement(a||1,t);return this.shadow=o,this.set("canvas",m),r&&(this.group=r),this.set(n).setCoords(),v._objects=[],v.dispose(),v=null,y},toDataURL:function(t){return t||(t={}),e.util.toDataURL(this.toCanvasElement(t),t.format||"png",t.quality||1)},isType:function(t){return this.type===t},complexity:function(){return 1},toJSON:function(t){return this.toObject(t)},rotate:function(t){var e=("center"!==this.originX||"center"!==this.originY)&&this.centeredRotation;return e&&this._setOriginToCenter(),this.set("angle",t),e&&this._resetOrigin(),this},centerH:function(){return this.canvas&&this.canvas.centerObjectH(this),this},viewportCenterH:function(){return this.canvas&&this.canvas.viewportCenterObjectH(this),this},centerV:function(){return this.canvas&&this.canvas.centerObjectV(this),this},viewportCenterV:function(){return this.canvas&&this.canvas.viewportCenterObjectV(this),this},center:function(){return this.canvas&&this.canvas.centerObject(this),this},viewportCenter:function(){return this.canvas&&this.canvas.viewportCenterObject(this),this},getLocalPointer:function(t,i){i=i||this.canvas.getPointer(t);var n=new e.Point(i.x,i.y),r=this._getLeftTopCoords();return this.angle&&(n=e.util.rotatePoint(n,r,s(-this.angle))),{x:n.x-r.x,y:n.y-r.y}},_setupCompositeOperation:function(t){this.globalCompositeOperation&&(t.globalCompositeOperation=this.globalCompositeOperation)}}),e.util.createAccessors&&e.util.createAccessors(e.Object),i(e.Object.prototype,e.Observable),e.Object.NUM_FRACTION_DIGITS=2,e.Object._fromObject=function(t,i,r,o){var s=e[t];i=n(i,!0),e.util.enlivenPatterns([i.fill,i.stroke],(function(t){"undefined"!==typeof t[0]&&(i.fill=t[0]),"undefined"!==typeof t[1]&&(i.stroke=t[1]),e.util.enlivenObjects([i.clipPath],(function(t){i.clipPath=t[0];var e=o?new s(i[o],i):new s(i);r&&r(e)}))}))},e.Object.__uid=0)}(e),function(){var t=n.util.degreesToRadians,e={left:-.5,center:0,right:.5},i={top:-.5,center:0,bottom:.5};n.util.object.extend(n.Object.prototype,{translateToGivenOrigin:function(t,r,o,s,a){var c,l,h,u=t.x,f=t.y;return"string"===typeof r?r=e[r]:r-=.5,"string"===typeof s?s=e[s]:s-=.5,c=s-r,"string"===typeof o?o=i[o]:o-=.5,"string"===typeof a?a=i[a]:a-=.5,l=a-o,(c||l)&&(h=this._getTransformedDimensions(),u=t.x+c*h.x,f=t.y+l*h.y),new n.Point(u,f)},translateToCenterPoint:function(e,i,r){var o=this.translateToGivenOrigin(e,i,r,"center","center");return this.angle?n.util.rotatePoint(o,e,t(this.angle)):o},translateToOriginPoint:function(e,i,r){var o=this.translateToGivenOrigin(e,"center","center",i,r);return this.angle?n.util.rotatePoint(o,e,t(this.angle)):o},getCenterPoint:function(){var t=new n.Point(this.left,this.top);return this.translateToCenterPoint(t,this.originX,this.originY)},getPointByOrigin:function(t,e){var i=this.getCenterPoint();return this.translateToOriginPoint(i,t,e)},toLocalPoint:function(e,i,r){var o,s,a=this.getCenterPoint();return o="undefined"!==typeof i&&"undefined"!==typeof r?this.translateToGivenOrigin(a,"center","center",i,r):new n.Point(this.left,this.top),s=new n.Point(e.x,e.y),this.angle&&(s=n.util.rotatePoint(s,a,-t(this.angle))),s.subtractEquals(o)},setPositionByOrigin:function(t,e,i){var n=this.translateToCenterPoint(t,e,i),r=this.translateToOriginPoint(n,this.originX,this.originY);this.set("left",r.x),this.set("top",r.y)},adjustPosition:function(i){var r,o,s=t(this.angle),a=this.getScaledWidth(),c=n.util.cos(s)*a,l=n.util.sin(s)*a;r="string"===typeof this.originX?e[this.originX]:this.originX-.5,o="string"===typeof i?e[i]:i-.5,this.left+=c*(o-r),this.top+=l*(o-r),this.setCoords(),this.originX=i},_setOriginToCenter:function(){this._originalOriginX=this.originX,this._originalOriginY=this.originY;var t=this.getCenterPoint();this.originX="center",this.originY="center",this.left=t.x,this.top=t.y},_resetOrigin:function(){var t=this.translateToOriginPoint(this.getCenterPoint(),this._originalOriginX,this._originalOriginY);this.originX=this._originalOriginX,this.originY=this._originalOriginY,this.left=t.x,this.top=t.y,this._originalOriginX=null,this._originalOriginY=null},_getLeftTopCoords:function(){return this.translateToOriginPoint(this.getCenterPoint(),"left","top")}})}(),function(){function t(t){return[new n.Point(t.tl.x,t.tl.y),new n.Point(t.tr.x,t.tr.y),new n.Point(t.br.x,t.br.y),new n.Point(t.bl.x,t.bl.y)]}var e=n.util,i=e.degreesToRadians,r=e.multiplyTransformMatrices,o=e.transformPoint;e.object.extend(n.Object.prototype,{oCoords:null,aCoords:null,lineCoords:null,ownMatrixCache:null,matrixCache:null,controls:{},_getCoords:function(t,e){return e?t?this.calcACoords():this.calcLineCoords():(this.aCoords&&this.lineCoords||this.setCoords(!0),t?this.aCoords:this.lineCoords)},getCoords:function(e,i){return t(this._getCoords(e,i))},intersectsWithRect:function(t,e,i,r){var o=this.getCoords(i,r),s=n.Intersection.intersectPolygonRectangle(o,t,e);return"Intersection"===s.status},intersectsWithObject:function(t,e,i){var r=n.Intersection.intersectPolygonPolygon(this.getCoords(e,i),t.getCoords(e,i));return"Intersection"===r.status||t.isContainedWithinObject(this,e,i)||this.isContainedWithinObject(t,e,i)},isContainedWithinObject:function(t,e,i){for(var n=this.getCoords(e,i),r=e?t.aCoords:t.lineCoords,o=0,s=t._getImageLines(r);o<4;o++)if(!t.containsPoint(n[o],s))return!1;return!0},isContainedWithinRect:function(t,e,i,n){var r=this.getBoundingRect(i,n);return r.left>=t.x&&r.left+r.width<=e.x&&r.top>=t.y&&r.top+r.height<=e.y},containsPoint:function(t,e,i,n){var r=this._getCoords(i,n),o=(e=e||this._getImageLines(r),this._findCrossPoints(t,e));return 0!==o&&o%2===1},isOnScreen:function(t){if(!this.canvas)return!1;var e=this.canvas.vptCoords.tl,i=this.canvas.vptCoords.br,n=this.getCoords(!0,t);return!!n.some((function(t){return t.x<=i.x&&t.x>=e.x&&t.y<=i.y&&t.y>=e.y}))||(!!this.intersectsWithRect(e,i,!0,t)||this._containsCenterOfCanvas(e,i,t))},_containsCenterOfCanvas:function(t,e,i){var n={x:(t.x+e.x)/2,y:(t.y+e.y)/2};return!!this.containsPoint(n,null,!0,i)},isPartiallyOnScreen:function(t){if(!this.canvas)return!1;var e=this.canvas.vptCoords.tl,i=this.canvas.vptCoords.br;if(this.intersectsWithRect(e,i,!0,t))return!0;var n=this.getCoords(!0,t).every((function(t){return(t.x>=i.x||t.x<=e.x)&&(t.y>=i.y||t.y<=e.y)}));return n&&this._containsCenterOfCanvas(e,i,t)},_getImageLines:function(t){var e={topline:{o:t.tl,d:t.tr},rightline:{o:t.tr,d:t.br},bottomline:{o:t.br,d:t.bl},leftline:{o:t.bl,d:t.tl}};return e},_findCrossPoints:function(t,e){var i,n,r,o,s,a,c=0;for(var l in e)if(a=e[l],!(a.o.y<t.y&&a.d.y<t.y)&&!(a.o.y>=t.y&&a.d.y>=t.y)&&(a.o.x===a.d.x&&a.o.x>=t.x?s=a.o.x:(i=0,n=(a.d.y-a.o.y)/(a.d.x-a.o.x),r=t.y-i*t.x,o=a.o.y-n*a.o.x,s=-(r-o)/(i-n)),s>=t.x&&(c+=1),2===c))break;return c},getBoundingRect:function(t,i){var n=this.getCoords(t,i);return e.makeBoundingBoxFromPoints(n)},getScaledWidth:function(){return this._getTransformedDimensions().x},getScaledHeight:function(){return this._getTransformedDimensions().y},_constrainScale:function(t){return Math.abs(t)<this.minScaleLimit?t<0?-this.minScaleLimit:this.minScaleLimit:0===t?1e-4:t},scale:function(t){return this._set("scaleX",t),this._set("scaleY",t),this.setCoords()},scaleToWidth:function(t,e){var i=this.getBoundingRect(e).width/this.getScaledWidth();return this.scale(t/this.width/i)},scaleToHeight:function(t,e){var i=this.getBoundingRect(e).height/this.getScaledHeight();return this.scale(t/this.height/i)},calcCoords:function(t){return t?this.calcACoords():this.calcOCoords()},calcLineCoords:function(){var t=this.getViewportTransform(),n=this.padding,r=i(this.angle),s=e.cos(r),a=e.sin(r),c=s*n,l=a*n,h=c+l,u=c-l,f=this.calcACoords(),d={tl:o(f.tl,t),tr:o(f.tr,t),bl:o(f.bl,t),br:o(f.br,t)};return n&&(d.tl.x-=u,d.tl.y-=h,d.tr.x+=h,d.tr.y-=u,d.bl.x-=h,d.bl.y+=u,d.br.x+=u,d.br.y+=h),d},calcOCoords:function(){var t=this._calcRotateMatrix(),e=this._calcTranslateMatrix(),i=this.getViewportTransform(),n=r(i,e),o=r(n,t),s=(o=r(o,[1/i[0],0,0,1/i[3],0,0]),this._calculateCurrentDimensions()),a={};return this.forEachControl((function(t,e,i){a[e]=t.positionHandler(s,o,i)})),a},calcACoords:function(){var t=this._calcRotateMatrix(),e=this._calcTranslateMatrix(),i=r(e,t),n=this._getTransformedDimensions(),s=n.x/2,a=n.y/2;return{tl:o({x:-s,y:-a},i),tr:o({x:s,y:-a},i),bl:o({x:-s,y:a},i),br:o({x:s,y:a},i)}},setCoords:function(t){return this.aCoords=this.calcACoords(),this.lineCoords=this.group?this.aCoords:this.calcLineCoords(),t||(this.oCoords=this.calcOCoords(),this._setCornerCoords&&this._setCornerCoords()),this},_calcRotateMatrix:function(){return e.calcRotateMatrix(this)},_calcTranslateMatrix:function(){var t=this.getCenterPoint();return[1,0,0,1,t.x,t.y]},transformMatrixKey:function(t){var e="_",i="";return!t&&this.group&&(i=this.group.transformMatrixKey(t)+e),i+this.top+e+this.left+e+this.scaleX+e+this.scaleY+e+this.skewX+e+this.skewY+e+this.angle+e+this.originX+e+this.originY+e+this.width+e+this.height+e+this.strokeWidth+this.flipX+this.flipY},calcTransformMatrix:function(t){var e=this.calcOwnMatrix();if(t||!this.group)return e;var i=this.transformMatrixKey(t),n=this.matrixCache||(this.matrixCache={});return n.key===i?n.value:(this.group&&(e=r(this.group.calcTransformMatrix(!1),e)),n.key=i,n.value=e,e)},calcOwnMatrix:function(){var t=this.transformMatrixKey(!0),i=this.ownMatrixCache||(this.ownMatrixCache={});if(i.key===t)return i.value;var n=this._calcTranslateMatrix(),r={angle:this.angle,translateX:n[4],translateY:n[5],scaleX:this.scaleX,scaleY:this.scaleY,skewX:this.skewX,skewY:this.skewY,flipX:this.flipX,flipY:this.flipY};return i.key=t,i.value=e.composeMatrix(r),i.value},_calcDimensionsTransformMatrix:function(t,i,n){return e.calcDimensionsMatrix({skewX:t,skewY:i,scaleX:this.scaleX*(n&&this.flipX?-1:1),scaleY:this.scaleY*(n&&this.flipY?-1:1)})},_getNonTransformedDimensions:function(){var t=this.strokeWidth,e=this.width+t,i=this.height+t;return{x:e,y:i}},_getTransformedDimensions:function(t,i){"undefined"===typeof t&&(t=this.skewX),"undefined"===typeof i&&(i=this.skewY);var n,r,o=this._getNonTransformedDimensions(),s=0===t&&0===i;if(this.strokeUniform?(n=this.width,r=this.height):(n=o.x,r=o.y),s)return this._finalizeDimensions(n*this.scaleX,r*this.scaleY);var a=e.sizeAfterTransform(n,r,{scaleX:this.scaleX,scaleY:this.scaleY,skewX:t,skewY:i});return this._finalizeDimensions(a.x,a.y)},_finalizeDimensions:function(t,e){return this.strokeUniform?{x:t+this.strokeWidth,y:e+this.strokeWidth}:{x:t,y:e}},_calculateCurrentDimensions:function(){var t=this.getViewportTransform(),e=this._getTransformedDimensions(),i=o(e,t,!0);return i.scalarAdd(2*this.padding)}})}(),n.util.object.extend(n.Object.prototype,{sendToBack:function(){return this.group?n.StaticCanvas.prototype.sendToBack.call(this.group,this):this.canvas&&this.canvas.sendToBack(this),this},bringToFront:function(){return this.group?n.StaticCanvas.prototype.bringToFront.call(this.group,this):this.canvas&&this.canvas.bringToFront(this),this},sendBackwards:function(t){return this.group?n.StaticCanvas.prototype.sendBackwards.call(this.group,this,t):this.canvas&&this.canvas.sendBackwards(this,t),this},bringForward:function(t){return this.group?n.StaticCanvas.prototype.bringForward.call(this.group,this,t):this.canvas&&this.canvas.bringForward(this,t),this},moveTo:function(t){return this.group&&"activeSelection"!==this.group.type?n.StaticCanvas.prototype.moveTo.call(this.group,this,t):this.canvas&&this.canvas.moveTo(this,t),this}}),function(){function t(t,e){if(e){if(e.toLive)return t+": url(#SVGID_"+e.id+"); ";var i=new n.Color(e),r=t+": "+i.toRgb()+"; ",o=i.getAlpha();return 1!==o&&(r+=t+"-opacity: "+o.toString()+"; "),r}return t+": none; "}var e=n.util.toFixed;n.util.object.extend(n.Object.prototype,{getSvgStyles:function(e){var i=this.fillRule?this.fillRule:"nonzero",n=this.strokeWidth?this.strokeWidth:"0",r=this.strokeDashArray?this.strokeDashArray.join(" "):"none",o=this.strokeDashOffset?this.strokeDashOffset:"0",s=this.strokeLineCap?this.strokeLineCap:"butt",a=this.strokeLineJoin?this.strokeLineJoin:"miter",c=this.strokeMiterLimit?this.strokeMiterLimit:"4",l="undefined"!==typeof this.opacity?this.opacity:"1",h=this.visible?"":" visibility: hidden;",u=e?"":this.getSvgFilter(),f=t("fill",this.fill),d=t("stroke",this.stroke);return[d,"stroke-width: ",n,"; ","stroke-dasharray: ",r,"; ","stroke-linecap: ",s,"; ","stroke-dashoffset: ",o,"; ","stroke-linejoin: ",a,"; ","stroke-miterlimit: ",c,"; ",f,"fill-rule: ",i,"; ","opacity: ",l,";",u,h].join("")},getSvgSpanStyles:function(e,i){var n="; ",r=e.fontFamily?"font-family: "+(-1===e.fontFamily.indexOf("'")&&-1===e.fontFamily.indexOf('"')?"'"+e.fontFamily+"'":e.fontFamily)+n:"",o=e.strokeWidth?"stroke-width: "+e.strokeWidth+n:"",s=(r=r,e.fontSize?"font-size: "+e.fontSize+"px"+n:""),a=e.fontStyle?"font-style: "+e.fontStyle+n:"",c=e.fontWeight?"font-weight: "+e.fontWeight+n:"",l=e.fill?t("fill",e.fill):"",h=e.stroke?t("stroke",e.stroke):"",u=this.getSvgTextDecoration(e),f=e.deltaY?"baseline-shift: "+-e.deltaY+"; ":"";return u&&(u="text-decoration: "+u+n),[h,o,r,s,a,c,u,l,f,i?"white-space: pre; ":""].join("")},getSvgTextDecoration:function(t){return["overline","underline","line-through"].filter((function(e){return t[e.replace("-","")]})).join(" ")},getSvgFilter:function(){return this.shadow?"filter: url(#SVGID_"+this.shadow.id+");":""},getSvgCommons:function(){return[this.id?'id="'+this.id+'" ':"",this.clipPath?'clip-path="url(#'+this.clipPath.clipPathId+')" ':""].join("")},getSvgTransform:function(t,e){var i=t?this.calcTransformMatrix():this.calcOwnMatrix(),r='transform="'+n.util.matrixToSVG(i);return r+(e||"")+'" '},_setSVGBg:function(t){if(this.backgroundColor){var i=n.Object.NUM_FRACTION_DIGITS;t.push("\t\t<rect ",this._getFillAttributes(this.backgroundColor),' x="',e(-this.width/2,i),'" y="',e(-this.height/2,i),'" width="',e(this.width,i),'" height="',e(this.height,i),'"></rect>\n')}},toSVG:function(t){return this._createBaseSVGMarkup(this._toSVG(t),{reviver:t})},toClipPathSVG:function(t){return"\t"+this._createBaseClipPathSVGMarkup(this._toSVG(t),{reviver:t})},_createBaseClipPathSVGMarkup:function(t,e){e=e||{};var i=e.reviver,n=e.additionalTransform||"",r=[this.getSvgTransform(!0,n),this.getSvgCommons()].join(""),o=t.indexOf("COMMON_PARTS");return t[o]=r,i?i(t.join("")):t.join("")},_createBaseSVGMarkup:function(t,e){e=e||{};var i,r,o=e.noStyle,s=e.reviver,a=o?"":'style="'+this.getSvgStyles()+'" ',c=e.withShadow?'style="'+this.getSvgFilter()+'" ':"",l=this.clipPath,h=this.strokeUniform?'vector-effect="non-scaling-stroke" ':"",u=l&&l.absolutePositioned,f=this.stroke,d=this.fill,p=this.shadow,g=[],v=t.indexOf("COMMON_PARTS"),m=e.additionalTransform;return l&&(l.clipPathId="CLIPPATH_"+n.Object.__uid++,r='<clipPath id="'+l.clipPathId+'" >\n'+l.toClipPathSVG(s)+"</clipPath>\n"),u&&g.push("<g ",c,this.getSvgCommons()," >\n"),g.push("<g ",this.getSvgTransform(!1),u?"":c+this.getSvgCommons()," >\n"),i=[a,h,o?"":this.addPaintOrder()," ",m?'transform="'+m+'" ':""].join(""),t[v]=i,d&&d.toLive&&g.push(d.toSVG(this)),f&&f.toLive&&g.push(f.toSVG(this)),p&&g.push(p.toSVG(this)),l&&g.push(r),g.push(t.join("")),g.push("</g>\n"),u&&g.push("</g>\n"),s?s(g.join("")):g.join("")},addPaintOrder:function(){return"fill"!==this.paintFirst?' paint-order="'+this.paintFirst+'" ':""}})}(),function(){var t=n.util.object.extend,e="stateProperties";function i(e,i,n){var r={},o=!0;n.forEach((function(t){r[t]=e[t]})),t(e[i],r,o)}function r(t,e,i){if(t===e)return!0;if(Array.isArray(t)){if(!Array.isArray(e)||t.length!==e.length)return!1;for(var n=0,o=t.length;n<o;n++)if(!r(t[n],e[n]))return!1;return!0}if(t&&"object"===typeof t){var s,a=Object.keys(t);if(!e||"object"!==typeof e||!i&&a.length!==Object.keys(e).length)return!1;for(n=0,o=a.length;n<o;n++)if(s=a[n],"canvas"!==s&&"group"!==s&&!r(t[s],e[s]))return!1;return!0}}n.util.object.extend(n.Object.prototype,{hasStateChanged:function(t){t=t||e;var i="_"+t;return Object.keys(this[i]).length<this[t].length||!r(this[i],this,!0)},saveState:function(t){var n=t&&t.propertySet||e,r="_"+n;return this[r]?(i(this,r,this[n]),t&&t.stateProperties&&i(this,r,t.stateProperties),this):this.setupState(t)},setupState:function(t){t=t||{};var i=t.propertySet||e;return t.propertySet=i,this["_"+i]={},this.saveState(t),this}})}(),function(){var t=n.util.degreesToRadians;n.util.object.extend(n.Object.prototype,{_findTargetCorner:function(t,e){if(!this.hasControls||this.group||!this.canvas||this.canvas._activeObject!==this)return!1;var i,n,r,o=t.x,s=t.y,a=Object.keys(this.oCoords),c=a.length-1;for(this.__corner=0;c>=0;c--)if(r=a[c],this.isControlVisible(r)&&(n=this._getImageLines(e?this.oCoords[r].touchCorner:this.oCoords[r].corner),i=this._findCrossPoints({x:o,y:s},n),0!==i&&i%2===1))return this.__corner=r,r;return!1},forEachControl:function(t){for(var e in this.controls)t(this.controls[e],e,this)},_setCornerCoords:function(){var t=this.oCoords;for(var e in t){var i=this.controls[e];t[e].corner=i.calcCornerCoords(this.angle,this.cornerSize,t[e].x,t[e].y,!1),t[e].touchCorner=i.calcCornerCoords(this.angle,this.touchCornerSize,t[e].x,t[e].y,!0)}},drawSelectionBackground:function(e){if(!this.selectionBackgroundColor||this.canvas&&!this.canvas.interactive||this.canvas&&this.canvas._activeObject!==this)return this;e.save();var i=this.getCenterPoint(),n=this._calculateCurrentDimensions(),r=this.canvas.viewportTransform;return e.translate(i.x,i.y),e.scale(1/r[0],1/r[3]),e.rotate(t(this.angle)),e.fillStyle=this.selectionBackgroundColor,e.fillRect(-n.x/2,-n.y/2,n.x,n.y),e.restore(),this},drawBorders:function(t,e){e=e||{};var i=this._calculateCurrentDimensions(),n=this.borderScaleFactor,r=i.x+n,o=i.y+n,s="undefined"!==typeof e.hasControls?e.hasControls:this.hasControls,a=!1;return t.save(),t.strokeStyle=e.borderColor||this.borderColor,this._setLineDash(t,e.borderDashArray||this.borderDashArray,null),t.strokeRect(-r/2,-o/2,r,o),s&&(t.beginPath(),this.forEachControl((function(e,i,n){e.withConnection&&e.getVisibility(n,i)&&(a=!0,t.moveTo(e.x*r,e.y*o),t.lineTo(e.x*r+e.offsetX,e.y*o+e.offsetY))})),a&&t.stroke()),t.restore(),this},drawBordersInGroup:function(t,e,i){i=i||{};var r=n.util.sizeAfterTransform(this.width,this.height,e),o=this.strokeWidth,s=this.strokeUniform,a=this.borderScaleFactor,c=r.x+o*(s?this.canvas.getZoom():e.scaleX)+a,l=r.y+o*(s?this.canvas.getZoom():e.scaleY)+a;return t.save(),this._setLineDash(t,i.borderDashArray||this.borderDashArray,null),t.strokeStyle=i.borderColor||this.borderColor,t.strokeRect(-c/2,-l/2,c,l),t.restore(),this},drawControls:function(t,e){return e=e||{},t.save(),t.setTransform(this.canvas.getRetinaScaling(),0,0,this.canvas.getRetinaScaling(),0,0),t.strokeStyle=t.fillStyle=e.cornerColor||this.cornerColor,this.transparentCorners||(t.strokeStyle=e.cornerStrokeColor||this.cornerStrokeColor),this._setLineDash(t,e.cornerDashArray||this.cornerDashArray,null),this.setCoords(),this.forEachControl((function(i,n,r){i.getVisibility(r,n)&&i.render(t,r.oCoords[n].x,r.oCoords[n].y,e,r)})),t.restore(),this},isControlVisible:function(t){return this.controls[t]&&this.controls[t].getVisibility(this,t)},setControlVisible:function(t,e){return this._controlsVisibility||(this._controlsVisibility={}),this._controlsVisibility[t]=e,this},setControlsVisibility:function(t){for(var e in t||(t={}),t)this.setControlVisible(e,t[e]);return this},onDeselect:function(){},onSelect:function(){}})}(),n.util.object.extend(n.StaticCanvas.prototype,{FX_DURATION:500,fxCenterObjectH:function(t,e){e=e||{};var i=function(){},r=e.onComplete||i,o=e.onChange||i,s=this;return n.util.animate({startValue:t.left,endValue:this.getCenter().left,duration:this.FX_DURATION,onChange:function(e){t.set("left",e),s.requestRenderAll(),o()},onComplete:function(){t.setCoords(),r()}}),this},fxCenterObjectV:function(t,e){e=e||{};var i=function(){},r=e.onComplete||i,o=e.onChange||i,s=this;return n.util.animate({startValue:t.top,endValue:this.getCenter().top,duration:this.FX_DURATION,onChange:function(e){t.set("top",e),s.requestRenderAll(),o()},onComplete:function(){t.setCoords(),r()}}),this},fxRemove:function(t,e){e=e||{};var i=function(){},r=e.onComplete||i,o=e.onChange||i,s=this;return n.util.animate({startValue:t.opacity,endValue:0,duration:this.FX_DURATION,onChange:function(e){t.set("opacity",e),s.requestRenderAll(),o()},onComplete:function(){s.remove(t),r()}}),this}}),n.util.object.extend(n.Object.prototype,{animate:function(){if(arguments[0]&&"object"===typeof arguments[0]){var t,e,i=[];for(t in arguments[0])i.push(t);for(var n=0,r=i.length;n<r;n++)t=i[n],e=n!==r-1,this._animate(t,arguments[0][t],arguments[1],e)}else this._animate.apply(this,arguments);return this},_animate:function(t,e,i,r){var o,s=this;e=e.toString(),i=i?n.util.object.clone(i):{},~t.indexOf(".")&&(o=t.split("."));var a=s.colorProperties.indexOf(t)>-1||o&&s.colorProperties.indexOf(o[1])>-1,c=o?this.get(o[0])[o[1]]:this.get(t);"from"in i||(i.from=c),a||(e=~e.indexOf("=")?c+parseFloat(e.replace("=","")):parseFloat(e));var l={startValue:i.from,endValue:e,byValue:i.by,easing:i.easing,duration:i.duration,abort:i.abort&&function(){return i.abort.call(s)},onChange:function(e,n,a){o?s[o[0]][o[1]]=e:s.set(t,e),r||i.onChange&&i.onChange(e,n,a)},onComplete:function(t,e,n){r||(s.setCoords(),i.onComplete&&i.onComplete(t,e,n))}};a?n.util.animateColor(l.startValue,l.endValue,l.duration,l):n.util.animate(l)}}),function(t){"use strict";var e=t.fabric||(t.fabric={}),i=e.util.object.extend,n=e.util.object.clone,r={x1:1,x2:1,y1:1,y2:1},o=e.StaticCanvas.supports("setLineDash");function s(t,e){var i=t.origin,n=t.axis1,r=t.axis2,o=t.dimension,s=e.nearest,a=e.center,c=e.farthest;return function(){switch(this.get(i)){case s:return Math.min(this.get(n),this.get(r));case a:return Math.min(this.get(n),this.get(r))+.5*this.get(o);case c:return Math.max(this.get(n),this.get(r))}}}e.Line?e.warn("fabric.Line is already defined"):(e.Line=e.util.createClass(e.Object,{type:"line",x1:0,y1:0,x2:0,y2:0,cacheProperties:e.Object.prototype.cacheProperties.concat("x1","x2","y1","y2"),initialize:function(t,e){t||(t=[0,0,0,0]),this.callSuper("initialize",e),this.set("x1",t[0]),this.set("y1",t[1]),this.set("x2",t[2]),this.set("y2",t[3]),this._setWidthHeight(e)},_setWidthHeight:function(t){t||(t={}),this.width=Math.abs(this.x2-this.x1),this.height=Math.abs(this.y2-this.y1),this.left="left"in t?t.left:this._getLeftToOriginX(),this.top="top"in t?t.top:this._getTopToOriginY()},_set:function(t,e){return this.callSuper("_set",t,e),"undefined"!==typeof r[t]&&this._setWidthHeight(),this},_getLeftToOriginX:s({origin:"originX",axis1:"x1",axis2:"x2",dimension:"width"},{nearest:"left",center:"center",farthest:"right"}),_getTopToOriginY:s({origin:"originY",axis1:"y1",axis2:"y2",dimension:"height"},{nearest:"top",center:"center",farthest:"bottom"}),_render:function(t){if(t.beginPath(),!this.strokeDashArray||this.strokeDashArray&&o){var e=this.calcLinePoints();t.moveTo(e.x1,e.y1),t.lineTo(e.x2,e.y2)}t.lineWidth=this.strokeWidth;var i=t.strokeStyle;t.strokeStyle=this.stroke||t.fillStyle,this.stroke&&this._renderStroke(t),t.strokeStyle=i},_renderDashedStroke:function(t){var i=this.calcLinePoints();t.beginPath(),e.util.drawDashedLine(t,i.x1,i.y1,i.x2,i.y2,this.strokeDashArray),t.closePath()},_findCenterFromElement:function(){return{x:(this.x1+this.x2)/2,y:(this.y1+this.y2)/2}},toObject:function(t){return i(this.callSuper("toObject",t),this.calcLinePoints())},_getNonTransformedDimensions:function(){var t=this.callSuper("_getNonTransformedDimensions");return"butt"===this.strokeLineCap&&(0===this.width&&(t.y-=this.strokeWidth),0===this.height&&(t.x-=this.strokeWidth)),t},calcLinePoints:function(){var t=this.x1<=this.x2?-1:1,e=this.y1<=this.y2?-1:1,i=t*this.width*.5,n=e*this.height*.5,r=t*this.width*-.5,o=e*this.height*-.5;return{x1:i,x2:r,y1:n,y2:o}},_toSVG:function(){var t=this.calcLinePoints();return["<line ","COMMON_PARTS",'x1="',t.x1,'" y1="',t.y1,'" x2="',t.x2,'" y2="',t.y2,'" />\n']}}),e.Line.ATTRIBUTE_NAMES=e.SHARED_ATTRIBUTES.concat("x1 y1 x2 y2".split(" ")),e.Line.fromElement=function(t,n,r){r=r||{};var o=e.parseAttributes(t,e.Line.ATTRIBUTE_NAMES),s=[o.x1||0,o.y1||0,o.x2||0,o.y2||0];n(new e.Line(s,i(o,r)))},e.Line.fromObject=function(t,i){function r(t){delete t.points,i&&i(t)}var o=n(t,!0);o.points=[t.x1,t.y1,t.x2,t.y2],e.Object._fromObject("Line",o,r,"points")})}(e),function(t){"use strict";var e=t.fabric||(t.fabric={}),i=Math.PI;function n(t){return"radius"in t&&t.radius>=0}e.Circle?e.warn("fabric.Circle is already defined."):(e.Circle=e.util.createClass(e.Object,{type:"circle",radius:0,startAngle:0,endAngle:2*i,cacheProperties:e.Object.prototype.cacheProperties.concat("radius","startAngle","endAngle"),_set:function(t,e){return this.callSuper("_set",t,e),"radius"===t&&this.setRadius(e),this},toObject:function(t){return this.callSuper("toObject",["radius","startAngle","endAngle"].concat(t))},_toSVG:function(){var t,n=0,r=0,o=(this.endAngle-this.startAngle)%(2*i);if(0===o)t=["<circle ","COMMON_PARTS",'cx="'+n+'" cy="'+r+'" ','r="',this.radius,'" />\n'];else{var s=e.util.cos(this.startAngle)*this.radius,a=e.util.sin(this.startAngle)*this.radius,c=e.util.cos(this.endAngle)*this.radius,l=e.util.sin(this.endAngle)*this.radius,h=o>i?"1":"0";t=['<path d="M '+s+" "+a," A "+this.radius+" "+this.radius," 0 ",+h+" 1"," "+c+" "+l,'" ',"COMMON_PARTS"," />\n"]}return t},_render:function(t){t.beginPath(),t.arc(0,0,this.radius,this.startAngle,this.endAngle,!1),this._renderPaintInOrder(t)},getRadiusX:function(){return this.get("radius")*this.get("scaleX")},getRadiusY:function(){return this.get("radius")*this.get("scaleY")},setRadius:function(t){return this.radius=t,this.set("width",2*t).set("height",2*t)}}),e.Circle.ATTRIBUTE_NAMES=e.SHARED_ATTRIBUTES.concat("cx cy r".split(" ")),e.Circle.fromElement=function(t,i){var r=e.parseAttributes(t,e.Circle.ATTRIBUTE_NAMES);if(!n(r))throw new Error("value of `r` attribute is required and can not be negative");r.left=(r.left||0)-r.radius,r.top=(r.top||0)-r.radius,i(new e.Circle(r))},e.Circle.fromObject=function(t,i){return e.Object._fromObject("Circle",t,i)})}(e),function(t){"use strict";var e=t.fabric||(t.fabric={});e.Triangle?e.warn("fabric.Triangle is already defined"):(e.Triangle=e.util.createClass(e.Object,{type:"triangle",width:100,height:100,_render:function(t){var e=this.width/2,i=this.height/2;t.beginPath(),t.moveTo(-e,i),t.lineTo(0,-i),t.lineTo(e,i),t.closePath(),this._renderPaintInOrder(t)},_renderDashedStroke:function(t){var i=this.width/2,n=this.height/2;t.beginPath(),e.util.drawDashedLine(t,-i,n,0,-n,this.strokeDashArray),e.util.drawDashedLine(t,0,-n,i,n,this.strokeDashArray),e.util.drawDashedLine(t,i,n,-i,n,this.strokeDashArray),t.closePath()},_toSVG:function(){var t=this.width/2,e=this.height/2,i=[-t+" "+e,"0 "+-e,t+" "+e].join(",");return["<polygon ","COMMON_PARTS",'points="',i,'" />']}}),e.Triangle.fromObject=function(t,i){return e.Object._fromObject("Triangle",t,i)})}(e),function(t){"use strict";var e=t.fabric||(t.fabric={}),i=2*Math.PI;e.Ellipse?e.warn("fabric.Ellipse is already defined."):(e.Ellipse=e.util.createClass(e.Object,{type:"ellipse",rx:0,ry:0,cacheProperties:e.Object.prototype.cacheProperties.concat("rx","ry"),initialize:function(t){this.callSuper("initialize",t),this.set("rx",t&&t.rx||0),this.set("ry",t&&t.ry||0)},_set:function(t,e){switch(this.callSuper("_set",t,e),t){case"rx":this.rx=e,this.set("width",2*e);break;case"ry":this.ry=e,this.set("height",2*e);break}return this},getRx:function(){return this.get("rx")*this.get("scaleX")},getRy:function(){return this.get("ry")*this.get("scaleY")},toObject:function(t){return this.callSuper("toObject",["rx","ry"].concat(t))},_toSVG:function(){return["<ellipse ","COMMON_PARTS",'cx="0" cy="0" ','rx="',this.rx,'" ry="',this.ry,'" />\n']},_render:function(t){t.beginPath(),t.save(),t.transform(1,0,0,this.ry/this.rx,0,0),t.arc(0,0,this.rx,0,i,!1),t.restore(),this._renderPaintInOrder(t)}}),e.Ellipse.ATTRIBUTE_NAMES=e.SHARED_ATTRIBUTES.concat("cx cy rx ry".split(" ")),e.Ellipse.fromElement=function(t,i){var n=e.parseAttributes(t,e.Ellipse.ATTRIBUTE_NAMES);n.left=(n.left||0)-n.rx,n.top=(n.top||0)-n.ry,i(new e.Ellipse(n))},e.Ellipse.fromObject=function(t,i){return e.Object._fromObject("Ellipse",t,i)})}(e),function(t){"use strict";var e=t.fabric||(t.fabric={}),i=e.util.object.extend;e.Rect?e.warn("fabric.Rect is already defined"):(e.Rect=e.util.createClass(e.Object,{stateProperties:e.Object.prototype.stateProperties.concat("rx","ry"),type:"rect",rx:0,ry:0,cacheProperties:e.Object.prototype.cacheProperties.concat("rx","ry"),initialize:function(t){this.callSuper("initialize",t),this._initRxRy()},_initRxRy:function(){this.rx&&!this.ry?this.ry=this.rx:this.ry&&!this.rx&&(this.rx=this.ry)},_render:function(t){var e=this.rx?Math.min(this.rx,this.width/2):0,i=this.ry?Math.min(this.ry,this.height/2):0,n=this.width,r=this.height,o=-this.width/2,s=-this.height/2,a=0!==e||0!==i,c=.4477152502;t.beginPath(),t.moveTo(o+e,s),t.lineTo(o+n-e,s),a&&t.bezierCurveTo(o+n-c*e,s,o+n,s+c*i,o+n,s+i),t.lineTo(o+n,s+r-i),a&&t.bezierCurveTo(o+n,s+r-c*i,o+n-c*e,s+r,o+n-e,s+r),t.lineTo(o+e,s+r),a&&t.bezierCurveTo(o+c*e,s+r,o,s+r-c*i,o,s+r-i),t.lineTo(o,s+i),a&&t.bezierCurveTo(o,s+c*i,o+c*e,s,o+e,s),t.closePath(),this._renderPaintInOrder(t)},_renderDashedStroke:function(t){var i=-this.width/2,n=-this.height/2,r=this.width,o=this.height;t.beginPath(),e.util.drawDashedLine(t,i,n,i+r,n,this.strokeDashArray),e.util.drawDashedLine(t,i+r,n,i+r,n+o,this.strokeDashArray),e.util.drawDashedLine(t,i+r,n+o,i,n+o,this.strokeDashArray),e.util.drawDashedLine(t,i,n+o,i,n,this.strokeDashArray),t.closePath()},toObject:function(t){return this.callSuper("toObject",["rx","ry"].concat(t))},_toSVG:function(){var t=-this.width/2,e=-this.height/2;return["<rect ","COMMON_PARTS",'x="',t,'" y="',e,'" rx="',this.rx,'" ry="',this.ry,'" width="',this.width,'" height="',this.height,'" />\n']}}),e.Rect.ATTRIBUTE_NAMES=e.SHARED_ATTRIBUTES.concat("x y rx ry width height".split(" ")),e.Rect.fromElement=function(t,n,r){if(!t)return n(null);r=r||{};var o=e.parseAttributes(t,e.Rect.ATTRIBUTE_NAMES);o.left=o.left||0,o.top=o.top||0,o.height=o.height||0,o.width=o.width||0;var s=new e.Rect(i(r?e.util.object.clone(r):{},o));s.visible=s.visible&&s.width>0&&s.height>0,n(s)},e.Rect.fromObject=function(t,i){return e.Object._fromObject("Rect",t,i)})}(e),function(t){"use strict";var e=t.fabric||(t.fabric={}),i=e.util.object.extend,n=e.util.array.min,r=e.util.array.max,o=e.util.toFixed;e.Polyline?e.warn("fabric.Polyline is already defined"):(e.Polyline=e.util.createClass(e.Object,{type:"polyline",points:null,cacheProperties:e.Object.prototype.cacheProperties.concat("points"),initialize:function(t,e){e=e||{},this.points=t||[],this.callSuper("initialize",e),this._setPositionDimensions(e)},_setPositionDimensions:function(t){var e,i=this._calcDimensions(t);this.width=i.width,this.height=i.height,t.fromSVG||(e=this.translateToGivenOrigin({x:i.left-this.strokeWidth/2,y:i.top-this.strokeWidth/2},"left","top",this.originX,this.originY)),"undefined"===typeof t.left&&(this.left=t.fromSVG?i.left:e.x),"undefined"===typeof t.top&&(this.top=t.fromSVG?i.top:e.y),this.pathOffset={x:i.left+this.width/2,y:i.top+this.height/2}},_calcDimensions:function(){var t=this.points,e=n(t,"x")||0,i=n(t,"y")||0,o=r(t,"x")||0,s=r(t,"y")||0,a=o-e,c=s-i;return{left:e,top:i,width:a,height:c}},toObject:function(t){return i(this.callSuper("toObject",t),{points:this.points.concat()})},_toSVG:function(){for(var t=[],i=this.pathOffset.x,n=this.pathOffset.y,r=e.Object.NUM_FRACTION_DIGITS,s=0,a=this.points.length;s<a;s++)t.push(o(this.points[s].x-i,r),",",o(this.points[s].y-n,r)," ");return["<"+this.type+" ","COMMON_PARTS",'points="',t.join(""),'" />\n']},commonRender:function(t){var e,i=this.points.length,n=this.pathOffset.x,r=this.pathOffset.y;if(!i||isNaN(this.points[i-1].y))return!1;t.beginPath(),t.moveTo(this.points[0].x-n,this.points[0].y-r);for(var o=0;o<i;o++)e=this.points[o],t.lineTo(e.x-n,e.y-r);return!0},_render:function(t){this.commonRender(t)&&this._renderPaintInOrder(t)},_renderDashedStroke:function(t){var i,n;t.beginPath();for(var r=0,o=this.points.length;r<o;r++)i=this.points[r],n=this.points[r+1]||i,e.util.drawDashedLine(t,i.x,i.y,n.x,n.y,this.strokeDashArray)},complexity:function(){return this.get("points").length}}),e.Polyline.ATTRIBUTE_NAMES=e.SHARED_ATTRIBUTES.concat(),e.Polyline.fromElementGenerator=function(t){return function(n,r,o){if(!n)return r(null);o||(o={});var s=e.parsePointsAttribute(n.getAttribute("points")),a=e.parseAttributes(n,e[t].ATTRIBUTE_NAMES);a.fromSVG=!0,r(new e[t](s,i(a,o)))}},e.Polyline.fromElement=e.Polyline.fromElementGenerator("Polyline"),e.Polyline.fromObject=function(t,i){return e.Object._fromObject("Polyline",t,i,"points")})}(e),function(t){"use strict";var e=t.fabric||(t.fabric={});e.Polygon?e.warn("fabric.Polygon is already defined"):(e.Polygon=e.util.createClass(e.Polyline,{type:"polygon",_render:function(t){this.commonRender(t)&&(t.closePath(),this._renderPaintInOrder(t))},_renderDashedStroke:function(t){this.callSuper("_renderDashedStroke",t),t.closePath()}}),e.Polygon.ATTRIBUTE_NAMES=e.SHARED_ATTRIBUTES.concat(),e.Polygon.fromElement=e.Polyline.fromElementGenerator("Polygon"),e.Polygon.fromObject=function(t,i){return e.Object._fromObject("Polygon",t,i,"points")})}(e),function(t){"use strict";var e=t.fabric||(t.fabric={}),i=e.util.array.min,n=e.util.array.max,r=e.util.object.extend,o=Object.prototype.toString,s=e.util.toFixed;e.Path?e.warn("fabric.Path is already defined"):(e.Path=e.util.createClass(e.Object,{type:"path",path:null,cacheProperties:e.Object.prototype.cacheProperties.concat("path","fillRule"),stateProperties:e.Object.prototype.stateProperties.concat("path"),initialize:function(t,i){i=i||{},this.callSuper("initialize",i),t||(t=[]);var n="[object Array]"===o.call(t);this.path=n?e.util.makePathSimpler(t):e.util.makePathSimpler(e.util.parsePath(t)),this.path&&e.Polyline.prototype._setPositionDimensions.call(this,i)},_renderPathCommands:function(t){var e,i=0,n=0,r=0,o=0,s=0,a=0,c=-this.pathOffset.x,l=-this.pathOffset.y;t.beginPath();for(var h=0,u=this.path.length;h<u;++h)switch(e=this.path[h],e[0]){case"L":r=e[1],o=e[2],t.lineTo(r+c,o+l);break;case"M":r=e[1],o=e[2],i=r,n=o,t.moveTo(r+c,o+l);break;case"C":r=e[5],o=e[6],s=e[3],a=e[4],t.bezierCurveTo(e[1]+c,e[2]+l,s+c,a+l,r+c,o+l);break;case"Q":t.quadraticCurveTo(e[1]+c,e[2]+l,e[3]+c,e[4]+l),r=e[3],o=e[4],s=e[1],a=e[2];break;case"z":case"Z":r=i,o=n,t.closePath();break}},_render:function(t){this._renderPathCommands(t),this._renderPaintInOrder(t)},toString:function(){return"#<fabric.Path ("+this.complexity()+'): { "top": '+this.top+', "left": '+this.left+" }>"},toObject:function(t){return r(this.callSuper("toObject",t),{path:this.path.map((function(t){return t.slice()}))})},toDatalessObject:function(t){var e=this.toObject(["sourcePath"].concat(t));return e.sourcePath&&delete e.path,e},_toSVG:function(){var t=this.path.map((function(t){return t.join(" ")})).join(" ");return["<path ","COMMON_PARTS",'d="',t,'" stroke-linecap="round" ',"/>\n"]},_getOffsetTransform:function(){var t=e.Object.NUM_FRACTION_DIGITS;return" translate("+s(-this.pathOffset.x,t)+", "+s(-this.pathOffset.y,t)+")"},toClipPathSVG:function(t){var e=this._getOffsetTransform();return"\t"+this._createBaseClipPathSVGMarkup(this._toSVG(),{reviver:t,additionalTransform:e})},toSVG:function(t){var e=this._getOffsetTransform();return this._createBaseSVGMarkup(this._toSVG(),{reviver:t,additionalTransform:e})},complexity:function(){return this.path.length},_calcDimensions:function(){for(var t,r,o=[],s=[],a=0,c=0,l=0,h=0,u=0,f=this.path.length;u<f;++u){switch(t=this.path[u],t[0]){case"L":l=t[1],h=t[2],r=[];break;case"M":l=t[1],h=t[2],a=l,c=h,r=[];break;case"C":r=e.util.getBoundsOfCurve(l,h,t[1],t[2],t[3],t[4],t[5],t[6]),l=t[5],h=t[6];break;case"Q":r=e.util.getBoundsOfCurve(l,h,t[1],t[2],t[1],t[2],t[3],t[4]),l=t[3],h=t[4];break;case"z":case"Z":l=a,h=c;break}r.forEach((function(t){o.push(t.x),s.push(t.y)})),o.push(l),s.push(h)}var d=i(o)||0,p=i(s)||0,g=n(o)||0,v=n(s)||0,m=g-d,y=v-p;return{left:d,top:p,width:m,height:y}}}),e.Path.fromObject=function(t,i){if("string"===typeof t.sourcePath){var n=t.sourcePath;e.loadSVGFromURL(n,(function(e){var n=e[0];n.setOptions(t),i&&i(n)}))}else e.Object._fromObject("Path",t,i,"path")},e.Path.ATTRIBUTE_NAMES=e.SHARED_ATTRIBUTES.concat(["d"]),e.Path.fromElement=function(t,i,n){var o=e.parseAttributes(t,e.Path.ATTRIBUTE_NAMES);o.fromSVG=!0,i(new e.Path(o.d,r(o,n)))})}(e),function(t){"use strict";var e=t.fabric||(t.fabric={}),i=e.util.array.min,n=e.util.array.max;e.Group||(e.Group=e.util.createClass(e.Object,e.Collection,{type:"group",strokeWidth:0,subTargetCheck:!1,cacheProperties:[],useSetOnGroup:!1,initialize:function(t,e,i){e=e||{},this._objects=[],i&&this.callSuper("initialize",e),this._objects=t||[];for(var n=this._objects.length;n--;)this._objects[n].group=this;if(i)this._updateObjectsACoords();else{var r=e&&e.centerPoint;void 0!==e.originX&&(this.originX=e.originX),void 0!==e.originY&&(this.originY=e.originY),r||this._calcBounds(),this._updateObjectsCoords(r),delete e.centerPoint,this.callSuper("initialize",e)}this.setCoords()},_updateObjectsACoords:function(){for(var t=!0,e=this._objects.length;e--;)this._objects[e].setCoords(t)},_updateObjectsCoords:function(t){t=t||this.getCenterPoint();for(var e=this._objects.length;e--;)this._updateObjectCoords(this._objects[e],t)},_updateObjectCoords:function(t,e){var i=t.left,n=t.top,r=!0;t.set({left:i-e.x,top:n-e.y}),t.group=this,t.setCoords(r)},toString:function(){return"#<fabric.Group: ("+this.complexity()+")>"},addWithUpdate:function(t){var i=!!this.group;return this._restoreObjectsState(),e.util.resetObjectTransform(this),t&&(i&&e.util.removeTransformFromObject(t,this.group.calcTransformMatrix()),this._objects.push(t),t.group=this,t._set("canvas",this.canvas)),this._calcBounds(),this._updateObjectsCoords(),this.dirty=!0,i?this.group.addWithUpdate():this.setCoords(),this},removeWithUpdate:function(t){return this._restoreObjectsState(),e.util.resetObjectTransform(this),this.remove(t),this._calcBounds(),this._updateObjectsCoords(),this.setCoords(),this.dirty=!0,this},_onObjectAdded:function(t){this.dirty=!0,t.group=this,t._set("canvas",this.canvas)},_onObjectRemoved:function(t){this.dirty=!0,delete t.group},_set:function(t,i){var n=this._objects.length;if(this.useSetOnGroup)while(n--)this._objects[n].setOnGroup(t,i);if("canvas"===t)while(n--)this._objects[n]._set(t,i);e.Object.prototype._set.call(this,t,i)},toObject:function(t){var i=this.includeDefaultValues,n=this._objects.map((function(e){var n=e.includeDefaultValues;e.includeDefaultValues=i;var r=e.toObject(t);return e.includeDefaultValues=n,r})),r=e.Object.prototype.toObject.call(this,t);return r.objects=n,r},toDatalessObject:function(t){var i,n=this.sourcePath;if(n)i=n;else{var r=this.includeDefaultValues;i=this._objects.map((function(e){var i=e.includeDefaultValues;e.includeDefaultValues=r;var n=e.toDatalessObject(t);return e.includeDefaultValues=i,n}))}var o=e.Object.prototype.toDatalessObject.call(this,t);return o.objects=i,o},render:function(t){this._transformDone=!0,this.callSuper("render",t),this._transformDone=!1},shouldCache:function(){var t=e.Object.prototype.shouldCache.call(this);if(t)for(var i=0,n=this._objects.length;i<n;i++)if(this._objects[i].willDrawShadow())return this.ownCaching=!1,!1;return t},willDrawShadow:function(){if(e.Object.prototype.willDrawShadow.call(this))return!0;for(var t=0,i=this._objects.length;t<i;t++)if(this._objects[t].willDrawShadow())return!0;return!1},isOnACache:function(){return this.ownCaching||this.group&&this.group.isOnACache()},drawObject:function(t){for(var e=0,i=this._objects.length;e<i;e++)this._objects[e].render(t);this._drawClipPath(t)},isCacheDirty:function(t){if(this.callSuper("isCacheDirty",t))return!0;if(!this.statefullCache)return!1;for(var e=0,i=this._objects.length;e<i;e++)if(this._objects[e].isCacheDirty(!0)){if(this._cacheCanvas){var n=this.cacheWidth/this.zoomX,r=this.cacheHeight/this.zoomY;this._cacheContext.clearRect(-n/2,-r/2,n,r)}return!0}return!1},_restoreObjectsState:function(){var t=this.calcOwnMatrix();return this._objects.forEach((function(i){e.util.addTransformToObject(i,t),delete i.group,i.setCoords()})),this},realizeTransform:function(t,i){return e.util.addTransformToObject(t,i),t},destroy:function(){return this._objects.forEach((function(t){t.set("dirty",!0)})),this._restoreObjectsState()},toActiveSelection:function(){if(this.canvas){var t=this._objects,i=this.canvas;this._objects=[];var n=this.toObject();delete n.objects;var r=new e.ActiveSelection([]);return r.set(n),r.type="activeSelection",i.remove(this),t.forEach((function(t){t.group=r,t.dirty=!0,i.add(t)})),r.canvas=i,r._objects=t,i._activeObject=r,r.setCoords(),r}},ungroupOnCanvas:function(){return this._restoreObjectsState()},setObjectsCoords:function(){var t=!0;return this.forEachObject((function(e){e.setCoords(t)})),this},_calcBounds:function(t){for(var e,i,n,r,o=[],s=[],a=["tr","br","bl","tl"],c=0,l=this._objects.length,h=a.length;c<l;++c){for(e=this._objects[c],n=e.calcACoords(),r=0;r<h;r++)i=a[r],o.push(n[i].x),s.push(n[i].y);e.aCoords=n}this._getBounds(o,s,t)},_getBounds:function(t,r,o){var s=new e.Point(i(t),i(r)),a=new e.Point(n(t),n(r)),c=s.y||0,l=s.x||0,h=a.x-s.x||0,u=a.y-s.y||0;this.width=h,this.height=u,o||this.setPositionByOrigin({x:l,y:c},"left","top")},_toSVG:function(t){for(var e=["<g ","COMMON_PARTS"," >\n"],i=0,n=this._objects.length;i<n;i++)e.push("\t\t",this._objects[i].toSVG(t));return e.push("</g>\n"),e},getSvgStyles:function(){var t="undefined"!==typeof this.opacity&&1!==this.opacity?"opacity: "+this.opacity+";":"",e=this.visible?"":" visibility: hidden;";return[t,this.getSvgFilter(),e].join("")},toClipPathSVG:function(t){for(var e=[],i=0,n=this._objects.length;i<n;i++)e.push("\t",this._objects[i].toClipPathSVG(t));return this._createBaseClipPathSVGMarkup(e,{reviver:t})}}),e.Group.fromObject=function(t,i){var n=t.objects,r=e.util.object.clone(t,!0);delete r.objects,"string"!==typeof n?e.util.enlivenObjects(n,(function(n){e.util.enlivenObjects([t.clipPath],(function(r){var o=e.util.object.clone(t,!0);o.clipPath=r[0],delete o.objects,i&&i(new e.Group(n,o,!0))}))})):e.loadSVGFromURL(n,(function(o){var s=e.util.groupSVGElements(o,t,n);s.set(r),i&&i(s)}))})}(e),function(t){"use strict";var e=t.fabric||(t.fabric={});e.ActiveSelection||(e.ActiveSelection=e.util.createClass(e.Group,{type:"activeSelection",initialize:function(t,i){i=i||{},this._objects=t||[];for(var n=this._objects.length;n--;)this._objects[n].group=this;i.originX&&(this.originX=i.originX),i.originY&&(this.originY=i.originY),this._calcBounds(),this._updateObjectsCoords(),e.Object.prototype.initialize.call(this,i),this.setCoords()},toGroup:function(){var t=this._objects.concat();this._objects=[];var i=e.Object.prototype.toObject.call(this),n=new e.Group([]);if(delete i.type,n.set(i),t.forEach((function(t){t.canvas.remove(t),t.group=n})),n._objects=t,!this.canvas)return n;var r=this.canvas;return r.add(n),r._activeObject=n,n.setCoords(),n},onDeselect:function(){return this.destroy(),!1},toString:function(){return"#<fabric.ActiveSelection: ("+this.complexity()+")>"},shouldCache:function(){return!1},isOnACache:function(){return!1},_renderControls:function(t,e,i){t.save(),t.globalAlpha=this.isMoving?this.borderOpacityWhenMoving:1,this.callSuper("_renderControls",t,e),i=i||{},"undefined"===typeof i.hasControls&&(i.hasControls=!1),i.forActiveSelection=!0;for(var n=0,r=this._objects.length;n<r;n++)this._objects[n]._renderControls(t,i);t.restore()}}),e.ActiveSelection.fromObject=function(t,i){e.util.enlivenObjects(t.objects,(function(n){delete t.objects,i&&i(new e.ActiveSelection(n,t,!0))}))})}(e),function(t){"use strict";var e=n.util.object.extend;t.fabric||(t.fabric={}),t.fabric.Image?n.warn("fabric.Image is already defined."):(n.Image=n.util.createClass(n.Object,{type:"image",strokeWidth:0,srcFromAttribute:!1,_lastScaleX:1,_lastScaleY:1,_filterScalingX:1,_filterScalingY:1,minimumScaleTrigger:.5,stateProperties:n.Object.prototype.stateProperties.concat("cropX","cropY"),cacheProperties:n.Object.prototype.cacheProperties.concat("cropX","cropY"),cacheKey:"",cropX:0,cropY:0,imageSmoothing:!0,initialize:function(t,e){e||(e={}),this.filters=[],this.cacheKey="texture"+n.Object.__uid++,this.callSuper("initialize",e),this._initElement(t,e)},getElement:function(){return this._element||{}},setElement:function(t,e){return this.removeTexture(this.cacheKey),this.removeTexture(this.cacheKey+"_filtered"),this._element=t,this._originalElement=t,this._initConfig(e),0!==this.filters.length&&this.applyFilters(),this.resizeFilter&&this.applyResizeFilters(),this},removeTexture:function(t){var e=n.filterBackend;e&&e.evictCachesForKey&&e.evictCachesForKey(t)},dispose:function(){this.removeTexture(this.cacheKey),this.removeTexture(this.cacheKey+"_filtered"),this._cacheContext=void 0,["_originalElement","_element","_filteredEl","_cacheCanvas"].forEach(function(t){n.util.cleanUpJsdomNode(this[t]),this[t]=void 0}.bind(this))},getCrossOrigin:function(){return this._originalElement&&(this._originalElement.crossOrigin||null)},getOriginalSize:function(){var t=this.getElement();return{width:t.naturalWidth||t.width,height:t.naturalHeight||t.height}},_stroke:function(t){if(this.stroke&&0!==this.strokeWidth){var e=this.width/2,i=this.height/2;t.beginPath(),t.moveTo(-e,-i),t.lineTo(e,-i),t.lineTo(e,i),t.lineTo(-e,i),t.lineTo(-e,-i),t.closePath()}},_renderDashedStroke:function(t){var e=-this.width/2,i=-this.height/2,r=this.width,o=this.height;t.save(),this._setStrokeStyles(t,this),t.beginPath(),n.util.drawDashedLine(t,e,i,e+r,i,this.strokeDashArray),n.util.drawDashedLine(t,e+r,i,e+r,i+o,this.strokeDashArray),n.util.drawDashedLine(t,e+r,i+o,e,i+o,this.strokeDashArray),n.util.drawDashedLine(t,e,i+o,e,i,this.strokeDashArray),t.closePath(),t.restore()},toObject:function(t){var i=[];this.filters.forEach((function(t){t&&i.push(t.toObject())}));var n=e(this.callSuper("toObject",["cropX","cropY"].concat(t)),{src:this.getSrc(),crossOrigin:this.getCrossOrigin(),filters:i});return this.resizeFilter&&(n.resizeFilter=this.resizeFilter.toObject()),n},hasCrop:function(){return this.cropX||this.cropY||this.width<this._element.width||this.height<this._element.height},_toSVG:function(){var t,e=[],i=[],r=this._element,o=-this.width/2,s=-this.height/2,a="",c="";if(!r)return[];if(this.hasCrop()){var l=n.Object.__uid++;e.push('<clipPath id="imageCrop_'+l+'">\n','\t<rect x="'+o+'" y="'+s+'" width="'+this.width+'" height="'+this.height+'" />\n',"</clipPath>\n"),a=' clip-path="url(#imageCrop_'+l+')" '}if(this.imageSmoothing||(c='" image-rendering="optimizeSpeed'),i.push("\t<image ","COMMON_PARTS",'xlink:href="',this.getSvgSrc(!0),'" x="',o-this.cropX,'" y="',s-this.cropY,'" width="',r.width||r.naturalWidth,'" height="',r.height||r.height,c,'"',a,"></image>\n"),this.stroke||this.strokeDashArray){var h=this.fill;this.fill=null,t=["\t<rect ",'x="',o,'" y="',s,'" width="',this.width,'" height="',this.height,'" style="',this.getSvgStyles(),'"/>\n'],this.fill=h}return e="fill"!==this.paintFirst?e.concat(t,i):e.concat(i,t),e},getSrc:function(t){var e=t?this._element:this._originalElement;return e?e.toDataURL?e.toDataURL():this.srcFromAttribute?e.getAttribute("src"):e.src:this.src||""},setSrc:function(t,e,i){return n.util.loadImage(t,(function(t,n){this.setElement(t,i),this._setWidthHeight(),e&&e(this,n)}),this,i&&i.crossOrigin),this},toString:function(){return'#<fabric.Image: { src: "'+this.getSrc()+'" }>'},applyResizeFilters:function(){var t=this.resizeFilter,e=this.minimumScaleTrigger,i=this.getTotalObjectScaling(),r=i.scaleX,o=i.scaleY,s=this._filteredEl||this._originalElement;if(this.group&&this.set("dirty",!0),!t||r>e&&o>e)return this._element=s,this._filterScalingX=1,this._filterScalingY=1,this._lastScaleX=r,void(this._lastScaleY=o);n.filterBackend||(n.filterBackend=n.initFilterBackend());var a=n.util.createCanvasElement(),c=this._filteredEl?this.cacheKey+"_filtered":this.cacheKey,l=s.width,h=s.height;a.width=l,a.height=h,this._element=a,this._lastScaleX=t.scaleX=r,this._lastScaleY=t.scaleY=o,n.filterBackend.applyFilters([t],s,l,h,this._element,c),this._filterScalingX=a.width/this._originalElement.width,this._filterScalingY=a.height/this._originalElement.height},applyFilters:function(t){if(t=t||this.filters||[],t=t.filter((function(t){return t&&!t.isNeutralState()})),this.set("dirty",!0),this.removeTexture(this.cacheKey+"_filtered"),0===t.length)return this._element=this._originalElement,this._filteredEl=null,this._filterScalingX=1,this._filterScalingY=1,this;var e=this._originalElement,i=e.naturalWidth||e.width,r=e.naturalHeight||e.height;if(this._element===this._originalElement){var o=n.util.createCanvasElement();o.width=i,o.height=r,this._element=o,this._filteredEl=o}else this._element=this._filteredEl,this._filteredEl.getContext("2d").clearRect(0,0,i,r),this._lastScaleX=1,this._lastScaleY=1;return n.filterBackend||(n.filterBackend=n.initFilterBackend()),n.filterBackend.applyFilters(t,this._originalElement,i,r,this._element,this.cacheKey),this._originalElement.width===this._element.width&&this._originalElement.height===this._element.height||(this._filterScalingX=this._element.width/this._originalElement.width,this._filterScalingY=this._element.height/this._originalElement.height),this},_render:function(t){n.util.setImageSmoothing(t,this.imageSmoothing),!0!==this.isMoving&&this.resizeFilter&&this._needsResize()&&this.applyResizeFilters(),this._stroke(t),this._renderPaintInOrder(t)},drawCacheOnCanvas:function(t){n.util.setImageSmoothing(t,this.imageSmoothing),n.Object.prototype.drawCacheOnCanvas.call(this,t)},shouldCache:function(){return this.needsItsOwnCache()},_renderFill:function(t){var e=this._element;if(e){var i=this._filterScalingX,n=this._filterScalingY,r=this.width,o=this.height,s=Math.min,a=Math.max,c=a(this.cropX,0),l=a(this.cropY,0),h=e.naturalWidth||e.width,u=e.naturalHeight||e.height,f=c*i,d=l*n,p=s(r*i,h-f),g=s(o*n,u-d),v=-r/2,m=-o/2,y=s(r,h/i-c),b=s(o,u/n-l);e&&t.drawImage(e,f,d,p,g,v,m,y,b)}},_needsResize:function(){var t=this.getTotalObjectScaling();return t.scaleX!==this._lastScaleX||t.scaleY!==this._lastScaleY},_resetWidthHeight:function(){this.set(this.getOriginalSize())},_initElement:function(t,e){this.setElement(n.util.getById(t),e),n.util.addClass(this.getElement(),n.Image.CSS_CANVAS)},_initConfig:function(t){t||(t={}),this.setOptions(t),this._setWidthHeight(t)},_initFilters:function(t,e){t&&t.length?n.util.enlivenObjects(t,(function(t){e&&e(t)}),"fabric.Image.filters"):e&&e()},_setWidthHeight:function(t){t||(t={});var e=this.getElement();this.width=t.width||e.naturalWidth||e.width||0,this.height=t.height||e.naturalHeight||e.height||0},parsePreserveAspectRatioAttribute:function(){var t,e=n.util.parsePreserveAspectRatioAttribute(this.preserveAspectRatio||""),i=this._element.width,r=this._element.height,o=1,s=1,a=0,c=0,l=0,h=0,u=this.width,f=this.height,d={width:u,height:f};return!e||"none"===e.alignX&&"none"===e.alignY?(o=u/i,s=f/r):("meet"===e.meetOrSlice&&(o=s=n.util.findScaleToFit(this._element,d),t=(u-i*o)/2,"Min"===e.alignX&&(a=-t),"Max"===e.alignX&&(a=t),t=(f-r*s)/2,"Min"===e.alignY&&(c=-t),"Max"===e.alignY&&(c=t)),"slice"===e.meetOrSlice&&(o=s=n.util.findScaleToCover(this._element,d),t=i-u/o,"Mid"===e.alignX&&(l=t/2),"Max"===e.alignX&&(l=t),t=r-f/s,"Mid"===e.alignY&&(h=t/2),"Max"===e.alignY&&(h=t),i=u/o,r=f/s)),{width:i,height:r,scaleX:o,scaleY:s,offsetLeft:a,offsetTop:c,cropX:l,cropY:h}}}),n.Image.CSS_CANVAS="canvas-img",n.Image.prototype.getSvgSrc=n.Image.prototype.getSrc,n.Image.fromObject=function(t,e){var i=n.util.object.clone(t);n.util.loadImage(i.src,(function(t,r){r?e&&e(null,!0):n.Image.prototype._initFilters.call(i,i.filters,(function(r){i.filters=r||[],n.Image.prototype._initFilters.call(i,[i.resizeFilter],(function(r){i.resizeFilter=r[0],n.util.enlivenObjects([i.clipPath],(function(r){i.clipPath=r[0];var o=new n.Image(t,i);e(o,!1)}))}))}))}),null,i.crossOrigin)},n.Image.fromURL=function(t,e,i){n.util.loadImage(t,(function(t,r){e&&e(new n.Image(t,i),r)}),null,i&&i.crossOrigin)},n.Image.ATTRIBUTE_NAMES=n.SHARED_ATTRIBUTES.concat("x y width height preserveAspectRatio xlink:href crossOrigin image-rendering".split(" ")),n.Image.fromElement=function(t,i,r){var o=n.parseAttributes(t,n.Image.ATTRIBUTE_NAMES);n.Image.fromURL(o["xlink:href"],i,e(r?n.util.object.clone(r):{},o))})}(e),n.util.object.extend(n.Object.prototype,{_getAngleValueForStraighten:function(){var t=this.angle%360;return t>0?90*Math.round((t-1)/90):90*Math.round(t/90)},straighten:function(){return this.rotate(this._getAngleValueForStraighten()),this},fxStraighten:function(t){t=t||{};var e=function(){},i=t.onComplete||e,r=t.onChange||e,o=this;return n.util.animate({startValue:this.get("angle"),endValue:this._getAngleValueForStraighten(),duration:this.FX_DURATION,onChange:function(t){o.rotate(t),r()},onComplete:function(){o.setCoords(),i()}}),this}}),n.util.object.extend(n.StaticCanvas.prototype,{straightenObject:function(t){return t.straighten(),this.requestRenderAll(),this},fxStraightenObject:function(t){return t.fxStraighten({onChange:this.requestRenderAllBound}),this}}),function(){"use strict";function t(t,e){var i="precision "+e+" float;\nvoid main(){}",n=t.createShader(t.FRAGMENT_SHADER);return t.shaderSource(n,i),t.compileShader(n),!!t.getShaderParameter(n,t.COMPILE_STATUS)}function e(t){t&&t.tileSize&&(this.tileSize=t.tileSize),this.setupGLContext(this.tileSize,this.tileSize),this.captureGPUInfo()}n.isWebglSupported=function(e){if(n.isLikelyNode)return!1;e=e||n.WebglFilterBackend.prototype.tileSize;var i=document.createElement("canvas"),r=i.getContext("webgl")||i.getContext("experimental-webgl"),o=!1;if(r){n.maxTextureSize=r.getParameter(r.MAX_TEXTURE_SIZE),o=n.maxTextureSize>=e;for(var s=["highp","mediump","lowp"],a=0;a<3;a++)if(t(r,s[a])){n.webGlPrecision=s[a];break}}return this.isSupported=o,o},n.WebglFilterBackend=e,e.prototype={tileSize:2048,resources:{},setupGLContext:function(t,e){this.dispose(),this.createWebGLCanvas(t,e),this.aPosition=new Float32Array([0,0,0,1,1,0,1,1]),this.chooseFastestCopyGLTo2DMethod(t,e)},chooseFastestCopyGLTo2DMethod:function(t,e){var i,r="undefined"!==typeof window.performance;try{new ImageData(1,1),i=!0}catch(g){i=!1}var o="undefined"!==typeof ArrayBuffer,s="undefined"!==typeof Uint8ClampedArray;if(r&&i&&o&&s){var l=n.util.createCanvasElement(),h=new ArrayBuffer(t*e*4);if(n.forceGLPutImageData)return this.imageBuffer=h,void(this.copyGLTo2D=c);var u,f,d,p={imageBuffer:h,destinationWidth:t,destinationHeight:e,targetCanvas:l};l.width=t,l.height=e,u=window.performance.now(),a.call(p,this.gl,p),f=window.performance.now()-u,u=window.performance.now(),c.call(p,this.gl,p),d=window.performance.now()-u,f>d?(this.imageBuffer=h,this.copyGLTo2D=c):this.copyGLTo2D=a}},createWebGLCanvas:function(t,e){var i=n.util.createCanvasElement();i.width=t,i.height=e;var r={alpha:!0,premultipliedAlpha:!1,depth:!1,stencil:!1,antialias:!1},o=i.getContext("webgl",r);o||(o=i.getContext("experimental-webgl",r)),o&&(o.clearColor(0,0,0,0),this.canvas=i,this.gl=o)},applyFilters:function(t,e,i,n,r,o){var a,c=this.gl;o&&(a=this.getCachedTexture(o,e));var l={originalWidth:e.width||e.originalWidth,originalHeight:e.height||e.originalHeight,sourceWidth:i,sourceHeight:n,destinationWidth:i,destinationHeight:n,context:c,sourceTexture:this.createTexture(c,i,n,!a&&e),targetTexture:this.createTexture(c,i,n),originalTexture:a||this.createTexture(c,i,n,!a&&e),passes:t.length,webgl:!0,aPosition:this.aPosition,programCache:this.programCache,pass:0,filterBackend:this,targetCanvas:r},h=c.createFramebuffer();return c.bindFramebuffer(c.FRAMEBUFFER,h),t.forEach((function(t){t&&t.applyTo(l)})),s(l),this.copyGLTo2D(c,l),c.bindTexture(c.TEXTURE_2D,null),c.deleteTexture(l.sourceTexture),c.deleteTexture(l.targetTexture),c.deleteFramebuffer(h),r.getContext("2d").setTransform(1,0,0,1,0,0),l},dispose:function(){this.canvas&&(this.canvas=null,this.gl=null),this.clearWebGLCaches()},clearWebGLCaches:function(){this.programCache={},this.textureCache={}},createTexture:function(t,e,i,n){var r=t.createTexture();return t.bindTexture(t.TEXTURE_2D,r),t.texParameteri(t.TEXTURE_2D,t.TEXTURE_MAG_FILTER,t.NEAREST),t.texParameteri(t.TEXTURE_2D,t.TEXTURE_MIN_FILTER,t.NEAREST),t.texParameteri(t.TEXTURE_2D,t.TEXTURE_WRAP_S,t.CLAMP_TO_EDGE),t.texParameteri(t.TEXTURE_2D,t.TEXTURE_WRAP_T,t.CLAMP_TO_EDGE),n?t.texImage2D(t.TEXTURE_2D,0,t.RGBA,t.RGBA,t.UNSIGNED_BYTE,n):t.texImage2D(t.TEXTURE_2D,0,t.RGBA,e,i,0,t.RGBA,t.UNSIGNED_BYTE,null),r},getCachedTexture:function(t,e){if(this.textureCache[t])return this.textureCache[t];var i=this.createTexture(this.gl,e.width,e.height,e);return this.textureCache[t]=i,i},evictCachesForKey:function(t){this.textureCache[t]&&(this.gl.deleteTexture(this.textureCache[t]),delete this.textureCache[t])},copyGLTo2D:a,captureGPUInfo:function(){if(this.gpuInfo)return this.gpuInfo;var t=this.gl,e={renderer:"",vendor:""};if(!t)return e;var i=t.getExtension("WEBGL_debug_renderer_info");if(i){var n=t.getParameter(i.UNMASKED_RENDERER_WEBGL),r=t.getParameter(i.UNMASKED_VENDOR_WEBGL);n&&(e.renderer=n.toLowerCase()),r&&(e.vendor=r.toLowerCase())}return this.gpuInfo=e,e}}}(),function(){"use strict";var t=function(){};function e(){}n.Canvas2dFilterBackend=e,e.prototype={evictCachesForKey:t,dispose:t,clearWebGLCaches:t,resources:{},applyFilters:function(t,e,i,n,r){var o=r.getContext("2d");o.drawImage(e,0,0,i,n);var s=o.getImageData(0,0,i,n),a=o.getImageData(0,0,i,n),c={sourceWidth:i,sourceHeight:n,imageData:s,originalEl:e,originalImageData:a,canvasEl:r,ctx:o,filterBackend:this};return t.forEach((function(t){t.applyTo(c)})),c.imageData.width===i&&c.imageData.height===n||(r.width=c.imageData.width,r.height=c.imageData.height),o.putImageData(c.imageData,0,0),c}}}(),n.Image=n.Image||{},n.Image.filters=n.Image.filters||{},n.Image.filters.BaseFilter=n.util.createClass({type:"BaseFilter",vertexSource:"attribute vec2 aPosition;\nvarying vec2 vTexCoord;\nvoid main() {\nvTexCoord = aPosition;\ngl_Position = vec4(aPosition * 2.0 - 1.0, 0.0, 1.0);\n}",fragmentSource:"precision highp float;\nvarying vec2 vTexCoord;\nuniform sampler2D uTexture;\nvoid main() {\ngl_FragColor = texture2D(uTexture, vTexCoord);\n}",initialize:function(t){t&&this.setOptions(t)},setOptions:function(t){for(var e in t)this[e]=t[e]},createProgram:function(t,e,i){e=e||this.fragmentSource,i=i||this.vertexSource,"highp"!==n.webGlPrecision&&(e=e.replace(/precision highp float/g,"precision "+n.webGlPrecision+" float"));var r=t.createShader(t.VERTEX_SHADER);if(t.shaderSource(r,i),t.compileShader(r),!t.getShaderParameter(r,t.COMPILE_STATUS))throw new Error("Vertex shader compile error for "+this.type+": "+t.getShaderInfoLog(r));var o=t.createShader(t.FRAGMENT_SHADER);if(t.shaderSource(o,e),t.compileShader(o),!t.getShaderParameter(o,t.COMPILE_STATUS))throw new Error("Fragment shader compile error for "+this.type+": "+t.getShaderInfoLog(o));var s=t.createProgram();if(t.attachShader(s,r),t.attachShader(s,o),t.linkProgram(s),!t.getProgramParameter(s,t.LINK_STATUS))throw new Error('Shader link error for "${this.type}" '+t.getProgramInfoLog(s));var a=this.getAttributeLocations(t,s),c=this.getUniformLocations(t,s)||{};return c.uStepW=t.getUniformLocation(s,"uStepW"),c.uStepH=t.getUniformLocation(s,"uStepH"),{program:s,attributeLocations:a,uniformLocations:c}},getAttributeLocations:function(t,e){return{aPosition:t.getAttribLocation(e,"aPosition")}},getUniformLocations:function(){return{}},sendAttributeData:function(t,e,i){var n=e.aPosition,r=t.createBuffer();t.bindBuffer(t.ARRAY_BUFFER,r),t.enableVertexAttribArray(n),t.vertexAttribPointer(n,2,t.FLOAT,!1,0,0),t.bufferData(t.ARRAY_BUFFER,i,t.STATIC_DRAW)},_setupFrameBuffer:function(t){var e,i,n=t.context;t.passes>1?(e=t.destinationWidth,i=t.destinationHeight,t.sourceWidth===e&&t.sourceHeight===i||(n.deleteTexture(t.targetTexture),t.targetTexture=t.filterBackend.createTexture(n,e,i)),n.framebufferTexture2D(n.FRAMEBUFFER,n.COLOR_ATTACHMENT0,n.TEXTURE_2D,t.targetTexture,0)):(n.bindFramebuffer(n.FRAMEBUFFER,null),n.finish())},_swapTextures:function(t){t.passes--,t.pass++;var e=t.targetTexture;t.targetTexture=t.sourceTexture,t.sourceTexture=e},isNeutralState:function(){var t=this.mainParameter,e=n.Image.filters[this.type].prototype;if(t){if(Array.isArray(e[t])){for(var i=e[t].length;i--;)if(this[t][i]!==e[t][i])return!1;return!0}return e[t]===this[t]}return!1},applyTo:function(t){t.webgl?(this._setupFrameBuffer(t),this.applyToWebGL(t),this._swapTextures(t)):this.applyTo2d(t)},retrieveShader:function(t){return t.programCache.hasOwnProperty(this.type)||(t.programCache[this.type]=this.createProgram(t.context)),t.programCache[this.type]},applyToWebGL:function(t){var e=t.context,i=this.retrieveShader(t);0===t.pass&&t.originalTexture?e.bindTexture(e.TEXTURE_2D,t.originalTexture):e.bindTexture(e.TEXTURE_2D,t.sourceTexture),e.useProgram(i.program),this.sendAttributeData(e,i.attributeLocations,t.aPosition),e.uniform1f(i.uniformLocations.uStepW,1/t.sourceWidth),e.uniform1f(i.uniformLocations.uStepH,1/t.sourceHeight),this.sendUniformData(e,i.uniformLocations),e.viewport(0,0,t.destinationWidth,t.destinationHeight),e.drawArrays(e.TRIANGLE_STRIP,0,4)},bindAdditionalTexture:function(t,e,i){t.activeTexture(i),t.bindTexture(t.TEXTURE_2D,e),t.activeTexture(t.TEXTURE0)},unbindAdditionalTexture:function(t,e){t.activeTexture(e),t.bindTexture(t.TEXTURE_2D,null),t.activeTexture(t.TEXTURE0)},getMainParameter:function(){return this[this.mainParameter]},setMainParameter:function(t){this[this.mainParameter]=t},sendUniformData:function(){},createHelpLayer:function(t){if(!t.helpLayer){var e=document.createElement("canvas");e.width=t.sourceWidth,e.height=t.sourceHeight,t.helpLayer=e}},toObject:function(){var t={type:this.type},e=this.mainParameter;return e&&(t[e]=this[e]),t},toJSON:function(){return this.toObject()}}),n.Image.filters.BaseFilter.fromObject=function(t,e){var i=new n.Image.filters[t.type](t);return e&&e(i),i},function(t){"use strict";var e=t.fabric||(t.fabric={}),i=e.Image.filters,n=e.util.createClass;i.ColorMatrix=n(i.BaseFilter,{type:"ColorMatrix",fragmentSource:"precision highp float;\nuniform sampler2D uTexture;\nvarying vec2 vTexCoord;\nuniform mat4 uColorMatrix;\nuniform vec4 uConstants;\nvoid main() {\nvec4 color = texture2D(uTexture, vTexCoord);\ncolor *= uColorMatrix;\ncolor += uConstants;\ngl_FragColor = color;\n}",matrix:[1,0,0,0,0,0,1,0,0,0,0,0,1,0,0,0,0,0,1,0],mainParameter:"matrix",colorsOnly:!0,initialize:function(t){this.callSuper("initialize",t),this.matrix=this.matrix.slice(0)},applyTo2d:function(t){var e,i,n,r,o,s=t.imageData,a=s.data,c=a.length,l=this.matrix,h=this.colorsOnly;for(o=0;o<c;o+=4)e=a[o],i=a[o+1],n=a[o+2],h?(a[o]=e*l[0]+i*l[1]+n*l[2]+255*l[4],a[o+1]=e*l[5]+i*l[6]+n*l[7]+255*l[9],a[o+2]=e*l[10]+i*l[11]+n*l[12]+255*l[14]):(r=a[o+3],a[o]=e*l[0]+i*l[1]+n*l[2]+r*l[3]+255*l[4],a[o+1]=e*l[5]+i*l[6]+n*l[7]+r*l[8]+255*l[9],a[o+2]=e*l[10]+i*l[11]+n*l[12]+r*l[13]+255*l[14],a[o+3]=e*l[15]+i*l[16]+n*l[17]+r*l[18]+255*l[19])},getUniformLocations:function(t,e){return{uColorMatrix:t.getUniformLocation(e,"uColorMatrix"),uConstants:t.getUniformLocation(e,"uConstants")}},sendUniformData:function(t,e){var i=this.matrix,n=[i[0],i[1],i[2],i[3],i[5],i[6],i[7],i[8],i[10],i[11],i[12],i[13],i[15],i[16],i[17],i[18]],r=[i[4],i[9],i[14],i[19]];t.uniformMatrix4fv(e.uColorMatrix,!1,n),t.uniform4fv(e.uConstants,r)}}),e.Image.filters.ColorMatrix.fromObject=e.Image.filters.BaseFilter.fromObject}(e),function(t){"use strict";var e=t.fabric||(t.fabric={}),i=e.Image.filters,n=e.util.createClass;i.Brightness=n(i.BaseFilter,{type:"Brightness",fragmentSource:"precision highp float;\nuniform sampler2D uTexture;\nuniform float uBrightness;\nvarying vec2 vTexCoord;\nvoid main() {\nvec4 color = texture2D(uTexture, vTexCoord);\ncolor.rgb += uBrightness;\ngl_FragColor = color;\n}",brightness:0,mainParameter:"brightness",applyTo2d:function(t){if(0!==this.brightness){var e,i=t.imageData,n=i.data,r=n.length,o=Math.round(255*this.brightness);for(e=0;e<r;e+=4)n[e]=n[e]+o,n[e+1]=n[e+1]+o,n[e+2]=n[e+2]+o}},getUniformLocations:function(t,e){return{uBrightness:t.getUniformLocation(e,"uBrightness")}},sendUniformData:function(t,e){t.uniform1f(e.uBrightness,this.brightness)}}),e.Image.filters.Brightness.fromObject=e.Image.filters.BaseFilter.fromObject}(e),function(t){"use strict";var e=t.fabric||(t.fabric={}),i=e.util.object.extend,n=e.Image.filters,r=e.util.createClass;n.Convolute=r(n.BaseFilter,{type:"Convolute",opaque:!1,matrix:[0,0,0,0,1,0,0,0,0],fragmentSource:{Convolute_3_1:"precision highp float;\nuniform sampler2D uTexture;\nuniform float uMatrix[9];\nuniform float uStepW;\nuniform float uStepH;\nvarying vec2 vTexCoord;\nvoid main() {\nvec4 color = vec4(0, 0, 0, 0);\nfor (float h = 0.0; h < 3.0; h+=1.0) {\nfor (float w = 0.0; w < 3.0; w+=1.0) {\nvec2 matrixPos = vec2(uStepW * (w - 1), uStepH * (h - 1));\ncolor += texture2D(uTexture, vTexCoord + matrixPos) * uMatrix[int(h * 3.0 + w)];\n}\n}\ngl_FragColor = color;\n}",Convolute_3_0:"precision highp float;\nuniform sampler2D uTexture;\nuniform float uMatrix[9];\nuniform float uStepW;\nuniform float uStepH;\nvarying vec2 vTexCoord;\nvoid main() {\nvec4 color = vec4(0, 0, 0, 1);\nfor (float h = 0.0; h < 3.0; h+=1.0) {\nfor (float w = 0.0; w < 3.0; w+=1.0) {\nvec2 matrixPos = vec2(uStepW * (w - 1.0), uStepH * (h - 1.0));\ncolor.rgb += texture2D(uTexture, vTexCoord + matrixPos).rgb * uMatrix[int(h * 3.0 + w)];\n}\n}\nfloat alpha = texture2D(uTexture, vTexCoord).a;\ngl_FragColor = color;\ngl_FragColor.a = alpha;\n}",Convolute_5_1:"precision highp float;\nuniform sampler2D uTexture;\nuniform float uMatrix[25];\nuniform float uStepW;\nuniform float uStepH;\nvarying vec2 vTexCoord;\nvoid main() {\nvec4 color = vec4(0, 0, 0, 0);\nfor (float h = 0.0; h < 5.0; h+=1.0) {\nfor (float w = 0.0; w < 5.0; w+=1.0) {\nvec2 matrixPos = vec2(uStepW * (w - 2.0), uStepH * (h - 2.0));\ncolor += texture2D(uTexture, vTexCoord + matrixPos) * uMatrix[int(h * 5.0 + w)];\n}\n}\ngl_FragColor = color;\n}",Convolute_5_0:"precision highp float;\nuniform sampler2D uTexture;\nuniform float uMatrix[25];\nuniform float uStepW;\nuniform float uStepH;\nvarying vec2 vTexCoord;\nvoid main() {\nvec4 color = vec4(0, 0, 0, 1);\nfor (float h = 0.0; h < 5.0; h+=1.0) {\nfor (float w = 0.0; w < 5.0; w+=1.0) {\nvec2 matrixPos = vec2(uStepW * (w - 2.0), uStepH * (h - 2.0));\ncolor.rgb += texture2D(uTexture, vTexCoord + matrixPos).rgb * uMatrix[int(h * 5.0 + w)];\n}\n}\nfloat alpha = texture2D(uTexture, vTexCoord).a;\ngl_FragColor = color;\ngl_FragColor.a = alpha;\n}",Convolute_7_1:"precision highp float;\nuniform sampler2D uTexture;\nuniform float uMatrix[49];\nuniform float uStepW;\nuniform float uStepH;\nvarying vec2 vTexCoord;\nvoid main() {\nvec4 color = vec4(0, 0, 0, 0);\nfor (float h = 0.0; h < 7.0; h+=1.0) {\nfor (float w = 0.0; w < 7.0; w+=1.0) {\nvec2 matrixPos = vec2(uStepW * (w - 3.0), uStepH * (h - 3.0));\ncolor += texture2D(uTexture, vTexCoord + matrixPos) * uMatrix[int(h * 7.0 + w)];\n}\n}\ngl_FragColor = color;\n}",Convolute_7_0:"precision highp float;\nuniform sampler2D uTexture;\nuniform float uMatrix[49];\nuniform float uStepW;\nuniform float uStepH;\nvarying vec2 vTexCoord;\nvoid main() {\nvec4 color = vec4(0, 0, 0, 1);\nfor (float h = 0.0; h < 7.0; h+=1.0) {\nfor (float w = 0.0; w < 7.0; w+=1.0) {\nvec2 matrixPos = vec2(uStepW * (w - 3.0), uStepH * (h - 3.0));\ncolor.rgb += texture2D(uTexture, vTexCoord + matrixPos).rgb * uMatrix[int(h * 7.0 + w)];\n}\n}\nfloat alpha = texture2D(uTexture, vTexCoord).a;\ngl_FragColor = color;\ngl_FragColor.a = alpha;\n}",Convolute_9_1:"precision highp float;\nuniform sampler2D uTexture;\nuniform float uMatrix[81];\nuniform float uStepW;\nuniform float uStepH;\nvarying vec2 vTexCoord;\nvoid main() {\nvec4 color = vec4(0, 0, 0, 0);\nfor (float h = 0.0; h < 9.0; h+=1.0) {\nfor (float w = 0.0; w < 9.0; w+=1.0) {\nvec2 matrixPos = vec2(uStepW * (w - 4.0), uStepH * (h - 4.0));\ncolor += texture2D(uTexture, vTexCoord + matrixPos) * uMatrix[int(h * 9.0 + w)];\n}\n}\ngl_FragColor = color;\n}",Convolute_9_0:"precision highp float;\nuniform sampler2D uTexture;\nuniform float uMatrix[81];\nuniform float uStepW;\nuniform float uStepH;\nvarying vec2 vTexCoord;\nvoid main() {\nvec4 color = vec4(0, 0, 0, 1);\nfor (float h = 0.0; h < 9.0; h+=1.0) {\nfor (float w = 0.0; w < 9.0; w+=1.0) {\nvec2 matrixPos = vec2(uStepW * (w - 4.0), uStepH * (h - 4.0));\ncolor.rgb += texture2D(uTexture, vTexCoord + matrixPos).rgb * uMatrix[int(h * 9.0 + w)];\n}\n}\nfloat alpha = texture2D(uTexture, vTexCoord).a;\ngl_FragColor = color;\ngl_FragColor.a = alpha;\n}"},retrieveShader:function(t){var e=Math.sqrt(this.matrix.length),i=this.type+"_"+e+"_"+(this.opaque?1:0),n=this.fragmentSource[i];return t.programCache.hasOwnProperty(i)||(t.programCache[i]=this.createProgram(t.context,n)),t.programCache[i]},applyTo2d:function(t){var e,i,n,r,o,s,a,c,l,h,u,f,d,p=t.imageData,g=p.data,v=this.matrix,m=Math.round(Math.sqrt(v.length)),y=Math.floor(m/2),b=p.width,w=p.height,x=t.ctx.createImageData(b,w),_=x.data,S=this.opaque?1:0;for(u=0;u<w;u++)for(h=0;h<b;h++){for(o=4*(u*b+h),e=0,i=0,n=0,r=0,d=0;d<m;d++)for(f=0;f<m;f++)a=u+d-y,s=h+f-y,a<0||a>=w||s<0||s>=b||(c=4*(a*b+s),l=v[d*m+f],e+=g[c]*l,i+=g[c+1]*l,n+=g[c+2]*l,S||(r+=g[c+3]*l));_[o]=e,_[o+1]=i,_[o+2]=n,_[o+3]=S?g[o+3]:r}t.imageData=x},getUniformLocations:function(t,e){return{uMatrix:t.getUniformLocation(e,"uMatrix"),uOpaque:t.getUniformLocation(e,"uOpaque"),uHalfSize:t.getUniformLocation(e,"uHalfSize"),uSize:t.getUniformLocation(e,"uSize")}},sendUniformData:function(t,e){t.uniform1fv(e.uMatrix,this.matrix)},toObject:function(){return i(this.callSuper("toObject"),{opaque:this.opaque,matrix:this.matrix})}}),e.Image.filters.Convolute.fromObject=e.Image.filters.BaseFilter.fromObject}(e),function(t){"use strict";var e=t.fabric||(t.fabric={}),i=e.Image.filters,n=e.util.createClass;i.Grayscale=n(i.BaseFilter,{type:"Grayscale",fragmentSource:{average:"precision highp float;\nuniform sampler2D uTexture;\nvarying vec2 vTexCoord;\nvoid main() {\nvec4 color = texture2D(uTexture, vTexCoord);\nfloat average = (color.r + color.b + color.g) / 3.0;\ngl_FragColor = vec4(average, average, average, color.a);\n}",lightness:"precision highp float;\nuniform sampler2D uTexture;\nuniform int uMode;\nvarying vec2 vTexCoord;\nvoid main() {\nvec4 col = texture2D(uTexture, vTexCoord);\nfloat average = (max(max(col.r, col.g),col.b) + min(min(col.r, col.g),col.b)) / 2.0;\ngl_FragColor = vec4(average, average, average, col.a);\n}",luminosity:"precision highp float;\nuniform sampler2D uTexture;\nuniform int uMode;\nvarying vec2 vTexCoord;\nvoid main() {\nvec4 col = texture2D(uTexture, vTexCoord);\nfloat average = 0.21 * col.r + 0.72 * col.g + 0.07 * col.b;\ngl_FragColor = vec4(average, average, average, col.a);\n}"},mode:"average",mainParameter:"mode",applyTo2d:function(t){var e,i,n=t.imageData,r=n.data,o=r.length,s=this.mode;for(e=0;e<o;e+=4)"average"===s?i=(r[e]+r[e+1]+r[e+2])/3:"lightness"===s?i=(Math.min(r[e],r[e+1],r[e+2])+Math.max(r[e],r[e+1],r[e+2]))/2:"luminosity"===s&&(i=.21*r[e]+.72*r[e+1]+.07*r[e+2]),r[e]=i,r[e+1]=i,r[e+2]=i},retrieveShader:function(t){var e=this.type+"_"+this.mode;if(!t.programCache.hasOwnProperty(e)){var i=this.fragmentSource[this.mode];t.programCache[e]=this.createProgram(t.context,i)}return t.programCache[e]},getUniformLocations:function(t,e){return{uMode:t.getUniformLocation(e,"uMode")}},sendUniformData:function(t,e){var i=1;t.uniform1i(e.uMode,i)},isNeutralState:function(){return!1}}),e.Image.filters.Grayscale.fromObject=e.Image.filters.BaseFilter.fromObject}(e),function(t){"use strict";var e=t.fabric||(t.fabric={}),i=e.Image.filters,n=e.util.createClass;i.Invert=n(i.BaseFilter,{type:"Invert",fragmentSource:"precision highp float;\nuniform sampler2D uTexture;\nuniform int uInvert;\nvarying vec2 vTexCoord;\nvoid main() {\nvec4 color = texture2D(uTexture, vTexCoord);\nif (uInvert == 1) {\ngl_FragColor = vec4(1.0 - color.r,1.0 -color.g,1.0 -color.b,color.a);\n} else {\ngl_FragColor = color;\n}\n}",invert:!0,mainParameter:"invert",applyTo2d:function(t){var e,i=t.imageData,n=i.data,r=n.length;for(e=0;e<r;e+=4)n[e]=255-n[e],n[e+1]=255-n[e+1],n[e+2]=255-n[e+2]},isNeutralState:function(){return!this.invert},getUniformLocations:function(t,e){return{uInvert:t.getUniformLocation(e,"uInvert")}},sendUniformData:function(t,e){t.uniform1i(e.uInvert,this.invert)}}),e.Image.filters.Invert.fromObject=e.Image.filters.BaseFilter.fromObject}(e),function(t){"use strict";var e=t.fabric||(t.fabric={}),i=e.util.object.extend,n=e.Image.filters,r=e.util.createClass;n.Noise=r(n.BaseFilter,{type:"Noise",fragmentSource:"precision highp float;\nuniform sampler2D uTexture;\nuniform float uStepH;\nuniform float uNoise;\nuniform float uSeed;\nvarying vec2 vTexCoord;\nfloat rand(vec2 co, float seed, float vScale) {\nreturn fract(sin(dot(co.xy * vScale ,vec2(12.9898 , 78.233))) * 43758.5453 * (seed + 0.01) / 2.0);\n}\nvoid main() {\nvec4 color = texture2D(uTexture, vTexCoord);\ncolor.rgb += (0.5 - rand(vTexCoord, uSeed, 0.1 / uStepH)) * uNoise;\ngl_FragColor = color;\n}",mainParameter:"noise",noise:0,applyTo2d:function(t){if(0!==this.noise){var e,i,n=t.imageData,r=n.data,o=r.length,s=this.noise;for(e=0,o=r.length;e<o;e+=4)i=(.5-Math.random())*s,r[e]+=i,r[e+1]+=i,r[e+2]+=i}},getUniformLocations:function(t,e){return{uNoise:t.getUniformLocation(e,"uNoise"),uSeed:t.getUniformLocation(e,"uSeed")}},sendUniformData:function(t,e){t.uniform1f(e.uNoise,this.noise/255),t.uniform1f(e.uSeed,Math.random())},toObject:function(){return i(this.callSuper("toObject"),{noise:this.noise})}}),e.Image.filters.Noise.fromObject=e.Image.filters.BaseFilter.fromObject}(e),function(t){"use strict";var e=t.fabric||(t.fabric={}),i=e.Image.filters,n=e.util.createClass;i.Pixelate=n(i.BaseFilter,{type:"Pixelate",blocksize:4,mainParameter:"blocksize",fragmentSource:"precision highp float;\nuniform sampler2D uTexture;\nuniform float uBlocksize;\nuniform float uStepW;\nuniform float uStepH;\nvarying vec2 vTexCoord;\nvoid main() {\nfloat blockW = uBlocksize * uStepW;\nfloat blockH = uBlocksize * uStepW;\nint posX = int(vTexCoord.x / blockW);\nint posY = int(vTexCoord.y / blockH);\nfloat fposX = float(posX);\nfloat fposY = float(posY);\nvec2 squareCoords = vec2(fposX * blockW, fposY * blockH);\nvec4 color = texture2D(uTexture, squareCoords);\ngl_FragColor = color;\n}",applyTo2d:function(t){var e,i,n,r,o,s,a,c,l,h,u,f=t.imageData,d=f.data,p=f.height,g=f.width;for(i=0;i<p;i+=this.blocksize)for(n=0;n<g;n+=this.blocksize)for(e=4*i*g+4*n,r=d[e],o=d[e+1],s=d[e+2],a=d[e+3],h=Math.min(i+this.blocksize,p),u=Math.min(n+this.blocksize,g),c=i;c<h;c++)for(l=n;l<u;l++)e=4*c*g+4*l,d[e]=r,d[e+1]=o,d[e+2]=s,d[e+3]=a},isNeutralState:function(){return 1===this.blocksize},getUniformLocations:function(t,e){return{uBlocksize:t.getUniformLocation(e,"uBlocksize"),uStepW:t.getUniformLocation(e,"uStepW"),uStepH:t.getUniformLocation(e,"uStepH")}},sendUniformData:function(t,e){t.uniform1f(e.uBlocksize,this.blocksize)}}),e.Image.filters.Pixelate.fromObject=e.Image.filters.BaseFilter.fromObject}(e),function(t){"use strict";var e=t.fabric||(t.fabric={}),i=e.util.object.extend,n=e.Image.filters,r=e.util.createClass;n.RemoveColor=r(n.BaseFilter,{type:"RemoveColor",color:"#FFFFFF",fragmentSource:"precision highp float;\nuniform sampler2D uTexture;\nuniform vec4 uLow;\nuniform vec4 uHigh;\nvarying vec2 vTexCoord;\nvoid main() {\ngl_FragColor = texture2D(uTexture, vTexCoord);\nif(all(greaterThan(gl_FragColor.rgb,uLow.rgb)) && all(greaterThan(uHigh.rgb,gl_FragColor.rgb))) {\ngl_FragColor.a = 0.0;\n}\n}",distance:.02,useAlpha:!1,applyTo2d:function(t){var i,n,r,o,s=t.imageData,a=s.data,c=255*this.distance,l=new e.Color(this.color).getSource(),h=[l[0]-c,l[1]-c,l[2]-c],u=[l[0]+c,l[1]+c,l[2]+c];for(i=0;i<a.length;i+=4)n=a[i],r=a[i+1],o=a[i+2],n>h[0]&&r>h[1]&&o>h[2]&&n<u[0]&&r<u[1]&&o<u[2]&&(a[i+3]=0)},getUniformLocations:function(t,e){return{uLow:t.getUniformLocation(e,"uLow"),uHigh:t.getUniformLocation(e,"uHigh")}},sendUniformData:function(t,i){var n=new e.Color(this.color).getSource(),r=parseFloat(this.distance),o=[0+n[0]/255-r,0+n[1]/255-r,0+n[2]/255-r,1],s=[n[0]/255+r,n[1]/255+r,n[2]/255+r,1];t.uniform4fv(i.uLow,o),t.uniform4fv(i.uHigh,s)},toObject:function(){return i(this.callSuper("toObject"),{color:this.color,distance:this.distance})}}),e.Image.filters.RemoveColor.fromObject=e.Image.filters.BaseFilter.fromObject}(e),function(t){"use strict";var e=t.fabric||(t.fabric={}),i=e.Image.filters,n=e.util.createClass,r={Brownie:[.5997,.34553,-.27082,0,.186,-.0377,.86095,.15059,0,-.1449,.24113,-.07441,.44972,0,-.02965,0,0,0,1,0],Vintage:[.62793,.32021,-.03965,0,.03784,.02578,.64411,.03259,0,.02926,.0466,-.08512,.52416,0,.02023,0,0,0,1,0],Kodachrome:[1.12855,-.39673,-.03992,0,.24991,-.16404,1.08352,-.05498,0,.09698,-.16786,-.56034,1.60148,0,.13972,0,0,0,1,0],Technicolor:[1.91252,-.85453,-.09155,0,.04624,-.30878,1.76589,-.10601,0,-.27589,-.2311,-.75018,1.84759,0,.12137,0,0,0,1,0],Polaroid:[1.438,-.062,-.062,0,0,-.122,1.378,-.122,0,0,-.016,-.016,1.483,0,0,0,0,0,1,0],Sepia:[.393,.769,.189,0,0,.349,.686,.168,0,0,.272,.534,.131,0,0,0,0,0,1,0],BlackWhite:[1.5,1.5,1.5,0,-1,1.5,1.5,1.5,0,-1,1.5,1.5,1.5,0,-1,0,0,0,1,0]};for(var o in r)i[o]=n(i.ColorMatrix,{type:o,matrix:r[o],mainParameter:!1,colorsOnly:!0}),e.Image.filters[o].fromObject=e.Image.filters.BaseFilter.fromObject}(e),function(t){"use strict";var e=t.fabric,i=e.Image.filters,n=e.util.createClass;i.BlendColor=n(i.BaseFilter,{type:"BlendColor",color:"#F95C63",mode:"multiply",alpha:1,fragmentSource:{multiply:"gl_FragColor.rgb *= uColor.rgb;\n",screen:"gl_FragColor.rgb = 1.0 - (1.0 - gl_FragColor.rgb) * (1.0 - uColor.rgb);\n",add:"gl_FragColor.rgb += uColor.rgb;\n",diff:"gl_FragColor.rgb = abs(gl_FragColor.rgb - uColor.rgb);\n",subtract:"gl_FragColor.rgb -= uColor.rgb;\n",lighten:"gl_FragColor.rgb = max(gl_FragColor.rgb, uColor.rgb);\n",darken:"gl_FragColor.rgb = min(gl_FragColor.rgb, uColor.rgb);\n",exclusion:"gl_FragColor.rgb += uColor.rgb - 2.0 * (uColor.rgb * gl_FragColor.rgb);\n",overlay:"if (uColor.r < 0.5) {\ngl_FragColor.r *= 2.0 * uColor.r;\n} else {\ngl_FragColor.r = 1.0 - 2.0 * (1.0 - gl_FragColor.r) * (1.0 - uColor.r);\n}\nif (uColor.g < 0.5) {\ngl_FragColor.g *= 2.0 * uColor.g;\n} else {\ngl_FragColor.g = 1.0 - 2.0 * (1.0 - gl_FragColor.g) * (1.0 - uColor.g);\n}\nif (uColor.b < 0.5) {\ngl_FragColor.b *= 2.0 * uColor.b;\n} else {\ngl_FragColor.b = 1.0 - 2.0 * (1.0 - gl_FragColor.b) * (1.0 - uColor.b);\n}\n",tint:"gl_FragColor.rgb *= (1.0 - uColor.a);\ngl_FragColor.rgb += uColor.rgb;\n"},buildSource:function(t){return"precision highp float;\nuniform sampler2D uTexture;\nuniform vec4 uColor;\nvarying vec2 vTexCoord;\nvoid main() {\nvec4 color = texture2D(uTexture, vTexCoord);\ngl_FragColor = color;\nif (color.a > 0.0) {\n"+this.fragmentSource[t]+"}\n}"},retrieveShader:function(t){var e,i=this.type+"_"+this.mode;return t.programCache.hasOwnProperty(i)||(e=this.buildSource(this.mode),t.programCache[i]=this.createProgram(t.context,e)),t.programCache[i]},applyTo2d:function(t){var i,n,r,o,s,a,c,l=t.imageData,h=l.data,u=h.length,f=1-this.alpha;c=new e.Color(this.color).getSource(),i=c[0]*this.alpha,n=c[1]*this.alpha,r=c[2]*this.alpha;for(var d=0;d<u;d+=4)switch(o=h[d],s=h[d+1],a=h[d+2],this.mode){case"multiply":h[d]=o*i/255,h[d+1]=s*n/255,h[d+2]=a*r/255;break;case"screen":h[d]=255-(255-o)*(255-i)/255,h[d+1]=255-(255-s)*(255-n)/255,h[d+2]=255-(255-a)*(255-r)/255;break;case"add":h[d]=o+i,h[d+1]=s+n,h[d+2]=a+r;break;case"diff":case"difference":h[d]=Math.abs(o-i),h[d+1]=Math.abs(s-n),h[d+2]=Math.abs(a-r);break;case"subtract":h[d]=o-i,h[d+1]=s-n,h[d+2]=a-r;break;case"darken":h[d]=Math.min(o,i),h[d+1]=Math.min(s,n),h[d+2]=Math.min(a,r);break;case"lighten":h[d]=Math.max(o,i),h[d+1]=Math.max(s,n),h[d+2]=Math.max(a,r);break;case"overlay":h[d]=i<128?2*o*i/255:255-2*(255-o)*(255-i)/255,h[d+1]=n<128?2*s*n/255:255-2*(255-s)*(255-n)/255,h[d+2]=r<128?2*a*r/255:255-2*(255-a)*(255-r)/255;break;case"exclusion":h[d]=i+o-2*i*o/255,h[d+1]=n+s-2*n*s/255,h[d+2]=r+a-2*r*a/255;break;case"tint":h[d]=i+o*f,h[d+1]=n+s*f,h[d+2]=r+a*f}},getUniformLocations:function(t,e){return{uColor:t.getUniformLocation(e,"uColor")}},sendUniformData:function(t,i){var n=new e.Color(this.color).getSource();n[0]=this.alpha*n[0]/255,n[1]=this.alpha*n[1]/255,n[2]=this.alpha*n[2]/255,n[3]=this.alpha,t.uniform4fv(i.uColor,n)},toObject:function(){return{type:this.type,color:this.color,mode:this.mode,alpha:this.alpha}}}),e.Image.filters.BlendColor.fromObject=e.Image.filters.BaseFilter.fromObject}(e),function(t){"use strict";var e=t.fabric,i=e.Image.filters,n=e.util.createClass;i.BlendImage=n(i.BaseFilter,{type:"BlendImage",image:null,mode:"multiply",alpha:1,vertexSource:"attribute vec2 aPosition;\nvarying vec2 vTexCoord;\nvarying vec2 vTexCoord2;\nuniform mat3 uTransformMatrix;\nvoid main() {\nvTexCoord = aPosition;\nvTexCoord2 = (uTransformMatrix * vec3(aPosition, 1.0)).xy;\ngl_Position = vec4(aPosition * 2.0 - 1.0, 0.0, 1.0);\n}",fragmentSource:{multiply:"precision highp float;\nuniform sampler2D uTexture;\nuniform sampler2D uImage;\nuniform vec4 uColor;\nvarying vec2 vTexCoord;\nvarying vec2 vTexCoord2;\nvoid main() {\nvec4 color = texture2D(uTexture, vTexCoord);\nvec4 color2 = texture2D(uImage, vTexCoord2);\ncolor.rgba *= color2.rgba;\ngl_FragColor = color;\n}",mask:"precision highp float;\nuniform sampler2D uTexture;\nuniform sampler2D uImage;\nuniform vec4 uColor;\nvarying vec2 vTexCoord;\nvarying vec2 vTexCoord2;\nvoid main() {\nvec4 color = texture2D(uTexture, vTexCoord);\nvec4 color2 = texture2D(uImage, vTexCoord2);\ncolor.a = color2.a;\ngl_FragColor = color;\n}"},retrieveShader:function(t){var e=this.type+"_"+this.mode,i=this.fragmentSource[this.mode];return t.programCache.hasOwnProperty(e)||(t.programCache[e]=this.createProgram(t.context,i)),t.programCache[e]},applyToWebGL:function(t){var e=t.context,i=this.createTexture(t.filterBackend,this.image);this.bindAdditionalTexture(e,i,e.TEXTURE1),this.callSuper("applyToWebGL",t),this.unbindAdditionalTexture(e,e.TEXTURE1)},createTexture:function(t,e){return t.getCachedTexture(e.cacheKey,e._element)},calculateMatrix:function(){var t=this.image,e=t._element.width,i=t._element.height;return[1/t.scaleX,0,0,0,1/t.scaleY,0,-t.left/e,-t.top/i,1]},applyTo2d:function(t){var i,n,r,o,s,a,c,l,h,u,f,d=t.imageData,p=t.filterBackend.resources,g=d.data,v=g.length,m=d.width,y=d.height,b=this.image;p.blendImage||(p.blendImage=e.util.createCanvasElement()),h=p.blendImage,u=h.getContext("2d"),h.width!==m||h.height!==y?(h.width=m,h.height=y):u.clearRect(0,0,m,y),u.setTransform(b.scaleX,0,0,b.scaleY,b.left,b.top),u.drawImage(b._element,0,0,m,y),f=u.getImageData(0,0,m,y).data;for(var w=0;w<v;w+=4)switch(s=g[w],a=g[w+1],c=g[w+2],l=g[w+3],i=f[w],n=f[w+1],r=f[w+2],o=f[w+3],this.mode){case"multiply":g[w]=s*i/255,g[w+1]=a*n/255,g[w+2]=c*r/255,g[w+3]=l*o/255;break;case"mask":g[w+3]=o;break}},getUniformLocations:function(t,e){return{uTransformMatrix:t.getUniformLocation(e,"uTransformMatrix"),uImage:t.getUniformLocation(e,"uImage")}},sendUniformData:function(t,e){var i=this.calculateMatrix();t.uniform1i(e.uImage,1),t.uniformMatrix3fv(e.uTransformMatrix,!1,i)},toObject:function(){return{type:this.type,image:this.image&&this.image.toObject(),mode:this.mode,alpha:this.alpha}}}),e.Image.filters.BlendImage.fromObject=function(t,i){e.Image.fromObject(t.image,(function(n){var r=e.util.object.clone(t);r.image=n,i(new e.Image.filters.BlendImage(r))}))}}(e),function(t){"use strict";var e=t.fabric||(t.fabric={}),i=Math.pow,n=Math.floor,r=Math.sqrt,o=Math.abs,s=Math.round,a=Math.sin,c=Math.ceil,l=e.Image.filters,h=e.util.createClass;l.Resize=h(l.BaseFilter,{type:"Resize",resizeType:"hermite",scaleX:1,scaleY:1,lanczosLobes:3,getUniformLocations:function(t,e){return{uDelta:t.getUniformLocation(e,"uDelta"),uTaps:t.getUniformLocation(e,"uTaps")}},sendUniformData:function(t,e){t.uniform2fv(e.uDelta,this.horizontal?[1/this.width,0]:[0,1/this.height]),t.uniform1fv(e.uTaps,this.taps)},retrieveShader:function(t){var e=this.getFilterWindow(),i=this.type+"_"+e;if(!t.programCache.hasOwnProperty(i)){var n=this.generateShader(e);t.programCache[i]=this.createProgram(t.context,n)}return t.programCache[i]},getFilterWindow:function(){var t=this.tempScale;return Math.ceil(this.lanczosLobes/t)},getTaps:function(){for(var t=this.lanczosCreate(this.lanczosLobes),e=this.tempScale,i=this.getFilterWindow(),n=new Array(i),r=1;r<=i;r++)n[r-1]=t(r*e);return n},generateShader:function(t){for(var e=new Array(t),i=this.fragmentSourceTOP,n=1;n<=t;n++)e[n-1]=n+".0 * uDelta";return i+="uniform float uTaps["+t+"];\n",i+="void main() {\n",i+="  vec4 color = texture2D(uTexture, vTexCoord);\n",i+="  float sum = 1.0;\n",e.forEach((function(t,e){i+="  color += texture2D(uTexture, vTexCoord + "+t+") * uTaps["+e+"];\n",i+="  color += texture2D(uTexture, vTexCoord - "+t+") * uTaps["+e+"];\n",i+="  sum += 2.0 * uTaps["+e+"];\n"})),i+="  gl_FragColor = color / sum;\n",i+="}",i},fragmentSourceTOP:"precision highp float;\nuniform sampler2D uTexture;\nuniform vec2 uDelta;\nvarying vec2 vTexCoord;\n",applyTo:function(t){t.webgl?(t.passes++,this.width=t.sourceWidth,this.horizontal=!0,this.dW=Math.round(this.width*this.scaleX),this.dH=t.sourceHeight,this.tempScale=this.dW/this.width,this.taps=this.getTaps(),t.destinationWidth=this.dW,this._setupFrameBuffer(t),this.applyToWebGL(t),this._swapTextures(t),t.sourceWidth=t.destinationWidth,this.height=t.sourceHeight,this.horizontal=!1,this.dH=Math.round(this.height*this.scaleY),this.tempScale=this.dH/this.height,this.taps=this.getTaps(),t.destinationHeight=this.dH,this._setupFrameBuffer(t),this.applyToWebGL(t),this._swapTextures(t),t.sourceHeight=t.destinationHeight):this.applyTo2d(t)},isNeutralState:function(){return 1===this.scaleX&&1===this.scaleY},lanczosCreate:function(t){return function(e){if(e>=t||e<=-t)return 0;if(e<1.1920929e-7&&e>-1.1920929e-7)return 1;e*=Math.PI;var i=e/t;return a(e)/e*a(i)/i}},applyTo2d:function(t){var e=t.imageData,i=this.scaleX,n=this.scaleY;this.rcpScaleX=1/i,this.rcpScaleY=1/n;var r,o=e.width,a=e.height,c=s(o*i),l=s(a*n);"sliceHack"===this.resizeType?r=this.sliceByTwo(t,o,a,c,l):"hermite"===this.resizeType?r=this.hermiteFastResize(t,o,a,c,l):"bilinear"===this.resizeType?r=this.bilinearFiltering(t,o,a,c,l):"lanczos"===this.resizeType&&(r=this.lanczosResize(t,o,a,c,l)),t.imageData=r},sliceByTwo:function(t,i,r,o,s){var a,c,l=t.imageData,h=.5,u=!1,f=!1,d=i*h,p=r*h,g=e.filterBackend.resources,v=0,m=0,y=i,b=0;g.sliceByTwo||(g.sliceByTwo=document.createElement("canvas")),a=g.sliceByTwo,(a.width<1.5*i||a.height<r)&&(a.width=1.5*i,a.height=r),c=a.getContext("2d"),c.clearRect(0,0,1.5*i,r),c.putImageData(l,0,0),o=n(o),s=n(s);while(!u||!f)i=d,r=p,o<n(d*h)?d=n(d*h):(d=o,u=!0),s<n(p*h)?p=n(p*h):(p=s,f=!0),c.drawImage(a,v,m,i,r,y,b,d,p),v=y,m=b,b+=p;return c.getImageData(v,m,o,s)},lanczosResize:function(t,e,s,a,l){function h(t){var c,C,T,O,k,E,A,P,D,M,j;for(_.x=(t+.5)*g,S.x=n(_.x),c=0;c<l;c++){for(_.y=(c+.5)*v,S.y=n(_.y),k=0,E=0,A=0,P=0,D=0,C=S.x-b;C<=S.x+b;C++)if(!(C<0||C>=e)){M=n(1e3*o(C-_.x)),x[M]||(x[M]={});for(var R=S.y-w;R<=S.y+w;R++)R<0||R>=s||(j=n(1e3*o(R-_.y)),x[M][j]||(x[M][j]=p(r(i(M*m,2)+i(j*y,2))/1e3)),T=x[M][j],T>0&&(O=4*(R*e+C),k+=T,E+=T*u[O],A+=T*u[O+1],P+=T*u[O+2],D+=T*u[O+3]))}O=4*(c*a+t),d[O]=E/k,d[O+1]=A/k,d[O+2]=P/k,d[O+3]=D/k}return++t<a?h(t):f}var u=t.imageData.data,f=t.ctx.createImageData(a,l),d=f.data,p=this.lanczosCreate(this.lanczosLobes),g=this.rcpScaleX,v=this.rcpScaleY,m=2/this.rcpScaleX,y=2/this.rcpScaleY,b=c(g*this.lanczosLobes/2),w=c(v*this.lanczosLobes/2),x={},_={},S={};return h(0)},bilinearFiltering:function(t,e,i,r,o){var s,a,c,l,h,u,f,d,p,g,v,m,y,b=0,w=this.rcpScaleX,x=this.rcpScaleY,_=4*(e-1),S=t.imageData,C=S.data,T=t.ctx.createImageData(r,o),O=T.data;for(f=0;f<o;f++)for(d=0;d<r;d++)for(h=n(w*d),u=n(x*f),p=w*d-h,g=x*f-u,y=4*(u*e+h),v=0;v<4;v++)s=C[y+v],a=C[y+4+v],c=C[y+_+v],l=C[y+_+4+v],m=s*(1-p)*(1-g)+a*p*(1-g)+c*g*(1-p)+l*p*g,O[b++]=m;return T},hermiteFastResize:function(t,e,i,s,a){for(var l=this.rcpScaleX,h=this.rcpScaleY,u=c(l/2),f=c(h/2),d=t.imageData,p=d.data,g=t.ctx.createImageData(s,a),v=g.data,m=0;m<a;m++)for(var y=0;y<s;y++){for(var b=4*(y+m*s),w=0,x=0,_=0,S=0,C=0,T=0,O=0,k=(m+.5)*h,E=n(m*h);E<(m+1)*h;E++)for(var A=o(k-(E+.5))/f,P=(y+.5)*l,D=A*A,M=n(y*l);M<(y+1)*l;M++){var j=o(P-(M+.5))/u,R=r(D+j*j);R>1&&R<-1||(w=2*R*R*R-3*R*R+1,w>0&&(j=4*(M+E*e),O+=w*p[j+3],_+=w,p[j+3]<255&&(w=w*p[j+3]/250),S+=w*p[j],C+=w*p[j+1],T+=w*p[j+2],x+=w))}v[b]=S/x,v[b+1]=C/x,v[b+2]=T/x,v[b+3]=O/_}return g},toObject:function(){return{type:this.type,scaleX:this.scaleX,scaleY:this.scaleY,resizeType:this.resizeType,lanczosLobes:this.lanczosLobes}}}),e.Image.filters.Resize.fromObject=e.Image.filters.BaseFilter.fromObject}(e),function(t){"use strict";var e=t.fabric||(t.fabric={}),i=e.Image.filters,n=e.util.createClass;i.Contrast=n(i.BaseFilter,{type:"Contrast",fragmentSource:"precision highp float;\nuniform sampler2D uTexture;\nuniform float uContrast;\nvarying vec2 vTexCoord;\nvoid main() {\nvec4 color = texture2D(uTexture, vTexCoord);\nfloat contrastF = 1.015 * (uContrast + 1.0) / (1.0 * (1.015 - uContrast));\ncolor.rgb = contrastF * (color.rgb - 0.5) + 0.5;\ngl_FragColor = color;\n}",contrast:0,mainParameter:"contrast",applyTo2d:function(t){if(0!==this.contrast){var e,i=t.imageData,n=i.data,r=n.length,o=Math.floor(255*this.contrast),s=259*(o+255)/(255*(259-o));for(e=0;e<r;e+=4)n[e]=s*(n[e]-128)+128,n[e+1]=s*(n[e+1]-128)+128,n[e+2]=s*(n[e+2]-128)+128}},getUniformLocations:function(t,e){return{uContrast:t.getUniformLocation(e,"uContrast")}},sendUniformData:function(t,e){t.uniform1f(e.uContrast,this.contrast)}}),e.Image.filters.Contrast.fromObject=e.Image.filters.BaseFilter.fromObject}(e),function(t){"use strict";var e=t.fabric||(t.fabric={}),i=e.Image.filters,n=e.util.createClass;i.Saturation=n(i.BaseFilter,{type:"Saturation",fragmentSource:"precision highp float;\nuniform sampler2D uTexture;\nuniform float uSaturation;\nvarying vec2 vTexCoord;\nvoid main() {\nvec4 color = texture2D(uTexture, vTexCoord);\nfloat rgMax = max(color.r, color.g);\nfloat rgbMax = max(rgMax, color.b);\ncolor.r += rgbMax != color.r ? (rgbMax - color.r) * uSaturation : 0.00;\ncolor.g += rgbMax != color.g ? (rgbMax - color.g) * uSaturation : 0.00;\ncolor.b += rgbMax != color.b ? (rgbMax - color.b) * uSaturation : 0.00;\ngl_FragColor = color;\n}",saturation:0,mainParameter:"saturation",applyTo2d:function(t){if(0!==this.saturation){var e,i,n=t.imageData,r=n.data,o=r.length,s=-this.saturation;for(e=0;e<o;e+=4)i=Math.max(r[e],r[e+1],r[e+2]),r[e]+=i!==r[e]?(i-r[e])*s:0,r[e+1]+=i!==r[e+1]?(i-r[e+1])*s:0,r[e+2]+=i!==r[e+2]?(i-r[e+2])*s:0}},getUniformLocations:function(t,e){return{uSaturation:t.getUniformLocation(e,"uSaturation")}},sendUniformData:function(t,e){t.uniform1f(e.uSaturation,-this.saturation)}}),e.Image.filters.Saturation.fromObject=e.Image.filters.BaseFilter.fromObject}(e),function(t){"use strict";var e=t.fabric||(t.fabric={}),i=e.Image.filters,n=e.util.createClass;i.Blur=n(i.BaseFilter,{type:"Blur",fragmentSource:"precision highp float;\nuniform sampler2D uTexture;\nuniform vec2 uDelta;\nvarying vec2 vTexCoord;\nconst float nSamples = 15.0;\nvec3 v3offset = vec3(12.9898, 78.233, 151.7182);\nfloat random(vec3 scale) {\nreturn fract(sin(dot(gl_FragCoord.xyz, scale)) * 43758.5453);\n}\nvoid main() {\nvec4 color = vec4(0.0);\nfloat total = 0.0;\nfloat offset = random(v3offset);\nfor (float t = -nSamples; t <= nSamples; t++) {\nfloat percent = (t + offset - 0.5) / nSamples;\nfloat weight = 1.0 - abs(percent);\ncolor += texture2D(uTexture, vTexCoord + uDelta * percent) * weight;\ntotal += weight;\n}\ngl_FragColor = color / total;\n}",blur:0,mainParameter:"blur",applyTo:function(t){t.webgl?(this.aspectRatio=t.sourceWidth/t.sourceHeight,t.passes++,this._setupFrameBuffer(t),this.horizontal=!0,this.applyToWebGL(t),this._swapTextures(t),this._setupFrameBuffer(t),this.horizontal=!1,this.applyToWebGL(t),this._swapTextures(t)):this.applyTo2d(t)},applyTo2d:function(t){t.imageData=this.simpleBlur(t)},simpleBlur:function(t){var i,n,r=t.filterBackend.resources,o=t.imageData.width,s=t.imageData.height;r.blurLayer1||(r.blurLayer1=e.util.createCanvasElement(),r.blurLayer2=e.util.createCanvasElement()),i=r.blurLayer1,n=r.blurLayer2,i.width===o&&i.height===s||(n.width=i.width=o,n.height=i.height=s);var a,c,l,h,u=i.getContext("2d"),f=n.getContext("2d"),d=15,p=.06*this.blur*.5;for(u.putImageData(t.imageData,0,0),f.clearRect(0,0,o,s),h=-d;h<=d;h++)a=(Math.random()-.5)/4,c=h/d,l=p*c*o+a,f.globalAlpha=1-Math.abs(c),f.drawImage(i,l,a),u.drawImage(n,0,0),f.globalAlpha=1,f.clearRect(0,0,n.width,n.height);for(h=-d;h<=d;h++)a=(Math.random()-.5)/4,c=h/d,l=p*c*s+a,f.globalAlpha=1-Math.abs(c),f.drawImage(i,a,l),u.drawImage(n,0,0),f.globalAlpha=1,f.clearRect(0,0,n.width,n.height);t.ctx.drawImage(i,0,0);var g=t.ctx.getImageData(0,0,i.width,i.height);return u.globalAlpha=1,u.clearRect(0,0,i.width,i.height),g},getUniformLocations:function(t,e){return{delta:t.getUniformLocation(e,"uDelta")}},sendUniformData:function(t,e){var i=this.chooseRightDelta();t.uniform2fv(e.delta,i)},chooseRightDelta:function(){var t,e=1,i=[0,0];return this.horizontal?this.aspectRatio>1&&(e=1/this.aspectRatio):this.aspectRatio<1&&(e=this.aspectRatio),t=e*this.blur*.12,this.horizontal?i[0]=t:i[1]=t,i}}),i.Blur.fromObject=e.Image.filters.BaseFilter.fromObject}(e),function(t){"use strict";var e=t.fabric||(t.fabric={}),i=e.Image.filters,n=e.util.createClass;i.Gamma=n(i.BaseFilter,{type:"Gamma",fragmentSource:"precision highp float;\nuniform sampler2D uTexture;\nuniform vec3 uGamma;\nvarying vec2 vTexCoord;\nvoid main() {\nvec4 color = texture2D(uTexture, vTexCoord);\nvec3 correction = (1.0 / uGamma);\ncolor.r = pow(color.r, correction.r);\ncolor.g = pow(color.g, correction.g);\ncolor.b = pow(color.b, correction.b);\ngl_FragColor = color;\ngl_FragColor.rgb *= color.a;\n}",gamma:[1,1,1],mainParameter:"gamma",initialize:function(t){this.gamma=[1,1,1],i.BaseFilter.prototype.initialize.call(this,t)},applyTo2d:function(t){var e,i=t.imageData,n=i.data,r=this.gamma,o=n.length,s=1/r[0],a=1/r[1],c=1/r[2];for(this.rVals||(this.rVals=new Uint8Array(256),this.gVals=new Uint8Array(256),this.bVals=new Uint8Array(256)),e=0,o=256;e<o;e++)this.rVals[e]=255*Math.pow(e/255,s),this.gVals[e]=255*Math.pow(e/255,a),this.bVals[e]=255*Math.pow(e/255,c);for(e=0,o=n.length;e<o;e+=4)n[e]=this.rVals[n[e]],n[e+1]=this.gVals[n[e+1]],n[e+2]=this.bVals[n[e+2]]},getUniformLocations:function(t,e){return{uGamma:t.getUniformLocation(e,"uGamma")}},sendUniformData:function(t,e){t.uniform3fv(e.uGamma,this.gamma)}}),e.Image.filters.Gamma.fromObject=e.Image.filters.BaseFilter.fromObject}(e),function(t){"use strict";var e=t.fabric||(t.fabric={}),i=e.Image.filters,n=e.util.createClass;i.Composed=n(i.BaseFilter,{type:"Composed",subFilters:[],initialize:function(t){this.callSuper("initialize",t),this.subFilters=this.subFilters.slice(0)},applyTo:function(t){t.passes+=this.subFilters.length-1,this.subFilters.forEach((function(e){e.applyTo(t)}))},toObject:function(){return e.util.object.extend(this.callSuper("toObject"),{subFilters:this.subFilters.map((function(t){return t.toObject()}))})},isNeutralState:function(){return!this.subFilters.some((function(t){return!t.isNeutralState()}))}}),e.Image.filters.Composed.fromObject=function(t,i){var n=t.subFilters||[],r=n.map((function(t){return new e.Image.filters[t.type](t)})),o=new e.Image.filters.Composed({subFilters:r});return i&&i(o),o}}(e),function(t){"use strict";var e=t.fabric||(t.fabric={}),i=e.Image.filters,n=e.util.createClass;i.HueRotation=n(i.ColorMatrix,{type:"HueRotation",rotation:0,mainParameter:"rotation",calculateMatrix:function(){var t=this.rotation*Math.PI,i=e.util.cos(t),n=e.util.sin(t),r=1/3,o=Math.sqrt(r)*n,s=1-i;this.matrix=[1,0,0,0,0,0,1,0,0,0,0,0,1,0,0,0,0,0,1,0],this.matrix[0]=i+s/3,this.matrix[1]=r*s-o,this.matrix[2]=r*s+o,this.matrix[5]=r*s+o,this.matrix[6]=i+r*s,this.matrix[7]=r*s-o,this.matrix[10]=r*s-o,this.matrix[11]=r*s+o,this.matrix[12]=i+r*s},isNeutralState:function(t){return this.calculateMatrix(),i.BaseFilter.prototype.isNeutralState.call(this,t)},applyTo:function(t){this.calculateMatrix(),i.BaseFilter.prototype.applyTo.call(this,t)}}),e.Image.filters.HueRotation.fromObject=e.Image.filters.BaseFilter.fromObject}(e),function(t){"use strict";var e=t.fabric||(t.fabric={}),i=e.util.object.clone;if(e.Text)e.warn("fabric.Text is already defined");else{var n="fontFamily fontWeight fontSize text underline overline linethrough textAlign fontStyle lineHeight textBackgroundColor charSpacing styles path".split(" ");e.Text=e.util.createClass(e.Object,{_dimensionAffectingProps:["fontSize","fontWeight","fontFamily","fontStyle","lineHeight","text","charSpacing","textAlign","styles","path"],_reNewline:/\r?\n/,_reSpacesAndTabs:/[ \t\r]/g,_reSpaceAndTab:/[ \t\r]/,_reWords:/\S+/g,type:"text",fontSize:40,fontWeight:"normal",fontFamily:"Times New Roman",underline:!1,overline:!1,linethrough:!1,textAlign:"left",fontStyle:"normal",lineHeight:1.16,superscript:{size:.6,baseline:-.35},subscript:{size:.6,baseline:.11},textBackgroundColor:"",stateProperties:e.Object.prototype.stateProperties.concat(n),cacheProperties:e.Object.prototype.cacheProperties.concat(n),stroke:null,shadow:null,path:null,_fontSizeFraction:.222,offsets:{underline:.1,linethrough:-.315,overline:-.88},_fontSizeMult:1.13,charSpacing:0,styles:null,_measuringContext:null,deltaY:0,_styleProperties:["stroke","strokeWidth","fill","fontFamily","fontSize","fontWeight","fontStyle","underline","overline","linethrough","deltaY","textBackgroundColor"],__charBounds:[],CACHE_FONT_SIZE:400,MIN_TEXT_WIDTH:2,initialize:function(t,e){this.styles=e&&e.styles||{},this.text=t,this.__skipDimension=!0,this.callSuper("initialize",e),this.path&&this.setPathInfo(),this.__skipDimension=!1,this.initDimensions(),this.setCoords(),this.setupState({propertySet:"_dimensionAffectingProps"})},setPathInfo:function(){var t=this.path;t&&(t.segmentsInfo=e.util.getPathSegmentsInfo(t.path))},getMeasuringContext:function(){return e._measuringContext||(e._measuringContext=this.canvas&&this.canvas.contextCache||e.util.createCanvasElement().getContext("2d")),e._measuringContext},_splitText:function(){var t=this._splitTextIntoLines(this.text);return this.textLines=t.lines,this._textLines=t.graphemeLines,this._unwrappedTextLines=t._unwrappedLines,this._text=t.graphemeText,t},initDimensions:function(){this.__skipDimension||(this._splitText(),this._clearCache(),this.path?(this.width=this.path.width,this.height=this.path.height):(this.width=this.calcTextWidth()||this.cursorWidth||this.MIN_TEXT_WIDTH,this.height=this.calcTextHeight()),-1!==this.textAlign.indexOf("justify")&&this.enlargeSpaces(),this.saveState({propertySet:"_dimensionAffectingProps"}))},enlargeSpaces:function(){for(var t,e,i,n,r,o,s,a=0,c=this._textLines.length;a<c;a++)if(("justify"===this.textAlign||a!==c-1&&!this.isEndOfWrapping(a))&&(n=0,r=this._textLines[a],e=this.getLineWidth(a),e<this.width&&(s=this.textLines[a].match(this._reSpacesAndTabs)))){i=s.length,t=(this.width-e)/i;for(var l=0,h=r.length;l<=h;l++)o=this.__charBounds[a][l],this._reSpaceAndTab.test(r[l])?(o.width+=t,o.kernedWidth+=t,o.left+=n,n+=t):o.left+=n}},isEndOfWrapping:function(t){return t===this._textLines.length-1},missingNewlineOffset:function(){return 1},toString:function(){return"#<fabric.Text ("+this.complexity()+'): { "text": "'+this.text+'", "fontFamily": "'+this.fontFamily+'" }>'},_getCacheCanvasDimensions:function(){var t=this.callSuper("_getCacheCanvasDimensions"),e=this.fontSize;return t.width+=e*t.zoomX,t.height+=e*t.zoomY,t},_render:function(t){this._setTextStyles(t),this._renderTextLinesBackground(t),this._renderTextDecoration(t,"underline"),this._renderText(t),this._renderTextDecoration(t,"overline"),this._renderTextDecoration(t,"linethrough")},_renderText:function(t){"stroke"===this.paintFirst?(this._renderTextStroke(t),this._renderTextFill(t)):(this._renderTextFill(t),this._renderTextStroke(t))},_setTextStyles:function(t,e,i){t.textBaseline="alphabetic",t.font=this._getFontDeclaration(e,i)},calcTextWidth:function(){for(var t=this.getLineWidth(0),e=1,i=this._textLines.length;e<i;e++){var n=this.getLineWidth(e);n>t&&(t=n)}return t},_renderTextLine:function(t,e,i,n,r,o){this._renderChars(t,e,i,n,r,o)},_renderTextLinesBackground:function(t){if(this.textBackgroundColor||this.styleHas("textBackgroundColor")){for(var e,i,n,r,o,s,a=t.fillStyle,c=this._getLeftOffset(),l=this._getTopOffset(),h=0,u=0,f=this.path,d=0,p=this._textLines.length;d<p;d++)if(e=this.getHeightOfLine(d),this.textBackgroundColor||this.styleHas("textBackgroundColor",d)){n=this._textLines[d],i=this._getLineLeftOffset(d),u=0,h=0,r=this.getValueOfPropertyAt(d,0,"textBackgroundColor");for(var g=0,v=n.length;g<v;g++)o=this.__charBounds[d][g],s=this.getValueOfPropertyAt(d,g,"textBackgroundColor"),f?(t.save(),t.translate(o.renderLeft,o.renderTop),t.rotate(o.angle),t.fillStyle=s,s&&t.fillRect(-o.width/2,-e/this.lineHeight*(1-this._fontSizeFraction),o.width,e/this.lineHeight),t.restore()):s!==r?(t.fillStyle=r,r&&t.fillRect(c+i+h,l,u,e/this.lineHeight),h=o.left,u=o.width,r=s):u+=o.kernedWidth;s&&!f&&(t.fillStyle=s,t.fillRect(c+i+h,l,u,e/this.lineHeight)),l+=e}else l+=e;t.fillStyle=a,this._removeShadow(t)}},getFontCache:function(t){var i=t.fontFamily.toLowerCase();e.charWidthsCache[i]||(e.charWidthsCache[i]={});var n=e.charWidthsCache[i],r=t.fontStyle.toLowerCase()+"_"+(t.fontWeight+"").toLowerCase();return n[r]||(n[r]={}),n[r]},_measureChar:function(t,e,i,n){var r,o,s,a,c=this.getFontCache(e),l=this._getFontDeclaration(e),h=this._getFontDeclaration(n),u=i+t,f=l===h,d=e.fontSize/this.CACHE_FONT_SIZE;if(i&&void 0!==c[i]&&(s=c[i]),void 0!==c[t]&&(a=r=c[t]),f&&void 0!==c[u]&&(o=c[u],a=o-s),void 0===r||void 0===s||void 0===o){var p=this.getMeasuringContext();this._setTextStyles(p,e,!0)}return void 0===r&&(a=r=p.measureText(t).width,c[t]=r),void 0===s&&f&&i&&(s=p.measureText(i).width,c[i]=s),f&&void 0===o&&(o=p.measureText(u).width,c[u]=o,a=o-s),{width:r*d,kernedWidth:a*d}},getHeightOfChar:function(t,e){return this.getValueOfPropertyAt(t,e,"fontSize")},measureLine:function(t){var e=this._measureLine(t);return 0!==this.charSpacing&&(e.width-=this._getWidthOfCharSpacing()),e.width<0&&(e.width=0),e},_measureLine:function(t){var i,n,r,o,s,a,c=0,l=this._textLines[t],h=0,u=new Array(l.length),f=0,d=this.path;for(this.__charBounds[t]=u,d&&(s=e.util.getPointOnPath(d.path,0,d.segmentsInfo),a=d.segmentsInfo[d.segmentsInfo.length-1].length,s.x+=d.pathOffset.x,s.y+=d.pathOffset.y),i=0;i<l.length;i++)n=l[i],o=this._getGraphemeBox(n,t,i,r),d&&(f>a&&(f%=a),this._setGraphemeOnPath(f,o,s)),u[i]=o,c+=o.kernedWidth,f+=o.kernedWidth,r=n;return u[i]={left:o?o.left+o.width:0,width:0,kernedWidth:0,height:this.fontSize},{width:c,numOfSpaces:h}},_setGraphemeOnPath:function(t,i,n){var r=t+i.kernedWidth/2,o=this.path,s=e.util.getPointOnPath(o.path,r,o.segmentsInfo);i.renderLeft=s.x-n.x,i.renderTop=s.y-n.y,i.angle=s.angle},_getGraphemeBox:function(t,e,i,n,r){var o,s=this.getCompleteStyleDeclaration(e,i),a=n?this.getCompleteStyleDeclaration(e,i-1):{},c=this._measureChar(t,s,n,a),l=c.kernedWidth,h=c.width;0!==this.charSpacing&&(o=this._getWidthOfCharSpacing(),h+=o,l+=o);var u={width:h,left:0,height:s.fontSize,kernedWidth:l,deltaY:s.deltaY};if(i>0&&!r){var f=this.__charBounds[e][i-1];u.left=f.left+f.width+c.kernedWidth-c.width}return u},getHeightOfLine:function(t){if(this.__lineHeights[t])return this.__lineHeights[t];for(var e=this._textLines[t],i=this.getHeightOfChar(t,0),n=1,r=e.length;n<r;n++)i=Math.max(this.getHeightOfChar(t,n),i);return this.__lineHeights[t]=i*this.lineHeight*this._fontSizeMult},calcTextHeight:function(){for(var t,e=0,i=0,n=this._textLines.length;i<n;i++)t=this.getHeightOfLine(i),e+=i===n-1?t/this.lineHeight:t;return e},_getLeftOffset:function(){return-this.width/2},_getTopOffset:function(){return-this.height/2},_renderTextCommon:function(t,e){t.save();for(var i=0,n=this._getLeftOffset(),r=this._getTopOffset(),o=0,s=this._textLines.length;o<s;o++){var a=this.getHeightOfLine(o),c=a/this.lineHeight,l=this._getLineLeftOffset(o);this._renderTextLine(e,t,this._textLines[o],n+l,r+i+c,o),i+=a}t.restore()},_renderTextFill:function(t){(this.fill||this.styleHas("fill"))&&this._renderTextCommon(t,"fillText")},_renderTextStroke:function(t){(this.stroke&&0!==this.strokeWidth||!this.isEmptyStyles())&&(this.shadow&&!this.shadow.affectStroke&&this._removeShadow(t),t.save(),this._setLineDash(t,this.strokeDashArray),t.beginPath(),this._renderTextCommon(t,"strokeText"),t.closePath(),t.restore())},_renderChars:function(t,e,i,n,r,o){var s,a,c,l,h=this.getHeightOfLine(o),u=-1!==this.textAlign.indexOf("justify"),f="",d=0,p=this.path,g=!u&&0===this.charSpacing&&this.isEmptyStyles(o)&&!p;if(e.save(),r-=h*this._fontSizeFraction/this.lineHeight,g)return this._renderChar(t,e,o,0,i.join(""),n,r,h),void e.restore();for(var v=0,m=i.length-1;v<=m;v++)l=v===m||this.charSpacing||p,f+=i[v],c=this.__charBounds[o][v],0===d?(n+=c.kernedWidth-c.width,d+=c.width):d+=c.kernedWidth,u&&!l&&this._reSpaceAndTab.test(i[v])&&(l=!0),l||(s=s||this.getCompleteStyleDeclaration(o,v),a=this.getCompleteStyleDeclaration(o,v+1),l=this._hasStyleChanged(s,a)),l&&(p?(e.save(),e.translate(c.renderLeft,c.renderTop),e.rotate(c.angle),this._renderChar(t,e,o,v,f,-d/2,0,h),e.restore()):this._renderChar(t,e,o,v,f,n,r,h),f="",s=a,n+=d,d=0);e.restore()},_applyPatternGradientTransformText:function(t){var i,n=e.util.createCanvasElement(),r=this.width+this.strokeWidth,o=this.height+this.strokeWidth;return n.width=r,n.height=o,i=n.getContext("2d"),i.beginPath(),i.moveTo(0,0),i.lineTo(r,0),i.lineTo(r,o),i.lineTo(0,o),i.closePath(),i.translate(r/2,o/2),i.fillStyle=t.toLive(i),this._applyPatternGradientTransform(i,t),i.fill(),i.createPattern(n,"no-repeat")},handleFiller:function(t,e,i){var n,r;return i.toLive?"percentage"===i.gradientUnits||i.gradientTrasnform||i.patternTransform?(n=-this.width/2,r=-this.height/2,t.translate(n,r),t[e]=this._applyPatternGradientTransformText(i),{offsetX:n,offsetY:r}):(t[e]=i.toLive(t,this),this._applyPatternGradientTransform(t,i)):(t[e]=i,{offsetX:0,offsetY:0})},_setStrokeStyles:function(t,e){return t.lineWidth=e.strokeWidth,t.lineCap=this.strokeLineCap,t.lineDashOffset=this.strokeDashOffset,t.lineJoin=this.strokeLineJoin,t.miterLimit=this.strokeMiterLimit,this.handleFiller(t,"strokeStyle",e.stroke)},_setFillStyles:function(t,e){return this.handleFiller(t,"fillStyle",e.fill)},_renderChar:function(t,e,i,n,r,o,s){var a,c,l=this._getStyleDeclaration(i,n),h=this.getCompleteStyleDeclaration(i,n),u="fillText"===t&&h.fill,f="strokeText"===t&&h.stroke&&h.strokeWidth;(f||u)&&(e.save(),u&&(a=this._setFillStyles(e,h)),f&&(c=this._setStrokeStyles(e,h)),e.font=this._getFontDeclaration(h),l&&l.textBackgroundColor&&this._removeShadow(e),l&&l.deltaY&&(s+=l.deltaY),u&&e.fillText(r,o-a.offsetX,s-a.offsetY),f&&e.strokeText(r,o-c.offsetX,s-c.offsetY),e.restore())},setSuperscript:function(t,e){return this._setScript(t,e,this.superscript)},setSubscript:function(t,e){return this._setScript(t,e,this.subscript)},_setScript:function(t,e,i){var n=this.get2DCursorLocation(t,!0),r=this.getValueOfPropertyAt(n.lineIndex,n.charIndex,"fontSize"),o=this.getValueOfPropertyAt(n.lineIndex,n.charIndex,"deltaY"),s={fontSize:r*i.size,deltaY:o+r*i.baseline};return this.setSelectionStyles(s,t,e),this},_hasStyleChanged:function(t,e){return t.fill!==e.fill||t.stroke!==e.stroke||t.strokeWidth!==e.strokeWidth||t.fontSize!==e.fontSize||t.fontFamily!==e.fontFamily||t.fontWeight!==e.fontWeight||t.fontStyle!==e.fontStyle||t.deltaY!==e.deltaY},_hasStyleChangedForSvg:function(t,e){return this._hasStyleChanged(t,e)||t.overline!==e.overline||t.underline!==e.underline||t.linethrough!==e.linethrough},_getLineLeftOffset:function(t){var e=this.getLineWidth(t);return"center"===this.textAlign?(this.width-e)/2:"right"===this.textAlign?this.width-e:"justify-center"===this.textAlign&&this.isEndOfWrapping(t)?(this.width-e)/2:"justify-right"===this.textAlign&&this.isEndOfWrapping(t)?this.width-e:0},_clearCache:function(){this.__lineWidths=[],this.__lineHeights=[],this.__charBounds=[]},_shouldClearDimensionCache:function(){var t=this._forceClearCache;return t||(t=this.hasStateChanged("_dimensionAffectingProps")),t&&(this.dirty=!0,this._forceClearCache=!1),t},getLineWidth:function(t){if(this.__lineWidths[t])return this.__lineWidths[t];var e,i,n=this._textLines[t];return""===n?e=0:(i=this.measureLine(t),e=i.width),this.__lineWidths[t]=e,e},_getWidthOfCharSpacing:function(){return 0!==this.charSpacing?this.fontSize*this.charSpacing/1e3:0},getValueOfPropertyAt:function(t,e,i){var n=this._getStyleDeclaration(t,e);return n&&"undefined"!==typeof n[i]?n[i]:this[i]},_renderTextDecoration:function(t,e){if(this[e]||this.styleHas(e)){for(var i,n,r,o,s,a,c,l,h,u,f,d,p,g,v,m,y=this._getLeftOffset(),b=this._getTopOffset(),w=this.path,x=this._getWidthOfCharSpacing(),_=0,S=this._textLines.length;_<S;_++)if(i=this.getHeightOfLine(_),this[e]||this.styleHas(e,_)){c=this._textLines[_],g=i/this.lineHeight,o=this._getLineLeftOffset(_),u=0,f=0,l=this.getValueOfPropertyAt(_,0,e),m=this.getValueOfPropertyAt(_,0,"fill"),h=b+g*(1-this._fontSizeFraction),n=this.getHeightOfChar(_,0),s=this.getValueOfPropertyAt(_,0,"deltaY");for(var C=0,T=c.length;C<T;C++)d=this.__charBounds[_][C],p=this.getValueOfPropertyAt(_,C,e),v=this.getValueOfPropertyAt(_,C,"fill"),r=this.getHeightOfChar(_,C),a=this.getValueOfPropertyAt(_,C,"deltaY"),w&&p&&v?(t.save(),t.fillStyle=m,t.translate(d.renderLeft,d.renderTop),t.rotate(d.angle),t.fillRect(-d.kernedWidth/2,this.offsets[e]*r+a,d.kernedWidth,this.fontSize/15),t.restore()):(p!==l||v!==m||r!==n||a!==s)&&f>0?(l&&m&&(t.fillStyle=m,t.fillRect(y+o+u,h+this.offsets[e]*n+s,f,this.fontSize/15)),u=d.left,f=d.width,l=p,m=v,n=r,s=a):f+=d.kernedWidth;t.fillStyle=v,p&&v&&t.fillRect(y+o+u,h+this.offsets[e]*n+s,f-x,this.fontSize/15),b+=i}else b+=i;this._removeShadow(t)}},_getFontDeclaration:function(t,i){var n=t||this,r=this.fontFamily,o=e.Text.genericFonts.indexOf(r.toLowerCase())>-1,s=void 0===r||r.indexOf("'")>-1||r.indexOf(",")>-1||r.indexOf('"')>-1||o?n.fontFamily:'"'+n.fontFamily+'"';return[e.isLikelyNode?n.fontWeight:n.fontStyle,e.isLikelyNode?n.fontStyle:n.fontWeight,i?this.CACHE_FONT_SIZE+"px":n.fontSize+"px",s].join(" ")},render:function(t){this.visible&&(this.canvas&&this.canvas.skipOffscreen&&!this.group&&!this.isOnScreen()||(this._shouldClearDimensionCache()&&this.initDimensions(),this.callSuper("render",t)))},_splitTextIntoLines:function(t){for(var i=t.split(this._reNewline),n=new Array(i.length),r=["\n"],o=[],s=0;s<i.length;s++)n[s]=e.util.string.graphemeSplit(i[s]),o=o.concat(n[s],r);return o.pop(),{_unwrappedLines:n,lines:i,graphemeText:o,graphemeLines:n}},toObject:function(t){var e=["text","fontSize","fontWeight","fontFamily","fontStyle","lineHeight","underline","overline","linethrough","textAlign","textBackgroundColor","charSpacing","path"].concat(t),n=this.callSuper("toObject",e);return n.styles=i(this.styles,!0),n.path=this.path&&this.path.toObject(),n},set:function(t,e){this.callSuper("set",t,e);var i=!1,n=!1;if("object"===typeof t)for(var r in t)"path"===r&&this.setPathInfo(),i=i||-1!==this._dimensionAffectingProps.indexOf(r),n=n||"path"===r;else i=-1!==this._dimensionAffectingProps.indexOf(t),n="path"===t;return n&&this.setPathInfo(),i&&(this.initDimensions(),this.setCoords()),this},complexity:function(){return 1}}),e.Text.ATTRIBUTE_NAMES=e.SHARED_ATTRIBUTES.concat("x y dx dy font-family font-style font-weight font-size letter-spacing text-decoration text-anchor".split(" ")),e.Text.DEFAULT_SVG_FONT_SIZE=16,e.Text.fromElement=function(t,n,r){if(!t)return n(null);var o=e.parseAttributes(t,e.Text.ATTRIBUTE_NAMES),s=o.textAnchor||"left";if(r=e.util.object.extend(r?i(r):{},o),r.top=r.top||0,r.left=r.left||0,o.textDecoration){var a=o.textDecoration;-1!==a.indexOf("underline")&&(r.underline=!0),-1!==a.indexOf("overline")&&(r.overline=!0),-1!==a.indexOf("line-through")&&(r.linethrough=!0),delete r.textDecoration}"dx"in o&&(r.left+=o.dx),"dy"in o&&(r.top+=o.dy),"fontSize"in r||(r.fontSize=e.Text.DEFAULT_SVG_FONT_SIZE);var c="";"textContent"in t?c=t.textContent:"firstChild"in t&&null!==t.firstChild&&"data"in t.firstChild&&null!==t.firstChild.data&&(c=t.firstChild.data),c=c.replace(/^\s+|\s+$|\n+/g,"").replace(/\s+/g," ");var l=r.strokeWidth;r.strokeWidth=0;var h=new e.Text(c,r),u=h.getScaledHeight()/h.height,f=(h.height+h.strokeWidth)*h.lineHeight-h.height,d=f*u,p=h.getScaledHeight()+d,g=0;"center"===s&&(g=h.getScaledWidth()/2),"right"===s&&(g=h.getScaledWidth()),h.set({left:h.left-g,top:h.top-(p-h.fontSize*(.07+h._fontSizeFraction))/h.lineHeight,strokeWidth:"undefined"!==typeof l?l:1}),n(h)},e.Text.fromObject=function(t,n){var r=i(t),o=t.path;return delete r.path,e.Object._fromObject("Text",r,(function(t){o?e.Object._fromObject("Path",o,(function(e){t.set("path",e),n(t)}),"path"):n(t)}),"text")},e.Text.genericFonts=["sans-serif","serif","cursive","fantasy","monospace"],e.util.createAccessors&&e.util.createAccessors(e.Text)}}(e),function(){n.util.object.extend(n.Text.prototype,{isEmptyStyles:function(t){if(!this.styles)return!0;if("undefined"!==typeof t&&!this.styles[t])return!0;var e="undefined"===typeof t?this.styles:{line:this.styles[t]};for(var i in e)for(var n in e[i])for(var r in e[i][n])return!1;return!0},styleHas:function(t,e){if(!this.styles||!t||""===t)return!1;if("undefined"!==typeof e&&!this.styles[e])return!1;var i="undefined"===typeof e?this.styles:{0:this.styles[e]};for(var n in i)for(var r in i[n])if("undefined"!==typeof i[n][r][t])return!0;return!1},cleanStyle:function(t){if(!this.styles||!t||""===t)return!1;var e,i,n=this.styles,r=0,o=!0,s=0;for(var a in n){for(var c in e=0,n[a]){var l=n[a][c],h=l.hasOwnProperty(t);r++,h?(i?l[t]!==i&&(o=!1):i=l[t],l[t]===this[t]&&delete l[t]):o=!1,0!==Object.keys(l).length?e++:delete n[a][c]}0===e&&delete n[a]}for(var u=0;u<this._textLines.length;u++)s+=this._textLines[u].length;o&&r===s&&(this[t]=i,this.removeStyle(t))},removeStyle:function(t){if(this.styles&&t&&""!==t){var e,i,n,r=this.styles;for(i in r){for(n in e=r[i],e)delete e[n][t],0===Object.keys(e[n]).length&&delete e[n];0===Object.keys(e).length&&delete r[i]}}},_extendStyles:function(t,e){var i=this.get2DCursorLocation(t);this._getLineStyle(i.lineIndex)||this._setLineStyle(i.lineIndex),this._getStyleDeclaration(i.lineIndex,i.charIndex)||this._setStyleDeclaration(i.lineIndex,i.charIndex,{}),n.util.object.extend(this._getStyleDeclaration(i.lineIndex,i.charIndex),e)},get2DCursorLocation:function(t,e){"undefined"===typeof t&&(t=this.selectionStart);for(var i=e?this._unwrappedTextLines:this._textLines,n=i.length,r=0;r<n;r++){if(t<=i[r].length)return{lineIndex:r,charIndex:t};t-=i[r].length+this.missingNewlineOffset(r)}return{lineIndex:r-1,charIndex:i[r-1].length<t?i[r-1].length:t}},getSelectionStyles:function(t,e,i){"undefined"===typeof t&&(t=this.selectionStart||0),"undefined"===typeof e&&(e=this.selectionEnd||t);for(var n=[],r=t;r<e;r++)n.push(this.getStyleAtPosition(r,i));return n},getStyleAtPosition:function(t,e){var i=this.get2DCursorLocation(t),n=e?this.getCompleteStyleDeclaration(i.lineIndex,i.charIndex):this._getStyleDeclaration(i.lineIndex,i.charIndex);return n||{}},setSelectionStyles:function(t,e,i){"undefined"===typeof e&&(e=this.selectionStart||0),"undefined"===typeof i&&(i=this.selectionEnd||e);for(var n=e;n<i;n++)this._extendStyles(n,t);return this._forceClearCache=!0,this},_getStyleDeclaration:function(t,e){var i=this.styles&&this.styles[t];return i?i[e]:null},getCompleteStyleDeclaration:function(t,e){for(var i,n=this._getStyleDeclaration(t,e)||{},r={},o=0;o<this._styleProperties.length;o++)i=this._styleProperties[o],r[i]="undefined"===typeof n[i]?this[i]:n[i];return r},_setStyleDeclaration:function(t,e,i){this.styles[t][e]=i},_deleteStyleDeclaration:function(t,e){delete this.styles[t][e]},_getLineStyle:function(t){return!!this.styles[t]},_setLineStyle:function(t){this.styles[t]={}},_deleteLineStyle:function(t){delete this.styles[t]}})}(),function(){function t(t){t.textDecoration&&(t.textDecoration.indexOf("underline")>-1&&(t.underline=!0),t.textDecoration.indexOf("line-through")>-1&&(t.linethrough=!0),t.textDecoration.indexOf("overline")>-1&&(t.overline=!0),delete t.textDecoration)}n.IText=n.util.createClass(n.Text,n.Observable,{type:"i-text",selectionStart:0,selectionEnd:0,selectionColor:"rgba(17,119,255,0.3)",isEditing:!1,editable:!0,editingBorderColor:"rgba(102,153,255,0.25)",cursorWidth:2,cursorColor:"",cursorDelay:1e3,cursorDuration:600,caching:!0,_reSpace:/\s|\n/,_currentCursorOpacity:0,_selectionDirection:null,_abortCursorAnimation:!1,__widthOfSpace:[],inCompositionMode:!1,initialize:function(t,e){this.callSuper("initialize",t,e),this.initBehavior()},setSelectionStart:function(t){t=Math.max(t,0),this._updateAndFire("selectionStart",t)},setSelectionEnd:function(t){t=Math.min(t,this.text.length),this._updateAndFire("selectionEnd",t)},_updateAndFire:function(t,e){this[t]!==e&&(this._fireSelectionChanged(),this[t]=e),this._updateTextarea()},_fireSelectionChanged:function(){this.fire("selection:changed"),this.canvas&&this.canvas.fire("text:selection:changed",{target:this})},initDimensions:function(){this.isEditing&&this.initDelayedCursor(),this.clearContextTop(),this.callSuper("initDimensions")},render:function(t){this.clearContextTop(),this.callSuper("render",t),this.cursorOffsetCache={},this.renderCursorOrSelection()},_render:function(t){this.callSuper("_render",t)},clearContextTop:function(t){if(this.isEditing&&this.canvas&&this.canvas.contextTop){var e=this.canvas.contextTop,i=this.canvas.viewportTransform;e.save(),e.transform(i[0],i[1],i[2],i[3],i[4],i[5]),this.transform(e),this._clearTextArea(e),t||e.restore()}},renderCursorOrSelection:function(){if(this.isEditing&&this.canvas&&this.canvas.contextTop){var t=this._getCursorBoundaries(),e=this.canvas.contextTop;this.clearContextTop(!0),this.selectionStart===this.selectionEnd?this.renderCursor(t,e):this.renderSelection(t,e),e.restore()}},_clearTextArea:function(t){var e=this.width+4,i=this.height+4;t.clearRect(-e/2,-i/2,e,i)},_getCursorBoundaries:function(t){"undefined"===typeof t&&(t=this.selectionStart);var e=this._getLeftOffset(),i=this._getTopOffset(),n=this._getCursorBoundariesOffsets(t);return{left:e,top:i,leftOffset:n.left,topOffset:n.top}},_getCursorBoundariesOffsets:function(t){if(this.cursorOffsetCache&&"top"in this.cursorOffsetCache)return this.cursorOffsetCache;var e,i,n,r,o=0,s=0,a=this.get2DCursorLocation(t);n=a.charIndex,i=a.lineIndex;for(var c=0;c<i;c++)o+=this.getHeightOfLine(c);e=this._getLineLeftOffset(i);var l=this.__charBounds[i][n];return l&&(s=l.left),0!==this.charSpacing&&n===this._textLines[i].length&&(s-=this._getWidthOfCharSpacing()),r={top:o,left:e+(s>0?s:0)},this.cursorOffsetCache=r,this.cursorOffsetCache},renderCursor:function(t,e){var i=this.get2DCursorLocation(),n=i.lineIndex,r=i.charIndex>0?i.charIndex-1:0,o=this.getValueOfPropertyAt(n,r,"fontSize"),s=this.scaleX*this.canvas.getZoom(),a=this.cursorWidth/s,c=t.topOffset,l=this.getValueOfPropertyAt(n,r,"deltaY");c+=(1-this._fontSizeFraction)*this.getHeightOfLine(n)/this.lineHeight-o*(1-this._fontSizeFraction),this.inCompositionMode&&this.renderSelection(t,e),e.fillStyle=this.cursorColor||this.getValueOfPropertyAt(n,r,"fill"),e.globalAlpha=this.__isMousedown?1:this._currentCursorOpacity,e.fillRect(t.left+t.leftOffset-a/2,c+t.top+l,a,o)},renderSelection:function(t,e){for(var i=this.inCompositionMode?this.hiddenTextarea.selectionStart:this.selectionStart,n=this.inCompositionMode?this.hiddenTextarea.selectionEnd:this.selectionEnd,r=-1!==this.textAlign.indexOf("justify"),o=this.get2DCursorLocation(i),s=this.get2DCursorLocation(n),a=o.lineIndex,c=s.lineIndex,l=o.charIndex<0?0:o.charIndex,h=s.charIndex<0?0:s.charIndex,u=a;u<=c;u++){var f=this._getLineLeftOffset(u)||0,d=this.getHeightOfLine(u),p=0,g=0,v=0;if(u===a&&(g=this.__charBounds[a][l].left),u>=a&&u<c)v=r&&!this.isEndOfWrapping(u)?this.width:this.getLineWidth(u)||5;else if(u===c)if(0===h)v=this.__charBounds[c][h].left;else{var m=this._getWidthOfCharSpacing();v=this.__charBounds[c][h-1].left+this.__charBounds[c][h-1].width-m}p=d,(this.lineHeight<1||u===c&&this.lineHeight>1)&&(d/=this.lineHeight),this.inCompositionMode?(e.fillStyle=this.compositionColor||"black",e.fillRect(t.left+f+g,t.top+t.topOffset+d,v-g,1)):(e.fillStyle=this.selectionColor,e.fillRect(t.left+f+g,t.top+t.topOffset,v-g,d)),t.topOffset+=p}},getCurrentCharFontSize:function(){var t=this._getCurrentCharIndex();return this.getValueOfPropertyAt(t.l,t.c,"fontSize")},getCurrentCharColor:function(){var t=this._getCurrentCharIndex();return this.getValueOfPropertyAt(t.l,t.c,"fill")},_getCurrentCharIndex:function(){var t=this.get2DCursorLocation(this.selectionStart,!0),e=t.charIndex>0?t.charIndex-1:0;return{l:t.lineIndex,c:e}}}),n.IText.fromObject=function(e,i){if(t(e),e.styles)for(var r in e.styles)for(var o in e.styles[r])t(e.styles[r][o]);n.Object._fromObject("IText",e,i,"text")}}(),function(){var t=n.util.object.clone;n.util.object.extend(n.IText.prototype,{initBehavior:function(){this.initAddedHandler(),this.initRemovedHandler(),this.initCursorSelectionHandlers(),this.initDoubleClickSimulation(),this.mouseMoveHandler=this.mouseMoveHandler.bind(this)},onDeselect:function(){this.isEditing&&this.exitEditing(),this.selected=!1},initAddedHandler:function(){var t=this;this.on("added",(function(){var e=t.canvas;e&&(e._hasITextHandlers||(e._hasITextHandlers=!0,t._initCanvasHandlers(e)),e._iTextInstances=e._iTextInstances||[],e._iTextInstances.push(t))}))},initRemovedHandler:function(){var t=this;this.on("removed",(function(){var e=t.canvas;e&&(e._iTextInstances=e._iTextInstances||[],n.util.removeFromArray(e._iTextInstances,t),0===e._iTextInstances.length&&(e._hasITextHandlers=!1,t._removeCanvasHandlers(e)))}))},_initCanvasHandlers:function(t){t._mouseUpITextHandler=function(){t._iTextInstances&&t._iTextInstances.forEach((function(t){t.__isMousedown=!1}))},t.on("mouse:up",t._mouseUpITextHandler)},_removeCanvasHandlers:function(t){t.off("mouse:up",t._mouseUpITextHandler)},_tick:function(){this._currentTickState=this._animateCursor(this,1,this.cursorDuration,"_onTickComplete")},_animateCursor:function(t,e,i,n){var r;return r={isAborted:!1,abort:function(){this.isAborted=!0}},t.animate("_currentCursorOpacity",e,{duration:i,onComplete:function(){r.isAborted||t[n]()},onChange:function(){t.canvas&&t.selectionStart===t.selectionEnd&&t.renderCursorOrSelection()},abort:function(){return r.isAborted}}),r},_onTickComplete:function(){var t=this;this._cursorTimeout1&&clearTimeout(this._cursorTimeout1),this._cursorTimeout1=setTimeout((function(){t._currentTickCompleteState=t._animateCursor(t,0,this.cursorDuration/2,"_tick")}),100)},initDelayedCursor:function(t){var e=this,i=t?0:this.cursorDelay;this.abortCursorAnimation(),this._currentCursorOpacity=1,this._cursorTimeout2=setTimeout((function(){e._tick()}),i)},abortCursorAnimation:function(){var t=this._currentTickState||this._currentTickCompleteState,e=this.canvas;this._currentTickState&&this._currentTickState.abort(),this._currentTickCompleteState&&this._currentTickCompleteState.abort(),clearTimeout(this._cursorTimeout1),clearTimeout(this._cursorTimeout2),this._currentCursorOpacity=0,t&&e&&e.clearContext(e.contextTop||e.contextContainer)},selectAll:function(){return this.selectionStart=0,this.selectionEnd=this._text.length,this._fireSelectionChanged(),this._updateTextarea(),this},getSelectedText:function(){return this._text.slice(this.selectionStart,this.selectionEnd).join("")},findWordBoundaryLeft:function(t){var e=0,i=t-1;if(this._reSpace.test(this._text[i]))while(this._reSpace.test(this._text[i]))e++,i--;while(/\S/.test(this._text[i])&&i>-1)e++,i--;return t-e},findWordBoundaryRight:function(t){var e=0,i=t;if(this._reSpace.test(this._text[i]))while(this._reSpace.test(this._text[i]))e++,i++;while(/\S/.test(this._text[i])&&i<this._text.length)e++,i++;return t+e},findLineBoundaryLeft:function(t){var e=0,i=t-1;while(!/\n/.test(this._text[i])&&i>-1)e++,i--;return t-e},findLineBoundaryRight:function(t){var e=0,i=t;while(!/\n/.test(this._text[i])&&i<this._text.length)e++,i++;return t+e},searchWordBoundary:function(t,e){var i=this._text,r=this._reSpace.test(i[t])?t-1:t,o=i[r],s=n.reNonWord;while(!s.test(o)&&r>0&&r<i.length)r+=e,o=i[r];return s.test(o)&&(r+=1===e?0:1),r},selectWord:function(t){t=t||this.selectionStart;var e=this.searchWordBoundary(t,-1),i=this.searchWordBoundary(t,1);this.selectionStart=e,this.selectionEnd=i,this._fireSelectionChanged(),this._updateTextarea(),this.renderCursorOrSelection()},selectLine:function(t){t=t||this.selectionStart;var e=this.findLineBoundaryLeft(t),i=this.findLineBoundaryRight(t);return this.selectionStart=e,this.selectionEnd=i,this._fireSelectionChanged(),this._updateTextarea(),this},enterEditing:function(t){if(!this.isEditing&&this.editable)return this.canvas&&(this.canvas.calcOffset(),this.exitEditingOnOthers(this.canvas)),this.isEditing=!0,this.initHiddenTextarea(t),this.hiddenTextarea.focus(),this.hiddenTextarea.value=this.text,this._updateTextarea(),this._saveEditingProps(),this._setEditingProps(),this._textBeforeEdit=this.text,this._tick(),this.fire("editing:entered"),this._fireSelectionChanged(),this.canvas?(this.canvas.fire("text:editing:entered",{target:this}),this.initMouseMoveHandler(),this.canvas.requestRenderAll(),this):this},exitEditingOnOthers:function(t){t._iTextInstances&&t._iTextInstances.forEach((function(t){t.selected=!1,t.isEditing&&t.exitEditing()}))},initMouseMoveHandler:function(){this.canvas.on("mouse:move",this.mouseMoveHandler)},mouseMoveHandler:function(t){if(this.__isMousedown&&this.isEditing){var e=this.getSelectionStartFromPointer(t.e),i=this.selectionStart,n=this.selectionEnd;(e===this.__selectionStartOnMouseDown&&i!==n||i!==e&&n!==e)&&(e>this.__selectionStartOnMouseDown?(this.selectionStart=this.__selectionStartOnMouseDown,this.selectionEnd=e):(this.selectionStart=e,this.selectionEnd=this.__selectionStartOnMouseDown),this.selectionStart===i&&this.selectionEnd===n||(this.restartCursorIfNeeded(),this._fireSelectionChanged(),this._updateTextarea(),this.renderCursorOrSelection()))}},_setEditingProps:function(){this.hoverCursor="text",this.canvas&&(this.canvas.defaultCursor=this.canvas.moveCursor="text"),this.borderColor=this.editingBorderColor,this.hasControls=this.selectable=!1,this.lockMovementX=this.lockMovementY=!0},fromStringToGraphemeSelection:function(t,e,i){var r=i.slice(0,t),o=n.util.string.graphemeSplit(r).length;if(t===e)return{selectionStart:o,selectionEnd:o};var s=i.slice(t,e),a=n.util.string.graphemeSplit(s).length;return{selectionStart:o,selectionEnd:o+a}},fromGraphemeToStringSelection:function(t,e,i){var n=i.slice(0,t),r=n.join("").length;if(t===e)return{selectionStart:r,selectionEnd:r};var o=i.slice(t,e),s=o.join("").length;return{selectionStart:r,selectionEnd:r+s}},_updateTextarea:function(){if(this.cursorOffsetCache={},this.hiddenTextarea){if(!this.inCompositionMode){var t=this.fromGraphemeToStringSelection(this.selectionStart,this.selectionEnd,this._text);this.hiddenTextarea.selectionStart=t.selectionStart,this.hiddenTextarea.selectionEnd=t.selectionEnd}this.updateTextareaPosition()}},updateFromTextArea:function(){if(this.hiddenTextarea){this.cursorOffsetCache={},this.text=this.hiddenTextarea.value,this._shouldClearDimensionCache()&&(this.initDimensions(),this.setCoords());var t=this.fromStringToGraphemeSelection(this.hiddenTextarea.selectionStart,this.hiddenTextarea.selectionEnd,this.hiddenTextarea.value);this.selectionEnd=this.selectionStart=t.selectionEnd,this.inCompositionMode||(this.selectionStart=t.selectionStart),this.updateTextareaPosition()}},updateTextareaPosition:function(){if(this.selectionStart===this.selectionEnd){var t=this._calcTextareaPosition();this.hiddenTextarea.style.left=t.left,this.hiddenTextarea.style.top=t.top}},_calcTextareaPosition:function(){if(!this.canvas)return{x:1,y:1};var t=this.inCompositionMode?this.compositionStart:this.selectionStart,e=this._getCursorBoundaries(t),i=this.get2DCursorLocation(t),r=i.lineIndex,o=i.charIndex,s=this.getValueOfPropertyAt(r,o,"fontSize")*this.lineHeight,a=e.leftOffset,c=this.calcTransformMatrix(),l={x:e.left+a,y:e.top+e.topOffset+s},h=this.canvas.getRetinaScaling(),u=this.canvas.upperCanvasEl,f=u.width/h,d=u.height/h,p=f-s,g=d-s,v=u.clientWidth/f,m=u.clientHeight/d;return l=n.util.transformPoint(l,c),l=n.util.transformPoint(l,this.canvas.viewportTransform),l.x*=v,l.y*=m,l.x<0&&(l.x=0),l.x>p&&(l.x=p),l.y<0&&(l.y=0),l.y>g&&(l.y=g),l.x+=this.canvas._offset.left,l.y+=this.canvas._offset.top,{left:l.x+"px",top:l.y+"px",fontSize:s+"px",charHeight:s}},_saveEditingProps:function(){this._savedProps={hasControls:this.hasControls,borderColor:this.borderColor,lockMovementX:this.lockMovementX,lockMovementY:this.lockMovementY,hoverCursor:this.hoverCursor,selectable:this.selectable,defaultCursor:this.canvas&&this.canvas.defaultCursor,moveCursor:this.canvas&&this.canvas.moveCursor}},_restoreEditingProps:function(){this._savedProps&&(this.hoverCursor=this._savedProps.hoverCursor,this.hasControls=this._savedProps.hasControls,this.borderColor=this._savedProps.borderColor,this.selectable=this._savedProps.selectable,this.lockMovementX=this._savedProps.lockMovementX,this.lockMovementY=this._savedProps.lockMovementY,this.canvas&&(this.canvas.defaultCursor=this._savedProps.defaultCursor,this.canvas.moveCursor=this._savedProps.moveCursor))},exitEditing:function(){var t=this._textBeforeEdit!==this.text,e=this.hiddenTextarea;return this.selected=!1,this.isEditing=!1,this.selectionEnd=this.selectionStart,e&&(e.blur&&e.blur(),e.parentNode&&e.parentNode.removeChild(e)),this.hiddenTextarea=null,this.abortCursorAnimation(),this._restoreEditingProps(),this._currentCursorOpacity=0,this._shouldClearDimensionCache()&&(this.initDimensions(),this.setCoords()),this.fire("editing:exited"),t&&this.fire("modified"),this.canvas&&(this.canvas.off("mouse:move",this.mouseMoveHandler),this.canvas.fire("text:editing:exited",{target:this}),t&&this.canvas.fire("object:modified",{target:this})),this},_removeExtraneousStyles:function(){for(var t in this.styles)this._textLines[t]||delete this.styles[t]},removeStyleFromTo:function(t,e){var i,n,r=this.get2DCursorLocation(t,!0),o=this.get2DCursorLocation(e,!0),s=r.lineIndex,a=r.charIndex,c=o.lineIndex,l=o.charIndex;if(s!==c){if(this.styles[s])for(i=a;i<this._unwrappedTextLines[s].length;i++)delete this.styles[s][i];if(this.styles[c])for(i=l;i<this._unwrappedTextLines[c].length;i++)n=this.styles[c][i],n&&(this.styles[s]||(this.styles[s]={}),this.styles[s][a+i-l]=n);for(i=s+1;i<=c;i++)delete this.styles[i];this.shiftLineStyles(c,s-c)}else if(this.styles[s]){n=this.styles[s];var h,u,f=l-a;for(i=a;i<l;i++)delete n[i];for(u in this.styles[s])h=parseInt(u,10),h>=l&&(n[h-f]=n[u],delete n[u])}},shiftLineStyles:function(e,i){var n=t(this.styles);for(var r in this.styles){var o=parseInt(r,10);o>e&&(this.styles[o+i]=n[o],n[o-i]||delete this.styles[o])}},restartCursorIfNeeded:function(){this._currentTickState&&!this._currentTickState.isAborted&&this._currentTickCompleteState&&!this._currentTickCompleteState.isAborted||this.initDelayedCursor()},insertNewlineStyleObject:function(e,i,n,r){var o,s={},a=!1,c=this._unwrappedTextLines[e].length===i;for(var l in n||(n=1),this.shiftLineStyles(e,n),this.styles[e]&&(o=this.styles[e][0===i?i:i-1]),this.styles[e]){var h=parseInt(l,10);h>=i&&(a=!0,s[h-i]=this.styles[e][l],c&&0===i||delete this.styles[e][l])}var u=!1;a&&!c&&(this.styles[e+n]=s,u=!0),u&&n--;while(n>0)r&&r[n-1]?this.styles[e+n]={0:t(r[n-1])}:o?this.styles[e+n]={0:t(o)}:delete this.styles[e+n],n--;this._forceClearCache=!0},insertCharStyleObject:function(e,i,n,r){this.styles||(this.styles={});var o=this.styles[e],s=o?t(o):{};for(var a in n||(n=1),s){var c=parseInt(a,10);c>=i&&(o[c+n]=s[c],s[c-n]||delete o[c])}if(this._forceClearCache=!0,r)while(n--)Object.keys(r[n]).length&&(this.styles[e]||(this.styles[e]={}),this.styles[e][i+n]=t(r[n]));else if(o){var l=o[i?i-1:1];while(l&&n--)this.styles[e][i+n]=t(l)}},insertNewStyleBlock:function(t,e,i){for(var n=this.get2DCursorLocation(e,!0),r=[0],o=0,s=0;s<t.length;s++)"\n"===t[s]?(o++,r[o]=0):r[o]++;r[0]>0&&(this.insertCharStyleObject(n.lineIndex,n.charIndex,r[0],i),i=i&&i.slice(r[0]+1)),o&&this.insertNewlineStyleObject(n.lineIndex,n.charIndex+r[0],o);for(s=1;s<o;s++)r[s]>0?this.insertCharStyleObject(n.lineIndex+s,0,r[s],i):i&&(this.styles[n.lineIndex+s][0]=i[0]),i=i&&i.slice(r[s]+1);r[s]>0&&this.insertCharStyleObject(n.lineIndex+s,0,r[s],i)},setSelectionStartEndWithShift:function(t,e,i){i<=t?(e===t?this._selectionDirection="left":"right"===this._selectionDirection&&(this._selectionDirection="left",this.selectionEnd=t),this.selectionStart=i):i>t&&i<e?"right"===this._selectionDirection?this.selectionEnd=i:this.selectionStart=i:(e===t?this._selectionDirection="right":"left"===this._selectionDirection&&(this._selectionDirection="right",this.selectionStart=e),this.selectionEnd=i)},setSelectionInBoundaries:function(){var t=this.text.length;this.selectionStart>t?this.selectionStart=t:this.selectionStart<0&&(this.selectionStart=0),this.selectionEnd>t?this.selectionEnd=t:this.selectionEnd<0&&(this.selectionEnd=0)}})}(),n.util.object.extend(n.IText.prototype,{initDoubleClickSimulation:function(){this.__lastClickTime=+new Date,this.__lastLastClickTime=+new Date,this.__lastPointer={},this.on("mousedown",this.onMouseDown)},onMouseDown:function(t){if(this.canvas){this.__newClickTime=+new Date;var e=t.pointer;this.isTripleClick(e)&&(this.fire("tripleclick",t),this._stopEvent(t.e)),this.__lastLastClickTime=this.__lastClickTime,this.__lastClickTime=this.__newClickTime,this.__lastPointer=e,this.__lastIsEditing=this.isEditing,this.__lastSelected=this.selected}},isTripleClick:function(t){return this.__newClickTime-this.__lastClickTime<500&&this.__lastClickTime-this.__lastLastClickTime<500&&this.__lastPointer.x===t.x&&this.__lastPointer.y===t.y},_stopEvent:function(t){t.preventDefault&&t.preventDefault(),t.stopPropagation&&t.stopPropagation()},initCursorSelectionHandlers:function(){this.initMousedownHandler(),this.initMouseupHandler(),this.initClicks()},doubleClickHandler:function(t){this.isEditing&&this.selectWord(this.getSelectionStartFromPointer(t.e))},tripleClickHandler:function(t){this.isEditing&&this.selectLine(this.getSelectionStartFromPointer(t.e))},initClicks:function(){this.on("mousedblclick",this.doubleClickHandler),this.on("tripleclick",this.tripleClickHandler)},_mouseDownHandler:function(t){!this.canvas||!this.editable||t.e.button&&1!==t.e.button||(this.__isMousedown=!0,this.selected&&(this.inCompositionMode=!1,this.setCursorByClick(t.e)),this.isEditing&&(this.__selectionStartOnMouseDown=this.selectionStart,this.selectionStart===this.selectionEnd&&this.abortCursorAnimation(),this.renderCursorOrSelection()))},_mouseDownHandlerBefore:function(t){!this.canvas||!this.editable||t.e.button&&1!==t.e.button||(this.selected=this===this.canvas._activeObject)},initMousedownHandler:function(){this.on("mousedown",this._mouseDownHandler),this.on("mousedown:before",this._mouseDownHandlerBefore)},initMouseupHandler:function(){this.on("mouseup",this.mouseUpHandler)},mouseUpHandler:function(t){if(this.__isMousedown=!1,!(!this.editable||this.group||t.transform&&t.transform.actionPerformed||t.e.button&&1!==t.e.button)){if(this.canvas){var e=this.canvas._activeObject;if(e&&e!==this)return}this.__lastSelected&&!this.__corner?(this.selected=!1,this.__lastSelected=!1,this.enterEditing(t.e),this.selectionStart===this.selectionEnd?this.initDelayedCursor(!0):this.renderCursorOrSelection()):this.selected=!0}},setCursorByClick:function(t){var e=this.getSelectionStartFromPointer(t),i=this.selectionStart,n=this.selectionEnd;t.shiftKey?this.setSelectionStartEndWithShift(i,n,e):(this.selectionStart=e,this.selectionEnd=e),this.isEditing&&(this._fireSelectionChanged(),this._updateTextarea())},getSelectionStartFromPointer:function(t){for(var e,i,n=this.getLocalPointer(t),r=0,o=0,s=0,a=0,c=0,l=0,h=this._textLines.length;l<h;l++){if(!(s<=n.y))break;s+=this.getHeightOfLine(l)*this.scaleY,c=l,l>0&&(a+=this._textLines[l-1].length+this.missingNewlineOffset(l-1))}e=this._getLineLeftOffset(c),o=e*this.scaleX,i=this._textLines[c];for(var u=0,f=i.length;u<f;u++){if(r=o,o+=this.__charBounds[c][u].kernedWidth*this.scaleX,!(o<=n.x))break;a++}return this._getNewSelectionStartFromOffset(n,r,o,a,f)},_getNewSelectionStartFromOffset:function(t,e,i,n,r){var o=t.x-e,s=i-t.x,a=s>o||s<0?0:1,c=n+a;return this.flipX&&(c=r-c),c>this._text.length&&(c=this._text.length),c}}),n.util.object.extend(n.IText.prototype,{initHiddenTextarea:function(){this.hiddenTextarea=n.document.createElement("textarea"),this.hiddenTextarea.setAttribute("autocapitalize","off"),this.hiddenTextarea.setAttribute("autocorrect","off"),this.hiddenTextarea.setAttribute("autocomplete","off"),this.hiddenTextarea.setAttribute("spellcheck","false"),this.hiddenTextarea.setAttribute("data-fabric-hiddentextarea",""),this.hiddenTextarea.setAttribute("wrap","off");var t=this._calcTextareaPosition();this.hiddenTextarea.style.cssText="position: absolute; top: "+t.top+"; left: "+t.left+"; z-index: -999; opacity: 0; width: 1px; height: 1px; font-size: 1px; paddingï½°top: "+t.fontSize+";",n.document.body.appendChild(this.hiddenTextarea),n.util.addListener(this.hiddenTextarea,"keydown",this.onKeyDown.bind(this)),n.util.addListener(this.hiddenTextarea,"keyup",this.onKeyUp.bind(this)),n.util.addListener(this.hiddenTextarea,"input",this.onInput.bind(this)),n.util.addListener(this.hiddenTextarea,"copy",this.copy.bind(this)),n.util.addListener(this.hiddenTextarea,"cut",this.copy.bind(this)),n.util.addListener(this.hiddenTextarea,"paste",this.paste.bind(this)),n.util.addListener(this.hiddenTextarea,"compositionstart",this.onCompositionStart.bind(this)),n.util.addListener(this.hiddenTextarea,"compositionupdate",this.onCompositionUpdate.bind(this)),n.util.addListener(this.hiddenTextarea,"compositionend",this.onCompositionEnd.bind(this)),!this._clickHandlerInitialized&&this.canvas&&(n.util.addListener(this.canvas.upperCanvasEl,"click",this.onClick.bind(this)),this._clickHandlerInitialized=!0)},keysMap:{9:"exitEditing",27:"exitEditing",33:"moveCursorUp",34:"moveCursorDown",35:"moveCursorRight",36:"moveCursorLeft",37:"moveCursorLeft",38:"moveCursorUp",39:"moveCursorRight",40:"moveCursorDown"},ctrlKeysMapUp:{67:"copy",88:"cut"},ctrlKeysMapDown:{65:"selectAll"},onClick:function(){this.hiddenTextarea&&this.hiddenTextarea.focus()},onKeyDown:function(t){if(this.isEditing){if(t.keyCode in this.keysMap)this[this.keysMap[t.keyCode]](t);else{if(!(t.keyCode in this.ctrlKeysMapDown)||!t.ctrlKey&&!t.metaKey)return;this[this.ctrlKeysMapDown[t.keyCode]](t)}t.stopImmediatePropagation(),t.preventDefault(),t.keyCode>=33&&t.keyCode<=40?(this.inCompositionMode=!1,this.clearContextTop(),this.renderCursorOrSelection()):this.canvas&&this.canvas.requestRenderAll()}},onKeyUp:function(t){!this.isEditing||this._copyDone||this.inCompositionMode?this._copyDone=!1:t.keyCode in this.ctrlKeysMapUp&&(t.ctrlKey||t.metaKey)&&(this[this.ctrlKeysMapUp[t.keyCode]](t),t.stopImmediatePropagation(),t.preventDefault(),this.canvas&&this.canvas.requestRenderAll())},onInput:function(t){var e=this.fromPaste;if(this.fromPaste=!1,t&&t.stopPropagation(),this.isEditing){var i,r,o,s,a,c=this._splitTextIntoLines(this.hiddenTextarea.value).graphemeText,l=this._text.length,h=c.length,u=h-l,f=this.selectionStart,d=this.selectionEnd,p=f!==d;if(""===this.hiddenTextarea.value)return this.styles={},this.updateFromTextArea(),this.fire("changed"),void(this.canvas&&(this.canvas.fire("text:changed",{target:this}),this.canvas.requestRenderAll()));var g=this.fromStringToGraphemeSelection(this.hiddenTextarea.selectionStart,this.hiddenTextarea.selectionEnd,this.hiddenTextarea.value),v=f>g.selectionStart;p?(i=this._text.slice(f,d),u+=d-f):h<l&&(i=v?this._text.slice(d+u,d):this._text.slice(f,f-u)),r=c.slice(g.selectionEnd-u,g.selectionEnd),i&&i.length&&(r.length&&(o=this.getSelectionStyles(f,f+1,!1),o=r.map((function(){return o[0]}))),p?(s=f,a=d):v?(s=d-i.length,a=d):(s=d,a=d+i.length),this.removeStyleFromTo(s,a)),r.length&&(e&&r.join("")===n.copiedText&&!n.disableStyleCopyPaste&&(o=n.copiedTextStyle),this.insertNewStyleBlock(r,f,o)),this.updateFromTextArea(),this.fire("changed"),this.canvas&&(this.canvas.fire("text:changed",{target:this}),this.canvas.requestRenderAll())}},onCompositionStart:function(){this.inCompositionMode=!0},onCompositionEnd:function(){this.inCompositionMode=!1},onCompositionUpdate:function(t){this.compositionStart=t.target.selectionStart,this.compositionEnd=t.target.selectionEnd,this.updateTextareaPosition()},copy:function(){this.selectionStart!==this.selectionEnd&&(n.copiedText=this.getSelectedText(),n.disableStyleCopyPaste?n.copiedTextStyle=null:n.copiedTextStyle=this.getSelectionStyles(this.selectionStart,this.selectionEnd,!0),this._copyDone=!0)},paste:function(){this.fromPaste=!0},_getClipboardData:function(t){return t&&t.clipboardData||n.window.clipboardData},_getWidthBeforeCursor:function(t,e){var i,n=this._getLineLeftOffset(t);return e>0&&(i=this.__charBounds[t][e-1],n+=i.left+i.width),n},getDownCursorOffset:function(t,e){var i=this._getSelectionForOffset(t,e),n=this.get2DCursorLocation(i),r=n.lineIndex;if(r===this._textLines.length-1||t.metaKey||34===t.keyCode)return this._text.length-i;var o=n.charIndex,s=this._getWidthBeforeCursor(r,o),a=this._getIndexOnLine(r+1,s),c=this._textLines[r].slice(o);return c.length+a+1+this.missingNewlineOffset(r)},_getSelectionForOffset:function(t,e){return t.shiftKey&&this.selectionStart!==this.selectionEnd&&e?this.selectionEnd:this.selectionStart},getUpCursorOffset:function(t,e){var i=this._getSelectionForOffset(t,e),n=this.get2DCursorLocation(i),r=n.lineIndex;if(0===r||t.metaKey||33===t.keyCode)return-i;var o=n.charIndex,s=this._getWidthBeforeCursor(r,o),a=this._getIndexOnLine(r-1,s),c=this._textLines[r].slice(0,o),l=this.missingNewlineOffset(r-1);return-this._textLines[r-1].length+a-c.length+(1-l)},_getIndexOnLine:function(t,e){for(var i,n,r=this._textLines[t],o=this._getLineLeftOffset(t),s=o,a=0,c=0,l=r.length;c<l;c++)if(i=this.__charBounds[t][c].width,s+=i,s>e){n=!0;var h=s-i,u=s,f=Math.abs(h-e),d=Math.abs(u-e);a=d<f?c:c-1;break}return n||(a=r.length-1),a},moveCursorDown:function(t){this.selectionStart>=this._text.length&&this.selectionEnd>=this._text.length||this._moveCursorUpOrDown("Down",t)},moveCursorUp:function(t){0===this.selectionStart&&0===this.selectionEnd||this._moveCursorUpOrDown("Up",t)},_moveCursorUpOrDown:function(t,e){var i="get"+t+"CursorOffset",n=this[i](e,"right"===this._selectionDirection);e.shiftKey?this.moveCursorWithShift(n):this.moveCursorWithoutShift(n),0!==n&&(this.setSelectionInBoundaries(),this.abortCursorAnimation(),this._currentCursorOpacity=1,this.initDelayedCursor(),this._fireSelectionChanged(),this._updateTextarea())},moveCursorWithShift:function(t){var e="left"===this._selectionDirection?this.selectionStart+t:this.selectionEnd+t;return this.setSelectionStartEndWithShift(this.selectionStart,this.selectionEnd,e),0!==t},moveCursorWithoutShift:function(t){return t<0?(this.selectionStart+=t,this.selectionEnd=this.selectionStart):(this.selectionEnd+=t,this.selectionStart=this.selectionEnd),0!==t},moveCursorLeft:function(t){0===this.selectionStart&&0===this.selectionEnd||this._moveCursorLeftOrRight("Left",t)},_move:function(t,e,i){var n;if(t.altKey)n=this["findWordBoundary"+i](this[e]);else{if(!t.metaKey&&35!==t.keyCode&&36!==t.keyCode)return this[e]+="Left"===i?-1:1,!0;n=this["findLineBoundary"+i](this[e])}if(void 0!==typeof n&&this[e]!==n)return this[e]=n,!0},_moveLeft:function(t,e){return this._move(t,e,"Left")},_moveRight:function(t,e){return this._move(t,e,"Right")},moveCursorLeftWithoutShift:function(t){var e=!0;return this._selectionDirection="left",this.selectionEnd===this.selectionStart&&0!==this.selectionStart&&(e=this._moveLeft(t,"selectionStart")),this.selectionEnd=this.selectionStart,e},moveCursorLeftWithShift:function(t){return"right"===this._selectionDirection&&this.selectionStart!==this.selectionEnd?this._moveLeft(t,"selectionEnd"):0!==this.selectionStart?(this._selectionDirection="left",this._moveLeft(t,"selectionStart")):void 0},moveCursorRight:function(t){this.selectionStart>=this._text.length&&this.selectionEnd>=this._text.length||this._moveCursorLeftOrRight("Right",t)},_moveCursorLeftOrRight:function(t,e){var i="moveCursor"+t+"With";this._currentCursorOpacity=1,e.shiftKey?i+="Shift":i+="outShift",this[i](e)&&(this.abortCursorAnimation(),this.initDelayedCursor(),this._fireSelectionChanged(),this._updateTextarea())},moveCursorRightWithShift:function(t){return"left"===this._selectionDirection&&this.selectionStart!==this.selectionEnd?this._moveRight(t,"selectionStart"):this.selectionEnd!==this._text.length?(this._selectionDirection="right",this._moveRight(t,"selectionEnd")):void 0},moveCursorRightWithoutShift:function(t){var e=!0;return this._selectionDirection="right",this.selectionStart===this.selectionEnd?(e=this._moveRight(t,"selectionStart"),this.selectionEnd=this.selectionStart):this.selectionStart=this.selectionEnd,e},removeChars:function(t,e){"undefined"===typeof e&&(e=t+1),this.removeStyleFromTo(t,e),this._text.splice(t,e-t),this.text=this._text.join(""),this.set("dirty",!0),this._shouldClearDimensionCache()&&(this.initDimensions(),this.setCoords()),this._removeExtraneousStyles()},insertChars:function(t,e,i,r){"undefined"===typeof r&&(r=i),r>i&&this.removeStyleFromTo(i,r);var o=n.util.string.graphemeSplit(t);this.insertNewStyleBlock(o,i,e),this._text=[].concat(this._text.slice(0,i),o,this._text.slice(r)),this.text=this._text.join(""),this.set("dirty",!0),this._shouldClearDimensionCache()&&(this.initDimensions(),this.setCoords()),this._removeExtraneousStyles()}}),function(){var t=n.util.toFixed,e=/  +/g;n.util.object.extend(n.Text.prototype,{_toSVG:function(){var t=this._getSVGLeftTopOffsets(),e=this._getSVGTextAndBg(t.textTop,t.textLeft);return this._wrapSVGTextAndBg(e)},toSVG:function(t){return this._createBaseSVGMarkup(this._toSVG(),{reviver:t,noStyle:!0,withShadow:!0})},_getSVGLeftTopOffsets:function(){return{textLeft:-this.width/2,textTop:-this.height/2,lineTop:this.getHeightOfLine(0)}},_wrapSVGTextAndBg:function(t){var e=!0,i=this.getSvgTextDecoration(this);return[t.textBgRects.join(""),'\t\t<text xml:space="preserve" ',this.fontFamily?'font-family="'+this.fontFamily.replace(/"/g,"'")+'" ':"",this.fontSize?'font-size="'+this.fontSize+'" ':"",this.fontStyle?'font-style="'+this.fontStyle+'" ':"",this.fontWeight?'font-weight="'+this.fontWeight+'" ':"",i?'text-decoration="'+i+'" ':"",'style="',this.getSvgStyles(e),'"',this.addPaintOrder()," >",t.textSpans.join(""),"</text>\n"]},_getSVGTextAndBg:function(t,e){var i,n=[],r=[],o=t;this._setSVGBg(r);for(var s=0,a=this._textLines.length;s<a;s++)i=this._getLineLeftOffset(s),(this.textBackgroundColor||this.styleHas("textBackgroundColor",s))&&this._setSVGTextLineBg(r,s,e+i,o),this._setSVGTextLineText(n,s,e+i,o),o+=this.getHeightOfLine(s);return{textSpans:n,textBgRects:r}},_createTextCharSpan:function(i,r,o,s){var a=i!==i.trim()||i.match(e),c=this.getSvgSpanStyles(r,a),l=c?'style="'+c+'"':"",h=r.deltaY,u="",f=n.Object.NUM_FRACTION_DIGITS;return h&&(u=' dy="'+t(h,f)+'" '),['<tspan x="',t(o,f),'" y="',t(s,f),'" ',u,l,">",n.util.string.escapeXml(i),"</tspan>"].join("")},_setSVGTextLineText:function(t,e,i,n){var r,o,s,a,c,l=this.getHeightOfLine(e),h=-1!==this.textAlign.indexOf("justify"),u="",f=0,d=this._textLines[e];n+=l*(1-this._fontSizeFraction)/this.lineHeight;for(var p=0,g=d.length-1;p<=g;p++)c=p===g||this.charSpacing,u+=d[p],s=this.__charBounds[e][p],0===f?(i+=s.kernedWidth-s.width,f+=s.width):f+=s.kernedWidth,h&&!c&&this._reSpaceAndTab.test(d[p])&&(c=!0),c||(r=r||this.getCompleteStyleDeclaration(e,p),o=this.getCompleteStyleDeclaration(e,p+1),c=this._hasStyleChangedForSvg(r,o)),c&&(a=this._getStyleDeclaration(e,p)||{},t.push(this._createTextCharSpan(u,a,i,n)),u="",r=o,i+=f,f=0)},_pushTextBgRect:function(e,i,r,o,s,a){var c=n.Object.NUM_FRACTION_DIGITS;e.push("\t\t<rect ",this._getFillAttributes(i),' x="',t(r,c),'" y="',t(o,c),'" width="',t(s,c),'" height="',t(a,c),'"></rect>\n')},_setSVGTextLineBg:function(t,e,i,n){for(var r,o,s=this._textLines[e],a=this.getHeightOfLine(e)/this.lineHeight,c=0,l=0,h=this.getValueOfPropertyAt(e,0,"textBackgroundColor"),u=0,f=s.length;u<f;u++)r=this.__charBounds[e][u],o=this.getValueOfPropertyAt(e,u,"textBackgroundColor"),o!==h?(h&&this._pushTextBgRect(t,h,i+l,n,c,a),l=r.left,c=r.width,h=o):c+=r.kernedWidth;o&&this._pushTextBgRect(t,o,i+l,n,c,a)},_getFillAttributes:function(t){var e=t&&"string"===typeof t?new n.Color(t):"";return e&&e.getSource()&&1!==e.getAlpha()?'opacity="'+e.getAlpha()+'" fill="'+e.setAlpha(1).toRgb()+'"':'fill="'+t+'"'},_getSVGLineTopOffset:function(t){for(var e=0,i=0,n=0;n<t;n++)e+=this.getHeightOfLine(n);return i=this.getHeightOfLine(n),{lineTop:e,offset:(this._fontSizeMult-this._fontSizeFraction)*i/(this.lineHeight*this._fontSizeMult)}},getSvgStyles:function(t){var e=n.Object.prototype.getSvgStyles.call(this,t);return e+" white-space: pre;"}})}(),function(t){"use strict";var e=t.fabric||(t.fabric={});e.Textbox=e.util.createClass(e.IText,e.Observable,{type:"textbox",minWidth:20,dynamicMinWidth:2,__cachedLines:null,lockScalingFlip:!0,noScaleCache:!1,_dimensionAffectingProps:e.Text.prototype._dimensionAffectingProps.concat("width"),_wordJoiners:/[ \t\r]/,splitByGrapheme:!1,initDimensions:function(){this.__skipDimension||(this.isEditing&&this.initDelayedCursor(),this.clearContextTop(),this._clearCache(),this.dynamicMinWidth=0,this._styleMap=this._generateStyleMap(this._splitText()),this.dynamicMinWidth>this.width&&this._set("width",this.dynamicMinWidth),-1!==this.textAlign.indexOf("justify")&&this.enlargeSpaces(),this.height=this.calcTextHeight(),this.saveState({propertySet:"_dimensionAffectingProps"}))},_generateStyleMap:function(t){for(var e=0,i=0,n=0,r={},o=0;o<t.graphemeLines.length;o++)"\n"===t.graphemeText[n]&&o>0?(i=0,n++,e++):!this.splitByGrapheme&&this._reSpaceAndTab.test(t.graphemeText[n])&&o>0&&(i++,n++),r[o]={line:e,offset:i},n+=t.graphemeLines[o].length,i+=t.graphemeLines[o].length;return r},styleHas:function(t,i){if(this._styleMap&&!this.isWrapping){var n=this._styleMap[i];n&&(i=n.line)}return e.Text.prototype.styleHas.call(this,t,i)},isEmptyStyles:function(t){if(!this.styles)return!0;var e,i,n=0,r=t+1,o=!1,s=this._styleMap[t],a=this._styleMap[t+1];for(var c in s&&(t=s.line,n=s.offset),a&&(r=a.line,o=r===t,e=a.offset),i="undefined"===typeof t?this.styles:{line:this.styles[t]},i)for(var l in i[c])if(l>=n&&(!o||l<e))for(var h in i[c][l])return!1;return!0},_getStyleDeclaration:function(t,e){if(this._styleMap&&!this.isWrapping){var i=this._styleMap[t];if(!i)return null;t=i.line,e=i.offset+e}return this.callSuper("_getStyleDeclaration",t,e)},_setStyleDeclaration:function(t,e,i){var n=this._styleMap[t];t=n.line,e=n.offset+e,this.styles[t][e]=i},_deleteStyleDeclaration:function(t,e){var i=this._styleMap[t];t=i.line,e=i.offset+e,delete this.styles[t][e]},_getLineStyle:function(t){var e=this._styleMap[t];return!!this.styles[e.line]},_setLineStyle:function(t){var e=this._styleMap[t];this.styles[e.line]={}},_wrapText:function(t,e){var i,n=[];for(this.isWrapping=!0,i=0;i<t.length;i++)n=n.concat(this._wrapLine(t[i],i,e));return this.isWrapping=!1,n},_measureWord:function(t,e,i){var n,r=0,o=!0;i=i||0;for(var s=0,a=t.length;s<a;s++){var c=this._getGraphemeBox(t[s],e,s+i,n,o);r+=c.kernedWidth,n=t[s]}return r},_wrapLine:function(t,i,n,r){var o=0,s=this.splitByGrapheme,a=[],c=[],l=s?e.util.string.graphemeSplit(t):t.split(this._wordJoiners),h="",u=0,f=s?"":" ",d=0,p=0,g=0,v=!0,m=this._getWidthOfCharSpacing();r=r||0;0===l.length&&l.push([]),n-=r;for(var y=0;y<l.length;y++)h=s?l[y]:e.util.string.graphemeSplit(l[y]),d=this._measureWord(h,i,u),u+=h.length,o+=p+d-m,o>n&&!v?(a.push(c),c=[],o=d,v=!0):o+=m,v||s||c.push(f),c=c.concat(h),p=s?0:this._measureWord([f],i,u),u++,v=!1,d>g&&(g=d);return y&&a.push(c),g+r>this.dynamicMinWidth&&(this.dynamicMinWidth=g-m+r),a},isEndOfWrapping:function(t){return!this._styleMap[t+1]||this._styleMap[t+1].line!==this._styleMap[t].line},missingNewlineOffset:function(t){return this.splitByGrapheme?this.isEndOfWrapping(t)?1:0:1},_splitTextIntoLines:function(t){for(var i=e.Text.prototype._splitTextIntoLines.call(this,t),n=this._wrapText(i.lines,this.width),r=new Array(n.length),o=0;o<n.length;o++)r[o]=n[o].join("");return i.lines=r,i.graphemeLines=n,i},getMinWidth:function(){return Math.max(this.minWidth,this.dynamicMinWidth)},_removeExtraneousStyles:function(){var t={};for(var e in this._styleMap)this._textLines[e]&&(t[this._styleMap[e].line]=1);for(var e in this.styles)t[e]||delete this.styles[e]},toObject:function(t){return this.callSuper("toObject",["minWidth","splitByGrapheme"].concat(t))}}),e.Textbox.fromObject=function(t,i){return e.Object._fromObject("Textbox",t,i,"text")}}(e),function(){var t=n.controlsUtils,e=t.scaleSkewCursorStyleHandler,i=t.scaleCursorStyleHandler,r=t.scalingEqually,o=t.scalingYOrSkewingX,s=t.scalingXOrSkewingY,a=t.scaleOrSkewActionName,c=n.Object.prototype.controls;if(c.ml=new n.Control({x:-.5,y:0,cursorStyleHandler:e,actionHandler:s,getActionName:a}),c.mr=new n.Control({x:.5,y:0,cursorStyleHandler:e,actionHandler:s,getActionName:a}),c.mb=new n.Control({x:0,y:.5,cursorStyleHandler:e,actionHandler:o,getActionName:a}),c.mt=new n.Control({x:0,y:-.5,cursorStyleHandler:e,actionHandler:o,getActionName:a}),c.tl=new n.Control({x:-.5,y:-.5,cursorStyleHandler:i,actionHandler:r}),c.tr=new n.Control({x:.5,y:-.5,cursorStyleHandler:i,actionHandler:r}),c.bl=new n.Control({x:-.5,y:.5,cursorStyleHandler:i,actionHandler:r}),c.br=new n.Control({x:.5,y:.5,cursorStyleHandler:i,actionHandler:r}),c.mtr=new n.Control({x:0,y:-.5,actionHandler:t.rotationWithSnapping,cursorStyleHandler:t.rotationStyleHandler,offsetY:-40,withConnection:!0,actionName:"rotate"}),n.Textbox){var l=n.Textbox.prototype.controls={};l.mtr=c.mtr,l.tr=c.tr,l.br=c.br,l.tl=c.tl,l.bl=c.bl,l.mt=c.mt,l.mb=c.mb,l.mr=new n.Control({x:.5,y:0,actionHandler:t.changeWidth,cursorStyleHandler:e,actionName:"resizing"}),l.ml=new n.Control({x:-.5,y:0,actionHandler:t.changeWidth,cursorStyleHandler:e,actionName:"resizing"})}}()}).call(this,i("b639").Buffer)},"7b0b":function(t,e,i){var n=i("1d80");t.exports=function(t){return Object(n(t))}},"7c73":function(t,e,i){var n,r=i("825a"),o=i("37e8"),s=i("7839"),a=i("d012"),c=i("1be4"),l=i("cc12"),h=i("f772"),u=">",f="<",d="prototype",p="script",g=h("IE_PROTO"),v=function(){},m=function(t){return f+p+u+t+f+"/"+p+u},y=function(t){t.write(m("")),t.close();var e=t.parentWindow.Object;return t=null,e},b=function(){var t,e=l("iframe"),i="java"+p+":";return e.style.display="none",c.appendChild(e),e.src=String(i),t=e.contentWindow.document,t.open(),t.write(m("document.F=Object")),t.close(),t.F},w=function(){try{n=document.domain&&new ActiveXObject("htmlfile")}catch(e){}w=n?y(n):b();var t=s.length;while(t--)delete w[d][s[t]];return w()};a[g]=!0,t.exports=Object.create||function(t,e){var i;return null!==t?(v[d]=r(t),i=new v,v[d]=null,i[g]=t):i=w(),void 0===e?i:o(i,e)}},"7db0":function(t,e,i){"use strict";var n=i("23e7"),r=i("b727").find,o=i("44d2"),s="find",a=!0;s in[]&&Array(1)[s]((function(){a=!1})),n({target:"Array",proto:!0,forced:a},{find:function(t){return r(this,t,arguments.length>1?arguments[1]:void 0)}}),o(s)},"7dd0":function(t,e,i){"use strict";var n=i("23e7"),r=i("9ed3"),o=i("e163"),s=i("d2bb"),a=i("d44e"),c=i("9112"),l=i("6eeb"),h=i("b622"),u=i("c430"),f=i("3f8c"),d=i("ae93"),p=d.IteratorPrototype,g=d.BUGGY_SAFARI_ITERATORS,v=h("iterator"),m="keys",y="values",b="entries",w=function(){return this};t.exports=function(t,e,i,h,d,x,_){r(i,e,h);var S,C,T,O=function(t){if(t===d&&D)return D;if(!g&&t in A)return A[t];switch(t){case m:return function(){return new i(this,t)};case y:return function(){return new i(this,t)};case b:return function(){return new i(this,t)}}return function(){return new i(this)}},k=e+" Iterator",E=!1,A=t.prototype,P=A[v]||A["@@iterator"]||d&&A[d],D=!g&&P||O(d),M="Array"==e&&A.entries||P;if(M&&(S=o(M.call(new t)),p!==Object.prototype&&S.next&&(u||o(S)===p||(s?s(S,p):"function"!=typeof S[v]&&c(S,v,w)),a(S,k,!0,!0),u&&(f[k]=w))),d==y&&P&&P.name!==y&&(E=!0,D=function(){return P.call(this)}),u&&!_||A[v]===D||c(A,v,D),f[e]=D,d)if(C={values:O(y),keys:x?D:O(m),entries:O(b)},_)for(T in C)(g||E||!(T in A))&&l(A,T,C[T]);else n({target:e,proto:!0,forced:g||E},C);return C}},"7f75":function(t,e,i){(function(e,i){t.exports=i()})("undefined"!==typeof self&&self,(function(){return function(t){var e={};function i(n){if(e[n])return e[n].exports;var r=e[n]={i:n,l:!1,exports:{}};return t[n].call(r.exports,r,r.exports,i),r.l=!0,r.exports}return i.m=t,i.c=e,i.d=function(t,e,n){i.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:n})},i.r=function(t){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},i.t=function(t,e){if(1&e&&(t=i(t)),8&e)return t;if(4&e&&"object"===typeof t&&t&&t.__esModule)return t;var n=Object.create(null);if(i.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var r in t)i.d(n,r,function(e){return t[e]}.bind(null,r));return n},i.n=function(t){var e=t&&t.__esModule?function(){return t["default"]}:function(){return t};return i.d(e,"a",e),e},i.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},i.p="",i(i.s="fb15")}({"0ca3":function(t,e,i){"use strict";var n=i("c6aa"),r=i.n(n);r.a},7937:function(t,e,i){},"7fca":function(t,e,i){"use strict";var n=i("c10a"),r=i.n(n);r.a},8875:function(t,e,i){var n,r,o;(function(i,s){r=[],n=s,o="function"===typeof n?n.apply(e,r):n,void 0===o||(t.exports=o)})("undefined"!==typeof self&&self,(function(){function t(){if(document.currentScript)return document.currentScript;try{throw new Error}catch(u){var t,e,i,n=/.*at [^(]*\((.*):(.+):(.+)\)$/gi,r=/@([^@]*):(\d+):(\d+)\s*$/gi,o=n.exec(u.stack)||r.exec(u.stack),s=o&&o[1]||!1,a=o&&o[2]||!1,c=document.location.href.replace(document.location.hash,""),l=document.getElementsByTagName("script");s===c&&(t=document.documentElement.outerHTML,e=new RegExp("(?:[^\\n]+?\\n){0,"+(a-2)+"}[^<]*<script>([\\d\\D]*?)<\\/script>[\\d\\D]*","i"),i=t.replace(e,"$1").trim());for(var h=0;h<l.length;h++){if("interactive"===l[h].readyState)return l[h];if(l[h].src===s)return l[h];if(s===c&&l[h].innerHTML&&l[h].innerHTML.trim()===i)return l[h]}return null}}return t}))},9334:function(t,e,i){"use strict";var n=i("7937"),r=i.n(n);r.a},c10a:function(t,e,i){},c6aa:function(t,e,i){},fb15:function(t,e,i){"use strict";if(i.r(e),i.d(e,"DEFAULT_BACKGROUND_COLOR",(function(){return D})),i.d(e,"DEFAULT_BORDER_RADIUS",(function(){return M})),i.d(e,"DEFAULT_ROW_LENGTH",(function(){return j})),i.d(e,"DEFAULT_TRIGGER_CONTAINER_SPACE",(function(){return R})),i.d(e,"DEFAULT_SWATCH_SIZE",(function(){return I})),i.d(e,"DEFAULT_SHOW_BORDER",(function(){return z})),i.d(e,"extractPropertyFromPreset",(function(){return L})),"undefined"!==typeof window){var n=window.document.currentScript,r=i("8875");n=r(),"currentScript"in document||Object.defineProperty(document,"currentScript",{get:r});var o=n&&n.src.match(/(.+\/)[^/]+\.js(\?.*)?$/);o&&(i.p=o[1])}var s=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"vue-swatches",attrs:{tabindex:"-1"},on:{blur:function(e){return t.onBlur(e.relatedTarget)}}},[t.inline?t._e():i("div",{ref:"triggerWrapper",staticClass:"vue-swatches__trigger__wrapper",on:{click:t.togglePopover}},[t._t("trigger",[i("div",{staticClass:"vue-swatches__trigger",class:{"vue-swatches--is-empty":!t.value,"vue-swatches--is-disabled":t.disabled},style:t.triggerStyles},[i("div",{directives:[{name:"show",rawName:"v-show",value:t.isNoColor,expression:"isNoColor"}],staticClass:"vue-swatches__diagonal__wrapper vue-swatches--has-children-centered"},[i("div",{staticClass:"vue-swatches__diagonal"})])])])],2),i("transition",{attrs:{name:"vue-swatches-show-hide"}},[i("div",{directives:[{name:"show",rawName:"v-show",value:t.inline||t.isOpen,expression:"inline || isOpen"}],ref:"containerWrapper",staticClass:"vue-swatches__container",class:{"vue-swatches--inline":t.inline},style:t.containerStyles},[i("div",{staticClass:"vue-swatches__wrapper",style:t.wrapperStyles},[t.isNested?t._l(t.computedSwatches,(function(e,n){return i("div",{key:n,staticClass:"vue-swatches__row"},t._l(e,(function(r,o){return i("v-swatch",{key:o,attrs:{"is-last":n===t.computedSwatches.length-1&&o===e.length,"row-length-setted":null!==t.rowLength||null!==t.presetRowLength,"border-radius":t.computedBorderRadius,disabled:t.getSwatchDisabled(r),inline:t.inline,selected:t.checkEquality(t.getSwatchColor(r),t.value),"swatch-size":t.computedSwatchSize,"spacing-size":t.computedSpacingSize,"show-border":t.getSwatchShowBorder(r),"show-checkbox":t.showCheckbox,"show-labels":t.showLabels,"swatch-color":t.getSwatchColor(r),"swatch-label":t.getSwatchLabel(r),"swatch-alt":t.getSwatchAlt(r),"swatch-style":t.swatchStyle},on:{blur:function(e){return t.onBlur(e)},click:function(e){return t.updateSwatch(r)}},nativeOn:{click:function(e){return t.updateSwatch(r)}}})})),1)})):t._l(t.computedSwatches,(function(e,n){return i("v-swatch",{key:n,attrs:{"is-last":n===t.computedSwatches.length-1,"row-length-setted":null!==t.rowLength||null!==t.presetRowLength,"border-radius":t.computedBorderRadius,disabled:t.getSwatchDisabled(e),inline:t.inline,selected:t.checkEquality(t.getSwatchColor(e),t.value),"swatch-size":t.computedSwatchSize,"spacing-size":t.computedSpacingSize,"show-border":t.getSwatchShowBorder(e),"show-checkbox":t.showCheckbox,"show-labels":t.showLabels,"swatch-color":t.getSwatchColor(e),"swatch-label":t.getSwatchLabel(e),"swatch-alt":t.getSwatchAlt(e),"swatch-style":t.swatchStyle},on:{blur:function(e){return t.onBlur(e)},click:function(i){return t.updateSwatch(e)}},nativeOn:{click:function(i){return t.updateSwatch(e)}}})}))],2),t.showFallback?i("div",{staticClass:"vue-swatches__fallback__wrapper",style:t.computedFallbackWrapperStyles},[i("span",{staticClass:"vue-swatches__fallback__input--wrapper"},[i("input",{ref:"fallbackInput",staticClass:"vue-swatches__fallback__input",class:t.fallbackInputClass,attrs:{type:t.fallbackInputType},domProps:{value:t.internalValue},on:{input:function(e){return t.updateSwatch(e.target.value,{fromFallbackInput:!0})}}})]),t.showFallbackOk?i("button",{staticClass:"vue-swatches__fallback__button",class:t.fallbackOkClass,on:{click:function(e){return e.preventDefault(),t.onFallbackButtonClick(e)}}},[t._v(" "+t._s(t.fallbackOkText)+" ")]):t._e()]):t._e()])])],1)},a=[],c={colors:["#1FBC9C","#1CA085","#2ECC70","#27AF60","#3398DB","#2980B9","#A463BF","#8E43AD","#3D556E","#222F3D","#F2C511","#F39C19","#E84B3C","#C0382B","#DDE6E8","#BDC3C8"],rowLength:4},l={colors:["#CC0001","#E36101","#FFCC00","#009900","#0066CB","#000000","#FFFFFF"],showBorder:!0},h={colors:[["#000000","#434343","#666666","#999999","#b7b7b7","#cccccc","#d9d9d9","#efefef","#f3f3f3","#ffffff"],["#980000","#ff0000","#ff9900","#ffff00","#00ff00","#00ffff","#4a86e8","#0000ff","#9900ff","#ff00ff"],["#e6b8af","#f4cccc","#fce5cd","#fff2cc","#d9ead3","#d0e0e3","#c9daf8","#cfe2f3","#d9d2e9","#ead1dc"],["#dd7e6b","#ea9999","#f9cb9c","#ffe599","#b6d7a8","#a2c4c9","#a4c2f4","#9fc5e8","#b4a7d6","#d5a6bd"],["#cc4125","#e06666","#f6b26b","#ffd966","#93c47d","#76a5af","#6d9eeb","#6fa8dc","#8e7cc3","#c27ba0"],["#a61c00","#cc0000","#e69138","#f1c232","#6aa84f","#45818e","#3c78d8","#3d85c6","#674ea7","#a64d79"],["#85200c","#990000","#b45f06","#bf9000","#38761d","#134f5c","#1155cc","#0b5394","#351c75","#741b47"],["#5b0f00","#660000","#783f04","#7f6000","#274e13","#0c343d","#1c4587","#073763","#20124d","#4c1130"]],borderRadius:"0",rowLength:10,swatchSize:24,spacingSize:0},u=function(){var t=this,e=this,i=e.$createElement,n=e._self._c||i;return n("div",{staticClass:"vue-swatches__swatch",class:{"vue-swatches__swatch--border":e.showBorder,"vue-swatches__swatch--selected":e.selected,"vue-swatches__swatch--is-disabled":e.disabled},style:e.swatchStyles,attrs:{"aria-label":e.swatchAlt,role:"button",tabindex:"0"},on:{keyup:function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"enter",13,t.key,"Enter")?null:e.$emit("click",e.swatchColor)},blur:function(e){return t.$emit("blur",e.relatedTarget)}}},[""===e.swatchColor?n("div",{staticClass:"vue-swatches__diagonal__wrapper vue-swatches--has-children-centered"},[n("div",{staticClass:"vue-swatches__diagonal"})]):e._e(),n("v-check",{directives:[{name:"show",rawName:"v-show",value:e.showCheckbox&&e.selected,expression:"showCheckbox && selected"}]}),e.showLabels?n("div",{staticClass:"vue-swatches__swatch__label",style:e.labelStyles},[e._v(" "+e._s(e.swatchLabel)+" ")]):e._e()],1)},f=[],d=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"vue-swatches__check__wrapper vue-swatches--has-children-centered"},[i("div",{staticClass:"vue-swatches__check__circle vue-swatches--has-children-centered"},[i("svg",{staticClass:"check",attrs:{version:"1.1",role:"presentation",width:"12",height:"12",viewBox:"0 0 1792 1792"}},[i("path",{staticClass:"vue-swatches__check__path",attrs:{d:"M1671 566q0 40-28 68l-724 724-136 136q-28 28-68 28t-68-28l-136-136-362-362q-28-28-28-68t28-68l136-136q28-28 68-28t68 28l294 295 656-657q28-28 68-28t68 28l136 136q28 28 28 68z"}})])])])},p=[],g={name:"v-check",data:function(){return{}}},v=g;function m(t,e,i,n,r,o,s,a){var c,l="function"===typeof t?t.options:t;if(e&&(l.render=e,l.staticRenderFns=i,l._compiled=!0),n&&(l.functional=!0),o&&(l._scopeId="data-v-"+o),s?(c=function(t){t=t||this.$vnode&&this.$vnode.ssrContext||this.parent&&this.parent.$vnode&&this.parent.$vnode.ssrContext,t||"undefined"===typeof __VUE_SSR_CONTEXT__||(t=__VUE_SSR_CONTEXT__),r&&r.call(this,t),t&&t._registeredComponents&&t._registeredComponents.add(s)},l._ssrRegister=c):r&&(c=a?function(){r.call(this,this.$root.$options.shadowRoot)}:r),c)if(l.functional){l._injectStyles=c;var h=l.render;l.render=function(t,e){return c.call(e),h(t,e)}}else{var u=l.beforeCreate;l.beforeCreate=u?[].concat(u,c):[c]}return{exports:t,options:l}}i("7fca");var y=m(v,d,p,!1,null,null,null),b=y.exports;function w(t,e){var i=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),i.push.apply(i,n)}return i}function x(t){for(var e=1;e<arguments.length;e++){var i=null!=arguments[e]?arguments[e]:{};e%2?w(Object(i),!0).forEach((function(e){_(t,e,i[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(i)):w(Object(i)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(i,e))}))}return t}function _(t,e,i){return e in t?Object.defineProperty(t,e,{value:i,enumerable:!0,configurable:!0,writable:!0}):t[e]=i,t}var S={name:"v-swatch",components:{VCheck:b},props:{borderRadius:{type:String},isLast:{type:Boolean,default:!1},rowLengthSetted:{type:Boolean,default:!1},disabled:{type:Boolean},inline:{type:Boolean},selected:{type:Boolean,default:!1},showCheckbox:{type:Boolean},showBorder:{type:Boolean},showLabels:{type:Boolean},spacingSize:{type:Number},swatchColor:{type:String,default:""},swatchLabel:{type:String},swatchAlt:{type:String},swatchSize:{type:Number},swatchStyle:{type:Object}},data:function(){return{}},computed:{computedLabelStyle:function(){var t=8+3*Math.floor(this.spacingSize/5);return{bottom:"-".concat(t,"px")}},computedSwatchStyle:function(){var t={width:"".concat(this.swatchSize,"px"),height:"".concat(this.swatchSize,"px"),borderRadius:this.borderRadius,backgroundColor:""!==this.swatchColor?this.swatchColor:"#FFFFFF",cursor:this.cursorStyle};return this.inline&&this.isLast||(t.marginRight="".concat(this.spacingSize,"px")),this.inline&&!this.rowLengthSetted?t:x({},t,{marginBottom:"".concat(this.spacingSize,"px")})},cursorStyle:function(){return this.disabled?"not-allowed":"pointer"},labelStyles:function(){return[this.computedLabelStyle]},swatchStyles:function(){return[this.computedSwatchStyle,this.swatchStyle]}}},C=S,T=(i("0ca3"),m(C,u,f,!1,null,null,null)),O=T.exports;function k(t){return k="function"===typeof Symbol&&"symbol"===typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"===typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},k(t)}function E(t,e){var i=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),i.push.apply(i,n)}return i}function A(t){for(var e=1;e<arguments.length;e++){var i=null!=arguments[e]?arguments[e]:{};e%2?E(Object(i),!0).forEach((function(e){P(t,e,i[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(i)):E(Object(i)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(i,e))}))}return t}function P(t,e,i){return e in t?Object.defineProperty(t,e,{value:i,enumerable:!0,configurable:!0,writable:!0}):t[e]=i,t}var D="#ffffff",M="10px",j=4,R=5,I=42,z=!1,L=function(t,e,i){return"string"!==typeof t?null:"text-basic"===t?void 0===l[e]?null:l[e]:"text-advanced"===t?void 0===h[e]?null:h[e]:"basic"===t||i?void 0===c[e]?null:c[e]:null},F={name:"v-swatches",components:{VSwatch:O},props:{backgroundColor:{type:String,default:D},closeOnSelect:{type:Boolean,default:!0},swatches:{type:[Array,String],default:function(){return"basic"}},disabled:{type:Boolean,default:!1},fallbackInputClass:{type:[Array,Object,String],default:null},fallbackInputType:{type:String,default:function(){return"text"},validator:function(t){return-1!==["text","color"].indexOf(t)}},fallbackOkClass:{type:[Array,Object,String],default:null},fallbackOkText:{type:String,default:"Ok"},inline:{type:Boolean,default:!1},shapes:{type:String,default:"squares"},popoverX:{type:String,default:"right"},popoverY:{type:String,default:"bottom"},rowLength:{type:[Number,String],default:null},showBorder:{type:Boolean,default:null},showFallback:{type:Boolean,default:!1},showCheckbox:{type:Boolean,default:!0},showLabels:{type:Boolean,default:!1},spacingSize:{type:Number,default:null},swatchSize:{type:[Number,String],default:null},swatchStyle:{type:[Object,Array],default:function(){}},triggerStyle:{type:[Object,Array],default:function(){}},wrapperStyle:{type:[Object,Array],default:function(){}},value:{type:String,default:null}},data:function(){return{alwaysOnScreenStyle:{},componentMounted:!1,internalValue:this.value,internalIsOpen:!1}},computed:{isNested:function(){return!!(this.computedSwatches&&this.computedSwatches.length&&this.computedSwatches[0]instanceof Array)},isOpen:function(){return!this.inline&&this.internalIsOpen},isNoColor:function(){return this.checkEquality("",this.value)},presetBorderRadius:function(){return L(this.swatches,"borderRadius")},presetRowLength:function(){return L(this.swatches,"rowLength")},presetShowBorder:function(){return L(this.swatches,"showBorder")},presetSwatchSize:function(){return L(this.swatches,"swatchSize")},presetSpacingSize:function(){return L(this.swatches,"spacingSize")},computedSwatches:function(){return this.swatches instanceof Array?this.swatches:"string"===typeof this.swatches?L(this.swatches,"colors",!0):[]},computedBorderRadius:function(){return null!==this.presetBorderRadius?this.presetBorderRadius:this.borderRadius},computedRowLength:function(){return null!==this.rowLength?Number(this.rowLength):null!==this.presetRowLength?this.presetRowLength:this.computedSwatches.length<j&&!this.isNested?this.computedSwatches.length:j},computedSwatchSize:function(){return null!==this.swatchSize?Number(this.swatchSize):null!==this.presetSwatchSize?this.presetSwatchSize:I},computedSpacingSize:function(){return null!==this.spacingSize?this.spacingSize:null!==this.presetSpacingSize?this.presetSpacingSize:Math.round(.25*this.computedSwatchSize)},computedShowBorder:function(){return null!==this.showBorder?this.showBorder:null!==this.presetShowBorder?this.presetShowBorder:z},showFallbackOk:function(){return!this.inline},borderRadius:function(){return"squares"===this.shapes?"".concat(Math.round(.25*this.computedSwatchSize),"px"):"circles"===this.shapes?"50%":""},wrapperWidth:function(){return this.computedRowLength*(this.computedSwatchSize+this.computedSpacingSize)},computedtriggerStyle:function(){return{width:"42px",height:"42px",backgroundColor:this.value?this.value:"#ffffff",borderRadius:"circles"===this.shapes?"50%":M}},triggerStyles:function(){return[this.computedtriggerStyle,this.triggerStyle]},containerStyles:function(){var t=[{backgroundColor:this.backgroundColor},this.alwaysOnScreenStyle];return this.inline?t:[].concat(t,[{padding:"5px",marginBottom:"5px"}])},computedWrapperStyle:function(){return this.inline?{}:{paddingTop:"".concat(this.computedSpacingSize,"px"),paddingLeft:"".concat(this.computedSpacingSize,"px"),width:"".concat(this.wrapperWidth,"px")}},wrapperStyles:function(){return[this.computedWrapperStyle,this.wrapperStyle]},computedFallbackWrapperStyle:function(){var t={marginLeft:"".concat(this.computedSpacingSize,"px"),paddingBottom:"".concat(this.computedSpacingSize,"px")};return this.inline?t:A({},t,{width:"".concat(this.wrapperWidth-this.computedSpacingSize,"px")})},computedFallbackWrapperStyles:function(){return[this.computedFallbackWrapperStyle]}},watch:{value:function(t){this.internalValue=t}},mounted:function(){this.componentMounted=!0},methods:{checkEquality:function(t,e){return!(!t&&""!==t||!e&&""!==e)&&t.toUpperCase()===e.toUpperCase()},hidePopover:function(){this.internalIsOpen=!1,this.$el.blur(),this.$emit("close",this.internalValue)},getAlwaysOnScreenStyle:function(){var t={},e=this.$refs.triggerWrapper,i=this.$refs.containerWrapper;if(!this.componentMounted||this.inline||!e||!window||!document)return t;var n=e.getBoundingClientRect(),r=5,o=(document.documentElement.clientWidth||window.innerWidth)-5,s=5,a=(document.documentElement.clientHeight||window.innerHeight)-5;i.style.visibility="hidden",i.style.display="block";var c=i.getBoundingClientRect();return i.style.display="none",i.style.visibility="visible","top"===this.popoverY?n.top-c.height<s?(t.top="".concat(n.height+R,"px"),t.bottom="auto"):(t.bottom="".concat(n.height+R,"px"),t.top="auto"):"bottom"===this.popoverY&&(n.bottom+c.height>a?(t.bottom="".concat(n.height+R,"px"),t.top="auto"):(t.top="".concat(n.height+R,"px"),t.bottom="auto")),"left"===this.popoverX?n.right-c.width<r?(t.left=0,t.right="auto"):(t.right=0,t.left="auto"):"right"===this.popoverX&&(n.left+c.width>o?(t.right=0,t.left="auto"):(t.left=0,t.right="auto")),t},getSwatchShowBorder:function(t){return"string"===typeof t?this.computedShowBorder:"object"===k(t)?void 0!==t.showBorder?t.showBorder:this.computedShowBorder:void 0},getSwatchColor:function(t){return"string"===typeof t?t:"object"===k(t)?t.color:void 0},getSwatchDisabled:function(t){return"string"===typeof t?this.disabled:"object"===k(t)?void 0!==t.disabled?t.disabled:this.disabled:void 0},getSwatchLabel:function(t){return"string"===typeof t?t:"object"===k(t)?t.label||t.color:void 0},getSwatchAlt:function(t){return"string"===typeof t?t:"object"===k(t)?t.alt||this.getSwatchLabel(t):void 0},onBlur:function(t){this.isOpen&&(null!==t&&this.$el.contains(t)||(this.internalIsOpen=!1,this.$emit("close",this.internalValue)))},onFallbackButtonClick:function(){this.hidePopover()},showPopover:function(){this.isOpen||this.inline||this.disabled||(this.alwaysOnScreenStyle=this.getAlwaysOnScreenStyle(),this.internalIsOpen=!0,this.$el.focus(),this.$emit("open"))},togglePopover:function(){this.isOpen?this.hidePopover():this.showPopover()},updateSwatch:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},i=e.fromFallbackInput;if(!this.getSwatchDisabled(t)){var n=this.getSwatchColor(t);this.internalValue=n,this.$emit("input",n),!this.closeOnSelect||this.inline||i||this.hidePopover()}}}},B=F,N=(i("9334"),m(B,s,a,!1,null,null,null)),W=N.exports;e["default"]=W}})["default"]}))},"7f9a":function(t,e,i){var n=i("da84"),r=i("8925"),o=n.WeakMap;t.exports="function"===typeof o&&/native code/.test(r(o))},"81d5":function(t,e,i){"use strict";var n=i("7b0b"),r=i("23cb"),o=i("50c4");t.exports=function(t){var e=n(this),i=o(e.length),s=arguments.length,a=r(s>1?arguments[1]:void 0,i),c=s>2?arguments[2]:void 0,l=void 0===c?i:r(c,i);while(l>a)e[a++]=t;return e}},"825a":function(t,e,i){var n=i("861d");t.exports=function(t){if(!n(t))throw TypeError(String(t)+" is not an object");return t}},"83ab":function(t,e,i){var n=i("d039");t.exports=!n((function(){return 7!=Object.defineProperty({},1,{get:function(){return 7}})[1]}))},8418:function(t,e,i){"use strict";var n=i("c04e"),r=i("9bf2"),o=i("5c6c");t.exports=function(t,e,i){var s=n(e);s in t?r.f(t,s,o(0,i)):t[s]=i}},"861d":function(t,e){t.exports=function(t){return"object"===typeof t?null!==t:"function"===typeof t}},8875:function(t,e,i){var n,r,o;(function(i,s){r=[],n=s,o="function"===typeof n?n.apply(e,r):n,void 0===o||(t.exports=o)})("undefined"!==typeof self&&self,(function(){function t(){var e=Object.getOwnPropertyDescriptor(document,"currentScript");if(!e&&"currentScript"in document&&document.currentScript)return document.currentScript;if(e&&e.get!==t&&document.currentScript)return document.currentScript;try{throw new Error}catch(d){var i,n,r,o=/.*at [^(]*\((.*):(.+):(.+)\)$/gi,s=/@([^@]*):(\d+):(\d+)\s*$/gi,a=o.exec(d.stack)||s.exec(d.stack),c=a&&a[1]||!1,l=a&&a[2]||!1,h=document.location.href.replace(document.location.hash,""),u=document.getElementsByTagName("script");c===h&&(i=document.documentElement.outerHTML,n=new RegExp("(?:[^\\n]+?\\n){0,"+(l-2)+"}[^<]*<script>([\\d\\D]*?)<\\/script>[\\d\\D]*","i"),r=i.replace(n,"$1").trim());for(var f=0;f<u.length;f++){if("interactive"===u[f].readyState)return u[f];if(u[f].src===c)return u[f];if(c===h&&u[f].innerHTML&&u[f].innerHTML.trim()===r)return u[f]}return null}}return t}))},8925:function(t,e,i){var n=i("c6cd"),r=Function.toString;"function"!=typeof n.inspectSource&&(n.inspectSource=function(t){return r.call(t)}),t.exports=n.inspectSource},"8aa5":function(t,e,i){"use strict";var n=i("6547").charAt;t.exports=function(t,e,i){return e+(i?n(t,e).length:1)}},"8bbf":function(e,i){e.exports=t},"90e3":function(t,e){var i=0,n=Math.random();t.exports=function(t){return"Symbol("+String(void 0===t?"":t)+")_"+(++i+n).toString(36)}},9112:function(t,e,i){var n=i("83ab"),r=i("9bf2"),o=i("5c6c");t.exports=n?function(t,e,i){return r.f(t,e,o(1,i))}:function(t,e,i){return t[e]=i,t}},9152:function(t,e){
/*! ieee754. BSD-3-Clause License. Feross Aboukhadijeh <https://feross.org/opensource> */
e.read=function(t,e,i,n,r){var o,s,a=8*r-n-1,c=(1<<a)-1,l=c>>1,h=-7,u=i?r-1:0,f=i?-1:1,d=t[e+u];for(u+=f,o=d&(1<<-h)-1,d>>=-h,h+=a;h>0;o=256*o+t[e+u],u+=f,h-=8);for(s=o&(1<<-h)-1,o>>=-h,h+=n;h>0;s=256*s+t[e+u],u+=f,h-=8);if(0===o)o=1-l;else{if(o===c)return s?NaN:1/0*(d?-1:1);s+=Math.pow(2,n),o-=l}return(d?-1:1)*s*Math.pow(2,o-n)},e.write=function(t,e,i,n,r,o){var s,a,c,l=8*o-r-1,h=(1<<l)-1,u=h>>1,f=23===r?Math.pow(2,-24)-Math.pow(2,-77):0,d=n?0:o-1,p=n?1:-1,g=e<0||0===e&&1/e<0?1:0;for(e=Math.abs(e),isNaN(e)||e===1/0?(a=isNaN(e)?1:0,s=h):(s=Math.floor(Math.log(e)/Math.LN2),e*(c=Math.pow(2,-s))<1&&(s--,c*=2),e+=s+u>=1?f/c:f*Math.pow(2,1-u),e*c>=2&&(s++,c/=2),s+u>=h?(a=0,s=h):s+u>=1?(a=(e*c-1)*Math.pow(2,r),s+=u):(a=e*Math.pow(2,u-1)*Math.pow(2,r),s=0));r>=8;t[i+d]=255&a,d+=p,a/=256,r-=8);for(s=s<<r|a,l+=r;l>0;t[i+d]=255&s,d+=p,s/=256,l-=8);t[i+d-p]|=128*g}},9263:function(t,e,i){"use strict";var n=i("ad6d"),r=i("9f7f"),o=i("5692"),s=RegExp.prototype.exec,a=o("native-string-replace",String.prototype.replace),c=s,l=function(){var t=/a/,e=/b*/g;return s.call(t,"a"),s.call(e,"a"),0!==t.lastIndex||0!==e.lastIndex}(),h=r.UNSUPPORTED_Y||r.BROKEN_CARET,u=void 0!==/()??/.exec("")[1],f=l||u||h;f&&(c=function(t){var e,i,r,o,c=this,f=h&&c.sticky,d=n.call(c),p=c.source,g=0,v=t;return f&&(d=d.replace("y",""),-1===d.indexOf("g")&&(d+="g"),v=String(t).slice(c.lastIndex),c.lastIndex>0&&(!c.multiline||c.multiline&&"\n"!==t[c.lastIndex-1])&&(p="(?: "+p+")",v=" "+v,g++),i=new RegExp("^(?:"+p+")",d)),u&&(i=new RegExp("^"+p+"$(?!\\s)",d)),l&&(e=c.lastIndex),r=s.call(f?i:c,v),f?r?(r.input=r.input.slice(g),r[0]=r[0].slice(g),r.index=c.lastIndex,c.lastIndex+=r[0].length):c.lastIndex=0:l&&r&&(c.lastIndex=c.global?r.index+r[0].length:e),u&&r&&r.length>1&&a.call(r[0],i,(function(){for(o=1;o<arguments.length-2;o++)void 0===arguments[o]&&(r[o]=void 0)})),r}),t.exports=c},"94ca":function(t,e,i){var n=i("d039"),r=/#|\.prototype\./,o=function(t,e){var i=a[s(t)];return i==l||i!=c&&("function"==typeof e?n(e):!!e)},s=o.normalize=function(t){return String(t).replace(r,".").toLowerCase()},a=o.data={},c=o.NATIVE="N",l=o.POLYFILL="P";t.exports=o},"96cf":function(t,e,i){var n=function(t){"use strict";var e,i=Object.prototype,n=i.hasOwnProperty,r="function"===typeof Symbol?Symbol:{},o=r.iterator||"@@iterator",s=r.asyncIterator||"@@asyncIterator",a=r.toStringTag||"@@toStringTag";function c(t,e,i){return Object.defineProperty(t,e,{value:i,enumerable:!0,configurable:!0,writable:!0}),t[e]}try{c({},"")}catch(M){c=function(t,e,i){return t[e]=i}}function l(t,e,i,n){var r=e&&e.prototype instanceof v?e:v,o=Object.create(r.prototype),s=new A(n||[]);return o._invoke=T(t,i,s),o}function h(t,e,i){try{return{type:"normal",arg:t.call(e,i)}}catch(M){return{type:"throw",arg:M}}}t.wrap=l;var u="suspendedStart",f="suspendedYield",d="executing",p="completed",g={};function v(){}function m(){}function y(){}var b={};b[o]=function(){return this};var w=Object.getPrototypeOf,x=w&&w(w(P([])));x&&x!==i&&n.call(x,o)&&(b=x);var _=y.prototype=v.prototype=Object.create(b);function S(t){["next","throw","return"].forEach((function(e){c(t,e,(function(t){return this._invoke(e,t)}))}))}function C(t,e){function i(r,o,s,a){var c=h(t[r],t,o);if("throw"!==c.type){var l=c.arg,u=l.value;return u&&"object"===typeof u&&n.call(u,"__await")?e.resolve(u.__await).then((function(t){i("next",t,s,a)}),(function(t){i("throw",t,s,a)})):e.resolve(u).then((function(t){l.value=t,s(l)}),(function(t){return i("throw",t,s,a)}))}a(c.arg)}var r;function o(t,n){function o(){return new e((function(e,r){i(t,n,e,r)}))}return r=r?r.then(o,o):o()}this._invoke=o}function T(t,e,i){var n=u;return function(r,o){if(n===d)throw new Error("Generator is already running");if(n===p){if("throw"===r)throw o;return D()}i.method=r,i.arg=o;while(1){var s=i.delegate;if(s){var a=O(s,i);if(a){if(a===g)continue;return a}}if("next"===i.method)i.sent=i._sent=i.arg;else if("throw"===i.method){if(n===u)throw n=p,i.arg;i.dispatchException(i.arg)}else"return"===i.method&&i.abrupt("return",i.arg);n=d;var c=h(t,e,i);if("normal"===c.type){if(n=i.done?p:f,c.arg===g)continue;return{value:c.arg,done:i.done}}"throw"===c.type&&(n=p,i.method="throw",i.arg=c.arg)}}}function O(t,i){var n=t.iterator[i.method];if(n===e){if(i.delegate=null,"throw"===i.method){if(t.iterator["return"]&&(i.method="return",i.arg=e,O(t,i),"throw"===i.method))return g;i.method="throw",i.arg=new TypeError("The iterator does not provide a 'throw' method")}return g}var r=h(n,t.iterator,i.arg);if("throw"===r.type)return i.method="throw",i.arg=r.arg,i.delegate=null,g;var o=r.arg;return o?o.done?(i[t.resultName]=o.value,i.next=t.nextLoc,"return"!==i.method&&(i.method="next",i.arg=e),i.delegate=null,g):o:(i.method="throw",i.arg=new TypeError("iterator result is not an object"),i.delegate=null,g)}function k(t){var e={tryLoc:t[0]};1 in t&&(e.catchLoc=t[1]),2 in t&&(e.finallyLoc=t[2],e.afterLoc=t[3]),this.tryEntries.push(e)}function E(t){var e=t.completion||{};e.type="normal",delete e.arg,t.completion=e}function A(t){this.tryEntries=[{tryLoc:"root"}],t.forEach(k,this),this.reset(!0)}function P(t){if(t){var i=t[o];if(i)return i.call(t);if("function"===typeof t.next)return t;if(!isNaN(t.length)){var r=-1,s=function i(){while(++r<t.length)if(n.call(t,r))return i.value=t[r],i.done=!1,i;return i.value=e,i.done=!0,i};return s.next=s}}return{next:D}}function D(){return{value:e,done:!0}}return m.prototype=_.constructor=y,y.constructor=m,m.displayName=c(y,a,"GeneratorFunction"),t.isGeneratorFunction=function(t){var e="function"===typeof t&&t.constructor;return!!e&&(e===m||"GeneratorFunction"===(e.displayName||e.name))},t.mark=function(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,y):(t.__proto__=y,c(t,a,"GeneratorFunction")),t.prototype=Object.create(_),t},t.awrap=function(t){return{__await:t}},S(C.prototype),C.prototype[s]=function(){return this},t.AsyncIterator=C,t.async=function(e,i,n,r,o){void 0===o&&(o=Promise);var s=new C(l(e,i,n,r),o);return t.isGeneratorFunction(i)?s:s.next().then((function(t){return t.done?t.value:s.next()}))},S(_),c(_,a,"Generator"),_[o]=function(){return this},_.toString=function(){return"[object Generator]"},t.keys=function(t){var e=[];for(var i in t)e.push(i);return e.reverse(),function i(){while(e.length){var n=e.pop();if(n in t)return i.value=n,i.done=!1,i}return i.done=!0,i}},t.values=P,A.prototype={constructor:A,reset:function(t){if(this.prev=0,this.next=0,this.sent=this._sent=e,this.done=!1,this.delegate=null,this.method="next",this.arg=e,this.tryEntries.forEach(E),!t)for(var i in this)"t"===i.charAt(0)&&n.call(this,i)&&!isNaN(+i.slice(1))&&(this[i]=e)},stop:function(){this.done=!0;var t=this.tryEntries[0],e=t.completion;if("throw"===e.type)throw e.arg;return this.rval},dispatchException:function(t){if(this.done)throw t;var i=this;function r(n,r){return a.type="throw",a.arg=t,i.next=n,r&&(i.method="next",i.arg=e),!!r}for(var o=this.tryEntries.length-1;o>=0;--o){var s=this.tryEntries[o],a=s.completion;if("root"===s.tryLoc)return r("end");if(s.tryLoc<=this.prev){var c=n.call(s,"catchLoc"),l=n.call(s,"finallyLoc");if(c&&l){if(this.prev<s.catchLoc)return r(s.catchLoc,!0);if(this.prev<s.finallyLoc)return r(s.finallyLoc)}else if(c){if(this.prev<s.catchLoc)return r(s.catchLoc,!0)}else{if(!l)throw new Error("try statement without catch or finally");if(this.prev<s.finallyLoc)return r(s.finallyLoc)}}}},abrupt:function(t,e){for(var i=this.tryEntries.length-1;i>=0;--i){var r=this.tryEntries[i];if(r.tryLoc<=this.prev&&n.call(r,"finallyLoc")&&this.prev<r.finallyLoc){var o=r;break}}o&&("break"===t||"continue"===t)&&o.tryLoc<=e&&e<=o.finallyLoc&&(o=null);var s=o?o.completion:{};return s.type=t,s.arg=e,o?(this.method="next",this.next=o.finallyLoc,g):this.complete(s)},complete:function(t,e){if("throw"===t.type)throw t.arg;return"break"===t.type||"continue"===t.type?this.next=t.arg:"return"===t.type?(this.rval=this.arg=t.arg,this.method="return",this.next="end"):"normal"===t.type&&e&&(this.next=e),g},finish:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var i=this.tryEntries[e];if(i.finallyLoc===t)return this.complete(i.completion,i.afterLoc),E(i),g}},catch:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var i=this.tryEntries[e];if(i.tryLoc===t){var n=i.completion;if("throw"===n.type){var r=n.arg;E(i)}return r}}throw new Error("illegal catch attempt")},delegateYield:function(t,i,n){return this.delegate={iterator:P(t),resultName:i,nextLoc:n},"next"===this.method&&(this.arg=e),g}},t}(t.exports);try{regeneratorRuntime=n}catch(r){Function("r","regeneratorRuntime = r")(n)}},"99af":function(t,e,i){"use strict";var n=i("23e7"),r=i("d039"),o=i("e8b5"),s=i("861d"),a=i("7b0b"),c=i("50c4"),l=i("8418"),h=i("65f0"),u=i("1dde"),f=i("b622"),d=i("2d00"),p=f("isConcatSpreadable"),g=9007199254740991,v="Maximum allowed index exceeded",m=d>=51||!r((function(){var t=[];return t[p]=!1,t.concat()[0]!==t})),y=u("concat"),b=function(t){if(!s(t))return!1;var e=t[p];return void 0!==e?!!e:o(t)},w=!m||!y;n({target:"Array",proto:!0,forced:w},{concat:function(t){var e,i,n,r,o,s=a(this),u=h(s,0),f=0;for(e=-1,n=arguments.length;e<n;e++)if(o=-1===e?s:arguments[e],b(o)){if(r=c(o.length),f+r>g)throw TypeError(v);for(i=0;i<r;i++,f++)i in o&&l(u,f,o[i])}else{if(f>=g)throw TypeError(v);l(u,f++,o)}return u.length=f,u}})},"9bf2":function(t,e,i){var n=i("83ab"),r=i("0cfb"),o=i("825a"),s=i("c04e"),a=Object.defineProperty;e.f=n?a:function(t,e,i){if(o(t),e=s(e,!0),o(i),r)try{return a(t,e,i)}catch(n){}if("get"in i||"set"in i)throw TypeError("Accessors not supported");return"value"in i&&(t[e]=i.value),t}},"9ed3":function(t,e,i){"use strict";var n=i("ae93").IteratorPrototype,r=i("7c73"),o=i("5c6c"),s=i("d44e"),a=i("3f8c"),c=function(){return this};t.exports=function(t,e,i){var l=e+" Iterator";return t.prototype=r(n,{next:o(1,i)}),s(t,l,!1,!0),a[l]=c,t}},"9f7f":function(t,e,i){"use strict";var n=i("d039");function r(t,e){return RegExp(t,e)}e.UNSUPPORTED_Y=n((function(){var t=r("a","y");return t.lastIndex=2,null!=t.exec("abcd")})),e.BROKEN_CARET=n((function(){var t=r("^r","gy");return t.lastIndex=2,null!=t.exec("str")}))},a434:function(t,e,i){"use strict";var n=i("23e7"),r=i("23cb"),o=i("a691"),s=i("50c4"),a=i("7b0b"),c=i("65f0"),l=i("8418"),h=i("1dde"),u=h("splice"),f=Math.max,d=Math.min,p=9007199254740991,g="Maximum allowed length exceeded";n({target:"Array",proto:!0,forced:!u},{splice:function(t,e){var i,n,h,u,v,m,y=a(this),b=s(y.length),w=r(t,b),x=arguments.length;if(0===x?i=n=0:1===x?(i=0,n=b-w):(i=x-2,n=d(f(o(e),0),b-w)),b+i-n>p)throw TypeError(g);for(h=c(y,n),u=0;u<n;u++)v=w+u,v in y&&l(h,u,y[v]);if(h.length=n,i<n){for(u=w;u<b-n;u++)v=u+n,m=u+i,v in y?y[m]=y[v]:delete y[m];for(u=b;u>b-n+i;u--)delete y[u-1]}else if(i>n)for(u=b-n;u>w;u--)v=u+n-1,m=u+i-1,v in y?y[m]=y[v]:delete y[m];for(u=0;u<i;u++)y[u+w]=arguments[u+2];return y.length=b-n+i,h}})},a4b4:function(t,e,i){var n=i("342f");t.exports=/web0s(?!.*chrome)/i.test(n)},a4d3:function(t,e,i){"use strict";var n=i("23e7"),r=i("da84"),o=i("d066"),s=i("c430"),a=i("83ab"),c=i("4930"),l=i("fdbf"),h=i("d039"),u=i("5135"),f=i("e8b5"),d=i("861d"),p=i("825a"),g=i("7b0b"),v=i("fc6a"),m=i("c04e"),y=i("5c6c"),b=i("7c73"),w=i("df75"),x=i("241c"),_=i("057f"),S=i("7418"),C=i("06cf"),T=i("9bf2"),O=i("d1e7"),k=i("9112"),E=i("6eeb"),A=i("5692"),P=i("f772"),D=i("d012"),M=i("90e3"),j=i("b622"),R=i("e538"),I=i("746f"),z=i("d44e"),L=i("69f3"),F=i("b727").forEach,B=P("hidden"),N="Symbol",W="prototype",H=j("toPrimitive"),Y=L.set,X=L.getterFor(N),U=Object[W],V=r.Symbol,G=o("JSON","stringify"),$=C.f,q=T.f,K=_.f,Z=O.f,J=A("symbols"),Q=A("op-symbols"),tt=A("string-to-symbol-registry"),et=A("symbol-to-string-registry"),it=A("wks"),nt=r.QObject,rt=!nt||!nt[W]||!nt[W].findChild,ot=a&&h((function(){return 7!=b(q({},"a",{get:function(){return q(this,"a",{value:7}).a}})).a}))?function(t,e,i){var n=$(U,e);n&&delete U[e],q(t,e,i),n&&t!==U&&q(U,e,n)}:q,st=function(t,e){var i=J[t]=b(V[W]);return Y(i,{type:N,tag:t,description:e}),a||(i.description=e),i},at=l?function(t){return"symbol"==typeof t}:function(t){return Object(t)instanceof V},ct=function(t,e,i){t===U&&ct(Q,e,i),p(t);var n=m(e,!0);return p(i),u(J,n)?(i.enumerable?(u(t,B)&&t[B][n]&&(t[B][n]=!1),i=b(i,{enumerable:y(0,!1)})):(u(t,B)||q(t,B,y(1,{})),t[B][n]=!0),ot(t,n,i)):q(t,n,i)},lt=function(t,e){p(t);var i=v(e),n=w(i).concat(pt(i));return F(n,(function(e){a&&!ut.call(i,e)||ct(t,e,i[e])})),t},ht=function(t,e){return void 0===e?b(t):lt(b(t),e)},ut=function(t){var e=m(t,!0),i=Z.call(this,e);return!(this===U&&u(J,e)&&!u(Q,e))&&(!(i||!u(this,e)||!u(J,e)||u(this,B)&&this[B][e])||i)},ft=function(t,e){var i=v(t),n=m(e,!0);if(i!==U||!u(J,n)||u(Q,n)){var r=$(i,n);return!r||!u(J,n)||u(i,B)&&i[B][n]||(r.enumerable=!0),r}},dt=function(t){var e=K(v(t)),i=[];return F(e,(function(t){u(J,t)||u(D,t)||i.push(t)})),i},pt=function(t){var e=t===U,i=K(e?Q:v(t)),n=[];return F(i,(function(t){!u(J,t)||e&&!u(U,t)||n.push(J[t])})),n};if(c||(V=function(){if(this instanceof V)throw TypeError("Symbol is not a constructor");var t=arguments.length&&void 0!==arguments[0]?String(arguments[0]):void 0,e=M(t),i=function(t){this===U&&i.call(Q,t),u(this,B)&&u(this[B],e)&&(this[B][e]=!1),ot(this,e,y(1,t))};return a&&rt&&ot(U,e,{configurable:!0,set:i}),st(e,t)},E(V[W],"toString",(function(){return X(this).tag})),E(V,"withoutSetter",(function(t){return st(M(t),t)})),O.f=ut,T.f=ct,C.f=ft,x.f=_.f=dt,S.f=pt,R.f=function(t){return st(j(t),t)},a&&(q(V[W],"description",{configurable:!0,get:function(){return X(this).description}}),s||E(U,"propertyIsEnumerable",ut,{unsafe:!0}))),n({global:!0,wrap:!0,forced:!c,sham:!c},{Symbol:V}),F(w(it),(function(t){I(t)})),n({target:N,stat:!0,forced:!c},{for:function(t){var e=String(t);if(u(tt,e))return tt[e];var i=V(e);return tt[e]=i,et[i]=e,i},keyFor:function(t){if(!at(t))throw TypeError(t+" is not a symbol");if(u(et,t))return et[t]},useSetter:function(){rt=!0},useSimple:function(){rt=!1}}),n({target:"Object",stat:!0,forced:!c,sham:!a},{create:ht,defineProperty:ct,defineProperties:lt,getOwnPropertyDescriptor:ft}),n({target:"Object",stat:!0,forced:!c},{getOwnPropertyNames:dt,getOwnPropertySymbols:pt}),n({target:"Object",stat:!0,forced:h((function(){S.f(1)}))},{getOwnPropertySymbols:function(t){return S.f(g(t))}}),G){var gt=!c||h((function(){var t=V();return"[null]"!=G([t])||"{}"!=G({a:t})||"{}"!=G(Object(t))}));n({target:"JSON",stat:!0,forced:gt},{stringify:function(t,e,i){var n,r=[t],o=1;while(arguments.length>o)r.push(arguments[o++]);if(n=e,(d(e)||void 0!==t)&&!at(t))return f(e)||(e=function(t,e){if("function"==typeof n&&(e=n.call(this,t,e)),!at(e))return e}),r[1]=e,G.apply(null,r)}})}V[W][H]||k(V[W],H,V[W].valueOf),z(V,N),D[B]=!0},a640:function(t,e,i){"use strict";var n=i("d039");t.exports=function(t,e){var i=[][t];return!!i&&n((function(){i.call(null,e||function(){throw 1},1)}))}},a691:function(t,e){var i=Math.ceil,n=Math.floor;t.exports=function(t){return isNaN(t=+t)?0:(t>0?n:i)(t)}},a9e3:function(t,e,i){"use strict";var n=i("83ab"),r=i("da84"),o=i("94ca"),s=i("6eeb"),a=i("5135"),c=i("c6b6"),l=i("7156"),h=i("c04e"),u=i("d039"),f=i("7c73"),d=i("241c").f,p=i("06cf").f,g=i("9bf2").f,v=i("58a8").trim,m="Number",y=r[m],b=y.prototype,w=c(f(b))==m,x=function(t){var e,i,n,r,o,s,a,c,l=h(t,!1);if("string"==typeof l&&l.length>2)if(l=v(l),e=l.charCodeAt(0),43===e||45===e){if(i=l.charCodeAt(2),88===i||120===i)return NaN}else if(48===e){switch(l.charCodeAt(1)){case 66:case 98:n=2,r=49;break;case 79:case 111:n=8,r=55;break;default:return+l}for(o=l.slice(2),s=o.length,a=0;a<s;a++)if(c=o.charCodeAt(a),c<48||c>r)return NaN;return parseInt(o,n)}return+l};if(o(m,!y(" 0o1")||!y("0b1")||y("+0x1"))){for(var _,S=function(t){var e=arguments.length<1?0:t,i=this;return i instanceof S&&(w?u((function(){b.valueOf.call(i)})):c(i)!=m)?l(new y(x(e)),i,S):x(e)},C=n?d(y):"MAX_VALUE,MIN_VALUE,NaN,NEGATIVE_INFINITY,POSITIVE_INFINITY,EPSILON,isFinite,isInteger,isNaN,isSafeInteger,MAX_SAFE_INTEGER,MIN_SAFE_INTEGER,parseFloat,parseInt,isInteger,fromString,range".split(","),T=0;C.length>T;T++)a(y,_=C[T])&&!a(S,_)&&g(S,_,p(y,_));S.prototype=b,b.constructor=S,s(r,m,S)}},aa47:function(t,e,i){"use strict";
/**!
 * Sortable 1.10.2
 * @author	RubaXa   <trash@rubaxa.org>
 * @author	owenm    <owen23355@gmail.com>
 * @license MIT
 */
function n(t){return n="function"===typeof Symbol&&"symbol"===typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"===typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},n(t)}function r(t,e,i){return e in t?Object.defineProperty(t,e,{value:i,enumerable:!0,configurable:!0,writable:!0}):t[e]=i,t}function o(){return o=Object.assign||function(t){for(var e=1;e<arguments.length;e++){var i=arguments[e];for(var n in i)Object.prototype.hasOwnProperty.call(i,n)&&(t[n]=i[n])}return t},o.apply(this,arguments)}function s(t){for(var e=1;e<arguments.length;e++){var i=null!=arguments[e]?arguments[e]:{},n=Object.keys(i);"function"===typeof Object.getOwnPropertySymbols&&(n=n.concat(Object.getOwnPropertySymbols(i).filter((function(t){return Object.getOwnPropertyDescriptor(i,t).enumerable})))),n.forEach((function(e){r(t,e,i[e])}))}return t}function a(t,e){if(null==t)return{};var i,n,r={},o=Object.keys(t);for(n=0;n<o.length;n++)i=o[n],e.indexOf(i)>=0||(r[i]=t[i]);return r}function c(t,e){if(null==t)return{};var i,n,r=a(t,e);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(t);for(n=0;n<o.length;n++)i=o[n],e.indexOf(i)>=0||Object.prototype.propertyIsEnumerable.call(t,i)&&(r[i]=t[i])}return r}function l(t){return h(t)||u(t)||f()}function h(t){if(Array.isArray(t)){for(var e=0,i=new Array(t.length);e<t.length;e++)i[e]=t[e];return i}}function u(t){if(Symbol.iterator in Object(t)||"[object Arguments]"===Object.prototype.toString.call(t))return Array.from(t)}function f(){throw new TypeError("Invalid attempt to spread non-iterable instance")}i.r(e),i.d(e,"MultiDrag",(function(){return Fe})),i.d(e,"Sortable",(function(){return Jt})),i.d(e,"Swap",(function(){return Oe}));var d="1.10.2";function p(t){if("undefined"!==typeof window&&window.navigator)return!!navigator.userAgent.match(t)}var g=p(/(?:Trident.*rv[ :]?11\.|msie|iemobile|Windows Phone)/i),v=p(/Edge/i),m=p(/firefox/i),y=p(/safari/i)&&!p(/chrome/i)&&!p(/android/i),b=p(/iP(ad|od|hone)/i),w=p(/chrome/i)&&p(/android/i),x={capture:!1,passive:!1};function _(t,e,i){t.addEventListener(e,i,!g&&x)}function S(t,e,i){t.removeEventListener(e,i,!g&&x)}function C(t,e){if(e){if(">"===e[0]&&(e=e.substring(1)),t)try{if(t.matches)return t.matches(e);if(t.msMatchesSelector)return t.msMatchesSelector(e);if(t.webkitMatchesSelector)return t.webkitMatchesSelector(e)}catch(i){return!1}return!1}}function T(t){return t.host&&t!==document&&t.host.nodeType?t.host:t.parentNode}function O(t,e,i,n){if(t){i=i||document;do{if(null!=e&&(">"===e[0]?t.parentNode===i&&C(t,e):C(t,e))||n&&t===i)return t;if(t===i)break}while(t=T(t))}return null}var k,E=/\s+/g;function A(t,e,i){if(t&&e)if(t.classList)t.classList[i?"add":"remove"](e);else{var n=(" "+t.className+" ").replace(E," ").replace(" "+e+" "," ");t.className=(n+(i?" "+e:"")).replace(E," ")}}function P(t,e,i){var n=t&&t.style;if(n){if(void 0===i)return document.defaultView&&document.defaultView.getComputedStyle?i=document.defaultView.getComputedStyle(t,""):t.currentStyle&&(i=t.currentStyle),void 0===e?i:i[e];e in n||-1!==e.indexOf("webkit")||(e="-webkit-"+e),n[e]=i+("string"===typeof i?"":"px")}}function D(t,e){var i="";if("string"===typeof t)i=t;else do{var n=P(t,"transform");n&&"none"!==n&&(i=n+" "+i)}while(!e&&(t=t.parentNode));var r=window.DOMMatrix||window.WebKitCSSMatrix||window.CSSMatrix||window.MSCSSMatrix;return r&&new r(i)}function M(t,e,i){if(t){var n=t.getElementsByTagName(e),r=0,o=n.length;if(i)for(;r<o;r++)i(n[r],r);return n}return[]}function j(){var t=document.scrollingElement;return t||document.documentElement}function R(t,e,i,n,r){if(t.getBoundingClientRect||t===window){var o,s,a,c,l,h,u;if(t!==window&&t!==j()?(o=t.getBoundingClientRect(),s=o.top,a=o.left,c=o.bottom,l=o.right,h=o.height,u=o.width):(s=0,a=0,c=window.innerHeight,l=window.innerWidth,h=window.innerHeight,u=window.innerWidth),(e||i)&&t!==window&&(r=r||t.parentNode,!g))do{if(r&&r.getBoundingClientRect&&("none"!==P(r,"transform")||i&&"static"!==P(r,"position"))){var f=r.getBoundingClientRect();s-=f.top+parseInt(P(r,"border-top-width")),a-=f.left+parseInt(P(r,"border-left-width")),c=s+o.height,l=a+o.width;break}}while(r=r.parentNode);if(n&&t!==window){var d=D(r||t),p=d&&d.a,v=d&&d.d;d&&(s/=v,a/=p,u/=p,h/=v,c=s+h,l=a+u)}return{top:s,left:a,bottom:c,right:l,width:u,height:h}}}function I(t,e,i){var n=W(t,!0),r=R(t)[e];while(n){var o=R(n)[i],s=void 0;if(s="top"===i||"left"===i?r>=o:r<=o,!s)return n;if(n===j())break;n=W(n,!1)}return!1}function z(t,e,i){var n=0,r=0,o=t.children;while(r<o.length){if("none"!==o[r].style.display&&o[r]!==Jt.ghost&&o[r]!==Jt.dragged&&O(o[r],i.draggable,t,!1)){if(n===e)return o[r];n++}r++}return null}function L(t,e){var i=t.lastElementChild;while(i&&(i===Jt.ghost||"none"===P(i,"display")||e&&!C(i,e)))i=i.previousElementSibling;return i||null}function F(t,e){var i=0;if(!t||!t.parentNode)return-1;while(t=t.previousElementSibling)"TEMPLATE"===t.nodeName.toUpperCase()||t===Jt.clone||e&&!C(t,e)||i++;return i}function B(t){var e=0,i=0,n=j();if(t)do{var r=D(t),o=r.a,s=r.d;e+=t.scrollLeft*o,i+=t.scrollTop*s}while(t!==n&&(t=t.parentNode));return[e,i]}function N(t,e){for(var i in t)if(t.hasOwnProperty(i))for(var n in e)if(e.hasOwnProperty(n)&&e[n]===t[i][n])return Number(i);return-1}function W(t,e){if(!t||!t.getBoundingClientRect)return j();var i=t,n=!1;do{if(i.clientWidth<i.scrollWidth||i.clientHeight<i.scrollHeight){var r=P(i);if(i.clientWidth<i.scrollWidth&&("auto"==r.overflowX||"scroll"==r.overflowX)||i.clientHeight<i.scrollHeight&&("auto"==r.overflowY||"scroll"==r.overflowY)){if(!i.getBoundingClientRect||i===document.body)return j();if(n||e)return i;n=!0}}}while(i=i.parentNode);return j()}function H(t,e){if(t&&e)for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i]);return t}function Y(t,e){return Math.round(t.top)===Math.round(e.top)&&Math.round(t.left)===Math.round(e.left)&&Math.round(t.height)===Math.round(e.height)&&Math.round(t.width)===Math.round(e.width)}function X(t,e){return function(){if(!k){var i=arguments,n=this;1===i.length?t.call(n,i[0]):t.apply(n,i),k=setTimeout((function(){k=void 0}),e)}}}function U(){clearTimeout(k),k=void 0}function V(t,e,i){t.scrollLeft+=e,t.scrollTop+=i}function G(t){var e=window.Polymer,i=window.jQuery||window.Zepto;return e&&e.dom?e.dom(t).cloneNode(!0):i?i(t).clone(!0)[0]:t.cloneNode(!0)}function $(t,e){P(t,"position","absolute"),P(t,"top",e.top),P(t,"left",e.left),P(t,"width",e.width),P(t,"height",e.height)}function q(t){P(t,"position",""),P(t,"top",""),P(t,"left",""),P(t,"width",""),P(t,"height","")}var K="Sortable"+(new Date).getTime();function Z(){var t,e=[];return{captureAnimationState:function(){if(e=[],this.options.animation){var t=[].slice.call(this.el.children);t.forEach((function(t){if("none"!==P(t,"display")&&t!==Jt.ghost){e.push({target:t,rect:R(t)});var i=s({},e[e.length-1].rect);if(t.thisAnimationDuration){var n=D(t,!0);n&&(i.top-=n.f,i.left-=n.e)}t.fromRect=i}}))}},addAnimationState:function(t){e.push(t)},removeAnimationState:function(t){e.splice(N(e,{target:t}),1)},animateAll:function(i){var n=this;if(!this.options.animation)return clearTimeout(t),void("function"===typeof i&&i());var r=!1,o=0;e.forEach((function(t){var e=0,i=t.target,s=i.fromRect,a=R(i),c=i.prevFromRect,l=i.prevToRect,h=t.rect,u=D(i,!0);u&&(a.top-=u.f,a.left-=u.e),i.toRect=a,i.thisAnimationDuration&&Y(c,a)&&!Y(s,a)&&(h.top-a.top)/(h.left-a.left)===(s.top-a.top)/(s.left-a.left)&&(e=Q(h,c,l,n.options)),Y(a,s)||(i.prevFromRect=s,i.prevToRect=a,e||(e=n.options.animation),n.animate(i,h,a,e)),e&&(r=!0,o=Math.max(o,e),clearTimeout(i.animationResetTimer),i.animationResetTimer=setTimeout((function(){i.animationTime=0,i.prevFromRect=null,i.fromRect=null,i.prevToRect=null,i.thisAnimationDuration=null}),e),i.thisAnimationDuration=e)})),clearTimeout(t),r?t=setTimeout((function(){"function"===typeof i&&i()}),o):"function"===typeof i&&i(),e=[]},animate:function(t,e,i,n){if(n){P(t,"transition",""),P(t,"transform","");var r=D(this.el),o=r&&r.a,s=r&&r.d,a=(e.left-i.left)/(o||1),c=(e.top-i.top)/(s||1);t.animatingX=!!a,t.animatingY=!!c,P(t,"transform","translate3d("+a+"px,"+c+"px,0)"),J(t),P(t,"transition","transform "+n+"ms"+(this.options.easing?" "+this.options.easing:"")),P(t,"transform","translate3d(0,0,0)"),"number"===typeof t.animated&&clearTimeout(t.animated),t.animated=setTimeout((function(){P(t,"transition",""),P(t,"transform",""),t.animated=!1,t.animatingX=!1,t.animatingY=!1}),n)}}}}function J(t){return t.offsetWidth}function Q(t,e,i,n){return Math.sqrt(Math.pow(e.top-t.top,2)+Math.pow(e.left-t.left,2))/Math.sqrt(Math.pow(e.top-i.top,2)+Math.pow(e.left-i.left,2))*n.animation}var tt=[],et={initializeByDefault:!0},it={mount:function(t){for(var e in et)et.hasOwnProperty(e)&&!(e in t)&&(t[e]=et[e]);tt.push(t)},pluginEvent:function(t,e,i){var n=this;this.eventCanceled=!1,i.cancel=function(){n.eventCanceled=!0};var r=t+"Global";tt.forEach((function(n){e[n.pluginName]&&(e[n.pluginName][r]&&e[n.pluginName][r](s({sortable:e},i)),e.options[n.pluginName]&&e[n.pluginName][t]&&e[n.pluginName][t](s({sortable:e},i)))}))},initializePlugins:function(t,e,i,n){for(var r in tt.forEach((function(n){var r=n.pluginName;if(t.options[r]||n.initializeByDefault){var s=new n(t,e,t.options);s.sortable=t,s.options=t.options,t[r]=s,o(i,s.defaults)}})),t.options)if(t.options.hasOwnProperty(r)){var s=this.modifyOption(t,r,t.options[r]);"undefined"!==typeof s&&(t.options[r]=s)}},getEventProperties:function(t,e){var i={};return tt.forEach((function(n){"function"===typeof n.eventProperties&&o(i,n.eventProperties.call(e[n.pluginName],t))})),i},modifyOption:function(t,e,i){var n;return tt.forEach((function(r){t[r.pluginName]&&r.optionListeners&&"function"===typeof r.optionListeners[e]&&(n=r.optionListeners[e].call(t[r.pluginName],i))})),n}};function nt(t){var e=t.sortable,i=t.rootEl,n=t.name,r=t.targetEl,o=t.cloneEl,a=t.toEl,c=t.fromEl,l=t.oldIndex,h=t.newIndex,u=t.oldDraggableIndex,f=t.newDraggableIndex,d=t.originalEvent,p=t.putSortable,m=t.extraEventProperties;if(e=e||i&&i[K],e){var y,b=e.options,w="on"+n.charAt(0).toUpperCase()+n.substr(1);!window.CustomEvent||g||v?(y=document.createEvent("Event"),y.initEvent(n,!0,!0)):y=new CustomEvent(n,{bubbles:!0,cancelable:!0}),y.to=a||i,y.from=c||i,y.item=r||i,y.clone=o,y.oldIndex=l,y.newIndex=h,y.oldDraggableIndex=u,y.newDraggableIndex=f,y.originalEvent=d,y.pullMode=p?p.lastPutMode:void 0;var x=s({},m,it.getEventProperties(n,e));for(var _ in x)y[_]=x[_];i&&i.dispatchEvent(y),b[w]&&b[w].call(e,y)}}var rt=function(t,e){var i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},n=i.evt,r=c(i,["evt"]);it.pluginEvent.bind(Jt)(t,e,s({dragEl:st,parentEl:at,ghostEl:ct,rootEl:lt,nextEl:ht,lastDownEl:ut,cloneEl:ft,cloneHidden:dt,dragStarted:Ot,putSortable:bt,activeSortable:Jt.active,originalEvent:n,oldIndex:pt,oldDraggableIndex:vt,newIndex:gt,newDraggableIndex:mt,hideGhostForTarget:$t,unhideGhostForTarget:qt,cloneNowHidden:function(){dt=!0},cloneNowShown:function(){dt=!1},dispatchSortableEvent:function(t){ot({sortable:e,name:t,originalEvent:n})}},r))};function ot(t){nt(s({putSortable:bt,cloneEl:ft,targetEl:st,rootEl:lt,oldIndex:pt,oldDraggableIndex:vt,newIndex:gt,newDraggableIndex:mt},t))}var st,at,ct,lt,ht,ut,ft,dt,pt,gt,vt,mt,yt,bt,wt,xt,_t,St,Ct,Tt,Ot,kt,Et,At,Pt,Dt=!1,Mt=!1,jt=[],Rt=!1,It=!1,zt=[],Lt=!1,Ft=[],Bt="undefined"!==typeof document,Nt=b,Wt=v||g?"cssFloat":"float",Ht=Bt&&!w&&!b&&"draggable"in document.createElement("div"),Yt=function(){if(Bt){if(g)return!1;var t=document.createElement("x");return t.style.cssText="pointer-events:auto","auto"===t.style.pointerEvents}}(),Xt=function(t,e){var i=P(t),n=parseInt(i.width)-parseInt(i.paddingLeft)-parseInt(i.paddingRight)-parseInt(i.borderLeftWidth)-parseInt(i.borderRightWidth),r=z(t,0,e),o=z(t,1,e),s=r&&P(r),a=o&&P(o),c=s&&parseInt(s.marginLeft)+parseInt(s.marginRight)+R(r).width,l=a&&parseInt(a.marginLeft)+parseInt(a.marginRight)+R(o).width;if("flex"===i.display)return"column"===i.flexDirection||"column-reverse"===i.flexDirection?"vertical":"horizontal";if("grid"===i.display)return i.gridTemplateColumns.split(" ").length<=1?"vertical":"horizontal";if(r&&s["float"]&&"none"!==s["float"]){var h="left"===s["float"]?"left":"right";return!o||"both"!==a.clear&&a.clear!==h?"horizontal":"vertical"}return r&&("block"===s.display||"flex"===s.display||"table"===s.display||"grid"===s.display||c>=n&&"none"===i[Wt]||o&&"none"===i[Wt]&&c+l>n)?"vertical":"horizontal"},Ut=function(t,e,i){var n=i?t.left:t.top,r=i?t.right:t.bottom,o=i?t.width:t.height,s=i?e.left:e.top,a=i?e.right:e.bottom,c=i?e.width:e.height;return n===s||r===a||n+o/2===s+c/2},Vt=function(t,e){var i;return jt.some((function(n){if(!L(n)){var r=R(n),o=n[K].options.emptyInsertThreshold,s=t>=r.left-o&&t<=r.right+o,a=e>=r.top-o&&e<=r.bottom+o;return o&&s&&a?i=n:void 0}})),i},Gt=function(t){function e(t,i){return function(n,r,o,s){var a=n.options.group.name&&r.options.group.name&&n.options.group.name===r.options.group.name;if(null==t&&(i||a))return!0;if(null==t||!1===t)return!1;if(i&&"clone"===t)return t;if("function"===typeof t)return e(t(n,r,o,s),i)(n,r,o,s);var c=(i?n:r).options.group.name;return!0===t||"string"===typeof t&&t===c||t.join&&t.indexOf(c)>-1}}var i={},r=t.group;r&&"object"==n(r)||(r={name:r}),i.name=r.name,i.checkPull=e(r.pull,!0),i.checkPut=e(r.put),i.revertClone=r.revertClone,t.group=i},$t=function(){!Yt&&ct&&P(ct,"display","none")},qt=function(){!Yt&&ct&&P(ct,"display","")};Bt&&document.addEventListener("click",(function(t){if(Mt)return t.preventDefault(),t.stopPropagation&&t.stopPropagation(),t.stopImmediatePropagation&&t.stopImmediatePropagation(),Mt=!1,!1}),!0);var Kt=function(t){if(st){t=t.touches?t.touches[0]:t;var e=Vt(t.clientX,t.clientY);if(e){var i={};for(var n in t)t.hasOwnProperty(n)&&(i[n]=t[n]);i.target=i.rootEl=e,i.preventDefault=void 0,i.stopPropagation=void 0,e[K]._onDragOver(i)}}},Zt=function(t){st&&st.parentNode[K]._isOutsideThisEl(t.target)};function Jt(t,e){if(!t||!t.nodeType||1!==t.nodeType)throw"Sortable: `el` must be an HTMLElement, not ".concat({}.toString.call(t));this.el=t,this.options=e=o({},e),t[K]=this;var i={group:null,sort:!0,disabled:!1,store:null,handle:null,draggable:/^[uo]l$/i.test(t.nodeName)?">li":">*",swapThreshold:1,invertSwap:!1,invertedSwapThreshold:null,removeCloneOnHide:!0,direction:function(){return Xt(t,this.options)},ghostClass:"sortable-ghost",chosenClass:"sortable-chosen",dragClass:"sortable-drag",ignore:"a, img",filter:null,preventOnFilter:!0,animation:0,easing:null,setData:function(t,e){t.setData("Text",e.textContent)},dropBubble:!1,dragoverBubble:!1,dataIdAttr:"data-id",delay:0,delayOnTouchOnly:!1,touchStartThreshold:(Number.parseInt?Number:window).parseInt(window.devicePixelRatio,10)||1,forceFallback:!1,fallbackClass:"sortable-fallback",fallbackOnBody:!1,fallbackTolerance:0,fallbackOffset:{x:0,y:0},supportPointer:!1!==Jt.supportPointer&&"PointerEvent"in window,emptyInsertThreshold:5};for(var n in it.initializePlugins(this,t,i),i)!(n in e)&&(e[n]=i[n]);for(var r in Gt(e),this)"_"===r.charAt(0)&&"function"===typeof this[r]&&(this[r]=this[r].bind(this));this.nativeDraggable=!e.forceFallback&&Ht,this.nativeDraggable&&(this.options.touchStartThreshold=1),e.supportPointer?_(t,"pointerdown",this._onTapStart):(_(t,"mousedown",this._onTapStart),_(t,"touchstart",this._onTapStart)),this.nativeDraggable&&(_(t,"dragover",this),_(t,"dragenter",this)),jt.push(this.el),e.store&&e.store.get&&this.sort(e.store.get(this)||[]),o(this,Z())}function Qt(t){t.dataTransfer&&(t.dataTransfer.dropEffect="move"),t.cancelable&&t.preventDefault()}function te(t,e,i,n,r,o,s,a){var c,l,h=t[K],u=h.options.onMove;return!window.CustomEvent||g||v?(c=document.createEvent("Event"),c.initEvent("move",!0,!0)):c=new CustomEvent("move",{bubbles:!0,cancelable:!0}),c.to=e,c.from=t,c.dragged=i,c.draggedRect=n,c.related=r||e,c.relatedRect=o||R(e),c.willInsertAfter=a,c.originalEvent=s,t.dispatchEvent(c),u&&(l=u.call(h,c,s)),l}function ee(t){t.draggable=!1}function ie(){Lt=!1}function ne(t,e,i){var n=R(L(i.el,i.options.draggable)),r=10;return e?t.clientX>n.right+r||t.clientX<=n.right&&t.clientY>n.bottom&&t.clientX>=n.left:t.clientX>n.right&&t.clientY>n.top||t.clientX<=n.right&&t.clientY>n.bottom+r}function re(t,e,i,n,r,o,s,a){var c=n?t.clientY:t.clientX,l=n?i.height:i.width,h=n?i.top:i.left,u=n?i.bottom:i.right,f=!1;if(!s)if(a&&At<l*r){if(!Rt&&(1===Et?c>h+l*o/2:c<u-l*o/2)&&(Rt=!0),Rt)f=!0;else if(1===Et?c<h+At:c>u-At)return-Et}else if(c>h+l*(1-r)/2&&c<u-l*(1-r)/2)return oe(e);return f=f||s,f&&(c<h+l*o/2||c>u-l*o/2)?c>h+l/2?1:-1:0}function oe(t){return F(st)<F(t)?1:-1}function se(t){var e=t.tagName+t.className+t.src+t.href+t.textContent,i=e.length,n=0;while(i--)n+=e.charCodeAt(i);return n.toString(36)}function ae(t){Ft.length=0;var e=t.getElementsByTagName("input"),i=e.length;while(i--){var n=e[i];n.checked&&Ft.push(n)}}function ce(t){return setTimeout(t,0)}function le(t){return clearTimeout(t)}Jt.prototype={constructor:Jt,_isOutsideThisEl:function(t){this.el.contains(t)||t===this.el||(kt=null)},_getDirection:function(t,e){return"function"===typeof this.options.direction?this.options.direction.call(this,t,e,st):this.options.direction},_onTapStart:function(t){if(t.cancelable){var e=this,i=this.el,n=this.options,r=n.preventOnFilter,o=t.type,s=t.touches&&t.touches[0]||t.pointerType&&"touch"===t.pointerType&&t,a=(s||t).target,c=t.target.shadowRoot&&(t.path&&t.path[0]||t.composedPath&&t.composedPath()[0])||a,l=n.filter;if(ae(i),!st&&!(/mousedown|pointerdown/.test(o)&&0!==t.button||n.disabled)&&!c.isContentEditable&&(a=O(a,n.draggable,i,!1),(!a||!a.animated)&&ut!==a)){if(pt=F(a),vt=F(a,n.draggable),"function"===typeof l){if(l.call(this,t,a,this))return ot({sortable:e,rootEl:c,name:"filter",targetEl:a,toEl:i,fromEl:i}),rt("filter",e,{evt:t}),void(r&&t.cancelable&&t.preventDefault())}else if(l&&(l=l.split(",").some((function(n){if(n=O(c,n.trim(),i,!1),n)return ot({sortable:e,rootEl:n,name:"filter",targetEl:a,fromEl:i,toEl:i}),rt("filter",e,{evt:t}),!0})),l))return void(r&&t.cancelable&&t.preventDefault());n.handle&&!O(c,n.handle,i,!1)||this._prepareDragStart(t,s,a)}}},_prepareDragStart:function(t,e,i){var n,r=this,o=r.el,s=r.options,a=o.ownerDocument;if(i&&!st&&i.parentNode===o){var c=R(i);if(lt=o,st=i,at=st.parentNode,ht=st.nextSibling,ut=i,yt=s.group,Jt.dragged=st,wt={target:st,clientX:(e||t).clientX,clientY:(e||t).clientY},Ct=wt.clientX-c.left,Tt=wt.clientY-c.top,this._lastX=(e||t).clientX,this._lastY=(e||t).clientY,st.style["will-change"]="all",n=function(){rt("delayEnded",r,{evt:t}),Jt.eventCanceled?r._onDrop():(r._disableDelayedDragEvents(),!m&&r.nativeDraggable&&(st.draggable=!0),r._triggerDragStart(t,e),ot({sortable:r,name:"choose",originalEvent:t}),A(st,s.chosenClass,!0))},s.ignore.split(",").forEach((function(t){M(st,t.trim(),ee)})),_(a,"dragover",Kt),_(a,"mousemove",Kt),_(a,"touchmove",Kt),_(a,"mouseup",r._onDrop),_(a,"touchend",r._onDrop),_(a,"touchcancel",r._onDrop),m&&this.nativeDraggable&&(this.options.touchStartThreshold=4,st.draggable=!0),rt("delayStart",this,{evt:t}),!s.delay||s.delayOnTouchOnly&&!e||this.nativeDraggable&&(v||g))n();else{if(Jt.eventCanceled)return void this._onDrop();_(a,"mouseup",r._disableDelayedDrag),_(a,"touchend",r._disableDelayedDrag),_(a,"touchcancel",r._disableDelayedDrag),_(a,"mousemove",r._delayedDragTouchMoveHandler),_(a,"touchmove",r._delayedDragTouchMoveHandler),s.supportPointer&&_(a,"pointermove",r._delayedDragTouchMoveHandler),r._dragStartTimer=setTimeout(n,s.delay)}}},_delayedDragTouchMoveHandler:function(t){var e=t.touches?t.touches[0]:t;Math.max(Math.abs(e.clientX-this._lastX),Math.abs(e.clientY-this._lastY))>=Math.floor(this.options.touchStartThreshold/(this.nativeDraggable&&window.devicePixelRatio||1))&&this._disableDelayedDrag()},_disableDelayedDrag:function(){st&&ee(st),clearTimeout(this._dragStartTimer),this._disableDelayedDragEvents()},_disableDelayedDragEvents:function(){var t=this.el.ownerDocument;S(t,"mouseup",this._disableDelayedDrag),S(t,"touchend",this._disableDelayedDrag),S(t,"touchcancel",this._disableDelayedDrag),S(t,"mousemove",this._delayedDragTouchMoveHandler),S(t,"touchmove",this._delayedDragTouchMoveHandler),S(t,"pointermove",this._delayedDragTouchMoveHandler)},_triggerDragStart:function(t,e){e=e||"touch"==t.pointerType&&t,!this.nativeDraggable||e?this.options.supportPointer?_(document,"pointermove",this._onTouchMove):_(document,e?"touchmove":"mousemove",this._onTouchMove):(_(st,"dragend",this),_(lt,"dragstart",this._onDragStart));try{document.selection?ce((function(){document.selection.empty()})):window.getSelection().removeAllRanges()}catch(i){}},_dragStarted:function(t,e){if(Dt=!1,lt&&st){rt("dragStarted",this,{evt:e}),this.nativeDraggable&&_(document,"dragover",Zt);var i=this.options;!t&&A(st,i.dragClass,!1),A(st,i.ghostClass,!0),Jt.active=this,t&&this._appendGhost(),ot({sortable:this,name:"start",originalEvent:e})}else this._nulling()},_emulateDragOver:function(){if(xt){this._lastX=xt.clientX,this._lastY=xt.clientY,$t();var t=document.elementFromPoint(xt.clientX,xt.clientY),e=t;while(t&&t.shadowRoot){if(t=t.shadowRoot.elementFromPoint(xt.clientX,xt.clientY),t===e)break;e=t}if(st.parentNode[K]._isOutsideThisEl(t),e)do{if(e[K]){var i=void 0;if(i=e[K]._onDragOver({clientX:xt.clientX,clientY:xt.clientY,target:t,rootEl:e}),i&&!this.options.dragoverBubble)break}t=e}while(e=e.parentNode);qt()}},_onTouchMove:function(t){if(wt){var e=this.options,i=e.fallbackTolerance,n=e.fallbackOffset,r=t.touches?t.touches[0]:t,o=ct&&D(ct,!0),s=ct&&o&&o.a,a=ct&&o&&o.d,c=Nt&&Pt&&B(Pt),l=(r.clientX-wt.clientX+n.x)/(s||1)+(c?c[0]-zt[0]:0)/(s||1),h=(r.clientY-wt.clientY+n.y)/(a||1)+(c?c[1]-zt[1]:0)/(a||1);if(!Jt.active&&!Dt){if(i&&Math.max(Math.abs(r.clientX-this._lastX),Math.abs(r.clientY-this._lastY))<i)return;this._onDragStart(t,!0)}if(ct){o?(o.e+=l-(_t||0),o.f+=h-(St||0)):o={a:1,b:0,c:0,d:1,e:l,f:h};var u="matrix(".concat(o.a,",").concat(o.b,",").concat(o.c,",").concat(o.d,",").concat(o.e,",").concat(o.f,")");P(ct,"webkitTransform",u),P(ct,"mozTransform",u),P(ct,"msTransform",u),P(ct,"transform",u),_t=l,St=h,xt=r}t.cancelable&&t.preventDefault()}},_appendGhost:function(){if(!ct){var t=this.options.fallbackOnBody?document.body:lt,e=R(st,!0,Nt,!0,t),i=this.options;if(Nt){Pt=t;while("static"===P(Pt,"position")&&"none"===P(Pt,"transform")&&Pt!==document)Pt=Pt.parentNode;Pt!==document.body&&Pt!==document.documentElement?(Pt===document&&(Pt=j()),e.top+=Pt.scrollTop,e.left+=Pt.scrollLeft):Pt=j(),zt=B(Pt)}ct=st.cloneNode(!0),A(ct,i.ghostClass,!1),A(ct,i.fallbackClass,!0),A(ct,i.dragClass,!0),P(ct,"transition",""),P(ct,"transform",""),P(ct,"box-sizing","border-box"),P(ct,"margin",0),P(ct,"top",e.top),P(ct,"left",e.left),P(ct,"width",e.width),P(ct,"height",e.height),P(ct,"opacity","0.8"),P(ct,"position",Nt?"absolute":"fixed"),P(ct,"zIndex","100000"),P(ct,"pointerEvents","none"),Jt.ghost=ct,t.appendChild(ct),P(ct,"transform-origin",Ct/parseInt(ct.style.width)*100+"% "+Tt/parseInt(ct.style.height)*100+"%")}},_onDragStart:function(t,e){var i=this,n=t.dataTransfer,r=i.options;rt("dragStart",this,{evt:t}),Jt.eventCanceled?this._onDrop():(rt("setupClone",this),Jt.eventCanceled||(ft=G(st),ft.draggable=!1,ft.style["will-change"]="",this._hideClone(),A(ft,this.options.chosenClass,!1),Jt.clone=ft),i.cloneId=ce((function(){rt("clone",i),Jt.eventCanceled||(i.options.removeCloneOnHide||lt.insertBefore(ft,st),i._hideClone(),ot({sortable:i,name:"clone"}))})),!e&&A(st,r.dragClass,!0),e?(Mt=!0,i._loopId=setInterval(i._emulateDragOver,50)):(S(document,"mouseup",i._onDrop),S(document,"touchend",i._onDrop),S(document,"touchcancel",i._onDrop),n&&(n.effectAllowed="move",r.setData&&r.setData.call(i,n,st)),_(document,"drop",i),P(st,"transform","translateZ(0)")),Dt=!0,i._dragStartId=ce(i._dragStarted.bind(i,e,t)),_(document,"selectstart",i),Ot=!0,y&&P(document.body,"user-select","none"))},_onDragOver:function(t){var e,i,n,r,o=this.el,a=t.target,c=this.options,l=c.group,h=Jt.active,u=yt===l,f=c.sort,d=bt||h,p=this,g=!1;if(!Lt){if(void 0!==t.preventDefault&&t.cancelable&&t.preventDefault(),a=O(a,c.draggable,o,!0),M("dragOver"),Jt.eventCanceled)return g;if(st.contains(t.target)||a.animated&&a.animatingX&&a.animatingY||p._ignoreWhileAnimating===a)return z(!1);if(Mt=!1,h&&!c.disabled&&(u?f||(n=!lt.contains(st)):bt===this||(this.lastPutMode=yt.checkPull(this,h,st,t))&&l.checkPut(this,h,st,t))){if(r="vertical"===this._getDirection(t,a),e=R(st),M("dragOverValid"),Jt.eventCanceled)return g;if(n)return at=lt,j(),this._hideClone(),M("revert"),Jt.eventCanceled||(ht?lt.insertBefore(st,ht):lt.appendChild(st)),z(!0);var v=L(o,c.draggable);if(!v||ne(t,r,this)&&!v.animated){if(v===st)return z(!1);if(v&&o===t.target&&(a=v),a&&(i=R(a)),!1!==te(lt,o,st,e,a,i,t,!!a))return j(),o.appendChild(st),at=o,B(),z(!0)}else if(a.parentNode===o){i=R(a);var m,y,b=0,w=st.parentNode!==o,x=!Ut(st.animated&&st.toRect||e,a.animated&&a.toRect||i,r),_=r?"top":"left",S=I(a,"top","top")||I(st,"top","top"),C=S?S.scrollTop:void 0;if(kt!==a&&(m=i[_],Rt=!1,It=!x&&c.invertSwap||w),b=re(t,a,i,r,x?1:c.swapThreshold,null==c.invertedSwapThreshold?c.swapThreshold:c.invertedSwapThreshold,It,kt===a),0!==b){var T=F(st);do{T-=b,y=at.children[T]}while(y&&("none"===P(y,"display")||y===ct))}if(0===b||y===a)return z(!1);kt=a,Et=b;var k=a.nextElementSibling,E=!1;E=1===b;var D=te(lt,o,st,e,a,i,t,E);if(!1!==D)return 1!==D&&-1!==D||(E=1===D),Lt=!0,setTimeout(ie,30),j(),E&&!k?o.appendChild(st):a.parentNode.insertBefore(st,E?k:a),S&&V(S,0,C-S.scrollTop),at=st.parentNode,void 0===m||It||(At=Math.abs(m-R(a)[_])),B(),z(!0)}if(o.contains(st))return z(!1)}return!1}function M(c,l){rt(c,p,s({evt:t,isOwner:u,axis:r?"vertical":"horizontal",revert:n,dragRect:e,targetRect:i,canSort:f,fromSortable:d,target:a,completed:z,onMove:function(i,n){return te(lt,o,st,e,i,R(i),t,n)},changed:B},l))}function j(){M("dragOverAnimationCapture"),p.captureAnimationState(),p!==d&&d.captureAnimationState()}function z(e){return M("dragOverCompleted",{insertion:e}),e&&(u?h._hideClone():h._showClone(p),p!==d&&(A(st,bt?bt.options.ghostClass:h.options.ghostClass,!1),A(st,c.ghostClass,!0)),bt!==p&&p!==Jt.active?bt=p:p===Jt.active&&bt&&(bt=null),d===p&&(p._ignoreWhileAnimating=a),p.animateAll((function(){M("dragOverAnimationComplete"),p._ignoreWhileAnimating=null})),p!==d&&(d.animateAll(),d._ignoreWhileAnimating=null)),(a===st&&!st.animated||a===o&&!a.animated)&&(kt=null),c.dragoverBubble||t.rootEl||a===document||(st.parentNode[K]._isOutsideThisEl(t.target),!e&&Kt(t)),!c.dragoverBubble&&t.stopPropagation&&t.stopPropagation(),g=!0}function B(){gt=F(st),mt=F(st,c.draggable),ot({sortable:p,name:"change",toEl:o,newIndex:gt,newDraggableIndex:mt,originalEvent:t})}},_ignoreWhileAnimating:null,_offMoveEvents:function(){S(document,"mousemove",this._onTouchMove),S(document,"touchmove",this._onTouchMove),S(document,"pointermove",this._onTouchMove),S(document,"dragover",Kt),S(document,"mousemove",Kt),S(document,"touchmove",Kt)},_offUpEvents:function(){var t=this.el.ownerDocument;S(t,"mouseup",this._onDrop),S(t,"touchend",this._onDrop),S(t,"pointerup",this._onDrop),S(t,"touchcancel",this._onDrop),S(document,"selectstart",this)},_onDrop:function(t){var e=this.el,i=this.options;gt=F(st),mt=F(st,i.draggable),rt("drop",this,{evt:t}),at=st&&st.parentNode,gt=F(st),mt=F(st,i.draggable),Jt.eventCanceled||(Dt=!1,It=!1,Rt=!1,clearInterval(this._loopId),clearTimeout(this._dragStartTimer),le(this.cloneId),le(this._dragStartId),this.nativeDraggable&&(S(document,"drop",this),S(e,"dragstart",this._onDragStart)),this._offMoveEvents(),this._offUpEvents(),y&&P(document.body,"user-select",""),P(st,"transform",""),t&&(Ot&&(t.cancelable&&t.preventDefault(),!i.dropBubble&&t.stopPropagation()),ct&&ct.parentNode&&ct.parentNode.removeChild(ct),(lt===at||bt&&"clone"!==bt.lastPutMode)&&ft&&ft.parentNode&&ft.parentNode.removeChild(ft),st&&(this.nativeDraggable&&S(st,"dragend",this),ee(st),st.style["will-change"]="",Ot&&!Dt&&A(st,bt?bt.options.ghostClass:this.options.ghostClass,!1),A(st,this.options.chosenClass,!1),ot({sortable:this,name:"unchoose",toEl:at,newIndex:null,newDraggableIndex:null,originalEvent:t}),lt!==at?(gt>=0&&(ot({rootEl:at,name:"add",toEl:at,fromEl:lt,originalEvent:t}),ot({sortable:this,name:"remove",toEl:at,originalEvent:t}),ot({rootEl:at,name:"sort",toEl:at,fromEl:lt,originalEvent:t}),ot({sortable:this,name:"sort",toEl:at,originalEvent:t})),bt&&bt.save()):gt!==pt&&gt>=0&&(ot({sortable:this,name:"update",toEl:at,originalEvent:t}),ot({sortable:this,name:"sort",toEl:at,originalEvent:t})),Jt.active&&(null!=gt&&-1!==gt||(gt=pt,mt=vt),ot({sortable:this,name:"end",toEl:at,originalEvent:t}),this.save())))),this._nulling()},_nulling:function(){rt("nulling",this),lt=st=at=ct=ht=ft=ut=dt=wt=xt=Ot=gt=mt=pt=vt=kt=Et=bt=yt=Jt.dragged=Jt.ghost=Jt.clone=Jt.active=null,Ft.forEach((function(t){t.checked=!0})),Ft.length=_t=St=0},handleEvent:function(t){switch(t.type){case"drop":case"dragend":this._onDrop(t);break;case"dragenter":case"dragover":st&&(this._onDragOver(t),Qt(t));break;case"selectstart":t.preventDefault();break}},toArray:function(){for(var t,e=[],i=this.el.children,n=0,r=i.length,o=this.options;n<r;n++)t=i[n],O(t,o.draggable,this.el,!1)&&e.push(t.getAttribute(o.dataIdAttr)||se(t));return e},sort:function(t){var e={},i=this.el;this.toArray().forEach((function(t,n){var r=i.children[n];O(r,this.options.draggable,i,!1)&&(e[t]=r)}),this),t.forEach((function(t){e[t]&&(i.removeChild(e[t]),i.appendChild(e[t]))}))},save:function(){var t=this.options.store;t&&t.set&&t.set(this)},closest:function(t,e){return O(t,e||this.options.draggable,this.el,!1)},option:function(t,e){var i=this.options;if(void 0===e)return i[t];var n=it.modifyOption(this,t,e);i[t]="undefined"!==typeof n?n:e,"group"===t&&Gt(i)},destroy:function(){rt("destroy",this);var t=this.el;t[K]=null,S(t,"mousedown",this._onTapStart),S(t,"touchstart",this._onTapStart),S(t,"pointerdown",this._onTapStart),this.nativeDraggable&&(S(t,"dragover",this),S(t,"dragenter",this)),Array.prototype.forEach.call(t.querySelectorAll("[draggable]"),(function(t){t.removeAttribute("draggable")})),this._onDrop(),this._disableDelayedDragEvents(),jt.splice(jt.indexOf(this.el),1),this.el=t=null},_hideClone:function(){if(!dt){if(rt("hideClone",this),Jt.eventCanceled)return;P(ft,"display","none"),this.options.removeCloneOnHide&&ft.parentNode&&ft.parentNode.removeChild(ft),dt=!0}},_showClone:function(t){if("clone"===t.lastPutMode){if(dt){if(rt("showClone",this),Jt.eventCanceled)return;lt.contains(st)&&!this.options.group.revertClone?lt.insertBefore(ft,st):ht?lt.insertBefore(ft,ht):lt.appendChild(ft),this.options.group.revertClone&&this.animate(st,ft),P(ft,"display",""),dt=!1}}else this._hideClone()}},Bt&&_(document,"touchmove",(function(t){(Jt.active||Dt)&&t.cancelable&&t.preventDefault()})),Jt.utils={on:_,off:S,css:P,find:M,is:function(t,e){return!!O(t,e,t,!1)},extend:H,throttle:X,closest:O,toggleClass:A,clone:G,index:F,nextTick:ce,cancelNextTick:le,detectDirection:Xt,getChild:z},Jt.get=function(t){return t[K]},Jt.mount=function(){for(var t=arguments.length,e=new Array(t),i=0;i<t;i++)e[i]=arguments[i];e[0].constructor===Array&&(e=e[0]),e.forEach((function(t){if(!t.prototype||!t.prototype.constructor)throw"Sortable: Mounted plugin must be a constructor function, not ".concat({}.toString.call(t));t.utils&&(Jt.utils=s({},Jt.utils,t.utils)),it.mount(t)}))},Jt.create=function(t,e){return new Jt(t,e)},Jt.version=d;var he,ue,fe,de,pe,ge,ve=[],me=!1;function ye(){function t(){for(var t in this.defaults={scroll:!0,scrollSensitivity:30,scrollSpeed:10,bubbleScroll:!0},this)"_"===t.charAt(0)&&"function"===typeof this[t]&&(this[t]=this[t].bind(this))}return t.prototype={dragStarted:function(t){var e=t.originalEvent;this.sortable.nativeDraggable?_(document,"dragover",this._handleAutoScroll):this.options.supportPointer?_(document,"pointermove",this._handleFallbackAutoScroll):e.touches?_(document,"touchmove",this._handleFallbackAutoScroll):_(document,"mousemove",this._handleFallbackAutoScroll)},dragOverCompleted:function(t){var e=t.originalEvent;this.options.dragOverBubble||e.rootEl||this._handleAutoScroll(e)},drop:function(){this.sortable.nativeDraggable?S(document,"dragover",this._handleAutoScroll):(S(document,"pointermove",this._handleFallbackAutoScroll),S(document,"touchmove",this._handleFallbackAutoScroll),S(document,"mousemove",this._handleFallbackAutoScroll)),we(),be(),U()},nulling:function(){pe=ue=he=me=ge=fe=de=null,ve.length=0},_handleFallbackAutoScroll:function(t){this._handleAutoScroll(t,!0)},_handleAutoScroll:function(t,e){var i=this,n=(t.touches?t.touches[0]:t).clientX,r=(t.touches?t.touches[0]:t).clientY,o=document.elementFromPoint(n,r);if(pe=t,e||v||g||y){_e(t,this.options,o,e);var s=W(o,!0);!me||ge&&n===fe&&r===de||(ge&&we(),ge=setInterval((function(){var o=W(document.elementFromPoint(n,r),!0);o!==s&&(s=o,be()),_e(t,i.options,o,e)}),10),fe=n,de=r)}else{if(!this.options.bubbleScroll||W(o,!0)===j())return void be();_e(t,this.options,W(o,!1),!1)}}},o(t,{pluginName:"scroll",initializeByDefault:!0})}function be(){ve.forEach((function(t){clearInterval(t.pid)})),ve=[]}function we(){clearInterval(ge)}var xe,_e=X((function(t,e,i,n){if(e.scroll){var r,o=(t.touches?t.touches[0]:t).clientX,s=(t.touches?t.touches[0]:t).clientY,a=e.scrollSensitivity,c=e.scrollSpeed,l=j(),h=!1;ue!==i&&(ue=i,be(),he=e.scroll,r=e.scrollFn,!0===he&&(he=W(i,!0)));var u=0,f=he;do{var d=f,p=R(d),g=p.top,v=p.bottom,m=p.left,y=p.right,b=p.width,w=p.height,x=void 0,_=void 0,S=d.scrollWidth,C=d.scrollHeight,T=P(d),O=d.scrollLeft,k=d.scrollTop;d===l?(x=b<S&&("auto"===T.overflowX||"scroll"===T.overflowX||"visible"===T.overflowX),_=w<C&&("auto"===T.overflowY||"scroll"===T.overflowY||"visible"===T.overflowY)):(x=b<S&&("auto"===T.overflowX||"scroll"===T.overflowX),_=w<C&&("auto"===T.overflowY||"scroll"===T.overflowY));var E=x&&(Math.abs(y-o)<=a&&O+b<S)-(Math.abs(m-o)<=a&&!!O),A=_&&(Math.abs(v-s)<=a&&k+w<C)-(Math.abs(g-s)<=a&&!!k);if(!ve[u])for(var D=0;D<=u;D++)ve[D]||(ve[D]={});ve[u].vx==E&&ve[u].vy==A&&ve[u].el===d||(ve[u].el=d,ve[u].vx=E,ve[u].vy=A,clearInterval(ve[u].pid),0==E&&0==A||(h=!0,ve[u].pid=setInterval(function(){n&&0===this.layer&&Jt.active._onTouchMove(pe);var e=ve[this.layer].vy?ve[this.layer].vy*c:0,i=ve[this.layer].vx?ve[this.layer].vx*c:0;"function"===typeof r&&"continue"!==r.call(Jt.dragged.parentNode[K],i,e,t,pe,ve[this.layer].el)||V(ve[this.layer].el,i,e)}.bind({layer:u}),24))),u++}while(e.bubbleScroll&&f!==l&&(f=W(f,!1)));me=h}}),30),Se=function(t){var e=t.originalEvent,i=t.putSortable,n=t.dragEl,r=t.activeSortable,o=t.dispatchSortableEvent,s=t.hideGhostForTarget,a=t.unhideGhostForTarget;if(e){var c=i||r;s();var l=e.changedTouches&&e.changedTouches.length?e.changedTouches[0]:e,h=document.elementFromPoint(l.clientX,l.clientY);a(),c&&!c.el.contains(h)&&(o("spill"),this.onSpill({dragEl:n,putSortable:i}))}};function Ce(){}function Te(){}function Oe(){function t(){this.defaults={swapClass:"sortable-swap-highlight"}}return t.prototype={dragStart:function(t){var e=t.dragEl;xe=e},dragOverValid:function(t){var e=t.completed,i=t.target,n=t.onMove,r=t.activeSortable,o=t.changed,s=t.cancel;if(r.options.swap){var a=this.sortable.el,c=this.options;if(i&&i!==a){var l=xe;!1!==n(i)?(A(i,c.swapClass,!0),xe=i):xe=null,l&&l!==xe&&A(l,c.swapClass,!1)}o(),e(!0),s()}},drop:function(t){var e=t.activeSortable,i=t.putSortable,n=t.dragEl,r=i||this.sortable,o=this.options;xe&&A(xe,o.swapClass,!1),xe&&(o.swap||i&&i.options.swap)&&n!==xe&&(r.captureAnimationState(),r!==e&&e.captureAnimationState(),ke(n,xe),r.animateAll(),r!==e&&e.animateAll())},nulling:function(){xe=null}},o(t,{pluginName:"swap",eventProperties:function(){return{swapItem:xe}}})}function ke(t,e){var i,n,r=t.parentNode,o=e.parentNode;r&&o&&!r.isEqualNode(e)&&!o.isEqualNode(t)&&(i=F(t),n=F(e),r.isEqualNode(o)&&i<n&&n++,r.insertBefore(e,r.children[i]),o.insertBefore(t,o.children[n]))}Ce.prototype={startIndex:null,dragStart:function(t){var e=t.oldDraggableIndex;this.startIndex=e},onSpill:function(t){var e=t.dragEl,i=t.putSortable;this.sortable.captureAnimationState(),i&&i.captureAnimationState();var n=z(this.sortable.el,this.startIndex,this.options);n?this.sortable.el.insertBefore(e,n):this.sortable.el.appendChild(e),this.sortable.animateAll(),i&&i.animateAll()},drop:Se},o(Ce,{pluginName:"revertOnSpill"}),Te.prototype={onSpill:function(t){var e=t.dragEl,i=t.putSortable,n=i||this.sortable;n.captureAnimationState(),e.parentNode&&e.parentNode.removeChild(e),n.animateAll()},drop:Se},o(Te,{pluginName:"removeOnSpill"});var Ee,Ae,Pe,De,Me,je=[],Re=[],Ie=!1,ze=!1,Le=!1;function Fe(){function t(t){for(var e in this)"_"===e.charAt(0)&&"function"===typeof this[e]&&(this[e]=this[e].bind(this));t.options.supportPointer?_(document,"pointerup",this._deselectMultiDrag):(_(document,"mouseup",this._deselectMultiDrag),_(document,"touchend",this._deselectMultiDrag)),_(document,"keydown",this._checkKeyDown),_(document,"keyup",this._checkKeyUp),this.defaults={selectedClass:"sortable-selected",multiDragKey:null,setData:function(e,i){var n="";je.length&&Ae===t?je.forEach((function(t,e){n+=(e?", ":"")+t.textContent})):n=i.textContent,e.setData("Text",n)}}}return t.prototype={multiDragKeyDown:!1,isMultiDrag:!1,delayStartGlobal:function(t){var e=t.dragEl;Pe=e},delayEnded:function(){this.isMultiDrag=~je.indexOf(Pe)},setupClone:function(t){var e=t.sortable,i=t.cancel;if(this.isMultiDrag){for(var n=0;n<je.length;n++)Re.push(G(je[n])),Re[n].sortableIndex=je[n].sortableIndex,Re[n].draggable=!1,Re[n].style["will-change"]="",A(Re[n],this.options.selectedClass,!1),je[n]===Pe&&A(Re[n],this.options.chosenClass,!1);e._hideClone(),i()}},clone:function(t){var e=t.sortable,i=t.rootEl,n=t.dispatchSortableEvent,r=t.cancel;this.isMultiDrag&&(this.options.removeCloneOnHide||je.length&&Ae===e&&(Ne(!0,i),n("clone"),r()))},showClone:function(t){var e=t.cloneNowShown,i=t.rootEl,n=t.cancel;this.isMultiDrag&&(Ne(!1,i),Re.forEach((function(t){P(t,"display","")})),e(),Me=!1,n())},hideClone:function(t){var e=this,i=(t.sortable,t.cloneNowHidden),n=t.cancel;this.isMultiDrag&&(Re.forEach((function(t){P(t,"display","none"),e.options.removeCloneOnHide&&t.parentNode&&t.parentNode.removeChild(t)})),i(),Me=!0,n())},dragStartGlobal:function(t){t.sortable;!this.isMultiDrag&&Ae&&Ae.multiDrag._deselectMultiDrag(),je.forEach((function(t){t.sortableIndex=F(t)})),je=je.sort((function(t,e){return t.sortableIndex-e.sortableIndex})),Le=!0},dragStarted:function(t){var e=this,i=t.sortable;if(this.isMultiDrag){if(this.options.sort&&(i.captureAnimationState(),this.options.animation)){je.forEach((function(t){t!==Pe&&P(t,"position","absolute")}));var n=R(Pe,!1,!0,!0);je.forEach((function(t){t!==Pe&&$(t,n)})),ze=!0,Ie=!0}i.animateAll((function(){ze=!1,Ie=!1,e.options.animation&&je.forEach((function(t){q(t)})),e.options.sort&&We()}))}},dragOver:function(t){var e=t.target,i=t.completed,n=t.cancel;ze&&~je.indexOf(e)&&(i(!1),n())},revert:function(t){var e=t.fromSortable,i=t.rootEl,n=t.sortable,r=t.dragRect;je.length>1&&(je.forEach((function(t){n.addAnimationState({target:t,rect:ze?R(t):r}),q(t),t.fromRect=r,e.removeAnimationState(t)})),ze=!1,Be(!this.options.removeCloneOnHide,i))},dragOverCompleted:function(t){var e=t.sortable,i=t.isOwner,n=t.insertion,r=t.activeSortable,o=t.parentEl,s=t.putSortable,a=this.options;if(n){if(i&&r._hideClone(),Ie=!1,a.animation&&je.length>1&&(ze||!i&&!r.options.sort&&!s)){var c=R(Pe,!1,!0,!0);je.forEach((function(t){t!==Pe&&($(t,c),o.appendChild(t))})),ze=!0}if(!i)if(ze||We(),je.length>1){var l=Me;r._showClone(e),r.options.animation&&!Me&&l&&Re.forEach((function(t){r.addAnimationState({target:t,rect:De}),t.fromRect=De,t.thisAnimationDuration=null}))}else r._showClone(e)}},dragOverAnimationCapture:function(t){var e=t.dragRect,i=t.isOwner,n=t.activeSortable;if(je.forEach((function(t){t.thisAnimationDuration=null})),n.options.animation&&!i&&n.multiDrag.isMultiDrag){De=o({},e);var r=D(Pe,!0);De.top-=r.f,De.left-=r.e}},dragOverAnimationComplete:function(){ze&&(ze=!1,We())},drop:function(t){var e=t.originalEvent,i=t.rootEl,n=t.parentEl,r=t.sortable,o=t.dispatchSortableEvent,s=t.oldIndex,a=t.putSortable,c=a||this.sortable;if(e){var l=this.options,h=n.children;if(!Le)if(l.multiDragKey&&!this.multiDragKeyDown&&this._deselectMultiDrag(),A(Pe,l.selectedClass,!~je.indexOf(Pe)),~je.indexOf(Pe))je.splice(je.indexOf(Pe),1),Ee=null,nt({sortable:r,rootEl:i,name:"deselect",targetEl:Pe,originalEvt:e});else{if(je.push(Pe),nt({sortable:r,rootEl:i,name:"select",targetEl:Pe,originalEvt:e}),e.shiftKey&&Ee&&r.el.contains(Ee)){var u,f,d=F(Ee),p=F(Pe);if(~d&&~p&&d!==p)for(p>d?(f=d,u=p):(f=p,u=d+1);f<u;f++)~je.indexOf(h[f])||(A(h[f],l.selectedClass,!0),je.push(h[f]),nt({sortable:r,rootEl:i,name:"select",targetEl:h[f],originalEvt:e}))}else Ee=Pe;Ae=c}if(Le&&this.isMultiDrag){if((n[K].options.sort||n!==i)&&je.length>1){var g=R(Pe),v=F(Pe,":not(."+this.options.selectedClass+")");if(!Ie&&l.animation&&(Pe.thisAnimationDuration=null),c.captureAnimationState(),!Ie&&(l.animation&&(Pe.fromRect=g,je.forEach((function(t){if(t.thisAnimationDuration=null,t!==Pe){var e=ze?R(t):g;t.fromRect=e,c.addAnimationState({target:t,rect:e})}}))),We(),je.forEach((function(t){h[v]?n.insertBefore(t,h[v]):n.appendChild(t),v++})),s===F(Pe))){var m=!1;je.forEach((function(t){t.sortableIndex===F(t)||(m=!0)})),m&&o("update")}je.forEach((function(t){q(t)})),c.animateAll()}Ae=c}(i===n||a&&"clone"!==a.lastPutMode)&&Re.forEach((function(t){t.parentNode&&t.parentNode.removeChild(t)}))}},nullingGlobal:function(){this.isMultiDrag=Le=!1,Re.length=0},destroyGlobal:function(){this._deselectMultiDrag(),S(document,"pointerup",this._deselectMultiDrag),S(document,"mouseup",this._deselectMultiDrag),S(document,"touchend",this._deselectMultiDrag),S(document,"keydown",this._checkKeyDown),S(document,"keyup",this._checkKeyUp)},_deselectMultiDrag:function(t){if(("undefined"===typeof Le||!Le)&&Ae===this.sortable&&(!t||!O(t.target,this.options.draggable,this.sortable.el,!1))&&(!t||0===t.button))while(je.length){var e=je[0];A(e,this.options.selectedClass,!1),je.shift(),nt({sortable:this.sortable,rootEl:this.sortable.el,name:"deselect",targetEl:e,originalEvt:t})}},_checkKeyDown:function(t){t.key===this.options.multiDragKey&&(this.multiDragKeyDown=!0)},_checkKeyUp:function(t){t.key===this.options.multiDragKey&&(this.multiDragKeyDown=!1)}},o(t,{pluginName:"multiDrag",utils:{select:function(t){var e=t.parentNode[K];e&&e.options.multiDrag&&!~je.indexOf(t)&&(Ae&&Ae!==e&&(Ae.multiDrag._deselectMultiDrag(),Ae=e),A(t,e.options.selectedClass,!0),je.push(t))},deselect:function(t){var e=t.parentNode[K],i=je.indexOf(t);e&&e.options.multiDrag&&~i&&(A(t,e.options.selectedClass,!1),je.splice(i,1))}},eventProperties:function(){var t=this,e=[],i=[];return je.forEach((function(n){var r;e.push({multiDragElement:n,index:n.sortableIndex}),r=ze&&n!==Pe?-1:ze?F(n,":not(."+t.options.selectedClass+")"):F(n),i.push({multiDragElement:n,index:r})})),{items:l(je),clones:[].concat(Re),oldIndicies:e,newIndicies:i}},optionListeners:{multiDragKey:function(t){return t=t.toLowerCase(),"ctrl"===t?t="Control":t.length>1&&(t=t.charAt(0).toUpperCase()+t.substr(1)),t}}})}function Be(t,e){je.forEach((function(i,n){var r=e.children[i.sortableIndex+(t?Number(n):0)];r?e.insertBefore(i,r):e.appendChild(i)}))}function Ne(t,e){Re.forEach((function(i,n){var r=e.children[i.sortableIndex+(t?Number(n):0)];r?e.insertBefore(i,r):e.appendChild(i)}))}function We(){je.forEach((function(t){t!==Pe&&t.parentNode&&t.parentNode.removeChild(t)}))}Jt.mount(new ye),Jt.mount(Te,Ce),e["default"]=Jt},ab13:function(t,e,i){var n=i("b622"),r=n("match");t.exports=function(t){var e=/./;try{"/./"[t](e)}catch(i){try{return e[r]=!1,"/./"[t](e)}catch(n){}}return!1}},ac1f:function(t,e,i){"use strict";var n=i("23e7"),r=i("9263");n({target:"RegExp",proto:!0,forced:/./.exec!==r},{exec:r})},ad6d:function(t,e,i){"use strict";var n=i("825a");t.exports=function(){var t=n(this),e="";return t.global&&(e+="g"),t.ignoreCase&&(e+="i"),t.multiline&&(e+="m"),t.dotAll&&(e+="s"),t.unicode&&(e+="u"),t.sticky&&(e+="y"),e}},ae93:function(t,e,i){"use strict";var n,r,o,s=i("d039"),a=i("e163"),c=i("9112"),l=i("5135"),h=i("b622"),u=i("c430"),f=h("iterator"),d=!1,p=function(){return this};[].keys&&(o=[].keys(),"next"in o?(r=a(a(o)),r!==Object.prototype&&(n=r)):d=!0);var g=void 0==n||s((function(){var t={};return n[f].call(t)!==t}));g&&(n={}),u&&!g||l(n,f)||c(n,f,p),t.exports={IteratorPrototype:n,BUGGY_SAFARI_ITERATORS:d}},b041:function(t,e,i){"use strict";var n=i("00ee"),r=i("f5df");t.exports=n?{}.toString:function(){return"[object "+r(this)+"]"}},b0c0:function(t,e,i){var n=i("83ab"),r=i("9bf2").f,o=Function.prototype,s=o.toString,a=/^\s*function ([^ (]*)/,c="name";n&&!(c in o)&&r(o,c,{configurable:!0,get:function(){try{return s.call(this).match(a)[1]}catch(t){return""}}})},b0f7:function(t,e,i){"use strict";i("c6d3")},b3a4:function(t,e,i){},b575:function(t,e,i){var n,r,o,s,a,c,l,h,u=i("da84"),f=i("06cf").f,d=i("2cf4").set,p=i("1cdc"),g=i("a4b4"),v=i("605d"),m=u.MutationObserver||u.WebKitMutationObserver,y=u.document,b=u.process,w=u.Promise,x=f(u,"queueMicrotask"),_=x&&x.value;_||(n=function(){var t,e;v&&(t=b.domain)&&t.exit();while(r){e=r.fn,r=r.next;try{e()}catch(i){throw r?s():o=void 0,i}}o=void 0,t&&t.enter()},p||v||g||!m||!y?w&&w.resolve?(l=w.resolve(void 0),h=l.then,s=function(){h.call(l,n)}):s=v?function(){b.nextTick(n)}:function(){d.call(u,n)}:(a=!0,c=y.createTextNode(""),new m(n).observe(c,{characterData:!0}),s=function(){c.data=a=!a})),t.exports=_||function(t){var e={fn:t,next:void 0};o&&(o.next=e),r||(r=e,s()),o=e}},b622:function(t,e,i){var n=i("da84"),r=i("5692"),o=i("5135"),s=i("90e3"),a=i("4930"),c=i("fdbf"),l=r("wks"),h=n.Symbol,u=c?h:h&&h.withoutSetter||s;t.exports=function(t){return o(l,t)&&(a||"string"==typeof l[t])||(a&&o(h,t)?l[t]=h[t]:l[t]=u("Symbol."+t)),l[t]}},b639:function(t,e,i){"use strict";(function(t){
/*!
 * The buffer module from node.js, for the browser.
 *
 * @author   Feross Aboukhadijeh <http://feross.org>
 * @license  MIT
 */
var n=i("1fb5"),r=i("9152"),o=i("e3db");function s(){try{var t=new Uint8Array(1);return t.__proto__={__proto__:Uint8Array.prototype,foo:function(){return 42}},42===t.foo()&&"function"===typeof t.subarray&&0===t.subarray(1,1).byteLength}catch(e){return!1}}function a(){return l.TYPED_ARRAY_SUPPORT?2147483647:1073741823}function c(t,e){if(a()<e)throw new RangeError("Invalid typed array length");return l.TYPED_ARRAY_SUPPORT?(t=new Uint8Array(e),t.__proto__=l.prototype):(null===t&&(t=new l(e)),t.length=e),t}function l(t,e,i){if(!l.TYPED_ARRAY_SUPPORT&&!(this instanceof l))return new l(t,e,i);if("number"===typeof t){if("string"===typeof e)throw new Error("If encoding is specified then the first argument must be a string");return d(this,t)}return h(this,t,e,i)}function h(t,e,i,n){if("number"===typeof e)throw new TypeError('"value" argument must not be a number');return"undefined"!==typeof ArrayBuffer&&e instanceof ArrayBuffer?v(t,e,i,n):"string"===typeof e?p(t,e,i):m(t,e)}function u(t){if("number"!==typeof t)throw new TypeError('"size" argument must be a number');if(t<0)throw new RangeError('"size" argument must not be negative')}function f(t,e,i,n){return u(e),e<=0?c(t,e):void 0!==i?"string"===typeof n?c(t,e).fill(i,n):c(t,e).fill(i):c(t,e)}function d(t,e){if(u(e),t=c(t,e<0?0:0|y(e)),!l.TYPED_ARRAY_SUPPORT)for(var i=0;i<e;++i)t[i]=0;return t}function p(t,e,i){if("string"===typeof i&&""!==i||(i="utf8"),!l.isEncoding(i))throw new TypeError('"encoding" must be a valid string encoding');var n=0|w(e,i);t=c(t,n);var r=t.write(e,i);return r!==n&&(t=t.slice(0,r)),t}function g(t,e){var i=e.length<0?0:0|y(e.length);t=c(t,i);for(var n=0;n<i;n+=1)t[n]=255&e[n];return t}function v(t,e,i,n){if(e.byteLength,i<0||e.byteLength<i)throw new RangeError("'offset' is out of bounds");if(e.byteLength<i+(n||0))throw new RangeError("'length' is out of bounds");return e=void 0===i&&void 0===n?new Uint8Array(e):void 0===n?new Uint8Array(e,i):new Uint8Array(e,i,n),l.TYPED_ARRAY_SUPPORT?(t=e,t.__proto__=l.prototype):t=g(t,e),t}function m(t,e){if(l.isBuffer(e)){var i=0|y(e.length);return t=c(t,i),0===t.length?t:(e.copy(t,0,0,i),t)}if(e){if("undefined"!==typeof ArrayBuffer&&e.buffer instanceof ArrayBuffer||"length"in e)return"number"!==typeof e.length||et(e.length)?c(t,0):g(t,e);if("Buffer"===e.type&&o(e.data))return g(t,e.data)}throw new TypeError("First argument must be a string, Buffer, ArrayBuffer, Array, or array-like object.")}function y(t){if(t>=a())throw new RangeError("Attempt to allocate Buffer larger than maximum size: 0x"+a().toString(16)+" bytes");return 0|t}function b(t){return+t!=t&&(t=0),l.alloc(+t)}function w(t,e){if(l.isBuffer(t))return t.length;if("undefined"!==typeof ArrayBuffer&&"function"===typeof ArrayBuffer.isView&&(ArrayBuffer.isView(t)||t instanceof ArrayBuffer))return t.byteLength;"string"!==typeof t&&(t=""+t);var i=t.length;if(0===i)return 0;for(var n=!1;;)switch(e){case"ascii":case"latin1":case"binary":return i;case"utf8":case"utf-8":case void 0:return K(t).length;case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return 2*i;case"hex":return i>>>1;case"base64":return Q(t).length;default:if(n)return K(t).length;e=(""+e).toLowerCase(),n=!0}}function x(t,e,i){var n=!1;if((void 0===e||e<0)&&(e=0),e>this.length)return"";if((void 0===i||i>this.length)&&(i=this.length),i<=0)return"";if(i>>>=0,e>>>=0,i<=e)return"";t||(t="utf8");while(1)switch(t){case"hex":return L(this,e,i);case"utf8":case"utf-8":return M(this,e,i);case"ascii":return I(this,e,i);case"latin1":case"binary":return z(this,e,i);case"base64":return D(this,e,i);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return F(this,e,i);default:if(n)throw new TypeError("Unknown encoding: "+t);t=(t+"").toLowerCase(),n=!0}}function _(t,e,i){var n=t[e];t[e]=t[i],t[i]=n}function S(t,e,i,n,r){if(0===t.length)return-1;if("string"===typeof i?(n=i,i=0):i>2147483647?i=2147483647:i<-2147483648&&(i=-2147483648),i=+i,isNaN(i)&&(i=r?0:t.length-1),i<0&&(i=t.length+i),i>=t.length){if(r)return-1;i=t.length-1}else if(i<0){if(!r)return-1;i=0}if("string"===typeof e&&(e=l.from(e,n)),l.isBuffer(e))return 0===e.length?-1:C(t,e,i,n,r);if("number"===typeof e)return e&=255,l.TYPED_ARRAY_SUPPORT&&"function"===typeof Uint8Array.prototype.indexOf?r?Uint8Array.prototype.indexOf.call(t,e,i):Uint8Array.prototype.lastIndexOf.call(t,e,i):C(t,[e],i,n,r);throw new TypeError("val must be string, number or Buffer")}function C(t,e,i,n,r){var o,s=1,a=t.length,c=e.length;if(void 0!==n&&(n=String(n).toLowerCase(),"ucs2"===n||"ucs-2"===n||"utf16le"===n||"utf-16le"===n)){if(t.length<2||e.length<2)return-1;s=2,a/=2,c/=2,i/=2}function l(t,e){return 1===s?t[e]:t.readUInt16BE(e*s)}if(r){var h=-1;for(o=i;o<a;o++)if(l(t,o)===l(e,-1===h?0:o-h)){if(-1===h&&(h=o),o-h+1===c)return h*s}else-1!==h&&(o-=o-h),h=-1}else for(i+c>a&&(i=a-c),o=i;o>=0;o--){for(var u=!0,f=0;f<c;f++)if(l(t,o+f)!==l(e,f)){u=!1;break}if(u)return o}return-1}function T(t,e,i,n){i=Number(i)||0;var r=t.length-i;n?(n=Number(n),n>r&&(n=r)):n=r;var o=e.length;if(o%2!==0)throw new TypeError("Invalid hex string");n>o/2&&(n=o/2);for(var s=0;s<n;++s){var a=parseInt(e.substr(2*s,2),16);if(isNaN(a))return s;t[i+s]=a}return s}function O(t,e,i,n){return tt(K(e,t.length-i),t,i,n)}function k(t,e,i,n){return tt(Z(e),t,i,n)}function E(t,e,i,n){return k(t,e,i,n)}function A(t,e,i,n){return tt(Q(e),t,i,n)}function P(t,e,i,n){return tt(J(e,t.length-i),t,i,n)}function D(t,e,i){return 0===e&&i===t.length?n.fromByteArray(t):n.fromByteArray(t.slice(e,i))}function M(t,e,i){i=Math.min(t.length,i);var n=[],r=e;while(r<i){var o,s,a,c,l=t[r],h=null,u=l>239?4:l>223?3:l>191?2:1;if(r+u<=i)switch(u){case 1:l<128&&(h=l);break;case 2:o=t[r+1],128===(192&o)&&(c=(31&l)<<6|63&o,c>127&&(h=c));break;case 3:o=t[r+1],s=t[r+2],128===(192&o)&&128===(192&s)&&(c=(15&l)<<12|(63&o)<<6|63&s,c>2047&&(c<55296||c>57343)&&(h=c));break;case 4:o=t[r+1],s=t[r+2],a=t[r+3],128===(192&o)&&128===(192&s)&&128===(192&a)&&(c=(15&l)<<18|(63&o)<<12|(63&s)<<6|63&a,c>65535&&c<1114112&&(h=c))}null===h?(h=65533,u=1):h>65535&&(h-=65536,n.push(h>>>10&1023|55296),h=56320|1023&h),n.push(h),r+=u}return R(n)}e.Buffer=l,e.SlowBuffer=b,e.INSPECT_MAX_BYTES=50,l.TYPED_ARRAY_SUPPORT=void 0!==t.TYPED_ARRAY_SUPPORT?t.TYPED_ARRAY_SUPPORT:s(),e.kMaxLength=a(),l.poolSize=8192,l._augment=function(t){return t.__proto__=l.prototype,t},l.from=function(t,e,i){return h(null,t,e,i)},l.TYPED_ARRAY_SUPPORT&&(l.prototype.__proto__=Uint8Array.prototype,l.__proto__=Uint8Array,"undefined"!==typeof Symbol&&Symbol.species&&l[Symbol.species]===l&&Object.defineProperty(l,Symbol.species,{value:null,configurable:!0})),l.alloc=function(t,e,i){return f(null,t,e,i)},l.allocUnsafe=function(t){return d(null,t)},l.allocUnsafeSlow=function(t){return d(null,t)},l.isBuffer=function(t){return!(null==t||!t._isBuffer)},l.compare=function(t,e){if(!l.isBuffer(t)||!l.isBuffer(e))throw new TypeError("Arguments must be Buffers");if(t===e)return 0;for(var i=t.length,n=e.length,r=0,o=Math.min(i,n);r<o;++r)if(t[r]!==e[r]){i=t[r],n=e[r];break}return i<n?-1:n<i?1:0},l.isEncoding=function(t){switch(String(t).toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"latin1":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return!0;default:return!1}},l.concat=function(t,e){if(!o(t))throw new TypeError('"list" argument must be an Array of Buffers');if(0===t.length)return l.alloc(0);var i;if(void 0===e)for(e=0,i=0;i<t.length;++i)e+=t[i].length;var n=l.allocUnsafe(e),r=0;for(i=0;i<t.length;++i){var s=t[i];if(!l.isBuffer(s))throw new TypeError('"list" argument must be an Array of Buffers');s.copy(n,r),r+=s.length}return n},l.byteLength=w,l.prototype._isBuffer=!0,l.prototype.swap16=function(){var t=this.length;if(t%2!==0)throw new RangeError("Buffer size must be a multiple of 16-bits");for(var e=0;e<t;e+=2)_(this,e,e+1);return this},l.prototype.swap32=function(){var t=this.length;if(t%4!==0)throw new RangeError("Buffer size must be a multiple of 32-bits");for(var e=0;e<t;e+=4)_(this,e,e+3),_(this,e+1,e+2);return this},l.prototype.swap64=function(){var t=this.length;if(t%8!==0)throw new RangeError("Buffer size must be a multiple of 64-bits");for(var e=0;e<t;e+=8)_(this,e,e+7),_(this,e+1,e+6),_(this,e+2,e+5),_(this,e+3,e+4);return this},l.prototype.toString=function(){var t=0|this.length;return 0===t?"":0===arguments.length?M(this,0,t):x.apply(this,arguments)},l.prototype.equals=function(t){if(!l.isBuffer(t))throw new TypeError("Argument must be a Buffer");return this===t||0===l.compare(this,t)},l.prototype.inspect=function(){var t="",i=e.INSPECT_MAX_BYTES;return this.length>0&&(t=this.toString("hex",0,i).match(/.{2}/g).join(" "),this.length>i&&(t+=" ... ")),"<Buffer "+t+">"},l.prototype.compare=function(t,e,i,n,r){if(!l.isBuffer(t))throw new TypeError("Argument must be a Buffer");if(void 0===e&&(e=0),void 0===i&&(i=t?t.length:0),void 0===n&&(n=0),void 0===r&&(r=this.length),e<0||i>t.length||n<0||r>this.length)throw new RangeError("out of range index");if(n>=r&&e>=i)return 0;if(n>=r)return-1;if(e>=i)return 1;if(e>>>=0,i>>>=0,n>>>=0,r>>>=0,this===t)return 0;for(var o=r-n,s=i-e,a=Math.min(o,s),c=this.slice(n,r),h=t.slice(e,i),u=0;u<a;++u)if(c[u]!==h[u]){o=c[u],s=h[u];break}return o<s?-1:s<o?1:0},l.prototype.includes=function(t,e,i){return-1!==this.indexOf(t,e,i)},l.prototype.indexOf=function(t,e,i){return S(this,t,e,i,!0)},l.prototype.lastIndexOf=function(t,e,i){return S(this,t,e,i,!1)},l.prototype.write=function(t,e,i,n){if(void 0===e)n="utf8",i=this.length,e=0;else if(void 0===i&&"string"===typeof e)n=e,i=this.length,e=0;else{if(!isFinite(e))throw new Error("Buffer.write(string, encoding, offset[, length]) is no longer supported");e|=0,isFinite(i)?(i|=0,void 0===n&&(n="utf8")):(n=i,i=void 0)}var r=this.length-e;if((void 0===i||i>r)&&(i=r),t.length>0&&(i<0||e<0)||e>this.length)throw new RangeError("Attempt to write outside buffer bounds");n||(n="utf8");for(var o=!1;;)switch(n){case"hex":return T(this,t,e,i);case"utf8":case"utf-8":return O(this,t,e,i);case"ascii":return k(this,t,e,i);case"latin1":case"binary":return E(this,t,e,i);case"base64":return A(this,t,e,i);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return P(this,t,e,i);default:if(o)throw new TypeError("Unknown encoding: "+n);n=(""+n).toLowerCase(),o=!0}},l.prototype.toJSON=function(){return{type:"Buffer",data:Array.prototype.slice.call(this._arr||this,0)}};var j=4096;function R(t){var e=t.length;if(e<=j)return String.fromCharCode.apply(String,t);var i="",n=0;while(n<e)i+=String.fromCharCode.apply(String,t.slice(n,n+=j));return i}function I(t,e,i){var n="";i=Math.min(t.length,i);for(var r=e;r<i;++r)n+=String.fromCharCode(127&t[r]);return n}function z(t,e,i){var n="";i=Math.min(t.length,i);for(var r=e;r<i;++r)n+=String.fromCharCode(t[r]);return n}function L(t,e,i){var n=t.length;(!e||e<0)&&(e=0),(!i||i<0||i>n)&&(i=n);for(var r="",o=e;o<i;++o)r+=q(t[o]);return r}function F(t,e,i){for(var n=t.slice(e,i),r="",o=0;o<n.length;o+=2)r+=String.fromCharCode(n[o]+256*n[o+1]);return r}function B(t,e,i){if(t%1!==0||t<0)throw new RangeError("offset is not uint");if(t+e>i)throw new RangeError("Trying to access beyond buffer length")}function N(t,e,i,n,r,o){if(!l.isBuffer(t))throw new TypeError('"buffer" argument must be a Buffer instance');if(e>r||e<o)throw new RangeError('"value" argument is out of bounds');if(i+n>t.length)throw new RangeError("Index out of range")}function W(t,e,i,n){e<0&&(e=65535+e+1);for(var r=0,o=Math.min(t.length-i,2);r<o;++r)t[i+r]=(e&255<<8*(n?r:1-r))>>>8*(n?r:1-r)}function H(t,e,i,n){e<0&&(e=4294967295+e+1);for(var r=0,o=Math.min(t.length-i,4);r<o;++r)t[i+r]=e>>>8*(n?r:3-r)&255}function Y(t,e,i,n,r,o){if(i+n>t.length)throw new RangeError("Index out of range");if(i<0)throw new RangeError("Index out of range")}function X(t,e,i,n,o){return o||Y(t,e,i,4,34028234663852886e22,-34028234663852886e22),r.write(t,e,i,n,23,4),i+4}function U(t,e,i,n,o){return o||Y(t,e,i,8,17976931348623157e292,-17976931348623157e292),r.write(t,e,i,n,52,8),i+8}l.prototype.slice=function(t,e){var i,n=this.length;if(t=~~t,e=void 0===e?n:~~e,t<0?(t+=n,t<0&&(t=0)):t>n&&(t=n),e<0?(e+=n,e<0&&(e=0)):e>n&&(e=n),e<t&&(e=t),l.TYPED_ARRAY_SUPPORT)i=this.subarray(t,e),i.__proto__=l.prototype;else{var r=e-t;i=new l(r,void 0);for(var o=0;o<r;++o)i[o]=this[o+t]}return i},l.prototype.readUIntLE=function(t,e,i){t|=0,e|=0,i||B(t,e,this.length);var n=this[t],r=1,o=0;while(++o<e&&(r*=256))n+=this[t+o]*r;return n},l.prototype.readUIntBE=function(t,e,i){t|=0,e|=0,i||B(t,e,this.length);var n=this[t+--e],r=1;while(e>0&&(r*=256))n+=this[t+--e]*r;return n},l.prototype.readUInt8=function(t,e){return e||B(t,1,this.length),this[t]},l.prototype.readUInt16LE=function(t,e){return e||B(t,2,this.length),this[t]|this[t+1]<<8},l.prototype.readUInt16BE=function(t,e){return e||B(t,2,this.length),this[t]<<8|this[t+1]},l.prototype.readUInt32LE=function(t,e){return e||B(t,4,this.length),(this[t]|this[t+1]<<8|this[t+2]<<16)+16777216*this[t+3]},l.prototype.readUInt32BE=function(t,e){return e||B(t,4,this.length),16777216*this[t]+(this[t+1]<<16|this[t+2]<<8|this[t+3])},l.prototype.readIntLE=function(t,e,i){t|=0,e|=0,i||B(t,e,this.length);var n=this[t],r=1,o=0;while(++o<e&&(r*=256))n+=this[t+o]*r;return r*=128,n>=r&&(n-=Math.pow(2,8*e)),n},l.prototype.readIntBE=function(t,e,i){t|=0,e|=0,i||B(t,e,this.length);var n=e,r=1,o=this[t+--n];while(n>0&&(r*=256))o+=this[t+--n]*r;return r*=128,o>=r&&(o-=Math.pow(2,8*e)),o},l.prototype.readInt8=function(t,e){return e||B(t,1,this.length),128&this[t]?-1*(255-this[t]+1):this[t]},l.prototype.readInt16LE=function(t,e){e||B(t,2,this.length);var i=this[t]|this[t+1]<<8;return 32768&i?4294901760|i:i},l.prototype.readInt16BE=function(t,e){e||B(t,2,this.length);var i=this[t+1]|this[t]<<8;return 32768&i?4294901760|i:i},l.prototype.readInt32LE=function(t,e){return e||B(t,4,this.length),this[t]|this[t+1]<<8|this[t+2]<<16|this[t+3]<<24},l.prototype.readInt32BE=function(t,e){return e||B(t,4,this.length),this[t]<<24|this[t+1]<<16|this[t+2]<<8|this[t+3]},l.prototype.readFloatLE=function(t,e){return e||B(t,4,this.length),r.read(this,t,!0,23,4)},l.prototype.readFloatBE=function(t,e){return e||B(t,4,this.length),r.read(this,t,!1,23,4)},l.prototype.readDoubleLE=function(t,e){return e||B(t,8,this.length),r.read(this,t,!0,52,8)},l.prototype.readDoubleBE=function(t,e){return e||B(t,8,this.length),r.read(this,t,!1,52,8)},l.prototype.writeUIntLE=function(t,e,i,n){if(t=+t,e|=0,i|=0,!n){var r=Math.pow(2,8*i)-1;N(this,t,e,i,r,0)}var o=1,s=0;this[e]=255&t;while(++s<i&&(o*=256))this[e+s]=t/o&255;return e+i},l.prototype.writeUIntBE=function(t,e,i,n){if(t=+t,e|=0,i|=0,!n){var r=Math.pow(2,8*i)-1;N(this,t,e,i,r,0)}var o=i-1,s=1;this[e+o]=255&t;while(--o>=0&&(s*=256))this[e+o]=t/s&255;return e+i},l.prototype.writeUInt8=function(t,e,i){return t=+t,e|=0,i||N(this,t,e,1,255,0),l.TYPED_ARRAY_SUPPORT||(t=Math.floor(t)),this[e]=255&t,e+1},l.prototype.writeUInt16LE=function(t,e,i){return t=+t,e|=0,i||N(this,t,e,2,65535,0),l.TYPED_ARRAY_SUPPORT?(this[e]=255&t,this[e+1]=t>>>8):W(this,t,e,!0),e+2},l.prototype.writeUInt16BE=function(t,e,i){return t=+t,e|=0,i||N(this,t,e,2,65535,0),l.TYPED_ARRAY_SUPPORT?(this[e]=t>>>8,this[e+1]=255&t):W(this,t,e,!1),e+2},l.prototype.writeUInt32LE=function(t,e,i){return t=+t,e|=0,i||N(this,t,e,4,4294967295,0),l.TYPED_ARRAY_SUPPORT?(this[e+3]=t>>>24,this[e+2]=t>>>16,this[e+1]=t>>>8,this[e]=255&t):H(this,t,e,!0),e+4},l.prototype.writeUInt32BE=function(t,e,i){return t=+t,e|=0,i||N(this,t,e,4,4294967295,0),l.TYPED_ARRAY_SUPPORT?(this[e]=t>>>24,this[e+1]=t>>>16,this[e+2]=t>>>8,this[e+3]=255&t):H(this,t,e,!1),e+4},l.prototype.writeIntLE=function(t,e,i,n){if(t=+t,e|=0,!n){var r=Math.pow(2,8*i-1);N(this,t,e,i,r-1,-r)}var o=0,s=1,a=0;this[e]=255&t;while(++o<i&&(s*=256))t<0&&0===a&&0!==this[e+o-1]&&(a=1),this[e+o]=(t/s>>0)-a&255;return e+i},l.prototype.writeIntBE=function(t,e,i,n){if(t=+t,e|=0,!n){var r=Math.pow(2,8*i-1);N(this,t,e,i,r-1,-r)}var o=i-1,s=1,a=0;this[e+o]=255&t;while(--o>=0&&(s*=256))t<0&&0===a&&0!==this[e+o+1]&&(a=1),this[e+o]=(t/s>>0)-a&255;return e+i},l.prototype.writeInt8=function(t,e,i){return t=+t,e|=0,i||N(this,t,e,1,127,-128),l.TYPED_ARRAY_SUPPORT||(t=Math.floor(t)),t<0&&(t=255+t+1),this[e]=255&t,e+1},l.prototype.writeInt16LE=function(t,e,i){return t=+t,e|=0,i||N(this,t,e,2,32767,-32768),l.TYPED_ARRAY_SUPPORT?(this[e]=255&t,this[e+1]=t>>>8):W(this,t,e,!0),e+2},l.prototype.writeInt16BE=function(t,e,i){return t=+t,e|=0,i||N(this,t,e,2,32767,-32768),l.TYPED_ARRAY_SUPPORT?(this[e]=t>>>8,this[e+1]=255&t):W(this,t,e,!1),e+2},l.prototype.writeInt32LE=function(t,e,i){return t=+t,e|=0,i||N(this,t,e,4,2147483647,-2147483648),l.TYPED_ARRAY_SUPPORT?(this[e]=255&t,this[e+1]=t>>>8,this[e+2]=t>>>16,this[e+3]=t>>>24):H(this,t,e,!0),e+4},l.prototype.writeInt32BE=function(t,e,i){return t=+t,e|=0,i||N(this,t,e,4,2147483647,-2147483648),t<0&&(t=4294967295+t+1),l.TYPED_ARRAY_SUPPORT?(this[e]=t>>>24,this[e+1]=t>>>16,this[e+2]=t>>>8,this[e+3]=255&t):H(this,t,e,!1),e+4},l.prototype.writeFloatLE=function(t,e,i){return X(this,t,e,!0,i)},l.prototype.writeFloatBE=function(t,e,i){return X(this,t,e,!1,i)},l.prototype.writeDoubleLE=function(t,e,i){return U(this,t,e,!0,i)},l.prototype.writeDoubleBE=function(t,e,i){return U(this,t,e,!1,i)},l.prototype.copy=function(t,e,i,n){if(i||(i=0),n||0===n||(n=this.length),e>=t.length&&(e=t.length),e||(e=0),n>0&&n<i&&(n=i),n===i)return 0;if(0===t.length||0===this.length)return 0;if(e<0)throw new RangeError("targetStart out of bounds");if(i<0||i>=this.length)throw new RangeError("sourceStart out of bounds");if(n<0)throw new RangeError("sourceEnd out of bounds");n>this.length&&(n=this.length),t.length-e<n-i&&(n=t.length-e+i);var r,o=n-i;if(this===t&&i<e&&e<n)for(r=o-1;r>=0;--r)t[r+e]=this[r+i];else if(o<1e3||!l.TYPED_ARRAY_SUPPORT)for(r=0;r<o;++r)t[r+e]=this[r+i];else Uint8Array.prototype.set.call(t,this.subarray(i,i+o),e);return o},l.prototype.fill=function(t,e,i,n){if("string"===typeof t){if("string"===typeof e?(n=e,e=0,i=this.length):"string"===typeof i&&(n=i,i=this.length),1===t.length){var r=t.charCodeAt(0);r<256&&(t=r)}if(void 0!==n&&"string"!==typeof n)throw new TypeError("encoding must be a string");if("string"===typeof n&&!l.isEncoding(n))throw new TypeError("Unknown encoding: "+n)}else"number"===typeof t&&(t&=255);if(e<0||this.length<e||this.length<i)throw new RangeError("Out of range index");if(i<=e)return this;var o;if(e>>>=0,i=void 0===i?this.length:i>>>0,t||(t=0),"number"===typeof t)for(o=e;o<i;++o)this[o]=t;else{var s=l.isBuffer(t)?t:K(new l(t,n).toString()),a=s.length;for(o=0;o<i-e;++o)this[o+e]=s[o%a]}return this};var V=/[^+\/0-9A-Za-z-_]/g;function G(t){if(t=$(t).replace(V,""),t.length<2)return"";while(t.length%4!==0)t+="=";return t}function $(t){return t.trim?t.trim():t.replace(/^\s+|\s+$/g,"")}function q(t){return t<16?"0"+t.toString(16):t.toString(16)}function K(t,e){var i;e=e||1/0;for(var n=t.length,r=null,o=[],s=0;s<n;++s){if(i=t.charCodeAt(s),i>55295&&i<57344){if(!r){if(i>56319){(e-=3)>-1&&o.push(239,191,189);continue}if(s+1===n){(e-=3)>-1&&o.push(239,191,189);continue}r=i;continue}if(i<56320){(e-=3)>-1&&o.push(239,191,189),r=i;continue}i=65536+(r-55296<<10|i-56320)}else r&&(e-=3)>-1&&o.push(239,191,189);if(r=null,i<128){if((e-=1)<0)break;o.push(i)}else if(i<2048){if((e-=2)<0)break;o.push(i>>6|192,63&i|128)}else if(i<65536){if((e-=3)<0)break;o.push(i>>12|224,i>>6&63|128,63&i|128)}else{if(!(i<1114112))throw new Error("Invalid code point");if((e-=4)<0)break;o.push(i>>18|240,i>>12&63|128,i>>6&63|128,63&i|128)}}return o}function Z(t){for(var e=[],i=0;i<t.length;++i)e.push(255&t.charCodeAt(i));return e}function J(t,e){for(var i,n,r,o=[],s=0;s<t.length;++s){if((e-=2)<0)break;i=t.charCodeAt(s),n=i>>8,r=i%256,o.push(r),o.push(n)}return o}function Q(t){return n.toByteArray(G(t))}function tt(t,e,i,n){for(var r=0;r<n;++r){if(r+i>=e.length||r>=t.length)break;e[r+i]=t[r]}return r}function et(t){return t!==t}}).call(this,i("c8ba"))},b64b:function(t,e,i){var n=i("23e7"),r=i("7b0b"),o=i("df75"),s=i("d039"),a=s((function(){o(1)}));n({target:"Object",stat:!0,forced:a},{keys:function(t){return o(r(t))}})},b680:function(t,e,i){"use strict";var n=i("23e7"),r=i("a691"),o=i("408a"),s=i("1148"),a=i("d039"),c=1..toFixed,l=Math.floor,h=function(t,e,i){return 0===e?i:e%2===1?h(t,e-1,i*t):h(t*t,e/2,i)},u=function(t){var e=0,i=t;while(i>=4096)e+=12,i/=4096;while(i>=2)e+=1,i/=2;return e},f=function(t,e,i){var n=-1,r=i;while(++n<6)r+=e*t[n],t[n]=r%1e7,r=l(r/1e7)},d=function(t,e){var i=6,n=0;while(--i>=0)n+=t[i],t[i]=l(n/e),n=n%e*1e7},p=function(t){var e=6,i="";while(--e>=0)if(""!==i||0===e||0!==t[e]){var n=String(t[e]);i=""===i?n:i+s.call("0",7-n.length)+n}return i},g=c&&("0.000"!==8e-5.toFixed(3)||"1"!==.9.toFixed(0)||"1.25"!==1.255.toFixed(2)||"1000000000000000128"!==(0xde0b6b3a7640080).toFixed(0))||!a((function(){c.call({})}));n({target:"Number",proto:!0,forced:g},{toFixed:function(t){var e,i,n,a,c=o(this),l=r(t),g=[0,0,0,0,0,0],v="",m="0";if(l<0||l>20)throw RangeError("Incorrect fraction digits");if(c!=c)return"NaN";if(c<=-1e21||c>=1e21)return String(c);if(c<0&&(v="-",c=-c),c>1e-21)if(e=u(c*h(2,69,1))-69,i=e<0?c*h(2,-e,1):c/h(2,e,1),i*=4503599627370496,e=52-e,e>0){f(g,0,i),n=l;while(n>=7)f(g,1e7,0),n-=7;f(g,h(10,n,1),0),n=e-1;while(n>=23)d(g,1<<23),n-=23;d(g,1<<n),f(g,1,1),d(g,2),m=p(g)}else f(g,0,i),f(g,1<<-e,0),m=p(g)+s.call("0",l);return l>0?(a=m.length,m=v+(a<=l?"0."+s.call("0",l-a)+m:m.slice(0,a-l)+"."+m.slice(a-l))):m=v+m,m}})},b727:function(t,e,i){var n=i("0366"),r=i("44ad"),o=i("7b0b"),s=i("50c4"),a=i("65f0"),c=[].push,l=function(t){var e=1==t,i=2==t,l=3==t,h=4==t,u=6==t,f=7==t,d=5==t||u;return function(p,g,v,m){for(var y,b,w=o(p),x=r(w),_=n(g,v,3),S=s(x.length),C=0,T=m||a,O=e?T(p,S):i||f?T(p,0):void 0;S>C;C++)if((d||C in x)&&(y=x[C],b=_(y,C,w),t))if(e)O[C]=b;else if(b)switch(t){case 3:return!0;case 5:return y;case 6:return C;case 2:c.call(O,y)}else switch(t){case 4:return!1;case 7:c.call(O,y)}return u?-1:l||h?h:O}};t.exports={forEach:l(0),map:l(1),filter:l(2),some:l(3),every:l(4),find:l(5),findIndex:l(6),filterOut:l(7)}},b76a:function(t,e,i){(function(e,n){t.exports=n(i("aa47"))})("undefined"!==typeof self&&self,(function(t){return function(t){var e={};function i(n){if(e[n])return e[n].exports;var r=e[n]={i:n,l:!1,exports:{}};return t[n].call(r.exports,r,r.exports,i),r.l=!0,r.exports}return i.m=t,i.c=e,i.d=function(t,e,n){i.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:n})},i.r=function(t){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},i.t=function(t,e){if(1&e&&(t=i(t)),8&e)return t;if(4&e&&"object"===typeof t&&t&&t.__esModule)return t;var n=Object.create(null);if(i.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var r in t)i.d(n,r,function(e){return t[e]}.bind(null,r));return n},i.n=function(t){var e=t&&t.__esModule?function(){return t["default"]}:function(){return t};return i.d(e,"a",e),e},i.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},i.p="",i(i.s="fb15")}({"01f9":function(t,e,i){"use strict";var n=i("2d00"),r=i("5ca1"),o=i("2aba"),s=i("32e9"),a=i("84f2"),c=i("41a0"),l=i("7f20"),h=i("38fd"),u=i("2b4c")("iterator"),f=!([].keys&&"next"in[].keys()),d="@@iterator",p="keys",g="values",v=function(){return this};t.exports=function(t,e,i,m,y,b,w){c(i,e,m);var x,_,S,C=function(t){if(!f&&t in E)return E[t];switch(t){case p:return function(){return new i(this,t)};case g:return function(){return new i(this,t)}}return function(){return new i(this,t)}},T=e+" Iterator",O=y==g,k=!1,E=t.prototype,A=E[u]||E[d]||y&&E[y],P=A||C(y),D=y?O?C("entries"):P:void 0,M="Array"==e&&E.entries||A;if(M&&(S=h(M.call(new t)),S!==Object.prototype&&S.next&&(l(S,T,!0),n||"function"==typeof S[u]||s(S,u,v))),O&&A&&A.name!==g&&(k=!0,P=function(){return A.call(this)}),n&&!w||!f&&!k&&E[u]||s(E,u,P),a[e]=P,a[T]=v,y)if(x={values:O?P:C(g),keys:b?P:C(p),entries:D},w)for(_ in x)_ in E||o(E,_,x[_]);else r(r.P+r.F*(f||k),e,x);return x}},"02f4":function(t,e,i){var n=i("4588"),r=i("be13");t.exports=function(t){return function(e,i){var o,s,a=String(r(e)),c=n(i),l=a.length;return c<0||c>=l?t?"":void 0:(o=a.charCodeAt(c),o<55296||o>56319||c+1===l||(s=a.charCodeAt(c+1))<56320||s>57343?t?a.charAt(c):o:t?a.slice(c,c+2):s-56320+(o-55296<<10)+65536)}}},"0390":function(t,e,i){"use strict";var n=i("02f4")(!0);t.exports=function(t,e,i){return e+(i?n(t,e).length:1)}},"0bfb":function(t,e,i){"use strict";var n=i("cb7c");t.exports=function(){var t=n(this),e="";return t.global&&(e+="g"),t.ignoreCase&&(e+="i"),t.multiline&&(e+="m"),t.unicode&&(e+="u"),t.sticky&&(e+="y"),e}},"0d58":function(t,e,i){var n=i("ce10"),r=i("e11e");t.exports=Object.keys||function(t){return n(t,r)}},1495:function(t,e,i){var n=i("86cc"),r=i("cb7c"),o=i("0d58");t.exports=i("9e1e")?Object.defineProperties:function(t,e){r(t);var i,s=o(e),a=s.length,c=0;while(a>c)n.f(t,i=s[c++],e[i]);return t}},"214f":function(t,e,i){"use strict";i("b0c5");var n=i("2aba"),r=i("32e9"),o=i("79e5"),s=i("be13"),a=i("2b4c"),c=i("520a"),l=a("species"),h=!o((function(){var t=/./;return t.exec=function(){var t=[];return t.groups={a:"7"},t},"7"!=="".replace(t,"$<a>")})),u=function(){var t=/(?:)/,e=t.exec;t.exec=function(){return e.apply(this,arguments)};var i="ab".split(t);return 2===i.length&&"a"===i[0]&&"b"===i[1]}();t.exports=function(t,e,i){var f=a(t),d=!o((function(){var e={};return e[f]=function(){return 7},7!=""[t](e)})),p=d?!o((function(){var e=!1,i=/a/;return i.exec=function(){return e=!0,null},"split"===t&&(i.constructor={},i.constructor[l]=function(){return i}),i[f](""),!e})):void 0;if(!d||!p||"replace"===t&&!h||"split"===t&&!u){var g=/./[f],v=i(s,f,""[t],(function(t,e,i,n,r){return e.exec===c?d&&!r?{done:!0,value:g.call(e,i,n)}:{done:!0,value:t.call(i,e,n)}:{done:!1}})),m=v[0],y=v[1];n(String.prototype,t,m),r(RegExp.prototype,f,2==e?function(t,e){return y.call(t,this,e)}:function(t){return y.call(t,this)})}}},"230e":function(t,e,i){var n=i("d3f4"),r=i("7726").document,o=n(r)&&n(r.createElement);t.exports=function(t){return o?r.createElement(t):{}}},"23c6":function(t,e,i){var n=i("2d95"),r=i("2b4c")("toStringTag"),o="Arguments"==n(function(){return arguments}()),s=function(t,e){try{return t[e]}catch(i){}};t.exports=function(t){var e,i,a;return void 0===t?"Undefined":null===t?"Null":"string"==typeof(i=s(e=Object(t),r))?i:o?n(e):"Object"==(a=n(e))&&"function"==typeof e.callee?"Arguments":a}},2621:function(t,e){e.f=Object.getOwnPropertySymbols},"2aba":function(t,e,i){var n=i("7726"),r=i("32e9"),o=i("69a8"),s=i("ca5a")("src"),a=i("fa5b"),c="toString",l=(""+a).split(c);i("8378").inspectSource=function(t){return a.call(t)},(t.exports=function(t,e,i,a){var c="function"==typeof i;c&&(o(i,"name")||r(i,"name",e)),t[e]!==i&&(c&&(o(i,s)||r(i,s,t[e]?""+t[e]:l.join(String(e)))),t===n?t[e]=i:a?t[e]?t[e]=i:r(t,e,i):(delete t[e],r(t,e,i)))})(Function.prototype,c,(function(){return"function"==typeof this&&this[s]||a.call(this)}))},"2aeb":function(t,e,i){var n=i("cb7c"),r=i("1495"),o=i("e11e"),s=i("613b")("IE_PROTO"),a=function(){},c="prototype",l=function(){var t,e=i("230e")("iframe"),n=o.length,r="<",s=">";e.style.display="none",i("fab2").appendChild(e),e.src="javascript:",t=e.contentWindow.document,t.open(),t.write(r+"script"+s+"document.F=Object"+r+"/script"+s),t.close(),l=t.F;while(n--)delete l[c][o[n]];return l()};t.exports=Object.create||function(t,e){var i;return null!==t?(a[c]=n(t),i=new a,a[c]=null,i[s]=t):i=l(),void 0===e?i:r(i,e)}},"2b4c":function(t,e,i){var n=i("5537")("wks"),r=i("ca5a"),o=i("7726").Symbol,s="function"==typeof o,a=t.exports=function(t){return n[t]||(n[t]=s&&o[t]||(s?o:r)("Symbol."+t))};a.store=n},"2d00":function(t,e){t.exports=!1},"2d95":function(t,e){var i={}.toString;t.exports=function(t){return i.call(t).slice(8,-1)}},"2fdb":function(t,e,i){"use strict";var n=i("5ca1"),r=i("d2c8"),o="includes";n(n.P+n.F*i("5147")(o),"String",{includes:function(t){return!!~r(this,t,o).indexOf(t,arguments.length>1?arguments[1]:void 0)}})},"32e9":function(t,e,i){var n=i("86cc"),r=i("4630");t.exports=i("9e1e")?function(t,e,i){return n.f(t,e,r(1,i))}:function(t,e,i){return t[e]=i,t}},"38fd":function(t,e,i){var n=i("69a8"),r=i("4bf8"),o=i("613b")("IE_PROTO"),s=Object.prototype;t.exports=Object.getPrototypeOf||function(t){return t=r(t),n(t,o)?t[o]:"function"==typeof t.constructor&&t instanceof t.constructor?t.constructor.prototype:t instanceof Object?s:null}},"41a0":function(t,e,i){"use strict";var n=i("2aeb"),r=i("4630"),o=i("7f20"),s={};i("32e9")(s,i("2b4c")("iterator"),(function(){return this})),t.exports=function(t,e,i){t.prototype=n(s,{next:r(1,i)}),o(t,e+" Iterator")}},"456d":function(t,e,i){var n=i("4bf8"),r=i("0d58");i("5eda")("keys",(function(){return function(t){return r(n(t))}}))},4588:function(t,e){var i=Math.ceil,n=Math.floor;t.exports=function(t){return isNaN(t=+t)?0:(t>0?n:i)(t)}},4630:function(t,e){t.exports=function(t,e){return{enumerable:!(1&t),configurable:!(2&t),writable:!(4&t),value:e}}},"4bf8":function(t,e,i){var n=i("be13");t.exports=function(t){return Object(n(t))}},5147:function(t,e,i){var n=i("2b4c")("match");t.exports=function(t){var e=/./;try{"/./"[t](e)}catch(i){try{return e[n]=!1,!"/./"[t](e)}catch(r){}}return!0}},"520a":function(t,e,i){"use strict";var n=i("0bfb"),r=RegExp.prototype.exec,o=String.prototype.replace,s=r,a="lastIndex",c=function(){var t=/a/,e=/b*/g;return r.call(t,"a"),r.call(e,"a"),0!==t[a]||0!==e[a]}(),l=void 0!==/()??/.exec("")[1],h=c||l;h&&(s=function(t){var e,i,s,h,u=this;return l&&(i=new RegExp("^"+u.source+"$(?!\\s)",n.call(u))),c&&(e=u[a]),s=r.call(u,t),c&&s&&(u[a]=u.global?s.index+s[0].length:e),l&&s&&s.length>1&&o.call(s[0],i,(function(){for(h=1;h<arguments.length-2;h++)void 0===arguments[h]&&(s[h]=void 0)})),s}),t.exports=s},"52a7":function(t,e){e.f={}.propertyIsEnumerable},5537:function(t,e,i){var n=i("8378"),r=i("7726"),o="__core-js_shared__",s=r[o]||(r[o]={});(t.exports=function(t,e){return s[t]||(s[t]=void 0!==e?e:{})})("versions",[]).push({version:n.version,mode:i("2d00")?"pure":"global",copyright:"Â© 2019 Denis Pushkarev (zloirock.ru)"})},"5ca1":function(t,e,i){var n=i("7726"),r=i("8378"),o=i("32e9"),s=i("2aba"),a=i("9b43"),c="prototype",l=function(t,e,i){var h,u,f,d,p=t&l.F,g=t&l.G,v=t&l.S,m=t&l.P,y=t&l.B,b=g?n:v?n[e]||(n[e]={}):(n[e]||{})[c],w=g?r:r[e]||(r[e]={}),x=w[c]||(w[c]={});for(h in g&&(i=e),i)u=!p&&b&&void 0!==b[h],f=(u?b:i)[h],d=y&&u?a(f,n):m&&"function"==typeof f?a(Function.call,f):f,b&&s(b,h,f,t&l.U),w[h]!=f&&o(w,h,d),m&&x[h]!=f&&(x[h]=f)};n.core=r,l.F=1,l.G=2,l.S=4,l.P=8,l.B=16,l.W=32,l.U=64,l.R=128,t.exports=l},"5eda":function(t,e,i){var n=i("5ca1"),r=i("8378"),o=i("79e5");t.exports=function(t,e){var i=(r.Object||{})[t]||Object[t],s={};s[t]=e(i),n(n.S+n.F*o((function(){i(1)})),"Object",s)}},"5f1b":function(t,e,i){"use strict";var n=i("23c6"),r=RegExp.prototype.exec;t.exports=function(t,e){var i=t.exec;if("function"===typeof i){var o=i.call(t,e);if("object"!==typeof o)throw new TypeError("RegExp exec method returned something other than an Object or null");return o}if("RegExp"!==n(t))throw new TypeError("RegExp#exec called on incompatible receiver");return r.call(t,e)}},"613b":function(t,e,i){var n=i("5537")("keys"),r=i("ca5a");t.exports=function(t){return n[t]||(n[t]=r(t))}},"626a":function(t,e,i){var n=i("2d95");t.exports=Object("z").propertyIsEnumerable(0)?Object:function(t){return"String"==n(t)?t.split(""):Object(t)}},6762:function(t,e,i){"use strict";var n=i("5ca1"),r=i("c366")(!0);n(n.P,"Array",{includes:function(t){return r(this,t,arguments.length>1?arguments[1]:void 0)}}),i("9c6c")("includes")},6821:function(t,e,i){var n=i("626a"),r=i("be13");t.exports=function(t){return n(r(t))}},"69a8":function(t,e){var i={}.hasOwnProperty;t.exports=function(t,e){return i.call(t,e)}},"6a99":function(t,e,i){var n=i("d3f4");t.exports=function(t,e){if(!n(t))return t;var i,r;if(e&&"function"==typeof(i=t.toString)&&!n(r=i.call(t)))return r;if("function"==typeof(i=t.valueOf)&&!n(r=i.call(t)))return r;if(!e&&"function"==typeof(i=t.toString)&&!n(r=i.call(t)))return r;throw TypeError("Can't convert object to primitive value")}},7333:function(t,e,i){"use strict";var n=i("0d58"),r=i("2621"),o=i("52a7"),s=i("4bf8"),a=i("626a"),c=Object.assign;t.exports=!c||i("79e5")((function(){var t={},e={},i=Symbol(),n="abcdefghijklmnopqrst";return t[i]=7,n.split("").forEach((function(t){e[t]=t})),7!=c({},t)[i]||Object.keys(c({},e)).join("")!=n}))?function(t,e){var i=s(t),c=arguments.length,l=1,h=r.f,u=o.f;while(c>l){var f,d=a(arguments[l++]),p=h?n(d).concat(h(d)):n(d),g=p.length,v=0;while(g>v)u.call(d,f=p[v++])&&(i[f]=d[f])}return i}:c},7726:function(t,e){var i=t.exports="undefined"!=typeof window&&window.Math==Math?window:"undefined"!=typeof self&&self.Math==Math?self:Function("return this")();"number"==typeof __g&&(__g=i)},"77f1":function(t,e,i){var n=i("4588"),r=Math.max,o=Math.min;t.exports=function(t,e){return t=n(t),t<0?r(t+e,0):o(t,e)}},"79e5":function(t,e){t.exports=function(t){try{return!!t()}catch(e){return!0}}},"7f20":function(t,e,i){var n=i("86cc").f,r=i("69a8"),o=i("2b4c")("toStringTag");t.exports=function(t,e,i){t&&!r(t=i?t:t.prototype,o)&&n(t,o,{configurable:!0,value:e})}},8378:function(t,e){var i=t.exports={version:"2.6.5"};"number"==typeof __e&&(__e=i)},"84f2":function(t,e){t.exports={}},"86cc":function(t,e,i){var n=i("cb7c"),r=i("c69a"),o=i("6a99"),s=Object.defineProperty;e.f=i("9e1e")?Object.defineProperty:function(t,e,i){if(n(t),e=o(e,!0),n(i),r)try{return s(t,e,i)}catch(a){}if("get"in i||"set"in i)throw TypeError("Accessors not supported!");return"value"in i&&(t[e]=i.value),t}},"9b43":function(t,e,i){var n=i("d8e8");t.exports=function(t,e,i){if(n(t),void 0===e)return t;switch(i){case 1:return function(i){return t.call(e,i)};case 2:return function(i,n){return t.call(e,i,n)};case 3:return function(i,n,r){return t.call(e,i,n,r)}}return function(){return t.apply(e,arguments)}}},"9c6c":function(t,e,i){var n=i("2b4c")("unscopables"),r=Array.prototype;void 0==r[n]&&i("32e9")(r,n,{}),t.exports=function(t){r[n][t]=!0}},"9def":function(t,e,i){var n=i("4588"),r=Math.min;t.exports=function(t){return t>0?r(n(t),9007199254740991):0}},"9e1e":function(t,e,i){t.exports=!i("79e5")((function(){return 7!=Object.defineProperty({},"a",{get:function(){return 7}}).a}))},a352:function(e,i){e.exports=t},a481:function(t,e,i){"use strict";var n=i("cb7c"),r=i("4bf8"),o=i("9def"),s=i("4588"),a=i("0390"),c=i("5f1b"),l=Math.max,h=Math.min,u=Math.floor,f=/\$([$&`']|\d\d?|<[^>]*>)/g,d=/\$([$&`']|\d\d?)/g,p=function(t){return void 0===t?t:String(t)};i("214f")("replace",2,(function(t,e,i,g){return[function(n,r){var o=t(this),s=void 0==n?void 0:n[e];return void 0!==s?s.call(n,o,r):i.call(String(o),n,r)},function(t,e){var r=g(i,t,this,e);if(r.done)return r.value;var u=n(t),f=String(this),d="function"===typeof e;d||(e=String(e));var m=u.global;if(m){var y=u.unicode;u.lastIndex=0}var b=[];while(1){var w=c(u,f);if(null===w)break;if(b.push(w),!m)break;var x=String(w[0]);""===x&&(u.lastIndex=a(f,o(u.lastIndex),y))}for(var _="",S=0,C=0;C<b.length;C++){w=b[C];for(var T=String(w[0]),O=l(h(s(w.index),f.length),0),k=[],E=1;E<w.length;E++)k.push(p(w[E]));var A=w.groups;if(d){var P=[T].concat(k,O,f);void 0!==A&&P.push(A);var D=String(e.apply(void 0,P))}else D=v(T,f,O,k,A,e);O>=S&&(_+=f.slice(S,O)+D,S=O+T.length)}return _+f.slice(S)}];function v(t,e,n,o,s,a){var c=n+t.length,l=o.length,h=d;return void 0!==s&&(s=r(s),h=f),i.call(a,h,(function(i,r){var a;switch(r.charAt(0)){case"$":return"$";case"&":return t;case"`":return e.slice(0,n);case"'":return e.slice(c);case"<":a=s[r.slice(1,-1)];break;default:var h=+r;if(0===h)return i;if(h>l){var f=u(h/10);return 0===f?i:f<=l?void 0===o[f-1]?r.charAt(1):o[f-1]+r.charAt(1):i}a=o[h-1]}return void 0===a?"":a}))}}))},aae3:function(t,e,i){var n=i("d3f4"),r=i("2d95"),o=i("2b4c")("match");t.exports=function(t){var e;return n(t)&&(void 0!==(e=t[o])?!!e:"RegExp"==r(t))}},ac6a:function(t,e,i){for(var n=i("cadf"),r=i("0d58"),o=i("2aba"),s=i("7726"),a=i("32e9"),c=i("84f2"),l=i("2b4c"),h=l("iterator"),u=l("toStringTag"),f=c.Array,d={CSSRuleList:!0,CSSStyleDeclaration:!1,CSSValueList:!1,ClientRectList:!1,DOMRectList:!1,DOMStringList:!1,DOMTokenList:!0,DataTransferItemList:!1,FileList:!1,HTMLAllCollection:!1,HTMLCollection:!1,HTMLFormElement:!1,HTMLSelectElement:!1,MediaList:!0,MimeTypeArray:!1,NamedNodeMap:!1,NodeList:!0,PaintRequestList:!1,Plugin:!1,PluginArray:!1,SVGLengthList:!1,SVGNumberList:!1,SVGPathSegList:!1,SVGPointList:!1,SVGStringList:!1,SVGTransformList:!1,SourceBufferList:!1,StyleSheetList:!0,TextTrackCueList:!1,TextTrackList:!1,TouchList:!1},p=r(d),g=0;g<p.length;g++){var v,m=p[g],y=d[m],b=s[m],w=b&&b.prototype;if(w&&(w[h]||a(w,h,f),w[u]||a(w,u,m),c[m]=f,y))for(v in n)w[v]||o(w,v,n[v],!0)}},b0c5:function(t,e,i){"use strict";var n=i("520a");i("5ca1")({target:"RegExp",proto:!0,forced:n!==/./.exec},{exec:n})},be13:function(t,e){t.exports=function(t){if(void 0==t)throw TypeError("Can't call method on  "+t);return t}},c366:function(t,e,i){var n=i("6821"),r=i("9def"),o=i("77f1");t.exports=function(t){return function(e,i,s){var a,c=n(e),l=r(c.length),h=o(s,l);if(t&&i!=i){while(l>h)if(a=c[h++],a!=a)return!0}else for(;l>h;h++)if((t||h in c)&&c[h]===i)return t||h||0;return!t&&-1}}},c649:function(t,e,i){"use strict";(function(t){i.d(e,"c",(function(){return l})),i.d(e,"a",(function(){return a})),i.d(e,"b",(function(){return r})),i.d(e,"d",(function(){return c}));i("a481");function n(){return"undefined"!==typeof window?window.console:t.console}var r=n();function o(t){var e=Object.create(null);return function(i){var n=e[i];return n||(e[i]=t(i))}}var s=/-(\w)/g,a=o((function(t){return t.replace(s,(function(t,e){return e?e.toUpperCase():""}))}));function c(t){null!==t.parentElement&&t.parentElement.removeChild(t)}function l(t,e,i){var n=0===i?t.children[0]:t.children[i-1].nextSibling;t.insertBefore(e,n)}}).call(this,i("c8ba"))},c69a:function(t,e,i){t.exports=!i("9e1e")&&!i("79e5")((function(){return 7!=Object.defineProperty(i("230e")("div"),"a",{get:function(){return 7}}).a}))},c8ba:function(t,e){var i;i=function(){return this}();try{i=i||new Function("return this")()}catch(n){"object"===typeof window&&(i=window)}t.exports=i},ca5a:function(t,e){var i=0,n=Math.random();t.exports=function(t){return"Symbol(".concat(void 0===t?"":t,")_",(++i+n).toString(36))}},cadf:function(t,e,i){"use strict";var n=i("9c6c"),r=i("d53b"),o=i("84f2"),s=i("6821");t.exports=i("01f9")(Array,"Array",(function(t,e){this._t=s(t),this._i=0,this._k=e}),(function(){var t=this._t,e=this._k,i=this._i++;return!t||i>=t.length?(this._t=void 0,r(1)):r(0,"keys"==e?i:"values"==e?t[i]:[i,t[i]])}),"values"),o.Arguments=o.Array,n("keys"),n("values"),n("entries")},cb7c:function(t,e,i){var n=i("d3f4");t.exports=function(t){if(!n(t))throw TypeError(t+" is not an object!");return t}},ce10:function(t,e,i){var n=i("69a8"),r=i("6821"),o=i("c366")(!1),s=i("613b")("IE_PROTO");t.exports=function(t,e){var i,a=r(t),c=0,l=[];for(i in a)i!=s&&n(a,i)&&l.push(i);while(e.length>c)n(a,i=e[c++])&&(~o(l,i)||l.push(i));return l}},d2c8:function(t,e,i){var n=i("aae3"),r=i("be13");t.exports=function(t,e,i){if(n(e))throw TypeError("String#"+i+" doesn't accept regex!");return String(r(t))}},d3f4:function(t,e){t.exports=function(t){return"object"===typeof t?null!==t:"function"===typeof t}},d53b:function(t,e){t.exports=function(t,e){return{value:e,done:!!t}}},d8e8:function(t,e){t.exports=function(t){if("function"!=typeof t)throw TypeError(t+" is not a function!");return t}},e11e:function(t,e){t.exports="constructor,hasOwnProperty,isPrototypeOf,propertyIsEnumerable,toLocaleString,toString,valueOf".split(",")},f559:function(t,e,i){"use strict";var n=i("5ca1"),r=i("9def"),o=i("d2c8"),s="startsWith",a=""[s];n(n.P+n.F*i("5147")(s),"String",{startsWith:function(t){var e=o(this,t,s),i=r(Math.min(arguments.length>1?arguments[1]:void 0,e.length)),n=String(t);return a?a.call(e,n,i):e.slice(i,i+n.length)===n}})},f6fd:function(t,e){(function(t){var e="currentScript",i=t.getElementsByTagName("script");e in t||Object.defineProperty(t,e,{get:function(){try{throw new Error}catch(n){var t,e=(/.*at [^\(]*\((.*):.+:.+\)$/gi.exec(n.stack)||[!1])[1];for(t in i)if(i[t].src==e||"interactive"==i[t].readyState)return i[t];return null}}})})(document)},f751:function(t,e,i){var n=i("5ca1");n(n.S+n.F,"Object",{assign:i("7333")})},fa5b:function(t,e,i){t.exports=i("5537")("native-function-to-string",Function.toString)},fab2:function(t,e,i){var n=i("7726").document;t.exports=n&&n.documentElement},fb15:function(t,e,i){"use strict";var n;(i.r(e),"undefined"!==typeof window)&&(i("f6fd"),(n=window.document.currentScript)&&(n=n.src.match(/(.+\/)[^/]+\.js(\?.*)?$/))&&(i.p=n[1]));i("f751"),i("f559"),i("ac6a"),i("cadf"),i("456d");function r(t){if(Array.isArray(t))return t}function o(t,e){if("undefined"!==typeof Symbol&&Symbol.iterator in Object(t)){var i=[],n=!0,r=!1,o=void 0;try{for(var s,a=t[Symbol.iterator]();!(n=(s=a.next()).done);n=!0)if(i.push(s.value),e&&i.length===e)break}catch(c){r=!0,o=c}finally{try{n||null==a["return"]||a["return"]()}finally{if(r)throw o}}return i}}function s(t,e){(null==e||e>t.length)&&(e=t.length);for(var i=0,n=new Array(e);i<e;i++)n[i]=t[i];return n}function a(t,e){if(t){if("string"===typeof t)return s(t,e);var i=Object.prototype.toString.call(t).slice(8,-1);return"Object"===i&&t.constructor&&(i=t.constructor.name),"Map"===i||"Set"===i?Array.from(t):"Arguments"===i||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(i)?s(t,e):void 0}}function c(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function l(t,e){return r(t)||o(t,e)||a(t,e)||c()}i("6762"),i("2fdb");function h(t){if(Array.isArray(t))return s(t)}function u(t){if("undefined"!==typeof Symbol&&Symbol.iterator in Object(t))return Array.from(t)}function f(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function d(t){return h(t)||u(t)||a(t)||f()}var p=i("a352"),g=i.n(p),v=i("c649");function m(t,e,i){return void 0===i||(t=t||{},t[e]=i),t}function y(t,e){return t.map((function(t){return t.elm})).indexOf(e)}function b(t,e,i,n){if(!t)return[];var r=t.map((function(t){return t.elm})),o=e.length-n,s=d(e).map((function(t,e){return e>=o?r.length:r.indexOf(t)}));return i?s.filter((function(t){return-1!==t})):s}function w(t,e){var i=this;this.$nextTick((function(){return i.$emit(t.toLowerCase(),e)}))}function x(t){var e=this;return function(i){null!==e.realList&&e["onDrag"+t](i),w.call(e,t,i)}}function _(t){return["transition-group","TransitionGroup"].includes(t)}function S(t){if(!t||1!==t.length)return!1;var e=l(t,1),i=e[0].componentOptions;return!!i&&_(i.tag)}function C(t,e,i){return t[i]||(e[i]?e[i]():void 0)}function T(t,e,i){var n=0,r=0,o=C(e,i,"header");o&&(n=o.length,t=t?[].concat(d(o),d(t)):d(o));var s=C(e,i,"footer");return s&&(r=s.length,t=t?[].concat(d(t),d(s)):d(s)),{children:t,headerOffset:n,footerOffset:r}}function O(t,e){var i=null,n=function(t,e){i=m(i,t,e)},r=Object.keys(t).filter((function(t){return"id"===t||t.startsWith("data-")})).reduce((function(e,i){return e[i]=t[i],e}),{});if(n("attrs",r),!e)return i;var o=e.on,s=e.props,a=e.attrs;return n("on",o),n("props",s),Object.assign(i.attrs,a),i}var k=["Start","Add","Remove","Update","End"],E=["Choose","Unchoose","Sort","Filter","Clone"],A=["Move"].concat(k,E).map((function(t){return"on"+t})),P=null,D={options:Object,list:{type:Array,required:!1,default:null},value:{type:Array,required:!1,default:null},noTransitionOnDrag:{type:Boolean,default:!1},clone:{type:Function,default:function(t){return t}},element:{type:String,default:"div"},tag:{type:String,default:null},move:{type:Function,default:null},componentData:{type:Object,required:!1,default:null}},M={name:"draggable",inheritAttrs:!1,props:D,data:function(){return{transitionMode:!1,noneFunctionalComponentMode:!1}},render:function(t){var e=this.$slots.default;this.transitionMode=S(e);var i=T(e,this.$slots,this.$scopedSlots),n=i.children,r=i.headerOffset,o=i.footerOffset;this.headerOffset=r,this.footerOffset=o;var s=O(this.$attrs,this.componentData);return t(this.getTag(),s,n)},created:function(){null!==this.list&&null!==this.value&&v["b"].error("Value and list props are mutually exclusive! Please set one or another."),"div"!==this.element&&v["b"].warn("Element props is deprecated please use tag props instead. See https://github.com/SortableJS/Vue.Draggable/blob/master/documentation/migrate.md#element-props"),void 0!==this.options&&v["b"].warn("Options props is deprecated, add sortable options directly as vue.draggable item, or use v-bind. See https://github.com/SortableJS/Vue.Draggable/blob/master/documentation/migrate.md#options-props")},mounted:function(){var t=this;if(this.noneFunctionalComponentMode=this.getTag().toLowerCase()!==this.$el.nodeName.toLowerCase()&&!this.getIsFunctional(),this.noneFunctionalComponentMode&&this.transitionMode)throw new Error("Transition-group inside component is not supported. Please alter tag value or remove transition-group. Current tag value: ".concat(this.getTag()));var e={};k.forEach((function(i){e["on"+i]=x.call(t,i)})),E.forEach((function(i){e["on"+i]=w.bind(t,i)}));var i=Object.keys(this.$attrs).reduce((function(e,i){return e[Object(v["a"])(i)]=t.$attrs[i],e}),{}),n=Object.assign({},this.options,i,e,{onMove:function(e,i){return t.onDragMove(e,i)}});!("draggable"in n)&&(n.draggable=">*"),this._sortable=new g.a(this.rootContainer,n),this.computeIndexes()},beforeDestroy:function(){void 0!==this._sortable&&this._sortable.destroy()},computed:{rootContainer:function(){return this.transitionMode?this.$el.children[0]:this.$el},realList:function(){return this.list?this.list:this.value}},watch:{options:{handler:function(t){this.updateOptions(t)},deep:!0},$attrs:{handler:function(t){this.updateOptions(t)},deep:!0},realList:function(){this.computeIndexes()}},methods:{getIsFunctional:function(){var t=this._vnode.fnOptions;return t&&t.functional},getTag:function(){return this.tag||this.element},updateOptions:function(t){for(var e in t){var i=Object(v["a"])(e);-1===A.indexOf(i)&&this._sortable.option(i,t[e])}},getChildrenNodes:function(){if(this.noneFunctionalComponentMode)return this.$children[0].$slots.default;var t=this.$slots.default;return this.transitionMode?t[0].child.$slots.default:t},computeIndexes:function(){var t=this;this.$nextTick((function(){t.visibleIndexes=b(t.getChildrenNodes(),t.rootContainer.children,t.transitionMode,t.footerOffset)}))},getUnderlyingVm:function(t){var e=y(this.getChildrenNodes()||[],t);if(-1===e)return null;var i=this.realList[e];return{index:e,element:i}},getUnderlyingPotencialDraggableComponent:function(t){var e=t.__vue__;return e&&e.$options&&_(e.$options._componentTag)?e.$parent:!("realList"in e)&&1===e.$children.length&&"realList"in e.$children[0]?e.$children[0]:e},emitChanges:function(t){var e=this;this.$nextTick((function(){e.$emit("change",t)}))},alterList:function(t){if(this.list)t(this.list);else{var e=d(this.value);t(e),this.$emit("input",e)}},spliceList:function(){var t=arguments,e=function(e){return e.splice.apply(e,d(t))};this.alterList(e)},updatePosition:function(t,e){var i=function(i){return i.splice(e,0,i.splice(t,1)[0])};this.alterList(i)},getRelatedContextFromMoveEvent:function(t){var e=t.to,i=t.related,n=this.getUnderlyingPotencialDraggableComponent(e);if(!n)return{component:n};var r=n.realList,o={list:r,component:n};if(e!==i&&r&&n.getUnderlyingVm){var s=n.getUnderlyingVm(i);if(s)return Object.assign(s,o)}return o},getVmIndex:function(t){var e=this.visibleIndexes,i=e.length;return t>i-1?i:e[t]},getComponent:function(){return this.$slots.default[0].componentInstance},resetTransitionData:function(t){if(this.noTransitionOnDrag&&this.transitionMode){var e=this.getChildrenNodes();e[t].data=null;var i=this.getComponent();i.children=[],i.kept=void 0}},onDragStart:function(t){this.context=this.getUnderlyingVm(t.item),t.item._underlying_vm_=this.clone(this.context.element),P=t.item},onDragAdd:function(t){var e=t.item._underlying_vm_;if(void 0!==e){Object(v["d"])(t.item);var i=this.getVmIndex(t.newIndex);this.spliceList(i,0,e),this.computeIndexes();var n={element:e,newIndex:i};this.emitChanges({added:n})}},onDragRemove:function(t){if(Object(v["c"])(this.rootContainer,t.item,t.oldIndex),"clone"!==t.pullMode){var e=this.context.index;this.spliceList(e,1);var i={element:this.context.element,oldIndex:e};this.resetTransitionData(e),this.emitChanges({removed:i})}else Object(v["d"])(t.clone)},onDragUpdate:function(t){Object(v["d"])(t.item),Object(v["c"])(t.from,t.item,t.oldIndex);var e=this.context.index,i=this.getVmIndex(t.newIndex);this.updatePosition(e,i);var n={element:this.context.element,oldIndex:e,newIndex:i};this.emitChanges({moved:n})},updateProperty:function(t,e){t.hasOwnProperty(e)&&(t[e]+=this.headerOffset)},computeFutureIndex:function(t,e){if(!t.element)return 0;var i=d(e.to.children).filter((function(t){return"none"!==t.style["display"]})),n=i.indexOf(e.related),r=t.component.getVmIndex(n),o=-1!==i.indexOf(P);return o||!e.willInsertAfter?r:r+1},onDragMove:function(t,e){var i=this.move;if(!i||!this.realList)return!0;var n=this.getRelatedContextFromMoveEvent(t),r=this.context,o=this.computeFutureIndex(n,t);Object.assign(r,{futureIndex:o});var s=Object.assign({},t,{relatedContext:n,draggedContext:r});return i(s,e)},onDragEnd:function(){this.computeIndexes(),P=null}}};"undefined"!==typeof window&&"Vue"in window&&window.Vue.component("draggable",M);var j=M;e["default"]=j}})["default"]}))},c04e:function(t,e,i){var n=i("861d");t.exports=function(t,e){if(!n(t))return t;var i,r;if(e&&"function"==typeof(i=t.toString)&&!n(r=i.call(t)))return r;if("function"==typeof(i=t.valueOf)&&!n(r=i.call(t)))return r;if(!e&&"function"==typeof(i=t.toString)&&!n(r=i.call(t)))return r;throw TypeError("Can't convert object to primitive value")}},c430:function(t,e){t.exports=!1},c6b6:function(t,e){var i={}.toString;t.exports=function(t){return i.call(t).slice(8,-1)}},c6cd:function(t,e,i){var n=i("da84"),r=i("ce4e"),o="__core-js_shared__",s=n[o]||r(o,{});t.exports=s},c6d3:function(t,e,i){},c8ba:function(t,e){var i;i=function(){return this}();try{i=i||new Function("return this")()}catch(n){"object"===typeof window&&(i=window)}t.exports=i},c8d2:function(t,e,i){var n=i("d039"),r=i("5899"),o="âÂá ";t.exports=function(t){return n((function(){return!!r[t]()||o[t]()!=o||r[t].name!==t}))}},ca84:function(t,e,i){var n=i("5135"),r=i("fc6a"),o=i("4d64").indexOf,s=i("d012");t.exports=function(t,e){var i,a=r(t),c=0,l=[];for(i in a)!n(s,i)&&n(a,i)&&l.push(i);while(e.length>c)n(a,i=e[c++])&&(~o(l,i)||l.push(i));return l}},caad:function(t,e,i){"use strict";var n=i("23e7"),r=i("4d64").includes,o=i("44d2");n({target:"Array",proto:!0},{includes:function(t){return r(this,t,arguments.length>1?arguments[1]:void 0)}}),o("includes")},cb29:function(t,e,i){var n=i("23e7"),r=i("81d5"),o=i("44d2");n({target:"Array",proto:!0},{fill:r}),o("fill")},cc12:function(t,e,i){var n=i("da84"),r=i("861d"),o=n.document,s=r(o)&&r(o.createElement);t.exports=function(t){return s?o.createElement(t):{}}},cd3b:function(t,e,i){!function(e,i){t.exports=i()}(0,(function(){return(()=>{"use strict";var t={306:t=>{t.exports=JSON.parse('{"u2":"@vuoz/theme-core-default","i8":"0.2.168"}')}},e={};function i(n){var r=e[n];if(void 0!==r)return r.exports;var o=e[n]={exports:{}};return t[n](o,o.exports,i),o.exports}i.d=(t,e)=>{for(var n in e)i.o(e,n)&&!i.o(t,n)&&Object.defineProperty(t,n,{enumerable:!0,get:e[n]})},i.o=(t,e)=>Object.prototype.hasOwnProperty.call(t,e),i.r=t=>{"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})};var n={};return(()=>{i.r(n),i.d(n,{Theme:()=>e});var t="Default (dark)",e={id:"core.default",name:t,package:i(306).u2,version:i(306).i8,paths:{sass:"sass/theme.sass",css:"css/theme.min.css",install:"archive/theme.".concat(t,".zip")}}})(),n})()}))},cdf9:function(t,e,i){var n=i("825a"),r=i("861d"),o=i("f069");t.exports=function(t,e){if(n(t),r(e)&&e.constructor===t)return e;var i=o.f(t),s=i.resolve;return s(e),i.promise}},ce4e:function(t,e,i){var n=i("da84"),r=i("9112");t.exports=function(t,e){try{r(n,t,e)}catch(i){n[t]=e}return e}},d012:function(t,e){t.exports={}},d039:function(t,e){t.exports=function(t){try{return!!t()}catch(e){return!0}}},d066:function(t,e,i){var n=i("428f"),r=i("da84"),o=function(t){return"function"==typeof t?t:void 0};t.exports=function(t,e){return arguments.length<2?o(n[t])||o(r[t]):n[t]&&n[t][e]||r[t]&&r[t][e]}},d1e7:function(t,e,i){"use strict";var n={}.propertyIsEnumerable,r=Object.getOwnPropertyDescriptor,o=r&&!n.call({1:2},1);e.f=o?function(t){var e=r(this,t);return!!e&&e.enumerable}:n},d28b:function(t,e,i){var n=i("746f");n("iterator")},d2bb:function(t,e,i){var n=i("825a"),r=i("3bbe");t.exports=Object.setPrototypeOf||("__proto__"in{}?function(){var t,e=!1,i={};try{t=Object.getOwnPropertyDescriptor(Object.prototype,"__proto__").set,t.call(i,[]),e=i instanceof Array}catch(o){}return function(i,o){return n(i),r(o),e?t.call(i,o):i.__proto__=o,i}}():void 0)},d3b7:function(t,e,i){var n=i("00ee"),r=i("6eeb"),o=i("b041");n||r(Object.prototype,"toString",o,{unsafe:!0})},d44e:function(t,e,i){var n=i("9bf2").f,r=i("5135"),o=i("b622"),s=o("toStringTag");t.exports=function(t,e,i){t&&!r(t=i?t:t.prototype,s)&&n(t,s,{configurable:!0,value:e})}},d784:function(t,e,i){"use strict";i("ac1f");var n=i("6eeb"),r=i("d039"),o=i("b622"),s=i("9263"),a=i("9112"),c=o("species"),l=!r((function(){var t=/./;return t.exec=function(){var t=[];return t.groups={a:"7"},t},"7"!=="".replace(t,"$<a>")})),h=function(){return"$0"==="a".replace(/./,"$0")}(),u=o("replace"),f=function(){return!!/./[u]&&""===/./[u]("a","$0")}(),d=!r((function(){var t=/(?:)/,e=t.exec;t.exec=function(){return e.apply(this,arguments)};var i="ab".split(t);return 2!==i.length||"a"!==i[0]||"b"!==i[1]}));t.exports=function(t,e,i,u){var p=o(t),g=!r((function(){var e={};return e[p]=function(){return 7},7!=""[t](e)})),v=g&&!r((function(){var e=!1,i=/a/;return"split"===t&&(i={},i.constructor={},i.constructor[c]=function(){return i},i.flags="",i[p]=/./[p]),i.exec=function(){return e=!0,null},i[p](""),!e}));if(!g||!v||"replace"===t&&(!l||!h||f)||"split"===t&&!d){var m=/./[p],y=i(p,""[t],(function(t,e,i,n,r){return e.exec===s?g&&!r?{done:!0,value:m.call(e,i,n)}:{done:!0,value:t.call(i,e,n)}:{done:!1}}),{REPLACE_KEEPS_$0:h,REGEXP_REPLACE_SUBSTITUTES_UNDEFINED_CAPTURE:f}),b=y[0],w=y[1];n(String.prototype,t,b),n(RegExp.prototype,p,2==e?function(t,e){return w.call(t,this,e)}:function(t){return w.call(t,this)})}u&&a(RegExp.prototype[p],"sham",!0)}},da84:function(t,e,i){(function(e){var i=function(t){return t&&t.Math==Math&&t};t.exports=i("object"==typeof globalThis&&globalThis)||i("object"==typeof window&&window)||i("object"==typeof self&&self)||i("object"==typeof e&&e)||function(){return this}()||Function("return this")()}).call(this,i("c8ba"))},dbb4:function(t,e,i){var n=i("23e7"),r=i("83ab"),o=i("56ef"),s=i("fc6a"),a=i("06cf"),c=i("8418");n({target:"Object",stat:!0,sham:!r},{getOwnPropertyDescriptors:function(t){var e,i,n=s(t),r=a.f,l=o(n),h={},u=0;while(l.length>u)i=r(n,e=l[u++]),void 0!==i&&c(h,e,i);return h}})},ddb0:function(t,e,i){var n=i("da84"),r=i("fdbc"),o=i("e260"),s=i("9112"),a=i("b622"),c=a("iterator"),l=a("toStringTag"),h=o.values;for(var u in r){var f=n[u],d=f&&f.prototype;if(d){if(d[c]!==h)try{s(d,c,h)}catch(g){d[c]=h}if(d[l]||s(d,l,u),r[u])for(var p in o)if(d[p]!==o[p])try{s(d,p,o[p])}catch(g){d[p]=o[p]}}}},df75:function(t,e,i){var n=i("ca84"),r=i("7839");t.exports=Object.keys||function(t){return n(t,r)}},e01a:function(t,e,i){"use strict";var n=i("23e7"),r=i("83ab"),o=i("da84"),s=i("5135"),a=i("861d"),c=i("9bf2").f,l=i("e893"),h=o.Symbol;if(r&&"function"==typeof h&&(!("description"in h.prototype)||void 0!==h().description)){var u={},f=function(){var t=arguments.length<1||void 0===arguments[0]?void 0:String(arguments[0]),e=this instanceof f?new h(t):void 0===t?h():h(t);return""===t&&(u[e]=!0),e};l(f,h);var d=f.prototype=h.prototype;d.constructor=f;var p=d.toString,g="Symbol(test)"==String(h("test")),v=/^Symbol\((.*)\)[^)]+$/;c(d,"description",{configurable:!0,get:function(){var t=a(this)?this.valueOf():this,e=p.call(t);if(s(u,t))return"";var i=g?e.slice(7,-1):e.replace(v,"$1");return""===i?void 0:i}}),n({global:!0,forced:!0},{Symbol:f})}},e163:function(t,e,i){var n=i("5135"),r=i("7b0b"),o=i("f772"),s=i("e177"),a=o("IE_PROTO"),c=Object.prototype;t.exports=s?Object.getPrototypeOf:function(t){return t=r(t),n(t,a)?t[a]:"function"==typeof t.constructor&&t instanceof t.constructor?t.constructor.prototype:t instanceof Object?c:null}},e177:function(t,e,i){var n=i("d039");t.exports=!n((function(){function t(){}return t.prototype.constructor=null,Object.getPrototypeOf(new t)!==t.prototype}))},e260:function(t,e,i){"use strict";var n=i("fc6a"),r=i("44d2"),o=i("3f8c"),s=i("69f3"),a=i("7dd0"),c="Array Iterator",l=s.set,h=s.getterFor(c);t.exports=a(Array,"Array",(function(t,e){l(this,{type:c,target:n(t),index:0,kind:e})}),(function(){var t=h(this),e=t.target,i=t.kind,n=t.index++;return!e||n>=e.length?(t.target=void 0,{value:void 0,done:!0}):"keys"==i?{value:n,done:!1}:"values"==i?{value:e[n],done:!1}:{value:[n,e[n]],done:!1}}),"values"),o.Arguments=o.Array,r("keys"),r("values"),r("entries")},e2cc:function(t,e,i){var n=i("6eeb");t.exports=function(t,e,i){for(var r in e)n(t,r,e[r],i);return t}},e3db:function(t,e){var i={}.toString;t.exports=Array.isArray||function(t){return"[object Array]"==i.call(t)}},e439:function(t,e,i){var n=i("23e7"),r=i("d039"),o=i("fc6a"),s=i("06cf").f,a=i("83ab"),c=r((function(){s(1)})),l=!a||c;n({target:"Object",stat:!0,forced:l,sham:!a},{getOwnPropertyDescriptor:function(t,e){return s(o(t),e)}})},e538:function(t,e,i){var n=i("b622");e.f=n},e667:function(t,e){t.exports=function(t){try{return{error:!1,value:t()}}catch(e){return{error:!0,value:e}}}},e679:function(t,e,i){"use strict";i("7035")},e6cf:function(t,e,i){"use strict";var n,r,o,s,a=i("23e7"),c=i("c430"),l=i("da84"),h=i("d066"),u=i("fea9"),f=i("6eeb"),d=i("e2cc"),p=i("d44e"),g=i("2626"),v=i("861d"),m=i("1c0b"),y=i("19aa"),b=i("8925"),w=i("2266"),x=i("1c7e"),_=i("4840"),S=i("2cf4").set,C=i("b575"),T=i("cdf9"),O=i("44de"),k=i("f069"),E=i("e667"),A=i("69f3"),P=i("94ca"),D=i("b622"),M=i("605d"),j=i("2d00"),R=D("species"),I="Promise",z=A.get,L=A.set,F=A.getterFor(I),B=u,N=l.TypeError,W=l.document,H=l.process,Y=h("fetch"),X=k.f,U=X,V=!!(W&&W.createEvent&&l.dispatchEvent),G="function"==typeof PromiseRejectionEvent,$="unhandledrejection",q="rejectionhandled",K=0,Z=1,J=2,Q=1,tt=2,et=P(I,(function(){var t=b(B)!==String(B);if(!t){if(66===j)return!0;if(!M&&!G)return!0}if(c&&!B.prototype["finally"])return!0;if(j>=51&&/native code/.test(B))return!1;var e=B.resolve(1),i=function(t){t((function(){}),(function(){}))},n=e.constructor={};return n[R]=i,!(e.then((function(){}))instanceof i)})),it=et||!x((function(t){B.all(t)["catch"]((function(){}))})),nt=function(t){var e;return!(!v(t)||"function"!=typeof(e=t.then))&&e},rt=function(t,e){if(!t.notified){t.notified=!0;var i=t.reactions;C((function(){var n=t.value,r=t.state==Z,o=0;while(i.length>o){var s,a,c,l=i[o++],h=r?l.ok:l.fail,u=l.resolve,f=l.reject,d=l.domain;try{h?(r||(t.rejection===tt&&ct(t),t.rejection=Q),!0===h?s=n:(d&&d.enter(),s=h(n),d&&(d.exit(),c=!0)),s===l.promise?f(N("Promise-chain cycle")):(a=nt(s))?a.call(s,u,f):u(s)):f(n)}catch(p){d&&!c&&d.exit(),f(p)}}t.reactions=[],t.notified=!1,e&&!t.rejection&&st(t)}))}},ot=function(t,e,i){var n,r;V?(n=W.createEvent("Event"),n.promise=e,n.reason=i,n.initEvent(t,!1,!0),l.dispatchEvent(n)):n={promise:e,reason:i},!G&&(r=l["on"+t])?r(n):t===$&&O("Unhandled promise rejection",i)},st=function(t){S.call(l,(function(){var e,i=t.facade,n=t.value,r=at(t);if(r&&(e=E((function(){M?H.emit("unhandledRejection",n,i):ot($,i,n)})),t.rejection=M||at(t)?tt:Q,e.error))throw e.value}))},at=function(t){return t.rejection!==Q&&!t.parent},ct=function(t){S.call(l,(function(){var e=t.facade;M?H.emit("rejectionHandled",e):ot(q,e,t.value)}))},lt=function(t,e,i){return function(n){t(e,n,i)}},ht=function(t,e,i){t.done||(t.done=!0,i&&(t=i),t.value=e,t.state=J,rt(t,!0))},ut=function(t,e,i){if(!t.done){t.done=!0,i&&(t=i);try{if(t.facade===e)throw N("Promise can't be resolved itself");var n=nt(e);n?C((function(){var i={done:!1};try{n.call(e,lt(ut,i,t),lt(ht,i,t))}catch(r){ht(i,r,t)}})):(t.value=e,t.state=Z,rt(t,!1))}catch(r){ht({done:!1},r,t)}}};et&&(B=function(t){y(this,B,I),m(t),n.call(this);var e=z(this);try{t(lt(ut,e),lt(ht,e))}catch(i){ht(e,i)}},n=function(t){L(this,{type:I,done:!1,notified:!1,parent:!1,reactions:[],rejection:!1,state:K,value:void 0})},n.prototype=d(B.prototype,{then:function(t,e){var i=F(this),n=X(_(this,B));return n.ok="function"!=typeof t||t,n.fail="function"==typeof e&&e,n.domain=M?H.domain:void 0,i.parent=!0,i.reactions.push(n),i.state!=K&&rt(i,!1),n.promise},catch:function(t){return this.then(void 0,t)}}),r=function(){var t=new n,e=z(t);this.promise=t,this.resolve=lt(ut,e),this.reject=lt(ht,e)},k.f=X=function(t){return t===B||t===o?new r(t):U(t)},c||"function"!=typeof u||(s=u.prototype.then,f(u.prototype,"then",(function(t,e){var i=this;return new B((function(t,e){s.call(i,t,e)})).then(t,e)}),{unsafe:!0}),"function"==typeof Y&&a({global:!0,enumerable:!0,forced:!0},{fetch:function(t){return T(B,Y.apply(l,arguments))}}))),a({global:!0,wrap:!0,forced:et},{Promise:B}),p(B,I,!1,!0),g(I),o=h(I),a({target:I,stat:!0,forced:et},{reject:function(t){var e=X(this);return e.reject.call(void 0,t),e.promise}}),a({target:I,stat:!0,forced:c||et},{resolve:function(t){return T(c&&this===o?B:this,t)}}),a({target:I,stat:!0,forced:it},{all:function(t){var e=this,i=X(e),n=i.resolve,r=i.reject,o=E((function(){var i=m(e.resolve),o=[],s=0,a=1;w(t,(function(t){var c=s++,l=!1;o.push(void 0),a++,i.call(e,t).then((function(t){l||(l=!0,o[c]=t,--a||n(o))}),r)})),--a||n(o)}));return o.error&&r(o.value),i.promise},race:function(t){var e=this,i=X(e),n=i.reject,r=E((function(){var r=m(e.resolve);w(t,(function(t){r.call(e,t).then(i.resolve,n)}))}));return r.error&&n(r.value),i.promise}})},e893:function(t,e,i){var n=i("5135"),r=i("56ef"),o=i("06cf"),s=i("9bf2");t.exports=function(t,e){for(var i=r(e),a=s.f,c=o.f,l=0;l<i.length;l++){var h=i[l];n(t,h)||a(t,h,c(e,h))}}},e8b5:function(t,e,i){var n=i("c6b6");t.exports=Array.isArray||function(t){return"Array"==n(t)}},e95a:function(t,e,i){var n=i("b622"),r=i("3f8c"),o=n("iterator"),s=Array.prototype;t.exports=function(t){return void 0!==t&&(r.Array===t||s[o]===t)}},f069:function(t,e,i){"use strict";var n=i("1c0b"),r=function(t){var e,i;this.promise=new t((function(t,n){if(void 0!==e||void 0!==i)throw TypeError("Bad Promise constructor");e=t,i=n})),this.resolve=n(e),this.reject=n(i)};t.exports.f=function(t){return new r(t)}},f5df:function(t,e,i){var n=i("00ee"),r=i("c6b6"),o=i("b622"),s=o("toStringTag"),a="Arguments"==r(function(){return arguments}()),c=function(t,e){try{return t[e]}catch(i){}};t.exports=n?r:function(t){var e,i,n;return void 0===t?"Undefined":null===t?"Null":"string"==typeof(i=c(e=Object(t),s))?i:a?r(e):"Object"==(n=r(e))&&"function"==typeof e.callee?"Arguments":n}},f772:function(t,e,i){var n=i("5692"),r=i("90e3"),o=n("keys");t.exports=function(t){return o[t]||(o[t]=r(t))}},f7aa:function(t,e,i){},fae3:function(t,e,i){"use strict";if(i.r(e),i.d(e,"VuozButton",(function(){return dn})),i.d(e,"VuozCheckbox",(function(){return wn})),i.d(e,"VuozInput",(function(){return kn})),i.d(e,"VuozMenu",(function(){return Rn})),i.d(e,"VuozImage",(function(){return Yn})),i.d(e,"VuozCropper",(function(){return cs})),i.d(e,"VuozLoadingBar",(function(){return gs})),i.d(e,"VuozLoadingIcon",(function(){return an})),i.d(e,"VuozTabs",(function(){return Us})),i.d(e,"VuozConsole",(function(){return aa})),i.d(e,"VuozToolbar",(function(){return er})),i.d(e,"VuozSplitView",(function(){return pa})),i.d(e,"VuozTitleBar",(function(){return xa})),i.d(e,"VuozTable",(function(){return Ea})),i.d(e,"VuozTableHeader",(function(){return Ia})),i.d(e,"VuozTableRow",(function(){return Ya})),i.d(e,"VuozPreferencesItem",(function(){return Ka})),i.d(e,"VuozPreferencesPanel",(function(){return nc})),i.d(e,"VuozMonitorView",(function(){return uc})),i.d(e,"VuozWhiteBoard",(function(){return Qc})),i.d(e,"Theme",(function(){return tl["Theme"]})),"undefined"!==typeof window){var n=window.document.currentScript,r=i("8875");n=r(),"currentScript"in document||Object.defineProperty(document,"currentScript",{get:r});var o=n&&n.src.match(/(.+\/)[^/]+\.js(\?.*)?$/);o&&(i.p=o[1])}var s=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("button",{key:t.size,ref:"main",staticClass:"vuoz-button",class:t.getClasses(),staticStyle:{position:"relative"},on:{mouseenter:t.onMouseEnter,mouseleave:t.onMouseLeave,mousedown:t.onMouseDown,mouseup:t.onMouseUp}},["free"===t.shape?i("div",{staticClass:"content",class:{"is-hidden":!0===t.load}},[t._t("left"),t._t("main",[t._v("Click here")]),t._t("right")],2):t._e(),"free"===t.shape||t.load?t._e():t._t("shaped",[i("span",{staticClass:"material-icons",domProps:{innerHTML:t._s(t.icon)}})]),t.load?i("div",{staticClass:"loading-icon"},[t._t("loader",["free"===t.shape?[i("vuoz-loading-icon",{attrs:{name:"ellipsis",size:t.size}})]:t._e(),"square"===t.shape?[i("vuoz-loading-icon",{attrs:{name:"grid",size:t.size}})]:t._e(),"circle"===t.shape?[i("vuoz-loading-icon",{attrs:{name:"spinner",size:t.size}})]:t._e()])],2):t._e(),"dropdown"===t.type?i("div",{directives:[{name:"click-outside",rawName:"v-click-outside",value:t.onClickOutside,expression:"onClickOutside"}],ref:"menu",staticClass:"has-shadow"},[t._t("menu",[i(t.menuComponent,{tag:"component",staticClass:"is-rounded-bottom-left is-rounded-bottom-right is-rounded-top-right",on:{select:t.onMenu}})])],2):t._e()],2)},a=[];function c(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function l(t,e){for(var i=0;i<e.length;i++){var n=e[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}function h(t,e,i){return e&&l(t.prototype,e),i&&l(t,i),t}function u(t,e){return u=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t},u(t,e)}function f(t,e){if("function"!==typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&u(t,e)}i("4ae1"),i("3410");function d(t){return d=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)},d(t)}function p(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(ir){return!1}}var g=i("7037"),v=i.n(g);function m(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function y(t,e){return!e||"object"!==v()(e)&&"function"!==typeof e?m(t):e}function b(t){var e=p();return function(){var i,n=d(t);if(e){var r=d(this).constructor;i=Reflect.construct(n,arguments,r)}else i=n.apply(this,arguments);return y(this,i)}}i("159b");
/*! *****************************************************************************
Copyright (c) Microsoft Corporation.

Permission to use, copy, modify, and/or distribute this software for any
purpose with or without fee is hereby granted.

THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH
REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY
AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,
INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM
LOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR
OTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR
PERFORMANCE OF THIS SOFTWARE.
***************************************************************************** */function w(t,e,i,n){var r,o=arguments.length,s=o<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,i):n;if("object"===typeof Reflect&&"function"===typeof Reflect.decorate)s=Reflect.decorate(t,e,i,n);else for(var a=t.length-1;a>=0;a--)(r=t[a])&&(s=(o<3?r(s):o>3?r(e,i,s):r(e,i))||s);return o>3&&s&&Object.defineProperty(e,i,s),s}Object.create;Object.create;var x=i("8bbf"),_=i.n(x);
/**
  * vue-class-component v7.2.6
  * (c) 2015-present Evan You
  * @license MIT
  */
function S(t){return S="function"===typeof Symbol&&"symbol"===typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"===typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},S(t)}function C(t,e,i){return e in t?Object.defineProperty(t,e,{value:i,enumerable:!0,configurable:!0,writable:!0}):t[e]=i,t}function T(t){return O(t)||k(t)||E()}function O(t){if(Array.isArray(t)){for(var e=0,i=new Array(t.length);e<t.length;e++)i[e]=t[e];return i}}function k(t){if(Symbol.iterator in Object(t)||"[object Arguments]"===Object.prototype.toString.call(t))return Array.from(t)}function E(){throw new TypeError("Invalid attempt to spread non-iterable instance")}function A(){return"undefined"!==typeof Reflect&&Reflect.defineMetadata&&Reflect.getOwnMetadataKeys}function P(t,e){D(t,e),Object.getOwnPropertyNames(e.prototype).forEach((function(i){D(t.prototype,e.prototype,i)})),Object.getOwnPropertyNames(e).forEach((function(i){D(t,e,i)}))}function D(t,e,i){var n=i?Reflect.getOwnMetadataKeys(e,i):Reflect.getOwnMetadataKeys(e);n.forEach((function(n){var r=i?Reflect.getOwnMetadata(n,e,i):Reflect.getOwnMetadata(n,e);i?Reflect.defineMetadata(n,r,t,i):Reflect.defineMetadata(n,r,t)}))}var M={__proto__:[]},j=M instanceof Array;function R(t){return function(e,i,n){var r="function"===typeof e?e:e.constructor;r.__decorators__||(r.__decorators__=[]),"number"!==typeof n&&(n=void 0),r.__decorators__.push((function(e){return t(e,i,n)}))}}function I(){for(var t=arguments.length,e=new Array(t),i=0;i<t;i++)e[i]=arguments[i];return _.a.extend({mixins:e})}function z(t){var e=S(t);return null==t||"object"!==e&&"function"!==e}function L(t,e){var i=e.prototype._init;e.prototype._init=function(){var e=this,i=Object.getOwnPropertyNames(t);if(t.$options.props)for(var n in t.$options.props)t.hasOwnProperty(n)||i.push(n);i.forEach((function(i){Object.defineProperty(e,i,{get:function(){return t[i]},set:function(e){t[i]=e},configurable:!0})}))};var n=new e;e.prototype._init=i;var r={};return Object.keys(n).forEach((function(t){void 0!==n[t]&&(r[t]=n[t])})),r}var F=["data","beforeCreate","created","beforeMount","mounted","beforeDestroy","destroyed","beforeUpdate","updated","activated","deactivated","render","errorCaptured","serverPrefetch"];function B(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};e.name=e.name||t._componentTag||t.name;var i=t.prototype;Object.getOwnPropertyNames(i).forEach((function(t){if("constructor"!==t)if(F.indexOf(t)>-1)e[t]=i[t];else{var n=Object.getOwnPropertyDescriptor(i,t);void 0!==n.value?"function"===typeof n.value?(e.methods||(e.methods={}))[t]=n.value:(e.mixins||(e.mixins=[])).push({data:function(){return C({},t,n.value)}}):(n.get||n.set)&&((e.computed||(e.computed={}))[t]={get:n.get,set:n.set})}})),(e.mixins||(e.mixins=[])).push({data:function(){return L(this,t)}});var n=t.__decorators__;n&&(n.forEach((function(t){return t(e)})),delete t.__decorators__);var r=Object.getPrototypeOf(t.prototype),o=r instanceof _.a?r.constructor:_.a,s=o.extend(e);return W(s,t,o),A()&&P(s,t),s}var N={prototype:!0,arguments:!0,callee:!0,caller:!0};function W(t,e,i){Object.getOwnPropertyNames(e).forEach((function(n){if(!N[n]){var r=Object.getOwnPropertyDescriptor(t,n);if(!r||r.configurable){var o=Object.getOwnPropertyDescriptor(e,n);if(!j){if("cid"===n)return;var s=Object.getOwnPropertyDescriptor(i,n);if(!z(o.value)&&s&&s.value===o.value)return}0,Object.defineProperty(t,n,o)}}}))}function H(t){return"function"===typeof t?B(t):function(e){return B(e,t)}}H.registerHooks=function(t){F.push.apply(F,T(t))};var Y=H;var X="undefined"!==typeof Reflect&&"undefined"!==typeof Reflect.getMetadata;function U(t,e,i){if(X&&!Array.isArray(t)&&"function"!==typeof t&&!t.hasOwnProperty("type")&&"undefined"===typeof t.type){var n=Reflect.getMetadata("design:type",e,i);n!==Object&&(t.type=n)}}function V(t){return void 0===t&&(t={}),function(e,i){U(t,e,i),R((function(e,i){(e.props||(e.props={}))[i]=t}))(e,i)}}function G(t,e){void 0===e&&(e={});var i=e.deep,n=void 0!==i&&i,r=e.immediate,o=void 0!==r&&r;return R((function(e,i){"object"!==typeof e.watch&&(e.watch=Object.create(null));var r=e.watch;"object"!==typeof r[t]||Array.isArray(r[t])?"undefined"===typeof r[t]&&(r[t]=[]):r[t]=[r[t]],r[t].push({handler:i,deep:n,immediate:o})}))}function $(t){var e=t.getBoundingClientRect();return{width:e.width,height:e.height,top:e.top,right:e.right,bottom:e.bottom,left:e.left,x:e.left,y:e.top}}function q(t){if(null==t)return window;if("[object Window]"!==t.toString()){var e=t.ownerDocument;return e&&e.defaultView||window}return t}function K(t){var e=q(t),i=e.pageXOffset,n=e.pageYOffset;return{scrollLeft:i,scrollTop:n}}function Z(t){var e=q(t).Element;return t instanceof e||t instanceof Element}function J(t){var e=q(t).HTMLElement;return t instanceof e||t instanceof HTMLElement}function Q(t){if("undefined"===typeof ShadowRoot)return!1;var e=q(t).ShadowRoot;return t instanceof e||t instanceof ShadowRoot}function tt(t){return{scrollLeft:t.scrollLeft,scrollTop:t.scrollTop}}function et(t){return t!==q(t)&&J(t)?tt(t):K(t)}function it(t){return t?(t.nodeName||"").toLowerCase():null}function nt(t){return((Z(t)?t.ownerDocument:t.document)||window.document).documentElement}function rt(t){return $(nt(t)).left+K(t).scrollLeft}function ot(t){return q(t).getComputedStyle(t)}function st(t){var e=ot(t),i=e.overflow,n=e.overflowX,r=e.overflowY;return/auto|scroll|overlay|hidden/.test(i+r+n)}function at(t,e,i){void 0===i&&(i=!1);var n=nt(e),r=$(t),o=J(e),s={scrollLeft:0,scrollTop:0},a={x:0,y:0};return(o||!o&&!i)&&(("body"!==it(e)||st(n))&&(s=et(e)),J(e)?(a=$(e),a.x+=e.clientLeft,a.y+=e.clientTop):n&&(a.x=rt(n))),{x:r.left+s.scrollLeft-a.x,y:r.top+s.scrollTop-a.y,width:r.width,height:r.height}}function ct(t){var e=$(t),i=t.offsetWidth,n=t.offsetHeight;return Math.abs(e.width-i)<=1&&(i=e.width),Math.abs(e.height-n)<=1&&(n=e.height),{x:t.offsetLeft,y:t.offsetTop,width:i,height:n}}function lt(t){return"html"===it(t)?t:t.assignedSlot||t.parentNode||(Q(t)?t.host:null)||nt(t)}function ht(t){return["html","body","#document"].indexOf(it(t))>=0?t.ownerDocument.body:J(t)&&st(t)?t:ht(lt(t))}function ut(t,e){var i;void 0===e&&(e=[]);var n=ht(t),r=n===(null==(i=t.ownerDocument)?void 0:i.body),o=q(n),s=r?[o].concat(o.visualViewport||[],st(n)?n:[]):n,a=e.concat(s);return r?a:a.concat(ut(lt(s)))}function ft(t){return["table","td","th"].indexOf(it(t))>=0}function dt(t){return J(t)&&"fixed"!==ot(t).position?t.offsetParent:null}function pt(t){var e=-1!==navigator.userAgent.toLowerCase().indexOf("firefox"),i=-1!==navigator.userAgent.indexOf("Trident");if(i&&J(t)){var n=ot(t);if("fixed"===n.position)return null}var r=lt(t);while(J(r)&&["html","body"].indexOf(it(r))<0){var o=ot(r);if("none"!==o.transform||"none"!==o.perspective||"paint"===o.contain||-1!==["transform","perspective"].indexOf(o.willChange)||e&&"filter"===o.willChange||e&&o.filter&&"none"!==o.filter)return r;r=r.parentNode}return null}function gt(t){var e=q(t),i=dt(t);while(i&&ft(i)&&"static"===ot(i).position)i=dt(i);return i&&("html"===it(i)||"body"===it(i)&&"static"===ot(i).position)?e:i||pt(t)||e}var vt="top",mt="bottom",yt="right",bt="left",wt="auto",xt=[vt,mt,yt,bt],_t="start",St="end",Ct="clippingParents",Tt="viewport",Ot="popper",kt="reference",Et=xt.reduce((function(t,e){return t.concat([e+"-"+_t,e+"-"+St])}),[]),At=[].concat(xt,[wt]).reduce((function(t,e){return t.concat([e,e+"-"+_t,e+"-"+St])}),[]),Pt="beforeRead",Dt="read",Mt="afterRead",jt="beforeMain",Rt="main",It="afterMain",zt="beforeWrite",Lt="write",Ft="afterWrite",Bt=[Pt,Dt,Mt,jt,Rt,It,zt,Lt,Ft];function Nt(t){var e=new Map,i=new Set,n=[];function r(t){i.add(t.name);var o=[].concat(t.requires||[],t.requiresIfExists||[]);o.forEach((function(t){if(!i.has(t)){var n=e.get(t);n&&r(n)}})),n.push(t)}return t.forEach((function(t){e.set(t.name,t)})),t.forEach((function(t){i.has(t.name)||r(t)})),n}function Wt(t){var e=Nt(t);return Bt.reduce((function(t,i){return t.concat(e.filter((function(t){return t.phase===i})))}),[])}function Ht(t){var e;return function(){return e||(e=new Promise((function(i){Promise.resolve().then((function(){e=void 0,i(t())}))}))),e}}function Yt(t){var e=t.reduce((function(t,e){var i=t[e.name];return t[e.name]=i?Object.assign({},i,e,{options:Object.assign({},i.options,e.options),data:Object.assign({},i.data,e.data)}):e,t}),{});return Object.keys(e).map((function(t){return e[t]}))}var Xt={placement:"bottom",modifiers:[],strategy:"absolute"};function Ut(){for(var t=arguments.length,e=new Array(t),i=0;i<t;i++)e[i]=arguments[i];return!e.some((function(t){return!(t&&"function"===typeof t.getBoundingClientRect)}))}function Vt(t){void 0===t&&(t={});var e=t,i=e.defaultModifiers,n=void 0===i?[]:i,r=e.defaultOptions,o=void 0===r?Xt:r;return function(t,e,i){void 0===i&&(i=o);var r={placement:"bottom",orderedModifiers:[],options:Object.assign({},Xt,o),modifiersData:{},elements:{reference:t,popper:e},attributes:{},styles:{}},s=[],a=!1,c={state:r,setOptions:function(i){h(),r.options=Object.assign({},o,r.options,i),r.scrollParents={reference:Z(t)?ut(t):t.contextElement?ut(t.contextElement):[],popper:ut(e)};var s=Wt(Yt([].concat(n,r.options.modifiers)));return r.orderedModifiers=s.filter((function(t){return t.enabled})),l(),c.update()},forceUpdate:function(){if(!a){var t=r.elements,e=t.reference,i=t.popper;if(Ut(e,i)){r.rects={reference:at(e,gt(i),"fixed"===r.options.strategy),popper:ct(i)},r.reset=!1,r.placement=r.options.placement,r.orderedModifiers.forEach((function(t){return r.modifiersData[t.name]=Object.assign({},t.data)}));for(var n=0;n<r.orderedModifiers.length;n++)if(!0!==r.reset){var o=r.orderedModifiers[n],s=o.fn,l=o.options,h=void 0===l?{}:l,u=o.name;"function"===typeof s&&(r=s({state:r,options:h,name:u,instance:c})||r)}else r.reset=!1,n=-1}}},update:Ht((function(){return new Promise((function(t){c.forceUpdate(),t(r)}))})),destroy:function(){h(),a=!0}};if(!Ut(t,e))return c;function l(){r.orderedModifiers.forEach((function(t){var e=t.name,i=t.options,n=void 0===i?{}:i,o=t.effect;if("function"===typeof o){var a=o({state:r,name:e,instance:c,options:n}),l=function(){};s.push(a||l)}}))}function h(){s.forEach((function(t){return t()})),s=[]}return c.setOptions(i).then((function(t){!a&&i.onFirstUpdate&&i.onFirstUpdate(t)})),c}}var Gt={passive:!0};function $t(t){var e=t.state,i=t.instance,n=t.options,r=n.scroll,o=void 0===r||r,s=n.resize,a=void 0===s||s,c=q(e.elements.popper),l=[].concat(e.scrollParents.reference,e.scrollParents.popper);return o&&l.forEach((function(t){t.addEventListener("scroll",i.update,Gt)})),a&&c.addEventListener("resize",i.update,Gt),function(){o&&l.forEach((function(t){t.removeEventListener("scroll",i.update,Gt)})),a&&c.removeEventListener("resize",i.update,Gt)}}var qt={name:"eventListeners",enabled:!0,phase:"write",fn:function(){},effect:$t,data:{}};function Kt(t){return t.split("-")[0]}function Zt(t){return t.split("-")[1]}function Jt(t){return["top","bottom"].indexOf(t)>=0?"x":"y"}function Qt(t){var e,i=t.reference,n=t.element,r=t.placement,o=r?Kt(r):null,s=r?Zt(r):null,a=i.x+i.width/2-n.width/2,c=i.y+i.height/2-n.height/2;switch(o){case vt:e={x:a,y:i.y-n.height};break;case mt:e={x:a,y:i.y+i.height};break;case yt:e={x:i.x+i.width,y:c};break;case bt:e={x:i.x-n.width,y:c};break;default:e={x:i.x,y:i.y}}var l=o?Jt(o):null;if(null!=l){var h="y"===l?"height":"width";switch(s){case _t:e[l]=e[l]-(i[h]/2-n[h]/2);break;case St:e[l]=e[l]+(i[h]/2-n[h]/2);break;default:}}return e}function te(t){var e=t.state,i=t.name;e.modifiersData[i]=Qt({reference:e.rects.reference,element:e.rects.popper,strategy:"absolute",placement:e.placement})}var ee={name:"popperOffsets",enabled:!0,phase:"read",fn:te,data:{}},ie=Math.max,ne=Math.min,re=Math.round,oe={top:"auto",right:"auto",bottom:"auto",left:"auto"};function se(t){var e=t.x,i=t.y,n=window,r=n.devicePixelRatio||1;return{x:re(re(e*r)/r)||0,y:re(re(i*r)/r)||0}}function ae(t){var e,i=t.popper,n=t.popperRect,r=t.placement,o=t.offsets,s=t.position,a=t.gpuAcceleration,c=t.adaptive,l=t.roundOffsets,h=!0===l?se(o):"function"===typeof l?l(o):o,u=h.x,f=void 0===u?0:u,d=h.y,p=void 0===d?0:d,g=o.hasOwnProperty("x"),v=o.hasOwnProperty("y"),m=bt,y=vt,b=window;if(c){var w=gt(i),x="clientHeight",_="clientWidth";w===q(i)&&(w=nt(i),"static"!==ot(w).position&&(x="scrollHeight",_="scrollWidth")),w=w,r===vt&&(y=mt,p-=w[x]-n.height,p*=a?1:-1),r===bt&&(m=yt,f-=w[_]-n.width,f*=a?1:-1)}var S,C=Object.assign({position:s},c&&oe);return a?Object.assign({},C,(S={},S[y]=v?"0":"",S[m]=g?"0":"",S.transform=(b.devicePixelRatio||1)<2?"translate("+f+"px, "+p+"px)":"translate3d("+f+"px, "+p+"px, 0)",S)):Object.assign({},C,(e={},e[y]=v?p+"px":"",e[m]=g?f+"px":"",e.transform="",e))}function ce(t){var e=t.state,i=t.options,n=i.gpuAcceleration,r=void 0===n||n,o=i.adaptive,s=void 0===o||o,a=i.roundOffsets,c=void 0===a||a,l={placement:Kt(e.placement),popper:e.elements.popper,popperRect:e.rects.popper,gpuAcceleration:r};null!=e.modifiersData.popperOffsets&&(e.styles.popper=Object.assign({},e.styles.popper,ae(Object.assign({},l,{offsets:e.modifiersData.popperOffsets,position:e.options.strategy,adaptive:s,roundOffsets:c})))),null!=e.modifiersData.arrow&&(e.styles.arrow=Object.assign({},e.styles.arrow,ae(Object.assign({},l,{offsets:e.modifiersData.arrow,position:"absolute",adaptive:!1,roundOffsets:c})))),e.attributes.popper=Object.assign({},e.attributes.popper,{"data-popper-placement":e.placement})}var le={name:"computeStyles",enabled:!0,phase:"beforeWrite",fn:ce,data:{}};function he(t){var e=t.state;Object.keys(e.elements).forEach((function(t){var i=e.styles[t]||{},n=e.attributes[t]||{},r=e.elements[t];J(r)&&it(r)&&(Object.assign(r.style,i),Object.keys(n).forEach((function(t){var e=n[t];!1===e?r.removeAttribute(t):r.setAttribute(t,!0===e?"":e)})))}))}function ue(t){var e=t.state,i={popper:{position:e.options.strategy,left:"0",top:"0",margin:"0"},arrow:{position:"absolute"},reference:{}};return Object.assign(e.elements.popper.style,i.popper),e.styles=i,e.elements.arrow&&Object.assign(e.elements.arrow.style,i.arrow),function(){Object.keys(e.elements).forEach((function(t){var n=e.elements[t],r=e.attributes[t]||{},o=Object.keys(e.styles.hasOwnProperty(t)?e.styles[t]:i[t]),s=o.reduce((function(t,e){return t[e]="",t}),{});J(n)&&it(n)&&(Object.assign(n.style,s),Object.keys(r).forEach((function(t){n.removeAttribute(t)})))}))}}var fe={name:"applyStyles",enabled:!0,phase:"write",fn:he,effect:ue,requires:["computeStyles"]};function de(t,e,i){var n=Kt(t),r=[bt,vt].indexOf(n)>=0?-1:1,o="function"===typeof i?i(Object.assign({},e,{placement:t})):i,s=o[0],a=o[1];return s=s||0,a=(a||0)*r,[bt,yt].indexOf(n)>=0?{x:a,y:s}:{x:s,y:a}}function pe(t){var e=t.state,i=t.options,n=t.name,r=i.offset,o=void 0===r?[0,0]:r,s=At.reduce((function(t,i){return t[i]=de(i,e.rects,o),t}),{}),a=s[e.placement],c=a.x,l=a.y;null!=e.modifiersData.popperOffsets&&(e.modifiersData.popperOffsets.x+=c,e.modifiersData.popperOffsets.y+=l),e.modifiersData[n]=s}var ge={name:"offset",enabled:!0,phase:"main",requires:["popperOffsets"],fn:pe},ve={left:"right",right:"left",bottom:"top",top:"bottom"};function me(t){return t.replace(/left|right|bottom|top/g,(function(t){return ve[t]}))}var ye={start:"end",end:"start"};function be(t){return t.replace(/start|end/g,(function(t){return ye[t]}))}function we(t){var e=q(t),i=nt(t),n=e.visualViewport,r=i.clientWidth,o=i.clientHeight,s=0,a=0;return n&&(r=n.width,o=n.height,/^((?!chrome|android).)*safari/i.test(navigator.userAgent)||(s=n.offsetLeft,a=n.offsetTop)),{width:r,height:o,x:s+rt(t),y:a}}function xe(t){var e,i=nt(t),n=K(t),r=null==(e=t.ownerDocument)?void 0:e.body,o=ie(i.scrollWidth,i.clientWidth,r?r.scrollWidth:0,r?r.clientWidth:0),s=ie(i.scrollHeight,i.clientHeight,r?r.scrollHeight:0,r?r.clientHeight:0),a=-n.scrollLeft+rt(t),c=-n.scrollTop;return"rtl"===ot(r||i).direction&&(a+=ie(i.clientWidth,r?r.clientWidth:0)-o),{width:o,height:s,x:a,y:c}}function _e(t,e){var i=e.getRootNode&&e.getRootNode();if(t.contains(e))return!0;if(i&&Q(i)){var n=e;do{if(n&&t.isSameNode(n))return!0;n=n.parentNode||n.host}while(n)}return!1}function Se(t){return Object.assign({},t,{left:t.x,top:t.y,right:t.x+t.width,bottom:t.y+t.height})}function Ce(t){var e=$(t);return e.top=e.top+t.clientTop,e.left=e.left+t.clientLeft,e.bottom=e.top+t.clientHeight,e.right=e.left+t.clientWidth,e.width=t.clientWidth,e.height=t.clientHeight,e.x=e.left,e.y=e.top,e}function Te(t,e){return e===Tt?Se(we(t)):J(e)?Ce(e):Se(xe(nt(t)))}function Oe(t){var e=ut(lt(t)),i=["absolute","fixed"].indexOf(ot(t).position)>=0,n=i&&J(t)?gt(t):t;return Z(n)?e.filter((function(t){return Z(t)&&_e(t,n)&&"body"!==it(t)})):[]}function ke(t,e,i){var n="clippingParents"===e?Oe(t):[].concat(e),r=[].concat(n,[i]),o=r[0],s=r.reduce((function(e,i){var n=Te(t,i);return e.top=ie(n.top,e.top),e.right=ne(n.right,e.right),e.bottom=ne(n.bottom,e.bottom),e.left=ie(n.left,e.left),e}),Te(t,o));return s.width=s.right-s.left,s.height=s.bottom-s.top,s.x=s.left,s.y=s.top,s}function Ee(){return{top:0,right:0,bottom:0,left:0}}function Ae(t){return Object.assign({},Ee(),t)}function Pe(t,e){return e.reduce((function(e,i){return e[i]=t,e}),{})}function De(t,e){void 0===e&&(e={});var i=e,n=i.placement,r=void 0===n?t.placement:n,o=i.boundary,s=void 0===o?Ct:o,a=i.rootBoundary,c=void 0===a?Tt:a,l=i.elementContext,h=void 0===l?Ot:l,u=i.altBoundary,f=void 0!==u&&u,d=i.padding,p=void 0===d?0:d,g=Ae("number"!==typeof p?p:Pe(p,xt)),v=h===Ot?kt:Ot,m=t.elements.reference,y=t.rects.popper,b=t.elements[f?v:h],w=ke(Z(b)?b:b.contextElement||nt(t.elements.popper),s,c),x=$(m),_=Qt({reference:x,element:y,strategy:"absolute",placement:r}),S=Se(Object.assign({},y,_)),C=h===Ot?S:x,T={top:w.top-C.top+g.top,bottom:C.bottom-w.bottom+g.bottom,left:w.left-C.left+g.left,right:C.right-w.right+g.right},O=t.modifiersData.offset;if(h===Ot&&O){var k=O[r];Object.keys(T).forEach((function(t){var e=[yt,mt].indexOf(t)>=0?1:-1,i=[vt,mt].indexOf(t)>=0?"y":"x";T[t]+=k[i]*e}))}return T}function Me(t,e){void 0===e&&(e={});var i=e,n=i.placement,r=i.boundary,o=i.rootBoundary,s=i.padding,a=i.flipVariations,c=i.allowedAutoPlacements,l=void 0===c?At:c,h=Zt(n),u=h?a?Et:Et.filter((function(t){return Zt(t)===h})):xt,f=u.filter((function(t){return l.indexOf(t)>=0}));0===f.length&&(f=u);var d=f.reduce((function(e,i){return e[i]=De(t,{placement:i,boundary:r,rootBoundary:o,padding:s})[Kt(i)],e}),{});return Object.keys(d).sort((function(t,e){return d[t]-d[e]}))}function je(t){if(Kt(t)===wt)return[];var e=me(t);return[be(t),e,be(e)]}function Re(t){var e=t.state,i=t.options,n=t.name;if(!e.modifiersData[n]._skip){for(var r=i.mainAxis,o=void 0===r||r,s=i.altAxis,a=void 0===s||s,c=i.fallbackPlacements,l=i.padding,h=i.boundary,u=i.rootBoundary,f=i.altBoundary,d=i.flipVariations,p=void 0===d||d,g=i.allowedAutoPlacements,v=e.options.placement,m=Kt(v),y=m===v,b=c||(y||!p?[me(v)]:je(v)),w=[v].concat(b).reduce((function(t,i){return t.concat(Kt(i)===wt?Me(e,{placement:i,boundary:h,rootBoundary:u,padding:l,flipVariations:p,allowedAutoPlacements:g}):i)}),[]),x=e.rects.reference,_=e.rects.popper,S=new Map,C=!0,T=w[0],O=0;O<w.length;O++){var k=w[O],E=Kt(k),A=Zt(k)===_t,P=[vt,mt].indexOf(E)>=0,D=P?"width":"height",M=De(e,{placement:k,boundary:h,rootBoundary:u,altBoundary:f,padding:l}),j=P?A?yt:bt:A?mt:vt;x[D]>_[D]&&(j=me(j));var R=me(j),I=[];if(o&&I.push(M[E]<=0),a&&I.push(M[j]<=0,M[R]<=0),I.every((function(t){return t}))){T=k,C=!1;break}S.set(k,I)}if(C)for(var z=p?3:1,L=function(t){var e=w.find((function(e){var i=S.get(e);if(i)return i.slice(0,t).every((function(t){return t}))}));if(e)return T=e,"break"},F=z;F>0;F--){var B=L(F);if("break"===B)break}e.placement!==T&&(e.modifiersData[n]._skip=!0,e.placement=T,e.reset=!0)}}var Ie={name:"flip",enabled:!0,phase:"main",fn:Re,requiresIfExists:["offset"],data:{_skip:!1}};function ze(t){return"x"===t?"y":"x"}function Le(t,e,i){return ie(t,ne(e,i))}function Fe(t){var e=t.state,i=t.options,n=t.name,r=i.mainAxis,o=void 0===r||r,s=i.altAxis,a=void 0!==s&&s,c=i.boundary,l=i.rootBoundary,h=i.altBoundary,u=i.padding,f=i.tether,d=void 0===f||f,p=i.tetherOffset,g=void 0===p?0:p,v=De(e,{boundary:c,rootBoundary:l,padding:u,altBoundary:h}),m=Kt(e.placement),y=Zt(e.placement),b=!y,w=Jt(m),x=ze(w),_=e.modifiersData.popperOffsets,S=e.rects.reference,C=e.rects.popper,T="function"===typeof g?g(Object.assign({},e.rects,{placement:e.placement})):g,O={x:0,y:0};if(_){if(o||a){var k="y"===w?vt:bt,E="y"===w?mt:yt,A="y"===w?"height":"width",P=_[w],D=_[w]+v[k],M=_[w]-v[E],j=d?-C[A]/2:0,R=y===_t?S[A]:C[A],I=y===_t?-C[A]:-S[A],z=e.elements.arrow,L=d&&z?ct(z):{width:0,height:0},F=e.modifiersData["arrow#persistent"]?e.modifiersData["arrow#persistent"].padding:Ee(),B=F[k],N=F[E],W=Le(0,S[A],L[A]),H=b?S[A]/2-j-W-B-T:R-W-B-T,Y=b?-S[A]/2+j+W+N+T:I+W+N+T,X=e.elements.arrow&&gt(e.elements.arrow),U=X?"y"===w?X.clientTop||0:X.clientLeft||0:0,V=e.modifiersData.offset?e.modifiersData.offset[e.placement][w]:0,G=_[w]+H-V-U,$=_[w]+Y-V;if(o){var q=Le(d?ne(D,G):D,P,d?ie(M,$):M);_[w]=q,O[w]=q-P}if(a){var K="x"===w?vt:bt,Z="x"===w?mt:yt,J=_[x],Q=J+v[K],tt=J-v[Z],et=Le(d?ne(Q,G):Q,J,d?ie(tt,$):tt);_[x]=et,O[x]=et-J}}e.modifiersData[n]=O}}var Be={name:"preventOverflow",enabled:!0,phase:"main",fn:Fe,requiresIfExists:["offset"]},Ne=function(t,e){return t="function"===typeof t?t(Object.assign({},e.rects,{placement:e.placement})):t,Ae("number"!==typeof t?t:Pe(t,xt))};function We(t){var e,i=t.state,n=t.name,r=t.options,o=i.elements.arrow,s=i.modifiersData.popperOffsets,a=Kt(i.placement),c=Jt(a),l=[bt,yt].indexOf(a)>=0,h=l?"height":"width";if(o&&s){var u=Ne(r.padding,i),f=ct(o),d="y"===c?vt:bt,p="y"===c?mt:yt,g=i.rects.reference[h]+i.rects.reference[c]-s[c]-i.rects.popper[h],v=s[c]-i.rects.reference[c],m=gt(o),y=m?"y"===c?m.clientHeight||0:m.clientWidth||0:0,b=g/2-v/2,w=u[d],x=y-f[h]-u[p],_=y/2-f[h]/2+b,S=Le(w,_,x),C=c;i.modifiersData[n]=(e={},e[C]=S,e.centerOffset=S-_,e)}}function He(t){var e=t.state,i=t.options,n=i.element,r=void 0===n?"[data-popper-arrow]":n;null!=r&&("string"!==typeof r||(r=e.elements.popper.querySelector(r),r))&&_e(e.elements.popper,r)&&(e.elements.arrow=r)}var Ye={name:"arrow",enabled:!0,phase:"main",fn:We,effect:He,requires:["popperOffsets"],requiresIfExists:["preventOverflow"]};function Xe(t,e,i){return void 0===i&&(i={x:0,y:0}),{top:t.top-e.height-i.y,right:t.right-e.width+i.x,bottom:t.bottom-e.height+i.y,left:t.left-e.width-i.x}}function Ue(t){return[vt,yt,mt,bt].some((function(e){return t[e]>=0}))}function Ve(t){var e=t.state,i=t.name,n=e.rects.reference,r=e.rects.popper,o=e.modifiersData.preventOverflow,s=De(e,{elementContext:"reference"}),a=De(e,{altBoundary:!0}),c=Xe(s,n),l=Xe(a,r,o),h=Ue(c),u=Ue(l);e.modifiersData[i]={referenceClippingOffsets:c,popperEscapeOffsets:l,isReferenceHidden:h,hasPopperEscaped:u},e.attributes.popper=Object.assign({},e.attributes.popper,{"data-popper-reference-hidden":h,"data-popper-escaped":u})}var Ge={name:"hide",enabled:!0,phase:"main",requiresIfExists:["preventOverflow"],fn:Ve},$e=[qt,ee,le,fe,ge,Ie,Be,Ye,Ge],qe=Vt({defaultModifiers:$e}),Ke="tippy-box",Ze="tippy-content",Je="tippy-backdrop",Qe="tippy-arrow",ti="tippy-svg-arrow",ei={passive:!0,capture:!0};function ii(t,e,i){if(Array.isArray(t)){var n=t[e];return null==n?Array.isArray(i)?i[e]:i:n}return t}function ni(t,e){var i={}.toString.call(t);return 0===i.indexOf("[object")&&i.indexOf(e+"]")>-1}function ri(t,e){return"function"===typeof t?t.apply(void 0,e):t}function oi(t,e){return 0===e?t:function(n){clearTimeout(i),i=setTimeout((function(){t(n)}),e)};var i}function si(t){return t.split(/\s+/).filter(Boolean)}function ai(t){return[].concat(t)}function ci(t,e){-1===t.indexOf(e)&&t.push(e)}function li(t){return t.filter((function(e,i){return t.indexOf(e)===i}))}function hi(t){return t.split("-")[0]}function ui(t){return[].slice.call(t)}function fi(t){return Object.keys(t).reduce((function(e,i){return void 0!==t[i]&&(e[i]=t[i]),e}),{})}function di(){return document.createElement("div")}function pi(t){return["Element","Fragment"].some((function(e){return ni(t,e)}))}function gi(t){return ni(t,"NodeList")}function vi(t){return ni(t,"MouseEvent")}function mi(t){return!(!t||!t._tippy||t._tippy.reference!==t)}function yi(t){return pi(t)?[t]:gi(t)?ui(t):Array.isArray(t)?t:ui(document.querySelectorAll(t))}function bi(t,e){t.forEach((function(t){t&&(t.style.transitionDuration=e+"ms")}))}function wi(t,e){t.forEach((function(t){t&&t.setAttribute("data-state",e)}))}function xi(t){var e,i=ai(t),n=i[0];return(null==n||null==(e=n.ownerDocument)?void 0:e.body)?n.ownerDocument:document}function _i(t,e){var i=e.clientX,n=e.clientY;return t.every((function(t){var e=t.popperRect,r=t.popperState,o=t.props,s=o.interactiveBorder,a=hi(r.placement),c=r.modifiersData.offset;if(!c)return!0;var l="bottom"===a?c.top.y:0,h="top"===a?c.bottom.y:0,u="right"===a?c.left.x:0,f="left"===a?c.right.x:0,d=e.top-n+l>s,p=n-e.bottom-h>s,g=e.left-i+u>s,v=i-e.right-f>s;return d||p||g||v}))}function Si(t,e,i){var n=e+"EventListener";["transitionend","webkitTransitionEnd"].forEach((function(e){t[n](e,i)}))}var Ci={isTouch:!1},Ti=0;function Oi(){Ci.isTouch||(Ci.isTouch=!0,window.performance&&document.addEventListener("mousemove",ki))}function ki(){var t=performance.now();t-Ti<20&&(Ci.isTouch=!1,document.removeEventListener("mousemove",ki)),Ti=t}function Ei(){var t=document.activeElement;if(mi(t)){var e=t._tippy;t.blur&&!e.state.isVisible&&t.blur()}}function Ai(){document.addEventListener("touchstart",Oi,ei),window.addEventListener("blur",Ei)}var Pi="undefined"!==typeof window&&"undefined"!==typeof document,Di=Pi?navigator.userAgent:"",Mi=/MSIE |Trident\//.test(Di);var ji={animateFill:!1,followCursor:!1,inlinePositioning:!1,sticky:!1},Ri={allowHTML:!1,animation:"fade",arrow:!0,content:"",inertia:!1,maxWidth:350,role:"tooltip",theme:"",zIndex:9999},Ii=Object.assign({appendTo:function(){return document.body},aria:{content:"auto",expanded:"auto"},delay:0,duration:[300,250],getReferenceClientRect:null,hideOnClick:!0,ignoreAttributes:!1,interactive:!1,interactiveBorder:2,interactiveDebounce:0,moveTransition:"",offset:[0,10],onAfterUpdate:function(){},onBeforeUpdate:function(){},onCreate:function(){},onDestroy:function(){},onHidden:function(){},onHide:function(){},onMount:function(){},onShow:function(){},onShown:function(){},onTrigger:function(){},onUntrigger:function(){},onClickOutside:function(){},placement:"top",plugins:[],popperOptions:{},render:null,showOnCreate:!1,touch:!0,trigger:"mouseenter focus",triggerTarget:null},ji,{},Ri),zi=Object.keys(Ii),Li=function(t){var e=Object.keys(t);e.forEach((function(e){Ii[e]=t[e]}))};function Fi(t){var e=t.plugins||[],i=e.reduce((function(e,i){var n=i.name,r=i.defaultValue;return n&&(e[n]=void 0!==t[n]?t[n]:r),e}),{});return Object.assign({},t,{},i)}function Bi(t,e){var i=e?Object.keys(Fi(Object.assign({},Ii,{plugins:e}))):zi,n=i.reduce((function(e,i){var n=(t.getAttribute("data-tippy-"+i)||"").trim();if(!n)return e;if("content"===i)e[i]=n;else try{e[i]=JSON.parse(n)}catch(ir){e[i]=n}return e}),{});return n}function Ni(t,e){var i=Object.assign({},e,{content:ri(e.content,[t])},e.ignoreAttributes?{}:Bi(t,e.plugins));return i.aria=Object.assign({},Ii.aria,{},i.aria),i.aria={expanded:"auto"===i.aria.expanded?e.interactive:i.aria.expanded,content:"auto"===i.aria.content?e.interactive?null:"describedby":i.aria.content},i}var Wi=function(){return"innerHTML"};function Hi(t,e){t[Wi()]=e}function Yi(t){var e=di();return!0===t?e.className=Qe:(e.className=ti,pi(t)?e.appendChild(t):Hi(e,t)),e}function Xi(t,e){pi(e.content)?(Hi(t,""),t.appendChild(e.content)):"function"!==typeof e.content&&(e.allowHTML?Hi(t,e.content):t.textContent=e.content)}function Ui(t){var e=t.firstElementChild,i=ui(e.children);return{box:e,content:i.find((function(t){return t.classList.contains(Ze)})),arrow:i.find((function(t){return t.classList.contains(Qe)||t.classList.contains(ti)})),backdrop:i.find((function(t){return t.classList.contains(Je)}))}}function Vi(t){var e=di(),i=di();i.className=Ke,i.setAttribute("data-state","hidden"),i.setAttribute("tabindex","-1");var n=di();function r(i,n){var r=Ui(e),o=r.box,s=r.content,a=r.arrow;n.theme?o.setAttribute("data-theme",n.theme):o.removeAttribute("data-theme"),"string"===typeof n.animation?o.setAttribute("data-animation",n.animation):o.removeAttribute("data-animation"),n.inertia?o.setAttribute("data-inertia",""):o.removeAttribute("data-inertia"),o.style.maxWidth="number"===typeof n.maxWidth?n.maxWidth+"px":n.maxWidth,n.role?o.setAttribute("role",n.role):o.removeAttribute("role"),i.content===n.content&&i.allowHTML===n.allowHTML||Xi(s,t.props),n.arrow?a?i.arrow!==n.arrow&&(o.removeChild(a),o.appendChild(Yi(n.arrow))):o.appendChild(Yi(n.arrow)):a&&o.removeChild(a)}return n.className=Ze,n.setAttribute("data-state","hidden"),Xi(n,t.props),e.appendChild(i),i.appendChild(n),r(t.props,t.props),{popper:e,onUpdate:r}}Vi.$$tippy=!0;var Gi=1,$i=[],qi=[];function Ki(t,e){var i,n,r,o,s,a,c,l=Ni(t,Object.assign({},Ii,{},Fi(fi(e)))),h=!1,u=!1,f=!1,d=!1,p=[],g=oi(K,l.interactiveDebounce),v=Gi++,m=null,y=li(l.plugins),b={isEnabled:!0,isVisible:!1,isDestroyed:!1,isMounted:!1,isShown:!1},w={id:v,reference:t,popper:di(),popperInstance:m,props:l,state:b,plugins:y,clearDelayTimeouts:ct,setProps:lt,setContent:ht,show:ut,hide:ft,hideWithInteractivity:dt,enable:st,disable:at,unmount:pt,destroy:gt};if(!l.render)return w;var x=l.render(w),_=x.popper,S=x.onUpdate;_.setAttribute("data-tippy-root",""),_.id="tippy-"+w.id,w.popper=_,t._tippy=w,_._tippy=w;var C=y.map((function(t){return t.fn(w)})),T=t.hasAttribute("aria-expanded");return G(),z(),j(),R("onCreate",[w]),l.showOnCreate&&rt(),_.addEventListener("mouseenter",(function(){w.props.interactive&&w.state.isVisible&&w.clearDelayTimeouts()})),_.addEventListener("mouseleave",(function(t){w.props.interactive&&w.props.trigger.indexOf("mouseenter")>=0&&(P().addEventListener("mousemove",g),g(t))})),w;function O(){var t=w.props.touch;return Array.isArray(t)?t:[t,0]}function k(){return"hold"===O()[0]}function E(){var t;return!!(null==(t=w.props.render)?void 0:t.$$tippy)}function A(){return c||t}function P(){var t=A().parentNode;return t?xi(t):document}function D(){return Ui(_)}function M(t){return w.state.isMounted&&!w.state.isVisible||Ci.isTouch||o&&"focus"===o.type?0:ii(w.props.delay,t?0:1,Ii.delay)}function j(){_.style.pointerEvents=w.props.interactive&&w.state.isVisible?"":"none",_.style.zIndex=""+w.props.zIndex}function R(t,e,i){var n;(void 0===i&&(i=!0),C.forEach((function(i){i[t]&&i[t].apply(void 0,e)})),i)&&(n=w.props)[t].apply(n,e)}function I(){var e=w.props.aria;if(e.content){var i="aria-"+e.content,n=_.id,r=ai(w.props.triggerTarget||t);r.forEach((function(t){var e=t.getAttribute(i);if(w.state.isVisible)t.setAttribute(i,e?e+" "+n:n);else{var r=e&&e.replace(n,"").trim();r?t.setAttribute(i,r):t.removeAttribute(i)}}))}}function z(){if(!T&&w.props.aria.expanded){var e=ai(w.props.triggerTarget||t);e.forEach((function(t){w.props.interactive?t.setAttribute("aria-expanded",w.state.isVisible&&t===A()?"true":"false"):t.removeAttribute("aria-expanded")}))}}function L(){P().removeEventListener("mousemove",g),$i=$i.filter((function(t){return t!==g}))}function F(t){if((!Ci.isTouch||!f&&"mousedown"!==t.type)&&(!w.props.interactive||!_.contains(t.target))){if(A().contains(t.target)){if(Ci.isTouch)return;if(w.state.isVisible&&w.props.trigger.indexOf("click")>=0)return}else R("onClickOutside",[w,t]);!0===w.props.hideOnClick&&(w.clearDelayTimeouts(),w.hide(),u=!0,setTimeout((function(){u=!1})),w.state.isMounted||H())}}function B(){f=!0}function N(){f=!1}function W(){var t=P();t.addEventListener("mousedown",F,!0),t.addEventListener("touchend",F,ei),t.addEventListener("touchstart",N,ei),t.addEventListener("touchmove",B,ei)}function H(){var t=P();t.removeEventListener("mousedown",F,!0),t.removeEventListener("touchend",F,ei),t.removeEventListener("touchstart",N,ei),t.removeEventListener("touchmove",B,ei)}function Y(t,e){U(t,(function(){!w.state.isVisible&&_.parentNode&&_.parentNode.contains(_)&&e()}))}function X(t,e){U(t,e)}function U(t,e){var i=D().box;function n(t){t.target===i&&(Si(i,"remove",n),e())}if(0===t)return e();Si(i,"remove",s),Si(i,"add",n),s=n}function V(e,i,n){void 0===n&&(n=!1);var r=ai(w.props.triggerTarget||t);r.forEach((function(t){t.addEventListener(e,i,n),p.push({node:t,eventType:e,handler:i,options:n})}))}function G(){k()&&(V("touchstart",q,{passive:!0}),V("touchend",Z,{passive:!0})),si(w.props.trigger).forEach((function(t){if("manual"!==t)switch(V(t,q),t){case"mouseenter":V("mouseleave",Z);break;case"focus":V(Mi?"focusout":"blur",J);break;case"focusin":V("focusout",J);break}}))}function $(){p.forEach((function(t){var e=t.node,i=t.eventType,n=t.handler,r=t.options;e.removeEventListener(i,n,r)})),p=[]}function q(t){var e,i=!1;if(w.state.isEnabled&&!Q(t)&&!u){var n="focus"===(null==(e=o)?void 0:e.type);o=t,c=t.currentTarget,z(),!w.state.isVisible&&vi(t)&&$i.forEach((function(e){return e(t)})),"click"===t.type&&(w.props.trigger.indexOf("mouseenter")<0||h)&&!1!==w.props.hideOnClick&&w.state.isVisible?i=!0:rt(t),"click"===t.type&&(h=!i),i&&!n&&ot(t)}}function K(t){var e=t.target,i=A().contains(e)||_.contains(e);if("mousemove"!==t.type||!i){var n=nt().concat(_).map((function(t){var e,i=t._tippy,n=null==(e=i.popperInstance)?void 0:e.state;return n?{popperRect:t.getBoundingClientRect(),popperState:n,props:l}:null})).filter(Boolean);_i(n,t)&&(L(),ot(t))}}function Z(t){var e=Q(t)||w.props.trigger.indexOf("click")>=0&&h;e||(w.props.interactive?w.hideWithInteractivity(t):ot(t))}function J(t){w.props.trigger.indexOf("focusin")<0&&t.target!==A()||w.props.interactive&&t.relatedTarget&&_.contains(t.relatedTarget)||ot(t)}function Q(t){return!!Ci.isTouch&&k()!==t.type.indexOf("touch")>=0}function tt(){et();var e=w.props,i=e.popperOptions,n=e.placement,r=e.offset,o=e.getReferenceClientRect,s=e.moveTransition,c=E()?Ui(_).arrow:null,l=o?{getBoundingClientRect:o,contextElement:o.contextElement||A()}:t,h={name:"$$tippy",enabled:!0,phase:"beforeWrite",requires:["computeStyles"],fn:function(t){var e=t.state;if(E()){var i=D(),n=i.box;["placement","reference-hidden","escaped"].forEach((function(t){"placement"===t?n.setAttribute("data-placement",e.placement):e.attributes.popper["data-popper-"+t]?n.setAttribute("data-"+t,""):n.removeAttribute("data-"+t)})),e.attributes.popper={}}}},u=[{name:"offset",options:{offset:r}},{name:"preventOverflow",options:{padding:{top:2,bottom:2,left:5,right:5}}},{name:"flip",options:{padding:5}},{name:"computeStyles",options:{adaptive:!s}},h];E()&&c&&u.push({name:"arrow",options:{element:c,padding:3}}),u.push.apply(u,(null==i?void 0:i.modifiers)||[]),w.popperInstance=qe(l,_,Object.assign({},i,{placement:n,onFirstUpdate:a,modifiers:u}))}function et(){w.popperInstance&&(w.popperInstance.destroy(),w.popperInstance=null)}function it(){var t,e=w.props.appendTo,i=A();t=w.props.interactive&&e===Ii.appendTo||"parent"===e?i.parentNode:ri(e,[i]),t.contains(_)||t.appendChild(_),tt()}function nt(){return ui(_.querySelectorAll("[data-tippy-root]"))}function rt(t){w.clearDelayTimeouts(),t&&R("onTrigger",[w,t]),W();var e=M(!0),n=O(),r=n[0],o=n[1];Ci.isTouch&&"hold"===r&&o&&(e=o),e?i=setTimeout((function(){w.show()}),e):w.show()}function ot(t){if(w.clearDelayTimeouts(),R("onUntrigger",[w,t]),w.state.isVisible){if(!(w.props.trigger.indexOf("mouseenter")>=0&&w.props.trigger.indexOf("click")>=0&&["mouseleave","mousemove"].indexOf(t.type)>=0&&h)){var e=M(!1);e?n=setTimeout((function(){w.state.isVisible&&w.hide()}),e):r=requestAnimationFrame((function(){w.hide()}))}}else H()}function st(){w.state.isEnabled=!0}function at(){w.hide(),w.state.isEnabled=!1}function ct(){clearTimeout(i),clearTimeout(n),cancelAnimationFrame(r)}function lt(e){if(!w.state.isDestroyed){R("onBeforeUpdate",[w,e]),$();var i=w.props,n=Ni(t,Object.assign({},w.props,{},e,{ignoreAttributes:!0}));w.props=n,G(),i.interactiveDebounce!==n.interactiveDebounce&&(L(),g=oi(K,n.interactiveDebounce)),i.triggerTarget&&!n.triggerTarget?ai(i.triggerTarget).forEach((function(t){t.removeAttribute("aria-expanded")})):n.triggerTarget&&t.removeAttribute("aria-expanded"),z(),j(),S&&S(i,n),w.popperInstance&&(tt(),nt().forEach((function(t){requestAnimationFrame(t._tippy.popperInstance.forceUpdate)}))),R("onAfterUpdate",[w,e])}}function ht(t){w.setProps({content:t})}function ut(){var t=w.state.isVisible,e=w.state.isDestroyed,i=!w.state.isEnabled,n=Ci.isTouch&&!w.props.touch,r=ii(w.props.duration,0,Ii.duration);if(!(t||e||i||n)&&!A().hasAttribute("disabled")&&(R("onShow",[w],!1),!1!==w.props.onShow(w))){if(w.state.isVisible=!0,E()&&(_.style.visibility="visible"),j(),W(),w.state.isMounted||(_.style.transition="none"),E()){var o=D(),s=o.box,c=o.content;bi([s,c],0)}a=function(){var t;if(w.state.isVisible&&!d){if(d=!0,_.offsetHeight,_.style.transition=w.props.moveTransition,E()&&w.props.animation){var e=D(),i=e.box,n=e.content;bi([i,n],r),wi([i,n],"visible")}I(),z(),ci(qi,w),null==(t=w.popperInstance)||t.forceUpdate(),w.state.isMounted=!0,R("onMount",[w]),w.props.animation&&E()&&X(r,(function(){w.state.isShown=!0,R("onShown",[w])}))}},it()}}function ft(){var t=!w.state.isVisible,e=w.state.isDestroyed,i=!w.state.isEnabled,n=ii(w.props.duration,1,Ii.duration);if(!(t||e||i)&&(R("onHide",[w],!1),!1!==w.props.onHide(w))){if(w.state.isVisible=!1,w.state.isShown=!1,d=!1,h=!1,E()&&(_.style.visibility="hidden"),L(),H(),j(),E()){var r=D(),o=r.box,s=r.content;w.props.animation&&(bi([o,s],n),wi([o,s],"hidden"))}I(),z(),w.props.animation?E()&&Y(n,w.unmount):w.unmount()}}function dt(t){P().addEventListener("mousemove",g),ci($i,g),g(t)}function pt(){w.state.isVisible&&w.hide(),w.state.isMounted&&(et(),nt().forEach((function(t){t._tippy.unmount()})),_.parentNode&&_.parentNode.removeChild(_),qi=qi.filter((function(t){return t!==w})),w.state.isMounted=!1,R("onHidden",[w]))}function gt(){w.state.isDestroyed||(w.clearDelayTimeouts(),w.unmount(),$(),delete t._tippy,w.state.isDestroyed=!0,R("onDestroy",[w]))}}function Zi(t,e){void 0===e&&(e={});var i=Ii.plugins.concat(e.plugins||[]);Ai();var n=Object.assign({},e,{plugins:i}),r=yi(t),o=r.reduce((function(t,e){var i=e&&Ki(e,n);return i&&t.push(i),t}),[]);return pi(t)?o[0]:o}Zi.defaultProps=Ii,Zi.setDefaultProps=Li,Zi.currentInput=Ci;Object.assign({},fe,{effect:function(t){var e=t.state,i={popper:{position:e.options.strategy,left:"0",top:"0",margin:"0"},arrow:{position:"absolute"},reference:{}};Object.assign(e.elements.popper.style,i.popper),e.styles=i,e.elements.arrow&&Object.assign(e.elements.arrow.style,i.arrow)}});Zi.setDefaultProps({render:Vi});var Ji=Zi,Qi=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{class:t.getClass()},[i("div"),i("div"),"ellipsis"===t.name||"grid"===t.name?[i("div")]:t._e(),"grid"===t.name?[i("div"),i("div"),i("div"),i("div"),i("div"),i("div")]:t._e()],2)},tn=[],en=(i("b0c0"),function(t){f(i,t);var e=b(i);function i(){return c(this,i),e.apply(this,arguments)}return h(i,[{key:"getClass",value:function(){var t="vuoz-loader__".concat(this.name," ")+"is-".concat(this.size);return t}}]),i}(_.a));w([V({type:String,default:"ellipsis"})],en.prototype,"name",void 0),w([V({type:String,default:"normal"})],en.prototype,"size",void 0),en=w([Y({name:"VuozLoadingIcon"})],en);var nn=en,rn=nn;function on(t,e,i,n,r,o,s,a){var c,l="function"===typeof t?t.options:t;if(e&&(l.render=e,l.staticRenderFns=i,l._compiled=!0),n&&(l.functional=!0),o&&(l._scopeId="data-v-"+o),s?(c=function(t){t=t||this.$vnode&&this.$vnode.ssrContext||this.parent&&this.parent.$vnode&&this.parent.$vnode.ssrContext,t||"undefined"===typeof __VUE_SSR_CONTEXT__||(t=__VUE_SSR_CONTEXT__),r&&r.call(this,t),t&&t._registeredComponents&&t._registeredComponents.add(s)},l._ssrRegister=c):r&&(c=a?function(){r.call(this,(l.functional?this.parent:this).$root.$options.shadowRoot)}:r),c)if(l.functional){l._injectStyles=c;var h=l.render;l.render=function(t,e){return c.call(e),h(t,e)}}else{var u=l.beforeCreate;l.beforeCreate=u?[].concat(u,c):[c]}return{exports:t,options:l}}var sn=on(rn,Qi,tn,!1,null,null,null),an=sn.exports,cn={bind:function(t,e,i){t.clickOutsideEvent=function(n){t==n.target||t.contains(n.target)||i.context[e.expression](n)},document.body.addEventListener("mousedown",t.clickOutsideEvent)},unbind:function(t){document.body.removeEventListener("mousedown",t.clickOutsideEvent)}},ln=function(t){f(i,t);var e=b(i);function i(){var t;return c(this,i),t=e.apply(this,arguments),t.hovered=!1,t.selected=!1,t.disable=!1,t.load=!1,t.menu=null,t}return h(i,[{key:"mounted",value:function(){if(this.toggled&&(this.selected=!0),"dropdown"===this.type){var t=this.$refs.main,e=this.$refs.menu;this.menu=Ji(t,{content:e,trigger:"manual",duration:[0,0],hideOnClick:!1,arrow:!1,interactive:!0,allowHTML:!0,placement:"bottom-start",offset:[0,5]})}}},{key:"updated",value:function(){}},{key:"beforeDestroy",value:function(){}},{key:"toggleLoad",value:function(){this.load=!this.load}},{key:"onDisable",value:function(){this.disable=this.disabled}},{key:"onload",value:function(){this.load=this.loading}},{key:"getClasses",value:function(){var t="is-".concat(this.size);return"free"!==this.shape&&(t+=" is-".concat(this.shape)),this.load&&(t+=" is-load"),t+=" has-text-".concat(this.weight),this.rounded&&"circle"!==this.shape&&(t+=" is-rounded"),this.uppercase&&(t+=" is-uppercase"),this.smallcaps&&(t+=" is-small-caps"),"push"!==this.type?(this.selected?t+=" has-background-".concat(this.toggle):t+=" has-background-".concat(this.color),!this.disable&&this.hovered?(this.selected?t+=" has-background-".concat(this.toggle,"-shaded"):t+=" has-background-".concat(this.color,"-shaded"),this.border?this.selected?t+=" has-border-".concat(this.toggle):t+=" has-border-".concat(this.color):t+=" has-border-none"):this.border?this.selected?t+=" has-border-".concat(this.toggle,"-shaded"):t+=" has-border-".concat(this.color,"-shaded"):t+=" has-border-none"):(t+=" has-background-".concat(this.color),this.disable||!this.hovered||this.selected?this.border?t+=" has-border-".concat(this.color,"-shaded"):t+=" has-border-none":(t+=" has-background-".concat(this.color,"-shaded"),this.border?t+=" has-border-".concat(this.color):t+=" has-border-none")),this.disable||this.shadow&&!this.selected&&(t+=" has-shadow"),this.disable&&(t+=" is-disabled"),t}},{key:"click",value:function(t){this.selected=t}},{key:"unselect",value:function(){this.selected&&(this.selected=!1,this.$emit("click",this.selected))}},{key:"onMouseEnter",value:function(){this.load||(this.hovered=!0)}},{key:"onMouseLeave",value:function(){this.load||(this.hovered=!1)}},{key:"onMouseDown",value:function(t){t.stopPropagation(),this.disable||this.load||("push"!==this.type?(this.selected=!this.selected,"dropdown"===this.type&&(this.selected?this.menu.show():this.menu.hide())):this.selected=!0,this.$emit("click",this.selected))}},{key:"onMouseUp",value:function(t){t.stopPropagation(),"push"!==this.type||this.disable||this.load||(this.selected=!1,this.$emit("click",this.selected))}},{key:"onMenu",value:function(t){this.$emit("menu",t)}},{key:"onClickOutside",value:function(t){var e=this,i=!1;t.path.forEach((function(t){t===e.$refs.main&&(i=!0)})),!1===i&&(this.selected=!1,this.menu.hide())}}]),i}(_.a);w([V({type:Boolean,default:!1})],ln.prototype,"disabled",void 0),w([V({type:Boolean,default:!1})],ln.prototype,"loading",void 0),w([V({type:String,default:"push"})],ln.prototype,"type",void 0),w([V({type:String,default:"normal"})],ln.prototype,"size",void 0),w([V({type:String,default:"free"})],ln.prototype,"shape",void 0),w([V({type:String,default:"regular"})],ln.prototype,"weight",void 0),w([V({type:Boolean,default:!1})],ln.prototype,"rounded",void 0),w([V({type:Boolean,default:!0})],ln.prototype,"border",void 0),w([V({type:Boolean,default:!1})],ln.prototype,"uppercase",void 0),w([V({type:Boolean,default:!1})],ln.prototype,"smallcaps",void 0),w([V({type:String,default:"medium-grey"})],ln.prototype,"color",void 0),w([V({type:String,default:"danger"})],ln.prototype,"toggle",void 0),w([V({type:Boolean,default:!1})],ln.prototype,"toggled",void 0),w([V({type:Boolean,default:!1})],ln.prototype,"shadow",void 0),w([V({type:String,default:"close"})],ln.prototype,"icon",void 0),w([V({type:String,default:"bottom-left"})],ln.prototype,"menuPlacement",void 0),w([V({type:Function})],ln.prototype,"menuComponent",void 0),w([G("disabled",{immediate:!0})],ln.prototype,"onDisable",null),w([G("loading",{immediate:!0})],ln.prototype,"onload",null),ln=w([Y({name:"VuozButton",components:{VuozLoadingIcon:an},directives:{clickOutside:cn}})],ln);var hn=ln,un=hn,fn=on(un,s,a,!1,null,null,null),dn=fn.exports,pn=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("button",{key:t.size,staticClass:"vuoz-checkbox",class:t.getClasses("main"),on:{mouseenter:t.onMouseEnter,mouseleave:t.onMouseLeave,mousedown:t.onMouseDown,mouseup:t.onMouseUp}},[t.selected?i("div",{staticClass:"vuoz-checkbox__content is-rounded",class:t.getClasses("inner")}):t._e()])},gn=[],vn=function(t){f(i,t);var e=b(i);function i(){var t;return c(this,i),t=e.apply(this,arguments),t.hovered=!1,t.selected=!1,t.disable=!1,t}return h(i,[{key:"mounted",value:function(){this.toggled&&(this.selected=!0)}},{key:"updated",value:function(){}},{key:"beforeDestroy",value:function(){}},{key:"onDisable",value:function(){this.disable=this.disabled}},{key:"onToggle",value:function(){this.selected=this.toggled}},{key:"getClasses",value:function(t){var e="";switch(t){case"main":e+="is-".concat(this.size),this.rounded&&(e+=" is-rounded"),e+=" has-border-".concat(this.color),!this.disable&&this.hovered&&(e+=" has-border-".concat(this.color,"-shaded")),this.disable||this.shadow&&!this.selected&&(e+=" has-shadow"),this.disable&&(e+=" is-disabled");break;case"inner":e+="has-background-".concat(this.toggle," ");break}return e}},{key:"onMouseEnter",value:function(){this.hovered=!0}},{key:"onMouseLeave",value:function(){this.hovered=!1}},{key:"onMouseDown",value:function(t){t.preventDefault(),t.stopPropagation(),this.disable||("toggle"===this.type?this.selected=!this.selected:this.selected=!0,this.$emit("click",this.selected))}},{key:"onMouseUp",value:function(t){t.preventDefault(),t.stopPropagation(),"toggle"===this.type||this.disable||(this.selected=!1,this.$emit("click",this.selected))}},{key:"push",value:function(t){this.selected=t}}]),i}(_.a);w([V({type:Boolean,default:!1})],vn.prototype,"disabled",void 0),w([V({type:String,default:"push"})],vn.prototype,"type",void 0),w([V({type:String,default:"normal"})],vn.prototype,"size",void 0),w([V({type:Boolean,default:!1})],vn.prototype,"rounded",void 0),w([V({type:String,default:"medium-grey"})],vn.prototype,"color",void 0),w([V({type:String,default:"danger"})],vn.prototype,"toggle",void 0),w([V({type:Boolean,default:!1})],vn.prototype,"toggled",void 0),w([V({type:Boolean,default:!1})],vn.prototype,"shadow",void 0),w([G("disabled",{immediate:!0})],vn.prototype,"onDisable",null),w([G("toggled",{immediate:!0})],vn.prototype,"onToggle",null),vn=w([Y({name:"VuozCheckbox",components:{VuozLoadingIcon:an}})],vn);var mn=vn,yn=mn,bn=on(yn,pn,gn,!1,null,null,null),wn=bn.exports,xn=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"vuoz-input",class:t.getClasses("container")+" "+(t.isDragging?" is-unselectable":""),staticStyle:{height:"auto","white-space":"nowrap"}},[""===t.label.trim()||"left"!==t.labelPosition&&"top"!==t.labelPosition?t._e():i("div",{staticClass:"vuoz-input__label is-flex align-center",class:t.getClasses("label")},[t._v(t._s(t.label))]),i("div",{ref:"main",staticClass:"vuoz-input__main",class:t.getClasses("main")},[!0===t.required?i("div",{staticClass:"required-placeholder"}):t._e(),"checkbox"===t.getInputType()?i("input",{directives:[{name:"model",rawName:"v-model",value:t.value,expression:"value"}],ref:"input",staticClass:"has-text-regular",class:t.getClasses("input"),style:"width: "+t.width+";",attrs:{placeholder:t.placeholder,disabled:t.disabled,type:"checkbox"},domProps:{checked:Array.isArray(t.value)?t._i(t.value,null)>-1:t.value},on:{input:t.onInput,change:function(e){var i=t.value,n=e.target,r=!!n.checked;if(Array.isArray(i)){var o=null,s=t._i(i,o);n.checked?s<0&&(t.value=i.concat([o])):s>-1&&(t.value=i.slice(0,s).concat(i.slice(s+1)))}else t.value=r}}}):"radio"===t.getInputType()?i("input",{directives:[{name:"model",rawName:"v-model",value:t.value,expression:"value"}],ref:"input",staticClass:"has-text-regular",class:t.getClasses("input"),style:"width: "+t.width+";",attrs:{placeholder:t.placeholder,disabled:t.disabled,type:"radio"},domProps:{checked:t._q(t.value,null)},on:{input:t.onInput,change:function(e){t.value=null}}}):i("input",{directives:[{name:"model",rawName:"v-model",value:t.value,expression:"value"}],ref:"input",staticClass:"has-text-regular",class:t.getClasses("input"),style:"width: "+t.width+";",attrs:{placeholder:t.placeholder,disabled:t.disabled,type:t.getInputType()},domProps:{value:t.value},on:{input:[function(e){e.target.composing||(t.value=e.target.value)},t.onInput]}}),""!==t.icon.trim()&&!t.isNumber()||"password"===t.type?["password"!==t.type?i("span",{staticClass:"material-icons is-unselectable"},[t._v(t._s(t.icon))]):t._e(),"password"===t.type?i("span",{staticClass:"material-icons is-unselectable",on:{click:t.togglePasswordVisibility}},[t._v(t._s(!1===t.passwordVisibility?"visibility":"visibility_off"))]):t._e()]:t._e(),t.isNumber()?[i("div",{staticClass:"vuoz-input__number-stepper"},[i("div",{staticClass:"material-icons is-unselectable up-arrow"},[t._v("arrow_drop_down")]),i("div",{staticClass:"material-icons is-unselectable down-arrow"},[t._v("arrow_drop_down")]),i("span",{staticClass:"material-icons is-unselectable",staticStyle:{visibility:"hidden"}},[t._v("search")]),t.isNumber()?[i("div",{staticClass:"up-actuator",on:{mousedown:function(e){return t.onMouseDown("up",e)}}}),i("div",{staticClass:"down-actuator",on:{mousedown:function(e){return t.onMouseDown("down",e)}}})]:t._e()],2)]:t._e()],2),""===t.label.trim()||"right"!==t.labelPosition&&"bottom"!==t.labelPosition?t._e():i("div",{staticClass:"vuoz-input__label is-unselectable",class:t.getClasses("label")},[t._v(t._s(t.label))])])},_n=[],Sn=(i("498a"),i("99af"),i("5319"),i("ac1f"),i("b680"),function(t){f(i,t);var e=b(i);function i(){var t;return c(this,i),t=e.apply(this,arguments),t.numDirection="up",t.maxDelta=6,t.isDragging=!1,t.pageY=0,t.passwordVisibility=!1,t.passwordPattern=/^(?=.*?[A-Z])(?=.*?[a-z])(?=.*?[0-9])(?=.*?[#?!@$%^&*-]).{8,}$/,t.value="",t.valid=!1,t}return h(i,[{key:"onTypeChange",value:function(){var t=this;this.$nextTick((function(){t.setFormat()}))}},{key:"onInitialChange",value:function(){var t=this;this.$nextTick((function(){t.setFormat()}))}},{key:"getInputType",value:function(){switch(this.type){case"text":case"integer":case"float":return"text";case"email":case"password":return this.type}}},{key:"setFormat",value:function(){this.value=this.initial,this.isNumber()&&(isNaN(this.value)||""===this.value.trim())?this.value="0":""===this.value.trim()&&(this.value="")}},{key:"isNumber",value:function(){return"integer"===this.type||"uinteger"===this.type||"float"===this.type}},{key:"getClasses",value:function(t){var e="";switch(t){case"container":switch(e+="is-".concat(this.size," "),this.labelPosition){case"right":case"left":e+="is-inline-flex align-center ";break;case"bottom":case"top":e+="is-inline-flex-column justify-center ";break}break;case"label":var i="left"===this.labelPosition?"right":"right"===this.labelPosition?"left":"top"===this.labelPosition?"bottom":"top";switch(this.size){case"tiny":e+="has-margin-".concat(i,"-s "),e+="bottom"===this.labelPosition||"top"===this.labelPosition?"has-margin-left-s ":"is-flex align-center ";break;case"small":e+="has-margin-".concat(i,"-s "),e+="bottom"===this.labelPosition||"top"===this.labelPosition?"has-margin-left-s ":"is-flex align-center ";break;case"normal":case"large":e+="has-margin-".concat(i,"-sm "),e+="bottom"===this.labelPosition||"top"===this.labelPosition?"has-margin-left-sm ":"is-flex align-center ";break}break;case"main":e+="is-".concat(this.size," has-background-").concat(this.color," has-border-").concat(this.color,"-shaded "),e+=this.border?"has-border-".concat(this.color,"-shaded "):"has-border-none ",this.rounded&&(e+="is-rounded "),this.uppercase&&(e+="is-uppercase "),this.shadow&&(e+="has-shadow "),this.disabled&&(e+="is-disabled ");break;case"input":this.uppercase&&(e+="is-uppercase "),this.smallcaps&&(e+="is-small-caps ");break}return e}},{key:"onInput",value:function(t){var e=this.value,i=this.value;switch(this.type){case"email":console.warn("TODO: validate email"),e=e.replace(/\s+/g,"");break;case"password":console.warn("TODO: validate password"),e=e.replace(/\s+/g,""),this.valid=this.passwordPattern.test(e);break;case"integer":var n;""!==e.trim()&&"-"!==e.trim()&&null!==t.data||(e="0");var r=null===(n=t.data)||void 0===n?void 0:n.charCodeAt(0),o="",s=parseInt(e);45!==r&&109!==r&&149!==r||0!==s||(o="-"),i="".concat(o).concat(s);break;case"uinteger":var a=parseInt(e);i=a>=0?"".concat(parseInt(e)):"0";break;case"float":console.warn("TODO: float behavior"),console.log(e),i="".concat(parseFloat(e));break}this.value=i,this.$emit("change",{type:this.type,value:this.value,valid:this.valid})}},{key:"onMouseDown",value:function(t,e){this.numDirection=t,this.pageY=e.pageY,this.onMouseUp=this.onMouseUp.bind(this),this.onDrag=this.onDrag.bind(this),document.addEventListener("mouseup",this.onMouseUp),document.addEventListener("mousemove",this.onDrag)}},{key:"onDrag",value:function(t){if(!this.isDragging){var e=Math.abs(Math.abs(t.pageY)-this.pageY);e>=this.maxDelta&&(this.isDragging=!0,document.documentElement.classList.add("is-unselectable"))}if(this.isDragging){var i=this.pageY-t.pageY;this.pageY=t.pageY;var n=this.value;switch(this.type){case"integer":var r=parseInt(n)+i;this.value="".concat(r);break;case"uinteger":var o=parseInt(n)+i;o>=0&&(this.value="".concat(o));break;case"float":var s=parseFloat(n);s+=.1*i,this.value="".concat(s.toFixed(2));break}this.$emit("change",{type:this.type,value:this.value,valid:!0})}}},{key:"onMouseUp",value:function(t){document.removeEventListener("mousemove",this.onDrag),document.removeEventListener("mouseup",this.onMouseUp);var e=this.isDragging;if(this.isDragging=!1,document.documentElement.classList.remove("is-unselectable"),!e){switch(this.numDirection){case"up":switch(this.type){case"integer":case"uinteger":var i=parseInt(this.value);i++,this.value="".concat(i);break;case"float":var n="".concat(parseFloat(this.value)+1);this.value=n;break}break;case"down":switch(this.type){case"integer":var r=parseInt(this.value);r--,this.value="".concat(r);break;case"uinteger":var o=parseInt(this.value);o>0&&(o--,this.value="".concat(o));break;case"float":var s="".concat(parseFloat(this.value)-1);this.value=s;break}break}this.$emit("change",{type:this.type,value:this.value,valid:!0})}}},{key:"togglePasswordVisibility",value:function(){this.passwordVisibility=!this.passwordVisibility;var t=this.$refs.input;this.passwordVisibility?t.type="text":t.type="password"}}]),i}(_.a));w([V({type:String,default:"text"})],Sn.prototype,"type",void 0),w([V({type:String,default:""})],Sn.prototype,"label",void 0),w([V({type:String,default:"top"})],Sn.prototype,"labelPosition",void 0),w([V({type:String,default:""})],Sn.prototype,"placeholder",void 0),w([V({type:Boolean,default:!1})],Sn.prototype,"required",void 0),w([V({type:String,default:"small"})],Sn.prototype,"size",void 0),w([V({type:String,default:"auto"})],Sn.prototype,"width",void 0),w([V({type:String,default:""})],Sn.prototype,"initial",void 0),w([V({type:Boolean,default:!1})],Sn.prototype,"disabled",void 0),w([V({type:Boolean,default:!1})],Sn.prototype,"loading",void 0),w([V({type:String,default:"regular"})],Sn.prototype,"weight",void 0),w([V({type:Boolean,default:!1})],Sn.prototype,"rounded",void 0),w([V({type:Boolean,default:!0})],Sn.prototype,"border",void 0),w([V({type:Boolean,default:!1})],Sn.prototype,"uppercase",void 0),w([V({type:Boolean,default:!1})],Sn.prototype,"smallcaps",void 0),w([V({type:String,default:"medium-grey"})],Sn.prototype,"color",void 0),w([V({type:Boolean,default:!1})],Sn.prototype,"shadow",void 0),w([V({type:String,default:""})],Sn.prototype,"icon",void 0),w([G("type",{immediate:!0})],Sn.prototype,"onTypeChange",null),w([G("initial",{immediate:!0})],Sn.prototype,"onInitialChange",null),Sn=w([Y({name:"VuozInput"})],Sn);var Cn=Sn,Tn=Cn,On=on(Tn,xn,_n,!1,null,null,null),kn=On.exports,En=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"is-flex-column has-padding-sm has-background-dark-grey"},[i("div",{on:{mousedown:t.onMouseDown}},[t._v("Bla")])])},An=[],Pn=function(t){f(i,t);var e=b(i);function i(){return c(this,i),e.apply(this,arguments)}return h(i,[{key:"onMouseDown",value:function(t){t.stopPropagation(),this.$emit("select")}}]),i}(_.a);w([V({type:Boolean,default:!1})],Pn.prototype,"disabled",void 0),w([V({type:Boolean,default:!1})],Pn.prototype,"loading",void 0),w([V({type:String,default:"push"})],Pn.prototype,"type",void 0),w([V({type:String,default:"normal"})],Pn.prototype,"size",void 0),w([V({type:String,default:"free"})],Pn.prototype,"shape",void 0),w([V({type:String,default:"regular"})],Pn.prototype,"weight",void 0),w([V({type:Boolean,default:!1})],Pn.prototype,"rounded",void 0),w([V({type:Boolean,default:!0})],Pn.prototype,"border",void 0),w([V({type:Boolean,default:!1})],Pn.prototype,"uppercase",void 0),w([V({type:Boolean,default:!1})],Pn.prototype,"smallcaps",void 0),w([V({type:String,default:"medium-grey"})],Pn.prototype,"color",void 0),w([V({type:String,default:"danger"})],Pn.prototype,"toggle",void 0),w([V({type:Boolean,default:!1})],Pn.prototype,"toggled",void 0),w([V({type:Boolean,default:!1})],Pn.prototype,"shadow",void 0),w([V({type:String,default:"close"})],Pn.prototype,"icon",void 0),Pn=w([Y({name:"VuozMenu"})],Pn);var Dn=Pn,Mn=Dn,jn=on(Mn,En,An,!1,null,null,null),Rn=jn.exports,In=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{ref:"container",style:t.containerStyle},[i("img",{style:t.imageStyle,attrs:{src:t.path}})])},zn=[];i("e6cf"),i("d3b7");function Ln(t,e,i,n,r,o,s){try{var a=t[o](s),c=a.value}catch(l){return void i(l)}a.done?e(c):Promise.resolve(c).then(n,r)}function Fn(t){return function(){var e=this,i=arguments;return new Promise((function(n,r){var o=t.apply(e,i);function s(t){Ln(o,n,r,s,a,"next",t)}function a(t){Ln(o,n,r,s,a,"throw",t)}s(void 0)}))}}i("96cf");var Bn=function(t){f(i,t);var e=b(i);function i(){var t;return c(this,i),t=e.apply(this,arguments),t.containerStyle="",t.imageStyle="",t}return h(i,[{key:"onWidthChanged",value:function(){this.setStyles()}},{key:"onHeightChanged",value:function(){this.setStyles()}},{key:"onFitChanged",value:function(){this.setStyles()}},{key:"created",value:function(){var t=Fn(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:this.setStyles();case 1:case"end":return t.stop()}}),t,this)})));function e(){return t.apply(this,arguments)}return e}()},{key:"setStyles",value:function(){this.setContainerStyle(),this.setImageStyle()}},{key:"setContainerStyle",value:function(){var t=function(t){return"width: ".concat(t,"; min-width: ").concat(t,"; max-width: ").concat(t,"; overflow: hidden; ")},e=function(t){return"height: ".concat(t,"; min-height: ").concat(t,"; max-height: ").concat(t,"; overflow: hidden; ")},i="";this.width&&this.width.trim().length>0&&(i+=t(this.width),this.height&&0!==this.height.trim().length||(i+=t("100%"))),this.height&&this.height.trim().length>0&&(i+=e(this.height),this.width&&0!==this.width.trim().length||(i+=e("100%"))),this.containerStyle=i}},{key:"setImageStyle",value:function(){var t="width:100%; height:100%; object-fit: ".concat(this.fit,";");this.imageStyle=t}}]),i}(_.a);w([V({type:String,required:!0})],Bn.prototype,"path",void 0),w([V({type:String,default:""})],Bn.prototype,"width",void 0),w([V({type:String,default:""})],Bn.prototype,"height",void 0),w([V({type:String,default:"contain"})],Bn.prototype,"fit",void 0),w([G("width")],Bn.prototype,"onWidthChanged",null),w([G("height")],Bn.prototype,"onHeightChanged",null),w([G("fit")],Bn.prototype,"onFitChanged",null),Bn=w([Y({name:"VuozImage"})],Bn);var Nn=Bn,Wn=Nn,Hn=on(Wn,In,zn,!1,null,null,null),Yn=Hn.exports,Xn=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"vuoz-cropper"},[i("cropper",{ref:"cropper",class:t.cropperClass,attrs:{src:t.img,"background-class":"vuoz-cropper__background","area-class":"vuoz-cropper__area","auto-zoom":!!(t.options&&t.options.cropper&&t.options.cropper.autoZoom)&&t.options.cropper.autoZoom,canvas:!(t.options&&t.options.cropper&&t.options.cropper.canvas)||t.options.cropper.canvas,"check-orientation":!!(t.options&&t.options.cropper&&t.options.cropper.checkOrientation)&&t.options.cropper.checkOrientation,"image-restriction":t.options&&t.options.cropper&&t.options.cropper.imageRestriction?t.options.cropper.imageRestriction:"fit-area","min-width":t.options&&t.options.cropper&&t.options.cropper.minWidth?t.options.cropper.minWidth:void 0,"max-width":t.options&&t.options.cropper&&t.options.cropper.maxWidth?t.options.cropper.maxWidth:void 0,"min-height":t.options&&t.options.cropper&&t.options.cropper.minHeight?t.options.cropper.minHeight:void 0,"max-height":t.options&&t.options.cropper&&t.options.cropper.maxHeight?t.options.cropper.maxHeight:void 0,priority:t.options&&t.options.cropper&&t.options.cropper.priority?t.options.cropper.priority:"coordinates","stencil-size":t.options&&t.options.cropper&&t.options.cropper.stencilSize?t.options.cropper.stencilSize:void 0,"default-position":t.options&&t.options.cropper&&t.options.cropper.defaultPosition?t.options.cropper.defaultPosition:void 0,"default-size":t.options&&t.options.cropper&&t.options.cropper.defaultSize?t.options.cropper.defaultSize:void 0,"default-boundaries":t.options&&t.options.cropper&&t.options.cropper.defaultBoundaries?t.options.cropper.defaultBoundaries:void 0,"default-visible-area":t.options&&t.options.cropper&&t.options.cropper.defaultVisibleArea?t.options.cropper.defaultVisibleArea:void 0,"stencil-component":t.stencilComponent,"stencil-props":t.options&&t.options.stencil?Object.assign({},t.options.stencil,{handlers:t.handlers,handlersClasses:t.handlersClasses,lines:t.lines}):{}},on:{change:t.onChange}}),t.showToolbar?i("vuoz-toolbar",{staticStyle:{position:"absolute",bottom:"0px",left:"0px",width:"100%"},attrs:{items:t.toolbarItems,type:"fixed",position:"bottom",size:"small",color:"dark-grey",border:"medium-grey",shadow:!0}}):t._e()],1)},Un=[],Vn=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{ref:"main",staticClass:"vuoz-toolbar",class:t.getClasses("main")},["contextual"===t.type?i("div",{ref:"content",staticClass:"vuoz-toolbar__content-contextual"},t._l(t.buttons,(function(e){return"separator"!==e.role&&"spacer"!==e.role?i("div",{staticClass:"is-flex align-center has-padding-s"},[i("vuoz-button",{ref:e.name,refInFor:!0,attrs:{size:t.size,shape:e.shape||"square",color:e.color,icon:e.icon,rounded:e.rounded,border:e.border,type:e.type,toggle:e.toggle,toggled:e.toggled,disabled:!0===t.disabledFlag||(e.disabled||!1),loading:e.loading,menuComponent:e.menu},on:{click:function(i){return t.onClick(i,e.name)},menu:function(i){return t.onMenuSelect(i,e.name)}}})],1):t._e()})),0):i("div",{ref:"content",staticClass:"vuoz-toolbar__content-fixed"},[t._l(t.items,(function(e,n){return Array.isArray(t.items)?[Array.isArray(e)?i("div",{staticClass:"line",class:t.getClasses("line",n,t.items.length)},t._l(e,(function(n){return i("div",{staticClass:"align-center has-padding-s",class:{spacer:"spacer"===n.role,separator:"separator"===e.role}},["separator"===n.role?i("div",{class:"has-border-left-"+t.border,staticStyle:{width:"2px",height:"100%"}}):t._e(),"separator"!==n.role&&"spacer"!==n.role?i("vuoz-button",{ref:n.name,refInFor:!0,attrs:{size:t.size,shape:n.shape||"square",color:n.color,icon:n.icon,rounded:n.rounded,border:n.border,type:n.type,toggle:n.toggle,toggled:n.toggled,disabled:!0===t.disabledFlag||(n.disabled||!1),loading:n.loading,menuComponent:n.menu},on:{click:function(e){return t.onClick(e,n.name)},menu:function(e){return t.onMenuSelect(e,n.name)}}}):t._e()],1)})),0):i("div",{staticClass:"align-center has-padding-s",class:{spacer:"spacer"===e.role,separator:"separator"===e.role}},["separator"===e.role?i("div",{class:"has-border-left-"+t.border,staticStyle:{width:"2px",height:"100%"}}):t._e(),"separator"!==e.role&&"spacer"!==e.role?i("vuoz-button",{ref:e.name,refInFor:!0,attrs:{size:t.size,shape:e.shape||"square",color:e.color,icon:e.icon,rounded:e.rounded,border:e.border,type:e.type,toggle:e.toggle,toggled:e.toggled,disabled:!0===t.disabledFlag||(e.disabled||!1),loading:e.loading,menuComponent:e.menu},on:{click:function(i){return t.onClick(i,e.name)},menu:function(i){return t.onMenuSelect(i,e.name)}}}):t._e()],1)]:t._e()})),t._l(t.items.buttons,(function(e,n){return Array.isArray(t.items)?t._e():[Array.isArray(e)?i("div",{staticClass:"line",class:t.getClasses("line",n,t.items.buttons.length)},t._l(e,(function(n){return i("div",{staticClass:"align-center has-padding-s",class:{spacer:"spacer"===n.role,separator:"separator"===e.role}},["separator"===n.role?i("div",{class:"has-border-left-"+t.border,staticStyle:{width:"2px",height:"100%"}}):t._e(),"separator"!==n.role&&"spacer"!==n.role?i("vuoz-button",{ref:n.name,refInFor:!0,attrs:{size:t.size,shape:n.shape||"square",color:n.color,icon:n.icon,rounded:n.rounded,border:n.border,type:n.type,toggle:n.toggle,toggled:n.toggled,disabled:!0===t.disabledFlag||(n.disabled||!1),loading:n.loading,menuComponent:n.menu},on:{click:function(e){return t.onClick(e,n.name)},menu:function(e){return t.onMenuSelect(e,n.name)}}}):t._e()],1)})),0):i("div",{staticClass:"align-center has-padding-s",class:{spacer:"spacer"===e.role,separator:"separator"===e.role}},["separator"===e.role?i("div",{class:"has-border-left-"+t.border,staticStyle:{width:"2px",height:"100%"}}):t._e(),"separator"!==e.role&&"spacer"!==e.role?i("vuoz-button",{ref:e.name,refInFor:!0,attrs:{size:t.size,shape:e.shape||"square",color:e.color,icon:e.icon,rounded:e.rounded,border:e.border,type:e.type,toggle:e.toggle,toggled:e.toggled,disabled:!0===t.disabledFlag||(e.disabled||!1),loading:e.loading,menuComponent:e.menu},on:{click:function(i){return t.onClick(i,e.name)},menu:function(i){return t.onMenuSelect(i,e.name)}}}):t._e()],1)]}))],2)])},Gn=[];i("b64b"),i("a4d3"),i("4de4"),i("e439"),i("dbb4");function $n(t,e,i){return e in t?Object.defineProperty(t,e,{value:i,enumerable:!0,configurable:!0,writable:!0}):t[e]=i,t}function qn(t,e){var i=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),i.push.apply(i,n)}return i}function Kn(t){for(var e=1;e<arguments.length;e++){var i=null!=arguments[e]?arguments[e]:{};e%2?qn(Object(i),!0).forEach((function(e){$n(t,e,i[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(i)):qn(Object(i)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(i,e))}))}return t}i("caad"),i("2532"),i("7db0"),i("a434");var Zn=function(t){f(i,t);var e=b(i);function i(){var t;return c(this,i),t=e.apply(this,arguments),t.buttons=[],t.objectType="array:uni",t.disabledFlag=!1,t}return h(i,[{key:"onTypeChanged",value:function(){this.onItemsChanged(),this.computeType();var t=this.objectType.includes("array")?this.items:this.items.buttons;this.computeGrid(t),this.computeEdges()}},{key:"onItemsChanged",value:function(){var t=this;if(Array.isArray(this.items))this.items.length>0&&Array.isArray(this.items[0])?(this.objectType="array:multi",this.buttons=[],this.items.forEach((function(e){e.forEach((function(e){t.buttons.push(e)}))})),"contextual"===this.type&&this.computeGrid(this.items)):(this.objectType="array:uni",this.buttons=this.items,"contextual"===this.type&&this.computeGrid(this.items));else{this.items.buttons.length>0&&Array.isArray(this.items.buttons[0])?(this.objectType="object:multi",this.buttons=[],this.items.buttons.forEach((function(e){e.forEach((function(e){t.buttons.push(e)}))})),"contextual"===this.type&&this.computeGrid(this.items.buttons)):(this.objectType="object:uni",this.buttons=this.items.buttons,"contextual"===this.type&&this.computeGrid(this.items.buttons));var e=this.items.color||void 0,i=this.items.rounded||void 0,n=this.items.border||void 0;(e||i)&&this.buttons.forEach((function(t){e&&!t.color&&(t.color=e),i&&"undefined"===typeof t.rounded&&(t.rounded=i),n&&"undefined"===typeof t.border&&(t.border=n)}))}}},{key:"onPositionChanged",value:function(){this.computeType();var t=this.objectType.includes("array")?this.items:this.items.buttons;"contextual"===this.type&&(this.computeGrid(t),this.computeEdges())}},{key:"onVerticalChanged",value:function(){if("contextual"===this.type){var t=this.objectType.includes("array")?this.items:this.items.buttons;this.computeGrid(t),this.computeEdges()}}},{key:"onSpaceChanged",value:function(){var t=this;"contextual"===this.type&&this.$nextTick((function(){var e=t.$refs.main;e.style.setProperty("--vuoz-toolbar__space",t.space)}))}},{key:"onDisabledChange",value:function(){var t=this;this.$nextTick((function(){!1!==t.disabled?t.disable():t.enable()}))}},{key:"computeType",value:function(){var t=this;switch(this.type){case"contextual":this.$nextTick((function(){var e=t.$refs.main;e.style.setProperty("--vuoz-toolbar__position","absolute"),e.style.setProperty("--vuoz-toolbar__width","auto"),e.style.setProperty("--vuoz-toolbar__height","auto"),e.style.setProperty("--vuoz-toolbar__space","".concat(t.space))}));break;case"fixed":this.$nextTick((function(){var e=t.$refs.main;e.style.setProperty("--vuoz-toolbar__position","relative"),e.style.setProperty("--vuoz-toolbar__space","0"),t.position.includes("top")||t.position.includes("bottom")?(e.style.setProperty("--vuoz-toolbar__width","100%"),e.style.setProperty("--vuoz-toolbar__height","auto"),t.objectType.includes("uni")?(e.style.setProperty("--vuoz-toolbar__fixed-flex","row"),e.style.setProperty("--vuoz-toolbar__fixed-line-flex","column")):(e.style.setProperty("--vuoz-toolbar__fixed-flex","column"),e.style.setProperty("--vuoz-toolbar__fixed-line-flex","row"))):(e.style.setProperty("--vuoz-toolbar__width","auto"),e.style.setProperty("--vuoz-toolbar__height","100%"),t.objectType.includes("uni")?(e.style.setProperty("--vuoz-toolbar__fixed-flex","column"),e.style.setProperty("--vuoz-toolbar__fixed-line-flex","row")):(e.style.setProperty("--vuoz-toolbar__fixed-flex","row"),e.style.setProperty("--vuoz-toolbar__fixed-line-flex","column")))}));break}}},{key:"computeGrid",value:function(t){var e=this,i=1,n=1;if(this.objectType.includes("multi"))if("contextual"===this.type||this.position.includes("top")||this.position.includes("bottom"))i=t.length,t.forEach((function(t){var e=t.filter((function(t){return"spacer"!==t.role&&"separator"!==t.role}));n=Math.max(n,e.length)}));else{i=1;var r=t.filter((function(t){return"spacer"!==t.role&&"separator"!==t.role}));n=r.length}else{var o=t.filter((function(t){return"spacer"!==t.role&&"separator"!==t.role}));n=o.length}this.$nextTick((function(){var t=e.$refs.content;e.vertical&&"contextual"===e.type&&(i=[n,n=i][0]),t.style.setProperty("--vuoz-toolbar__rows","".concat(i)),t.style.setProperty("--vuoz-toolbar__columns","".concat(n))}))}},{key:"computeEdges",value:function(){var t=this;"top"!==this.position&&"bottom"!==this.position||this.$nextTick((function(){var e=t.$refs.main,i=e.parentElement;if(i){var n=e.getBoundingClientRect(),r=i.getBoundingClientRect(),o=(r.width-n.width)/2;e.style.setProperty("--vuoz-toolbar__computed","".concat(o,"px"))}})),"left"!==this.position&&"right"!==this.position||this.$nextTick((function(){var e=t.$refs.main,i=e.parentElement;if(i){var n=e.getBoundingClientRect(),r=i.getBoundingClientRect(),o=(r.height-n.height)/2;e.style.setProperty("--vuoz-toolbar__computed","".concat(o,"px"))}}))}},{key:"getClasses",value:function(t,e,i){var n="";switch(t){case"main":if(n+="has-background-".concat(this.color," "),"none"!==this.border)if("contextual"===this.type)n+=this.border?"has-border-".concat(this.border," "):" ";else switch(this.position){case"top":case"top-left":case"top-right":n+="has-border-bottom-".concat(this.border," "),n+=this.shadow?n+="has-shadow-bottom ":"";break;case"left":n+="has-border-right-".concat(this.border," "),n+=this.shadow?n+="has-shadow-right ":"";break;case"right":n+="has-border-left-".concat(this.border," "),n+=this.shadow?n+="has-shadow-left ":"";break;case"bottom":case"bottom-left":case"bottom-right":n+="has-border-top-".concat(this.border," "),n+=this.shadow?n+="has-shadow-top ":"";break}if(this.computeEdges(),"contextual"===this.type&&(n+=this.shadow?n+="has-shadow ":""),n+="is-".concat(this.position," "),"contextual"===this.type&&this.rounded)switch(this.position){case"top":case"left":case"bottom":case"right":n+="is-rounded ";break;case"top-left":n+="is-rounded-bottom-left is-rounded-bottom-right is-rounded-top-right ";break;case"bottom-left":n+="is-rounded-top-left is-rounded-bottom-right is-rounded-top-right ";break;case"bottom-right":n+="is-rounded-bottom-left is-rounded-top-left is-rounded-top-right ";break;case"top-right":n+="is-rounded-bottom-left is-rounded-bottom-right is-rounded-top-left ";break}break;case"line":if("none"!==this.border)switch(this.position){case"top":case"top-left":case"top-right":void 0!==e&&void 0!==i&&e<i-1&&(n+="has-border-bottom-".concat(this.border," "));break;case"left":case"right":void 0!==e&&void 0!==i&&e<i-1&&(n+="has-border-right-".concat(this.border," "));break;case"bottom":case"bottom-left":case"bottom-right":void 0!==e&&void 0!==i&&e<i-1&&(n+="has-border-bottom-".concat(this.border," "));break}break}return n}},{key:"onClick",value:function(t,e){if(!this.disabled){var i=this.buttons.find((function(t){return t.name===e})),n=this.$refs[i.name][0];i.onUp&&!1===t&&i.onUp.call(this,i.target||null,n),i.onDown&&!0===t&&i.onDown.call(this,i.target||null,n),this.$emit("click",e,t)}}},{key:"onMenuSelect",value:function(t){this.$emit("menu",t)}},{key:"disable",value:function(t){if(t){var e=this.buttons.find((function(e){return e.name===t}));if(e){var i=Kn({},e);i.disabled=!0;var n=this.buttons.indexOf(e);this.buttons.splice(n,1,i)}}else{this.disabledFlag=!0;var r=this.$refs.main;r.style.setProperty("--vuoz-toolbar__opacity","0.75"),this.$emit("disable")}}},{key:"select",value:function(t){if(t){var e=this.$refs[t];e&&e[0].click(!0)}}},{key:"unselect",value:function(t){if(t){var e=this.$refs[t];e&&e[0].unselect()}}},{key:"enable",value:function(){this.disabledFlag=!1;var t=this.$refs.main;t.style.setProperty("--vuoz-toolbar__opacity","1"),this.$emit("enable")}},{key:"disableAllBut",value:function(t){var e=this,i=this.buttons.filter((function(e){return e.name!==t}));i.forEach((function(t){var i=e.buttons.indexOf(t),n=Kn({},t);n.disabled=!0,e.buttons.splice(i,1,n)}))}},{key:"resetState",value:function(){var t=this;this.buttons.forEach((function(e){var i=t.buttons.indexOf(e),n=Kn({},e);n.disabled=!1,t.buttons.splice(i,1,n)}))}}]),i}(_.a);w([V({type:[Array,Object],required:!0})],Zn.prototype,"items",void 0),w([V({type:String,default:"contextual"})],Zn.prototype,"type",void 0),w([V({type:String,default:"always"})],Zn.prototype,"show",void 0),w([V({type:Boolean,default:!1})],Zn.prototype,"vertical",void 0),w([V({type:Boolean,default:!1})],Zn.prototype,"disabled",void 0),w([V({type:Boolean,default:!0})],Zn.prototype,"rounded",void 0),w([V({type:String,default:"dark-grey"})],Zn.prototype,"color",void 0),w([V({type:String,default:"none"})],Zn.prototype,"border",void 0),w([V({type:String,default:"normal"})],Zn.prototype,"size",void 0),w([V({type:String,default:"0.5rem"})],Zn.prototype,"space",void 0),w([V({type:Boolean,default:!0})],Zn.prototype,"shadow",void 0),w([V({type:String,default:"top-right"})],Zn.prototype,"position",void 0),w([G("type",{immediate:!0})],Zn.prototype,"onTypeChanged",null),w([G("items",{immediate:!0})],Zn.prototype,"onItemsChanged",null),w([G("position",{immediate:!0})],Zn.prototype,"onPositionChanged",null),w([G("vertical",{immediate:!0})],Zn.prototype,"onVerticalChanged",null),w([G("space",{immediate:!0})],Zn.prototype,"onSpaceChanged",null),w([G("disabled",{immediate:!0})],Zn.prototype,"onDisabledChange",null),Zn=w([Y({name:"VuozToolbar",components:{VuozButton:dn}})],Zn);var Jn=Zn,Qn=Jn,tr=on(Qn,Vn,Gn,!1,null,null,null),er=tr.exports;function ir(t,e,i){return e in t?Object.defineProperty(t,e,{value:i,enumerable:!0,configurable:!0,writable:!0}):t[e]=i,t}function nr(t,e){var i=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),i.push.apply(i,n)}return i}function rr(t){for(var e=1;e<arguments.length;e++){var i=null!=arguments[e]?arguments[e]:{};e%2?nr(Object(i),!0).forEach((function(e){ir(t,e,i[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(i)):nr(Object(i)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(i,e))}))}return t}function or(t,e){if(null==t)return{};var i,n,r=function(t,e){if(null==t)return{};var i,n,r={},o=Object.keys(t);for(n=0;n<o.length;n++)i=o[n],e.indexOf(i)>=0||(r[i]=t[i]);return r}(t,e);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(t);for(n=0;n<o.length;n++)i=o[n],e.indexOf(i)>=0||Object.prototype.propertyIsEnumerable.call(t,i)&&(r[i]=t[i])}return r}function sr(t){return function(t){if(Array.isArray(t))return ar(t)}(t)||function(t){if("undefined"!=typeof Symbol&&Symbol.iterator in Object(t))return Array.from(t)}(t)||function(t,e){if(t){if("string"==typeof t)return ar(t,e);var i=Object.prototype.toString.call(t).slice(8,-1);return"Object"===i&&t.constructor&&(i=t.constructor.name),"Map"===i||"Set"===i?Array.from(t):"Arguments"===i||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(i)?ar(t,e):void 0}}(t)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function ar(t,e){(null==e||e>t.length)&&(e=t.length);for(var i=0,n=new Array(e);i<e;i++)n[i]=t[i];return n}var cr,lr,hr=(function(t){
/*!
  Copyright (c) 2017 Jed Watson.
  Licensed under the MIT License (MIT), see
  http://jedwatson.github.io/classnames
*/
!function(){var e={}.hasOwnProperty;function i(){for(var t=[],n=0;n<arguments.length;n++){var r=arguments[n];if(r){var o=typeof r;if("string"===o||"number"===o)t.push(r);else if(Array.isArray(r)&&r.length){var s=i.apply(null,r);s&&t.push(s)}else if("object"===o)for(var a in r)e.call(r,a)&&r[a]&&t.push(a)}}return t.join(" ")}t.exports?(i.default=i,t.exports=i):window.classNames=i}()}(lr={path:cr,exports:{},require:function(t,e){return function(){throw new Error("Dynamic requires are not currently supported by @rollup/plugin-commonjs")}(null==e&&lr.path)}},lr.exports),lr.exports),ur=function(t){return function(e,i){if(!e)return t;var n;"string"==typeof e?n=e:i=e;var r=t;return n&&(r+="__"+n),r+(i?Object.keys(i).reduce((function(t,e){var n=i[e];return n&&(t+=" "+("boolean"==typeof n?r+"--"+e:r+"--"+e+"_"+n)),t}),""):"")}};function fr(t,e,i){var n,r,o,s,a;function c(){var l=Date.now()-s;l<e&&l>=0?n=setTimeout(c,e-l):(n=null,i||(a=t.apply(o,r),o=r=null))}null==e&&(e=100);var l=function(){o=this,r=arguments,s=Date.now();var l=i&&!n;return n||(n=setTimeout(c,e)),l&&(a=t.apply(o,r),o=r=null),a};return l.clear=function(){n&&(clearTimeout(n),n=null)},l.flush=function(){n&&(a=t.apply(o,r),o=r=null,clearTimeout(n),n=null)},l}fr.debounce=fr;var dr=fr,pr=function(){return(pr=Object.assign||function(t){for(var e,i=1,n=arguments.length;i<n;i++)for(var r in e=arguments[i])Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r]);return t}).apply(this,arguments)};
/*! *****************************************************************************
Copyright (c) Microsoft Corporation.

Permission to use, copy, modify, and/or distribute this software for any
purpose with or without fee is hereby granted.

THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH
REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY
AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,
INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM
LOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR
OTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR
PERFORMANCE OF THIS SOFTWARE.
***************************************************************************** */function gr(t,e){var i,n;return t&&e?(i=""+t+e[0].toUpperCase()+e.slice(1),n=t+"-"+e):(i=t||e,n=t||e),{name:i,classname:n}}function vr(t){return/^blob:/.test(t)}function mr(t){return vr(t)||function(t){return/^data:/.test(t)}(t)}function yr(t){return!!(t&&t.constructor&&t.call&&t.apply)}function br(t){return void 0===t}function wr(t){return"object"==typeof t&&null!==t}function xr(t,e,i){var n={};return wr(t)?(Object.keys(e).forEach((function(r){br(t[r])?n[r]=e[r]:wr(e[r])?wr(t[r])?n[r]=xr(t[r],e[r],i[r]):n[r]=t[r]?e[r]:i[r]:!0===e[r]||!1===e[r]?n[r]=Boolean(t[r]):n[r]=t[r]})),n):t?e:i}function _r(t){var e=Number(t);return Number.isNaN(e)?t:e}function Sr(t){return typeof("number"==t||function(t){return"object"==typeof t&&null!==t}(t)&&"[object Number]"==toString.call(t))&&!Tr(t)}function Cr(t){return!Number.isNaN(parseFloat(t))&&isFinite(t)}function Tr(t){return t!=t}function Or(t,e){return Math.sqrt(Math.pow(t.x-e.x,2)+Math.pow(t.y-e.y,2))}var kr=function(t,e){void 0===t&&(t={}),void 0===e&&(e={}),this.type="manipulateImage",this.move=t,this.scale=e},Er=function(t,e){void 0===e&&(e={}),this.type="resize",this.directions=t,this.params=e},Ar=function(t){this.type="move",this.directions=t},Pr=function(){function t(t,e,i,n,r){this.type="drag",this.nativeEvent=t,this.position=i,this.previousPosition=n,this.element=e,this.anchor=r}return t.prototype.shift=function(){var t=this,e=t.element,i=t.anchor,n=t.position,r=e.getBoundingClientRect(),o=r.left,s=r.top;return{left:n.left-o-i.left,top:n.top-s-i.top}},t}();function Dr(t,e,i,n,r,o,s,a,c,l){"boolean"!=typeof s&&(c=a,a=s,s=!1);const h="function"==typeof i?i.options:i;let u;if(t&&t.render&&(h.render=t.render,h.staticRenderFns=t.staticRenderFns,h._compiled=!0,r&&(h.functional=!0)),n&&(h._scopeId=n),o?(u=function(t){(t=t||this.$vnode&&this.$vnode.ssrContext||this.parent&&this.parent.$vnode&&this.parent.$vnode.ssrContext)||"undefined"==typeof __VUE_SSR_CONTEXT__||(t=__VUE_SSR_CONTEXT__),e&&e.call(this,c(t)),t&&t._registeredComponents&&t._registeredComponents.add(o)},h._ssrRegister=u):e&&(u=s?function(t){e.call(this,l(t,this.$root.$options.shadowRoot))}:function(t){e.call(this,a(t))}),u)if(h.functional){const t=h.render;h.render=function(e,i){return u.call(i),t(e,i)}}else{const t=h.beforeCreate;h.beforeCreate=t?[].concat(t,u):[u]}return i}var Mr=Dr({render:function(){var t=this,e=t.$createElement;return(t._self._c||e)("div",{ref:"draggable",class:t.classname,on:{touchstart:t.onTouchStart,mousedown:t.onMouseDown,mouseover:t.onMouseOver,mouseleave:t.onMouseLeave}},[t._t("default")],2)},staticRenderFns:[]},void 0,{name:"DraggableElement",mixins:[{beforeMount:function(){window.addEventListener("mouseup",this.onMouseUp,{passive:!1}),window.addEventListener("mousemove",this.onMouseMove,{passive:!1}),window.addEventListener("touchmove",this.onTouchMove,{passive:!1}),window.addEventListener("touchend",this.onTouchEnd,{passive:!1})},beforeDestroy:function(){window.removeEventListener("mouseup",this.onMouseUp),window.removeEventListener("mousemove",this.onMouseMove),window.removeEventListener("touchmove",this.onTouchMove),window.removeEventListener("touchend",this.onTouchEnd)},mounted:function(){if(!this.$refs.draggable)throw new Error('You should add ref "draggable" to your root element to use draggable mixin');this.touches=[],this.hovered=!1},methods:{onMouseOver:function(){this.hovered||(this.hovered=!0,this.$emit("enter"))},onMouseLeave:function(){this.hovered&&!this.touches.length&&(this.hovered=!1,this.$emit("leave"))},onTouchStart:function(t){t.cancelable&&!this.disabled&&1===t.touches.length&&(this.touches=sr(t.touches),this.hovered||(this.$emit("enter"),this.hovered=!0),t.touches.length&&this.initAnchor(this.touches.reduce((function(e,i){return{clientX:e.clientX+i.clientX/t.touches.length,clientY:e.clientY+i.clientY/t.touches.length}}),{clientX:0,clientY:0})),t.preventDefault&&t.preventDefault(),t.stopPropagation())},onTouchEnd:function(){this.processEnd()},onTouchMove:function(t){this.touches.length&&(this.processMove(t,t.touches),t.preventDefault&&t.preventDefault(),t.stopPropagation&&t.stopPropagation())},onMouseDown:function(t){if(!this.disabled&&0===t.button){var e={fake:!0,clientX:t.clientX,clientY:t.clientY};this.touches=[e],this.initAnchor(e),t.stopPropagation()}},onMouseMove:function(t){this.touches.length&&(this.processMove(t,[{fake:!0,clientX:t.clientX,clientY:t.clientY}]),t.preventDefault&&t.preventDefault())},onMouseUp:function(){this.processEnd()},initAnchor:function(t){var e=this.$refs.draggable.getBoundingClientRect(),i=e.left,n=e.right,r=e.bottom,o=e.top;this.anchor={left:t.clientX-i,top:t.clientY-o,bottom:r-t.clientY,right:n-t.clientX}},processMove:function(t,e){var i=sr(e);if(this.touches.length){if(1===this.touches.length&&1===i.length){var n=this.$refs.draggable;this.$emit("drag",new Pr(t,n,{left:i[0].clientX,top:i[0].clientY},{left:this.touches[0].clientX,top:this.touches[0].clientY},this.anchor))}this.touches=i}},processEnd:function(){this.touches.length&&this.$emit("drag-end"),this.hovered&&(this.$emit("leave"),this.hovered=!1),this.touches=[]}}}],props:{classname:{type:String}}},void 0,!1,void 0,!1,void 0,void 0,void 0),jr=ur("vue-handler-wrapper"),Rr=Dr({render:function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{class:t.classes.root},[i("DraggableElement",{class:t.classes.draggable,attrs:{disabled:t.disabled},on:{drag:function(e){return t.$emit("drag",e)},"drag-end":function(e){return t.$emit("drag-end")},leave:function(e){return t.$emit("leave")},enter:function(e){return t.$emit("enter")}}},[t._t("default")],2)],1)},staticRenderFns:[]},void 0,{name:"HandlerWrapper",components:{DraggableElement:Mr},props:{horizontalPosition:{type:String},verticalPosition:{type:String},disabled:{type:Boolean,default:!1}},computed:{classes:function(){var t;if(this.horizontalPosition||this.verticalPosition){var e,i=gr(this.horizontalPosition,this.verticalPosition);t=jr((ir(e={},i.classname,!0),ir(e,"disabled",this.disabled),e))}else t=jr({disabled:this.disabled});return{root:t,draggable:jr("draggable")}}}},void 0,!1,void 0,!1,void 0,void 0,void 0),Ir=ur("vue-line-wrapper"),zr=Dr({render:function(){var t=this,e=t.$createElement;return(t._self._c||e)("DraggableElement",{class:t.classname,attrs:{disabled:t.disabled},on:{drag:function(e){return t.$emit("drag",e)},"drag-end":function(e){return t.$emit("drag-end")},leave:function(e){return t.$emit("leave")},enter:function(e){return t.$emit("enter")}}},[t._t("default")],2)},staticRenderFns:[]},void 0,{name:"LineWrapper",components:{DraggableElement:Mr},props:{position:{type:String,required:!0},disabled:{type:Boolean,default:!1}},computed:{classname:function(){var t;return Ir((ir(t={},this.position,!0),ir(t,"disabled",this.disabled),t))}}},void 0,!1,void 0,!1,void 0,void 0,void 0),Lr=["left","right","top","bottom"],Fr=["left","right"],Br=["top","bottom"],Nr=["left","top"],Wr=["fill-area","fit-area","stencil","none"],Hr={left:0,top:0,width:0,height:0};function Yr(t,e,i){return!(i=i||["width","height","left","top"]).some((function(i){return t[i]!==e[i]}))}function Xr(t){return{left:t.left,top:t.top,right:t.left+t.width,bottom:t.top+t.height}}function Ur(t,e){return{left:t.left-e.left,top:t.top-e.top}}function Vr(t){return{left:t.left+t.width/2,top:t.top+t.height/2}}function Gr(t,e){var i={left:0,top:0,right:0,bottom:0};return Lr.forEach((function(n){var r=e[n],o=Xr(t)[n];i[n]=void 0!==r&&void 0!==o?"left"===n||"top"===n?Math.max(0,r-o):Math.max(0,o-r):0})),i}function $r(t,e){return{left:t.left-e.left,top:t.top-e.top,width:t.width+e.left+e.right,height:t.height+e.top+e.bottom}}function qr(t){return{left:-t.left,top:-t.top}}function Kr(t,e){return pr(pr({},t),{left:t.left+e.left,top:t.top+e.top})}function Zr(t,e,i,n){if(1!==e){if(i){var r=Vr(t);return{width:t.width*e,height:t.height*e,left:t.left+t.width*(1-e)/2+(i.left-r.left)*(n||1-e),top:t.top+t.height*(1-e)/2+(i.top-r.top)*(n||1-e)}}return{width:t.width*e,height:t.height*e,left:t.left+t.width*(1-e)/2,top:t.top+t.height*(1-e)/2}}return t}function Jr(t){return t.width/t.height}function Qr(t,e){return Math.min(void 0!==e.right&&void 0!==e.left?(e.right-e.left)/t.width:1/0,void 0!==e.bottom&&void 0!==e.top?(e.bottom-e.top)/t.height:1/0)}function to(t,e){var i={left:0,top:0},n=Gr(t,e);return n.left&&n.left>0?i.left=n.left:n.right&&n.right>0&&(i.left=-n.right),n.top&&n.top>0?i.top=n.top:n.bottom&&n.bottom>0&&(i.top=-n.bottom),i}function eo(t,e){var i;return e.minimum&&t<e.minimum?i=e.minimum:e.maximum&&t>e.maximum&&(i=e.maximum),i}function io(t,e){var i=Jr(t),n=Jr(e);return e.width<1/0&&e.height<1/0?i>n?{width:e.width,height:e.width/i}:{width:e.height*i,height:e.height}:e.width<1/0?{width:e.width,height:e.width/i}:e.height<1/0?{width:e.height*i,height:e.height}:t}function no(t,e){var i=e*Math.PI/180;return{width:Math.abs(t.width*Math.cos(i))+Math.abs(t.height*Math.sin(i)),height:Math.abs(t.width*Math.sin(i))+Math.abs(t.height*Math.cos(i))}}function ro(t,e){var i=e*Math.PI/180;return{left:t.left*Math.cos(i)-t.top*Math.sin(i),top:t.left*Math.sin(i)+t.top*Math.cos(i)}}function oo(t,e){var i=Gr(so(t,e),e);return i.left+i.right+i.top+i.bottom?i.left+i.right>i.top+i.bottom?Math.min((t.width+i.left+i.right)/t.width,Qr(t,e)):Math.min((t.height+i.top+i.bottom)/t.height,Qr(t,e)):1}function so(t,e,i){void 0===i&&(i=!1);var n=to(t,e);return Kr(t,i?qr(n):n)}function ao(t){return{width:void 0!==t.right&&void 0!==t.left?t.right-t.left:1/0,height:void 0!==t.bottom&&void 0!==t.top?t.bottom-t.top:1/0}}function co(t,e){return pr(pr({},t),{minWidth:Math.min(e.width,t.minWidth),minHeight:Math.min(e.height,t.minHeight),maxWidth:Math.min(e.width,t.maxWidth),maxHeight:Math.min(e.height,t.maxHeight)})}function lo(t,e,i){void 0===i&&(i=!0);var n={};return Lr.forEach((function(r){var o=t[r],s=e[r];void 0!==o&&void 0!==s?n[r]="left"===r||"top"===r?i?Math.max(o,s):Math.min(o,s):i?Math.min(o,s):Math.max(o,s):void 0!==s?n[r]=s:void 0!==o&&(n[r]=o)})),n}function ho(t,e){return lo(t,e,!0)}function uo(t){var e=t.size,i=t.aspectRatio,n=t.ignoreMinimum,r=t.sizeRestrictions;return Boolean((e.correctRatio||Jr(e)>=i.minimum&&Jr(e)<=i.maximum)&&e.height<=r.maxHeight&&e.width<=r.maxWidth&&e.width&&e.height&&(n||e.height>=r.minHeight&&e.width>=r.minWidth))}function fo(t,e){return Math.pow(t.width-e.width,2)+Math.pow(t.height-e.height,2)}function po(t){var e=t.width,i=t.height,n=t.sizeRestrictions,r={minimum:t.aspectRatio&&t.aspectRatio.minimum||0,maximum:t.aspectRatio&&t.aspectRatio.maximum||1/0},o={width:Math.max(n.minWidth,Math.min(n.maxWidth,e)),height:Math.max(n.minHeight,Math.min(n.maxHeight,i))};function s(t,o){return void 0===o&&(o=!1),t.reduce((function(t,s){return uo({size:s,aspectRatio:r,sizeRestrictions:n,ignoreMinimum:o})&&(!t||fo(s,{width:e,height:i})<fo(t,{width:e,height:i}))?s:t}),null)}var a=[];r&&[r.minimum,r.maximum].forEach((function(t){t&&a.push({width:o.width,height:o.width/t,correctRatio:!0},{width:o.height*t,height:o.height,correctRatio:!0})})),uo({size:o,aspectRatio:r,sizeRestrictions:n})&&a.push(o);var c=s(a)||s(a,!0);return c&&{width:c.width,height:c.height}}function go(t){var e=t.event,i=t.coordinates,n=t.positionRestrictions,r=void 0===n?{}:n,o=Kr(i,e.directions);return Kr(o,to(o,r))}function vo(t){var e=t.coordinates,i=t.transform,n=t.imageSize,r=t.sizeRestrictions,o=t.positionRestrictions,s=t.aspectRatio,a=t.visibleArea,c=function(t,e){return go({coordinates:t,positionRestrictions:o,event:new Ar({left:e.left-t.left,top:e.top-t.top})})},l=pr({},e);return(Array.isArray(i)?i:[i]).forEach((function(t){var e={};br((e="function"==typeof t?t({coordinates:l,imageSize:n,visibleArea:a}):t).width)&&br(e.height)||(l=function(t,e){var i=pr(pr(pr({},t),po({width:e.width,height:e.height,sizeRestrictions:r,aspectRatio:s})),{left:0,top:0});return c(i,{left:t.left,top:t.top})}(l,pr(pr({},l),e))),br(e.left)&&br(e.top)||(l=c(l,pr(pr({},l),e)))})),l}function mo(t){t.event;var e,i,n,r=t.getAreaRestrictions,o=t.boundaries,s=t.coordinates,a=t.visibleArea,c=(t.aspectRatio,t.stencilSize),l=t.sizeRestrictions,h=t.positionRestrictions,u=(t.stencilReference,pr({},s)),f=pr({},a),d=pr({},c);e=Jr(d),i=Jr(u),void 0===n&&(n=.001),(0===e||0===i?Math.abs(i-e)<n:Math.abs(i/e)<1+n&&Math.abs(i/e)>1-n)||(u=pr(pr({},u),po({sizeRestrictions:l,width:u.width,height:u.height,aspectRatio:{minimum:Jr(d),maximum:Jr(d)}})));var p=oo(f=Zr(f,u.width*o.width/(f.width*d.width)),r({visibleArea:f,type:"resize"}));return 1!==p&&(f=Zr(f,p),u=Zr(u,p)),f=so(f=Kr(f,Ur(Vr(u),Vr(f))),r({visibleArea:f,type:"move"})),{coordinates:u=so(u,ho(Xr(f),h)),visibleArea:f}}function yo(t){var e=t.event,i=t.getAreaRestrictions,n=t.boundaries,r=t.coordinates,o=t.visibleArea,s=(t.aspectRatio,t.stencilSize,t.sizeRestrictions,t.positionRestrictions),a=(t.stencilReference,pr({},r)),c=pr({},o);if(r&&o&&"manipulateImage"!==e.type){var l={width:0,height:0};c.width,n.width,Jr(n)>Jr(a)?(l.height=.8*n.height,l.width=l.height*Jr(a)):(l.width=.8*n.width,l.height=l.width*Jr(a));var h=oo(c=Zr(c,a.width*n.width/(c.width*l.width)),i({visibleArea:c,type:"resize"}));c=Zr(c,h),1!==h&&(l.height/=h,l.width/=h),c=so(c=Kr(c,Ur(Vr(a),Vr(c))),i({visibleArea:c,type:"move"})),a=so(a,ho(Xr(c),s))}return{coordinates:a,visibleArea:c}}function bo(t){var e=t.event,i=t.coordinates,n=t.visibleArea,r=t.getAreaRestrictions,o=pr({},n),s=pr({},i);if("setCoordinates"===e.type){var a=Math.max(0,s.width-o.width),c=Math.max(0,s.height-o.height);a>c?o=Zr(o,Math.min(s.width/o.width,Qr(o,r({visibleArea:o,type:"resize"})))):c>a&&(o=Zr(o,Math.min(s.height/o.height,Qr(o,r({visibleArea:o,type:"resize"}))))),o=so(o=Kr(o,qr(to(s,Xr(o)))),r({visibleArea:o,type:"move"}))}return{visibleArea:o,coordinates:s}}function wo(t){var e=t.imageSize,i=t.visibleArea,n=t.aspectRatio,r=t.sizeRestrictions,o=i||e,s=Math.min(n.maximum||1/0,Math.max(n.minimum||0,Jr(o))),a=o.width<o.height?{width:.8*o.width,height:.8*o.width/s}:{height:.8*o.height,width:.8*o.height*s};return po(pr(pr({},a),{aspectRatio:n,sizeRestrictions:r}))}function xo(t){var e,i,n=t.imageSize,r=t.visibleArea,o=t.boundaries,s=t.aspectRatio,a=t.sizeRestrictions,c=t.stencilSize,l=r||n;return Jr(l)>Jr(o)?i=(e=c.height*l.height/o.height)*Jr(c):e=(i=c.width*l.width/o.width)/Jr(c),po({width:i,height:e,aspectRatio:s,sizeRestrictions:a})}function _o(t,e){return lo(t,Xr(e))}function So(t){var e=t.event,i=t.coordinates,n=t.visibleArea,r=t.sizeRestrictions,o=t.getAreaRestrictions,s=t.positionRestrictions,a=t.adjustStencil,c=e.scale,l=e.move,h=pr({},n),u=pr({},i),f=1,d=1,p=c.factor&&Math.abs(c.factor-1)>.001;h=Kr(h,{left:l.left||0,top:l.top||0});var g={stencil:{minimum:Math.max(r.minWidth?r.minWidth/u.width:0,r.minHeight?r.minHeight/u.height:0),maximum:Math.min(r.maxWidth?r.maxWidth/u.width:1/0,r.maxHeight?r.maxHeight/u.height:1/0,Qr(u,s))},area:{maximum:Qr(h,o({visibleArea:h,type:"resize"}))}};c.factor&&p&&(c.factor<1?(d=Math.max(c.factor,g.stencil.minimum))>1&&(d=1):c.factor>1&&(d=Math.min(c.factor,Math.min(g.area.maximum,g.stencil.maximum)))<1&&(d=1)),d&&(h=Zr(h,d,c.center));var v=i.left-n.left,m=n.width+n.left-(i.width+i.left),y=i.top-n.top,b=n.height+n.top-(i.height+i.top);return h=so(h=Kr(h,to(h,{left:void 0!==s.left?s.left-v*d:void 0,top:void 0!==s.top?s.top-y*d:void 0,bottom:void 0!==s.bottom?s.bottom+b*d:void 0,right:void 0!==s.right?s.right+m*d:void 0})),o({visibleArea:h,type:"move"})),u.width=u.width*d,u.height=u.height*d,u.left=h.left+v*d,u.top=h.top+y*d,u=so(u,ho(Xr(h),s)),c.factor&&p&&a&&(c.factor>1?f=Math.min(g.area.maximum,c.factor)/d:c.factor<1&&(f=Math.max(u.height/h.height,u.width/h.width,c.factor/d)),1!==f&&(h=Kr(h=so(h=Zr(h,f,c.factor>1?c.center:Vr(u)),o({visibleArea:h,type:"move"})),qr(to(u,Xr(h)))))),{coordinates:u,visibleArea:h}}function Co(t){var e=t.aspectRatio,i=t.getAreaRestrictions,n=t.coordinates,r=t.visibleArea,o=t.sizeRestrictions,s=t.positionRestrictions,a=t.imageSize,c=t.previousImageSize,l=t.angle,h=pr({},n),u=pr({},r),f=ro(Vr(pr({left:0,top:0},c)),l);return(h=pr(pr({},po({sizeRestrictions:o,aspectRatio:e,width:h.width,height:h.height})),ro(Vr(h),l))).left-=f.left-a.width/2+h.width/2,h.top-=f.top-a.height/2+h.height/2,u=Zr(u,oo(u,i({visibleArea:u,type:"resize"}))),{coordinates:h=so(h,s),visibleArea:u=so(u=Kr(u,Ur(Vr(h),Vr(n))),i({visibleArea:u,type:"move"}))}}function To(t){var e=t.flip,i=t.previousFlip,n=t.rotate,r=(t.aspectRatio,t.getAreaRestrictions),o=t.coordinates,s=t.visibleArea,a=t.imageSize,c=pr({},o),l=pr({},s),h=i.horizontal!==e.horizontal,u=i.vertical!==e.vertical;if(h||u){var f=ro({left:a.width/2,top:a.height/2},-n),d=ro(Vr(c),-n),p=ro({left:h?f.left-(d.left-f.left):d.left,top:u?f.top-(d.top-f.top):d.top},n);c=Kr(c,Ur(p,Vr(c))),d=ro(Vr(l),-n),l=so(l=Kr(l,Ur(p=ro({left:h?f.left-(d.left-f.left):d.left,top:u?f.top-(d.top-f.top):d.top},n),Vr(l))),r({visibleArea:l,type:"move"}))}return{coordinates:c,visibleArea:l}}function Oo(t){var e=t.directions,i=t.coordinates,n=t.positionRestrictions,r=void 0===n?{}:n,o=t.sizeRestrictions,s=t.preserveRatio,a=t.compensate,c=pr({},e),l=$r(i,c).width,h=$r(i,c).height;l<0&&(c.left<0&&c.right<0?(c.left=-(i.width-o.minWidth)/(c.left/c.right),c.right=-(i.width-o.minWidth)/(c.right/c.left)):c.left<0?c.left=-(i.width-o.minWidth):c.right<0&&(c.right=-(i.width-o.minWidth))),h<0&&(c.top<0&&c.bottom<0?(c.top=-(i.height-o.minHeight)/(c.top/c.bottom),c.bottom=-(i.height-o.minHeight)/(c.bottom/c.top)):c.top<0?c.top=-(i.height-o.minHeight):c.bottom<0&&(c.bottom=-(i.height-o.minHeight)));var u=Gr($r(i,c),r);a&&(u.left&&u.left>0&&0===u.right?(c.right+=u.left,c.left-=u.left):u.right&&u.right>0&&0===u.left&&(c.left+=u.right,c.right-=u.right),u.top&&u.top>0&&0===u.bottom?(c.bottom+=u.top,c.top-=u.top):u.bottom&&u.bottom>0&&0===u.top&&(c.top+=u.bottom,c.bottom-=u.bottom),u=Gr($r(i,c),r));var f={width:1/0,height:1/0,left:1/0,right:1/0,top:1/0,bottom:1/0};if(Lr.forEach((function(t){var e=u[t];e&&c[t]&&(f[t]=Math.max(0,1-e/c[t]))})),s){var d=Math.min.apply(Math,Lr.map((function(t){return f[t]})));d!==1/0&&Lr.forEach((function(t){c[t]*=d}))}else Lr.forEach((function(t){f[t]!==1/0&&(c[t]*=f[t])}));if(l=$r(i,c).width,h=$r(i,c).height,c.right+c.left&&(l>o.maxWidth?f.width=(o.maxWidth-i.width)/(c.right+c.left):l<o.minWidth&&(f.width=(o.minWidth-i.width)/(c.right+c.left))),c.bottom+c.top&&(h>o.maxHeight?f.height=(o.maxHeight-i.height)/(c.bottom+c.top):h<o.minHeight&&(f.height=(o.minHeight-i.height)/(c.bottom+c.top))),s){var p=Math.min(f.width,f.height);p!==1/0&&Lr.forEach((function(t){c[t]*=p}))}else f.width!==1/0&&Fr.forEach((function(t){c[t]*=f.width})),f.height!==1/0&&Br.forEach((function(t){c[t]*=f.height}));return c}function ko(t,e,i){return 0==e&&0==i?t/2:0==e?0:0==i?t:t*Math.abs(e/(e+i))}var Eo=ur("vue-simple-handler"),Ao=ur("vue-simple-handler-wrapper"),Po=Dr({render:function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("HandlerWrapper",{class:t.classes.wrapper,attrs:{"vertical-position":t.verticalPosition,"horizontal-position":t.horizontalPosition,disabled:t.disabled},on:{drag:t.onDrag,"drag-end":t.onDragEnd,enter:t.onEnter,leave:t.onLeave}},[i("div",{class:t.classes.default})])},staticRenderFns:[]},void 0,{name:"SimpleHandler",components:{HandlerWrapper:Rr},props:{defaultClass:{type:String},hoverClass:{type:String},wrapperClass:{type:String},horizontalPosition:{type:String},verticalPosition:{type:String},disabled:{type:Boolean,default:!1}},data:function(){return{hover:!1}},computed:{classes:function(){var t,e=(ir(t={},this.horizontalPosition,Boolean(this.horizontalPosition)),ir(t,this.verticalPosition,Boolean(this.verticalPosition)),ir(t,"".concat(this.horizontalPosition,"-").concat(this.verticalPosition),Boolean(this.verticalPosition&&this.horizontalPosition)),ir(t,"hover",this.hover),t);return{default:hr(Eo(e),this.defaultClass,this.hover&&this.hoverClass),wrapper:hr(Ao(e),this.wrapperClass)}}},methods:{onDrag:function(t){this.$emit("drag",t)},onEnter:function(){this.hover=!0},onLeave:function(){this.hover=!1},onDragEnd:function(){this.$emit("drag-end")}}},void 0,!1,void 0,!1,void 0,void 0,void 0),Do=ur("vue-simple-line"),Mo=ur("vue-simple-line-wrapper"),jo=Dr({render:function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("LineWrapper",{class:t.classes.wrapper,attrs:{position:t.position,disabled:t.disabled},on:{drag:t.onDrag,"drag-end":t.onDragEnd,enter:t.onEnter,leave:t.onLeave}},[i("div",{class:t.classes.root})])},staticRenderFns:[]},void 0,{name:"SimpleLine",components:{LineWrapper:zr},props:{defaultClass:{type:String},hoverClass:{type:String},wrapperClass:{type:String},position:{type:String},disabled:{type:Boolean,default:!1}},data:function(){return{hover:!1}},computed:{classes:function(){return{root:hr(Do(ir({},this.position,!0)),this.defaultClass,this.hover&&this.hoverClass),wrapper:hr(Mo(ir({},this.position,!0)),this.wrapperClass)}}},methods:{onDrag:function(t){this.$emit("drag",t)},onEnter:function(){this.hover=!0},onLeave:function(){this.hover=!1},onDragEnd:function(){this.$emit("drag-end")}}},void 0,!1,void 0,!1,void 0,void 0,void 0),Ro=ur("vue-bounding-box"),Io=["east","west",null],zo=["south","north",null],Lo=Dr({render:function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{ref:"box",class:t.classes.root,style:t.style},[t._t("default"),t._v(" "),i("div",t._l(t.lineNodes,(function(e){return i(e.component,{key:e.name,tag:"component",attrs:{"default-class":e.class,"hover-class":e.hoverClass,"wrapper-class":e.wrapperClass,position:e.name,disabled:e.disabled},on:{drag:function(i){return t.onHandlerDrag(i,e.horizontalDirection,e.verticalDirection)},"drag-end":function(e){return t.onEnd()}}})})),1),t._v(" "),t._l(t.handlerNodes,(function(e){return i("div",{key:e.name,class:e.wrapperClass,style:e.wrapperStyle},[i(e.component,{tag:"component",attrs:{"default-class":e.class,"hover-class":e.hoverClass,"wrapper-class":e.wrapperClass,"horizontal-position":e.horizontalDirection,"vertical-position":e.verticalDirection,disabled:e.disabled},on:{drag:function(i){return t.onHandlerDrag(i,e.horizontalDirection,e.verticalDirection)},"drag-end":function(e){return t.onEnd()}}})],1)}))],2)},staticRenderFns:[]},void 0,{name:"BoundingBox",props:{width:{type:Number},height:{type:Number},transitions:{type:Object},handlers:{type:Object,default:function(){return{eastNorth:!0,north:!0,westNorth:!0,west:!0,westSouth:!0,south:!0,eastSouth:!0,east:!0}}},handlersComponent:{type:[Object,String],default:function(){return Po}},handlersClasses:{type:Object,default:function(){return{}}},handlersWrappersClasses:{type:Object,default:function(){return{}}},lines:{type:Object,default:function(){return{west:!0,north:!0,east:!0,south:!0}}},linesComponent:{type:[Object,String],default:function(){return jo}},linesClasses:{type:Object,default:function(){return{}}},linesWrappersClasses:{type:Object,default:function(){return{}}},resizable:{type:Boolean,default:!0}},data:function(){var t=[];return Io.forEach((function(e){zo.forEach((function(i){if(e!==i){var n=gr(e,i),r=n.name,o=n.classname;t.push({name:r,classname:o,verticalDirection:i,horizontalDirection:e})}}))})),{points:t}},computed:{style:function(){var t={};return this.width&&this.height&&(t.width="".concat(this.width,"px"),t.height="".concat(this.height,"px"),this.transitions&&this.transitions.enabled&&(t.transition="".concat(this.transitions.time,"ms ").concat(this.transitions.timingFunction))),t},classes:function(){var t=this.handlersClasses,e=this.handlersWrappersClasses,i=this.linesClasses,n=this.linesWrappersClasses;return{root:Ro(),handlers:t,handlersWrappers:e,lines:i,linesWrappers:n}},lineNodes:function(){var t=this,e=[];return this.points.forEach((function(i){i.horizontalDirection&&i.verticalDirection||!t.lines[i.name]||e.push({name:i.name,component:t.linesComponent,class:hr(t.classes.lines.default,t.classes.lines[i.name],!t.resizable&&t.classes.lines.disabled),wrapperClass:hr(t.classes.linesWrappers.default,t.classes.linesWrappers[i.name],!t.resizable&&t.classes.linesWrappers.disabled),hoverClass:t.classes.lines.hover,verticalDirection:i.verticalDirection,horizontalDirection:i.horizontalDirection,disabled:!t.resizable})})),e},handlerNodes:function(){var t=this,e=[],i=this.width,n=this.height;return this.points.forEach((function(r){if(t.handlers[r.name]){var o={name:r.name,component:t.handlersComponent,class:hr(t.classes.handlers.default,t.classes.handlers[r.name]),wrapperClass:hr(t.classes.handlersWrappers.default,t.classes.handlersWrappers[r.name]),hoverClass:t.classes.handlers.hover,verticalDirection:r.verticalDirection,horizontalDirection:r.horizontalDirection,disabled:!t.resizable};if(i&&n){var s=r.horizontalDirection,a=r.verticalDirection,c="east"===s?i:"west"===s?0:i/2,l="south"===a?n:"north"===a?0:n/2;o.wrapperClass=Ro("handler"),o.wrapperStyle={transform:"translate(".concat(c,"px, ").concat(l,"px)")},t.transitions&&t.transitions.enabled&&(o.wrapperStyle.transition="".concat(t.transitions.time,"ms ").concat(t.transitions.timingFunction))}else o.wrapperClass=Ro("handler",ir({},r.classname,!0));e.push(o)}})),e}},beforeMount:function(){window.addEventListener("mouseup",this.onMouseUp,{passive:!1}),window.addEventListener("mousemove",this.onMouseMove,{passive:!1}),window.addEventListener("touchmove",this.onTouchMove,{passive:!1}),window.addEventListener("touchend",this.onTouchEnd,{passive:!1})},beforeDestroy:function(){window.removeEventListener("mouseup",this.onMouseUp),window.removeEventListener("mousemove",this.onMouseMove),window.removeEventListener("touchmove",this.onTouchMove),window.removeEventListener("touchend",this.onTouchEnd)},mounted:function(){this.touches=[]},methods:{onEnd:function(){this.$emit("resize-end")},onHandlerDrag:function(t,e,i){var n,r=t.shift(),o=r.left,s=r.top,a={left:0,right:0,top:0,bottom:0};"west"===e?a.left-=o:"east"===e&&(a.right+=o),"north"===i?a.top-=s:"south"===i&&(a.bottom+=s),!i&&e?n="width":i&&!e&&(n="height"),this.resizable&&this.$emit("resize",new Er(a,{allowedDirections:{left:"west"===e||!e,right:"east"===e||!e,bottom:"south"===i||!i,top:"north"===i||!i},preserveAspectRatio:t.nativeEvent&&t.nativeEvent.shiftKey,respectDirection:n}))}}},void 0,!1,void 0,!1,void 0,void 0,void 0),Fo=function(t,e){void 0===t&&(t={}),void 0===e&&(e={}),this.type="manipulateImage",this.move=t,this.scale=e},Bo=function(t){this.type="move",this.directions=t},No=ur("vue-draggable-area"),Wo=Dr({render:function(){var t=this,e=t.$createElement;return(t._self._c||e)("div",{ref:"container",on:{touchstart:t.onTouchStart,mousedown:t.onMouseDown}},[t._t("default")],2)},staticRenderFns:[]},void 0,{name:"DraggableArea",props:{movable:{type:Boolean,default:!0},activationDistance:{type:Number,default:20}},computed:{classnames:function(){return{default:No()}}},beforeMount:function(){window.addEventListener("mouseup",this.onMouseUp,{passive:!1}),window.addEventListener("mousemove",this.onMouseMove,{passive:!1}),window.addEventListener("touchmove",this.onTouchMove,{passive:!1}),window.addEventListener("touchend",this.onTouchEnd,{passive:!1})},beforeDestroy:function(){window.removeEventListener("mouseup",this.onMouseUp),window.removeEventListener("mousemove",this.onMouseMove),window.removeEventListener("touchmove",this.onTouchMove),window.removeEventListener("touchend",this.onTouchEnd)},mounted:function(){this.touches=[],this.touchStarted=!1},methods:{onTouchStart:function(t){if(t.cancelable){var e=this.movable&&1===t.touches.length;e&&(this.touches=sr(t.touches)),(this.touchStarted||e)&&(t.preventDefault(),t.stopPropagation())}},onTouchEnd:function(){this.touchStarted=!1,this.processEnd()},onTouchMove:function(t){this.touches.length>=1&&(this.touchStarted?(this.processMove(t,t.touches),t.preventDefault(),t.stopPropagation()):Or({x:this.touches[0].clientX,y:this.touches[0].clientY},{x:t.touches[0].clientX,y:t.touches[0].clientY})>this.activationDistance&&(this.initAnchor({clientX:t.touches[0].clientX,clientY:t.touches[0].clientY}),this.touchStarted=!0))},onMouseDown:function(t){if(this.movable&&0===t.button){var e={fake:!0,clientX:t.clientX,clientY:t.clientY};this.touches=[e],this.initAnchor(e),t.stopPropagation()}},onMouseMove:function(t){this.touches.length&&(this.processMove(t,[{fake:!0,clientX:t.clientX,clientY:t.clientY}]),t.preventDefault&&t.cancelable&&t.preventDefault(),t.stopPropagation())},onMouseUp:function(){this.processEnd()},initAnchor:function(t){var e=this.$refs.container.getBoundingClientRect(),i=e.left,n=e.top;this.anchor={x:t.clientX-i,y:t.clientY-n}},processMove:function(t,e){var i=sr(e);if(this.touches.length){var n=this.$refs.container.getBoundingClientRect(),r=n.left,o=n.top;1===this.touches.length&&1===i.length&&this.$emit("move",new Bo({left:i[0].clientX-(r+this.anchor.x),top:i[0].clientY-(o+this.anchor.y)}))}},processEnd:function(){this.touches.length&&this.$emit("move-end"),this.touches=[]}}},void 0,!1,void 0,!1,void 0,void 0,void 0);function Ho(t){return new Promise((function(e,i){try{if(t)if(/^data:/i.test(t))e(function(t){t=t.replace(/^data:([^;]+);base64,/gim,"");for(var e=atob(t),i=e.length,n=new ArrayBuffer(i),r=new Uint8Array(n),o=0;o<i;o++)r[o]=e.charCodeAt(o);return n}(t));else if(/^blob:/i.test(t)){var n=new FileReader;n.onload=function(t){e(t.target.result)},o=t,s=function(t){n.readAsArrayBuffer(t)},(a=new XMLHttpRequest).open("GET",o,!0),a.responseType="blob",a.onload=function(){200!=this.status&&0!==this.status||s(this.response)},a.send()}else{var r=new XMLHttpRequest;r.onreadystatechange=function(){4===r.readyState&&(200===r.status||0===r.status?e(r.response):i("Warning: could not load an image to parse its orientation"),r=null)},r.onprogress=function(){"image/jpeg"!==r.getResponseHeader("content-type")&&r.abort()},r.withCredentials=!1,r.open("GET",t,!0),r.responseType="arraybuffer",r.send(null)}else i("Error: the image is empty")}catch(t){i(t)}var o,s,a}))}function Yo(t){var e=t.rotate,i=t.flip,n=t.scaleX,r=t.scaleY,o="";return o+=" rotate("+e+"deg) ",o+=" scaleX("+n*(i.horizontal?-1:1)+") ",o+" scaleY("+r*(i.vertical?-1:1)+") "}function Xo(t){try{var e,i=new DataView(t),n=void 0,r=void 0,o=void 0,s=void 0;if(255===i.getUint8(0)&&216===i.getUint8(1))for(var a=i.byteLength,c=2;c+1<a;){if(255===i.getUint8(c)&&225===i.getUint8(c+1)){o=c;break}c++}if(o&&(n=o+10,"Exif"===function(t,e,i){var n,r="";for(n=e,i+=e;n<i;n++)r+=String.fromCharCode(t.getUint8(n));return r}(i,o+4,4))){var l=i.getUint16(n);if(((r=18761===l)||19789===l)&&42===i.getUint16(n+2,r)){var h=i.getUint32(n+4,r);h>=8&&(s=n+h)}}if(s)for(var u=i.getUint16(s,r),f=0;f<u;f++)if(c=s+12*f+2,274===i.getUint16(c,r)){c+=8,e=i.getUint16(c,r),i.setUint16(c,1,r);break}return e}catch(t){return null}}var Uo=ur("vue-preview-result");Dr({render:function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{class:t.classes.root},[i("div",{ref:"wrapper",class:t.classes.wrapper,style:t.wrapperStyle},[i("img",{ref:"image",class:t.classes.image,style:t.imageStyle,attrs:{src:t.image.src}})])])},staticRenderFns:[]},void 0,{name:"PreviewResult",props:{image:{type:Object},transitions:{type:Object},stencilCoordinates:{type:Object,default:function(){return{width:0,height:0,left:0,top:0}}},imageClass:{type:String}},computed:{classes:function(){return{root:Uo(),wrapper:Uo("wrapper"),imageWrapper:Uo("image-wrapper"),image:hr(Uo("image"),this.imageClass)}},wrapperStyle:function(){var t={width:"".concat(this.stencilCoordinates.width,"px"),height:"".concat(this.stencilCoordinates.height,"px"),left:"calc(50% - ".concat(this.stencilCoordinates.width/2,"px)"),top:"calc(50% - ".concat(this.stencilCoordinates.height/2,"px)")};return this.transitions&&this.transitions.enabled&&(t.transition="".concat(this.transitions.time,"ms ").concat(this.transitions.timingFunction)),t},imageStyle:function(){var t=this.image.transforms,e=no({width:this.image.width,height:this.image.height},t.rotate),i={width:"".concat(this.image.width,"px"),height:"".concat(this.image.height,"px"),left:"0px",top:"0px"},n={left:(this.image.width-e.width)*t.scaleX/2,top:(this.image.height-e.height)*t.scaleY/2},r={left:(1-t.scaleX)*this.image.width/2,top:(1-t.scaleY)*this.image.height/2};return i.transform="translate(\n\t\t\t\t".concat(-this.stencilCoordinates.left-t.translateX-n.left-r.left,"px,").concat(-this.stencilCoordinates.top-t.translateY-n.top-r.top,"px) ")+Yo(t),this.transitions&&this.transitions.enabled&&(i.transition="".concat(this.transitions.time,"ms ").concat(this.transitions.timingFunction)),i}}},void 0,!1,void 0,!1,void 0,void 0,void 0);function Vo(t,e){var i=e.getBoundingClientRect(),n=i.left,r=i.top,o={left:0,top:0},s=0;return t.forEach((function(e){o.left+=(e.clientX-n)/t.length,o.top+=(e.clientY-r)/t.length})),t.forEach((function(t){s+=Or({x:o.left,y:o.top},{x:t.clientX-n,y:t.clientY-r})})),{centerMass:o,spread:s,count:t.length}}var Go=Dr({render:function(){var t=this,e=t.$createElement;return(t._self._c||e)("div",{ref:"container",on:{touchstart:t.onTouchStart,mousedown:t.onMouseDown,wheel:t.onWheel}},[t._t("default")],2)},staticRenderFns:[]},void 0,{name:"CropperWrapper",props:{touchMove:{type:Boolean,required:!0},mouseMove:{type:Boolean,required:!0},touchResize:{type:Boolean,required:!0},wheelResize:{type:[Boolean,Object],required:!0}},beforeMount:function(){window.addEventListener("mouseup",this.onMouseUp,{passive:!1}),window.addEventListener("mousemove",this.onMouseMove,{passive:!1}),window.addEventListener("touchmove",this.onTouchMove,{passive:!1}),window.addEventListener("touchend",this.onTouchEnd,{passive:!1})},beforeDestroy:function(){window.removeEventListener("mouseup",this.onMouseUp),window.removeEventListener("mousemove",this.onMouseMove),window.removeEventListener("touchmove",this.onTouchMove),window.removeEventListener("touchend",this.onTouchEnd)},mounted:function(){this.touches=[]},methods:{onTouchStart:function(t){if(t.cancelable&&(this.touchMove||this.touchResize&&t.touches.length>1)){var e=this.$refs.container,i=e.getBoundingClientRect(),n=i.left,r=i.top,o=i.bottom,s=i.right;this.touches=sr(t.touches).filter((function(t){return t.clientX>n&&t.clientX<s&&t.clientY>r&&t.clientY<o})),this.oldGeometricProperties=Vo(this.touches,e),t.preventDefault&&t.preventDefault(),t.stopPropagation()}},onTouchEnd:function(t){0===t.touches.length&&this.processEnd()},onTouchMove:function(t){var e=this;if(this.touches.length){var i=sr(t.touches).filter((function(t){return!t.identifier||e.touches.find((function(e){return e.identifier===t.identifier}))}));this.processMove(t,i),t.preventDefault&&t.preventDefault(),t.stopPropagation&&t.stopPropagation()}},onMouseDown:function(t){if(this.mouseMove&&"buttons"in t&&1===t.buttons){var e={fake:!0,clientX:t.clientX,clientY:t.clientY};this.touches=[e],t.stopPropagation()}},onMouseMove:function(t){this.touches.length&&(this.processMove(t,[{fake:!0,clientX:t.clientX,clientY:t.clientY}]),t.preventDefault&&t.cancelable&&t.preventDefault())},onMouseUp:function(){this.touches=[]},processMove:function(t,e){if(this.touches.length){if(1===this.touches.length&&1===e.length)this.$emit("move",new Fo({left:this.touches[0].clientX-e[0].clientX,top:this.touches[0].clientY-e[0].clientY}));else if(this.touches.length>1&&this.touchResize){var i=Vo(e,this.$refs.container),n=this.oldGeometricProperties;n.count===i.count&&n.count>1&&this.$emit("resize",new Fo({left:n.centerMass.left-i.centerMass.left,top:n.centerMass.top-i.centerMass.top},{factor:n.spread/i.spread,center:i.centerMass})),this.oldGeometricProperties=i}this.touches=e}},processEnd:function(){this.touches=[]},onWheel:function(t){if(this.wheelResize){var e=this.$refs.container.getBoundingClientRect(),i=e.left,n=e.top,r=1+this.wheelResize.ratio*(s=t.deltaY||t.detail||t.wheelDelta,0===(a=+s)||Tr(a)?a:a>0?1:-1),o={left:t.clientX-i,top:t.clientY-n};this.$emit("resize",new Fo({},{factor:r,center:o})),t.preventDefault(),t.stopPropagation()}var s,a}}},void 0,!1,void 0,!1,void 0,void 0,void 0),$o=ur("vue-preview"),qo=Dr({render:function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{ref:"root",class:t.classes.root,style:t.style},[i("div",{ref:"wrapper",class:t.classes.wrapper,style:t.wrapperStyle},[i("img",{directives:[{name:"show",rawName:"v-show",value:t.image&&t.image.src,expression:"image && image.src"}],ref:"image",class:t.classes.image,style:t.imageStyle,attrs:{src:t.image&&t.image.src}})])])},staticRenderFns:[]},void 0,{props:{coordinates:{type:Object},transitions:{type:Object},image:{type:Object,default:function(){return{}}},imageClass:{type:String},width:{type:Number},height:{type:Number},fill:{type:Boolean}},data:function(){return{calculatedImageSize:{width:0,height:0},calculatedSize:{width:0,height:0}}},computed:{classes:function(){return{root:$o({fill:this.fill}),wrapper:$o("wrapper"),imageWrapper:$o("image-wrapper"),image:hr($o("image"),this.imageClass)}},style:function(){if(this.fill)return{};var t={};return this.width&&(t.width="".concat(this.size.width,"px")),this.height&&(t.height="".concat(this.size.height,"px")),this.transitions&&this.transitions.enabled&&(t.transition="".concat(this.transitions.time,"ms ").concat(this.transitions.timingFunction)),t},wrapperStyle:function(){var t={width:"".concat(this.size.width,"px"),height:"".concat(this.size.height,"px"),left:"calc(50% - ".concat(this.size.width/2,"px)"),top:"calc(50% - ".concat(this.size.height/2,"px)")};return this.transitions&&this.transitions.enabled&&(t.transition="".concat(this.transitions.time,"ms ").concat(this.transitions.timingFunction)),t},imageStyle:function(){if(this.coordinates&&this.image){var t=this.coordinates.width/this.size.width,e=rr(rr({rotate:0,flip:{horizontal:!1,vertical:!1}},this.image.transforms),{},{scaleX:1/t,scaleY:1/t}),i=this.imageSize.width,n=this.imageSize.height,r=no({width:i,height:n},e.rotate),o={width:"".concat(i,"px"),height:"".concat(n,"px"),left:"0px",top:"0px"},s={rotate:{left:(i-r.width)*e.scaleX/2,top:(n-r.height)*e.scaleY/2},scale:{left:(1-e.scaleX)*i/2,top:(1-e.scaleY)*n/2}};return o.transform="translate(\n\t\t\t\t".concat(-this.coordinates.left/t-s.rotate.left-s.scale.left,"px,").concat(-this.coordinates.top/t-s.rotate.top-s.scale.top,"px) ")+Yo(e),this.transitions&&this.transitions.enabled&&(o.transition="".concat(this.transitions.time,"ms ").concat(this.transitions.timingFunction)),o}return{}},size:function(){return{width:this.width||this.calculatedSize.width,height:this.height||this.calculatedSize.height}},imageSize:function(){return{width:this.image.width||this.calculatedImageSize.width,height:this.image.height||this.calculatedImageSize.height}}},watch:{image:function(t){(t.width||t.height)&&this.onChangeImage()}},mounted:function(){var t=this;this.onChangeImage(),this.$refs.image.addEventListener("load",(function(){t.refreshImage()})),window.addEventListener("resize",this.refresh),window.addEventListener("orientationchange",this.refresh)},destroyed:function(){window.removeEventListener("resize",this.refresh),window.removeEventListener("orientationchange",this.refresh)},methods:{refreshImage:function(){var t=this.$refs.image;this.calculatedImageSize.height=t.naturalHeight,this.calculatedImageSize.width=t.naturalWidth},refresh:function(){var t=this.$refs.root;this.width||(this.calculatedSize.width=t.clientWidth),this.height||(this.calculatedSize.height=t.clientHeight)},onChangeImage:function(){var t=this.$refs.image;t&&t.complete&&this.refreshImage(),this.refresh()}}},void 0,!1,void 0,!1,void 0,void 0,void 0),Ko=Dr({render:function(){var t=this,e=t.$createElement;return(t._self._c||e)("preview",t._b({attrs:{fill:!0}},"preview",t.$attrs,!1))},staticRenderFns:[]},void 0,{components:{Preview:qo},inheritAttrs:!1},void 0,!1,void 0,!1,void 0,void 0,void 0),Zo=ur("vue-rectangle-stencil"),Jo=Dr({render:function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{class:t.classes.stencil,style:t.style},[i("bounding-box",{class:t.classes.boundingBox,attrs:{width:t.stencilCoordinates.width,height:t.stencilCoordinates.height,transitions:t.transitions,handlers:t.handlers,"handlers-component":t.handlersComponent,"handlers-classes":t.handlersClasses,"handlers-wrappers-classes":t.handlersWrappersClasses,lines:t.lines,"lines-component":t.linesComponent,"lines-classes":t.linesClasses,"lines-wrappers-classes":t.linesWrappersClasses,resizable:t.resizable},on:{resize:t.onResize,"resize-end":t.onResizeEnd}},[i("draggable-area",{attrs:{movable:t.movable},on:{move:t.onMove,"move-end":t.onMoveEnd}},[i("stencil-preview",{class:t.classes.preview,attrs:{image:t.image,coordinates:t.coordinates,width:t.stencilCoordinates.width,height:t.stencilCoordinates.height,transitions:t.transitions}})],1)],1)],1)},staticRenderFns:[]},void 0,{name:"RectangleStencil",components:{StencilPreview:Ko,BoundingBox:Lo,DraggableArea:Wo},props:{image:{type:Object},coordinates:{type:Object},stencilCoordinates:{type:Object},handlers:{type:Object},handlersComponent:{type:[Object,String],default:function(){return Po}},lines:{type:Object},linesComponent:{type:[Object,String],default:function(){return jo}},aspectRatio:{type:[Number,String]},minAspectRatio:{type:[Number,String]},maxAspectRatio:{type:[Number,String]},movable:{type:Boolean,default:!0},resizable:{type:Boolean,default:!0},transitions:{type:Object},movingClass:{type:String},resizingClass:{type:String},previewClass:{type:String},boundingBoxClass:{type:String},linesClasses:{type:Object,default:function(){return{}}},linesWrappersClasses:{type:Object,default:function(){return{}}},handlersClasses:{type:Object,default:function(){return{}}},handlersWrappersClasses:{type:Object,default:function(){return{}}}},data:function(){return{moving:!1,resizing:!1}},computed:{classes:function(){return{stencil:hr(Zo({movable:this.movable,moving:this.moving,resizing:this.resizing}),this.moving&&this.movingClass,this.resizing&&this.resizingClass),preview:hr(Zo("preview"),this.previewClass),boundingBox:hr(Zo("bounding-box"),this.boundingBoxClass)}},style:function(){var t=this.stencilCoordinates,e=t.height,i=t.width,n=t.left,r=t.top,o={width:"".concat(i,"px"),height:"".concat(e,"px"),transform:"translate(".concat(n,"px, ").concat(r,"px)")};return this.transitions&&this.transitions.enabled&&(o.transition="".concat(this.transitions.time,"ms ").concat(this.transitions.timingFunction)),o}},methods:{onMove:function(t){this.$emit("move",t),this.moving=!0},onMoveEnd:function(){this.$emit("move-end"),this.moving=!1},onResize:function(t){this.$emit("resize",t),this.resizing=!0},onResizeEnd:function(){this.$emit("resize-end"),this.resizing=!1},aspectRatios:function(){return{minimum:this.aspectRatio||this.minAspectRatio,maximum:this.aspectRatio||this.maxAspectRatio}}}},void 0,!1,void 0,!1,void 0,void 0,void 0),Qo=ur("vue-circle-stencil"),ts=Dr({render:function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{class:t.classes.stencil,style:t.style},[i("bounding-box",{class:t.classes.boundingBox,attrs:{width:t.stencilCoordinates.width,height:t.stencilCoordinates.height,transitions:t.transitions,handlers:t.handlers,"handlers-component":t.handlersComponent,"handlers-classes":t.handlersClasses,"handlers-wrappers-classes":t.handlersWrappersClasses,lines:t.lines,"lines-component":t.linesComponent,"lines-classes":t.linesClasses,"lines-wrappers-classes":t.linesWrappersClasses,resizable:t.resizable},on:{resize:t.onResize,"resize-end":t.onResizeEnd}},[i("draggable-area",{attrs:{movable:t.movable},on:{move:t.onMove,"move-end":t.onMoveEnd}},[i("stencil-preview",{class:t.classes.preview,attrs:{image:t.image,coordinates:t.coordinates,width:t.stencilCoordinates.width,height:t.stencilCoordinates.height,transitions:t.transitions}})],1)],1)],1)},staticRenderFns:[]},void 0,{components:{StencilPreview:Ko,BoundingBox:Lo,DraggableArea:Wo},props:{image:{type:Object},coordinates:{type:Object},stencilCoordinates:{type:Object},handlers:{type:Object,default:function(){return{eastNorth:!0,westNorth:!0,westSouth:!0,eastSouth:!0}}},handlersComponent:{type:[Object,String],default:function(){return Po}},handlersClasses:{type:Object,default:function(){return{}}},handlersWrappersClasses:{type:Object,default:function(){return{}}},lines:{type:Object},linesComponent:{type:[Object,String],default:function(){return jo}},linesClasses:{type:Object,default:function(){return{}}},linesWrappersClasses:{type:Object,default:function(){return{}}},movable:{type:Boolean,default:!0},resizable:{type:Boolean,default:!0},transitions:{type:Object},movingClass:{type:String},resizingClass:{type:String},previewClass:{type:String},boundingBoxClass:{type:String}},data:function(){return{moving:!1,resizing:!1}},computed:{classes:function(){return{stencil:hr(Qo({movable:this.movable,moving:this.moving,resizing:this.resizing}),this.moving&&this.movingClass,this.resizing&&this.resizingClass),preview:hr(Qo("preview"),this.previewClass),boundingBox:hr(Qo("bounding-box"),this.boundingBoxClass)}},style:function(){var t=this.stencilCoordinates,e=t.height,i=t.width,n=t.left,r=t.top,o={width:"".concat(i,"px"),height:"".concat(e,"px"),transform:"translate(".concat(n,"px, ").concat(r,"px)")};return this.transitions&&this.transitions.enabled&&(o.transition="".concat(this.transitions.time,"ms ").concat(this.transitions.timingFunction)),o}},methods:{onMove:function(t){this.$emit("move",t),this.moving=!0},onMoveEnd:function(){this.$emit("move-end"),this.moving=!1},onResize:function(t){this.$emit("resize",t),this.resizing=!0},onResizeEnd:function(){this.$emit("resize-end"),this.resizing=!1},aspectRatios:function(){return{minimum:1,maximum:1}}}},void 0,!1,void 0,!1,void 0,void 0,void 0),es=ur("vue-advanced-cropper"),is=Dr({render:function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{ref:"cropper",class:t.classes.cropper},[i("div",{ref:"stretcher",class:t.classes.stretcher}),t._v(" "),i("div",{class:t.classes.boundaries,style:t.boundariesStyle},[i("cropper-wrapper",{class:t.classes.cropperWrapper,attrs:{"wheel-resize":t.settings.resizeImage.wheel,"touch-resize":t.settings.resizeImage.touch,"touch-move":t.settings.moveImage.touch,"mouse-move":t.settings.moveImage.mouse},on:{move:t.onManipulateImage,resize:t.onManipulateImage}},[i("div",{class:t.classes.background,style:t.boundariesStyle}),t._v(" "),i("div",{class:t.classes.imageWrapper},[i("img",{ref:"image",class:t.classes.image,style:t.imageStyle,attrs:{crossorigin:t.imageAttributes.crossOrigin,src:t.imageAttributes.src},on:{mousedown:function(t){t.preventDefault()}}})]),t._v(" "),i("div",{class:t.classes.foreground,style:t.boundariesStyle}),t._v(" "),i(t.stencilComponent,t._b({directives:[{name:"show",rawName:"v-show",value:t.imageLoaded,expression:"imageLoaded"}],ref:"stencil",tag:"component",attrs:{image:t.image,coordinates:t.coordinates,"stencil-coordinates":t.stencilCoordinates,transitions:t.transitionsOptions},on:{resize:t.onResize,"resize-end":t.onResizeEnd,move:t.onMove,"move-end":t.onMoveEnd}},"component",t.stencilProps,!1)),t._v(" "),t.canvas?i("canvas",{ref:"canvas",style:{display:"none"}}):t._e(),t._v(" "),t.canvas?i("canvas",{ref:"sourceCanvas",style:{display:"none"}}):t._e()],1)],1)])},staticRenderFns:[]},void 0,{name:"Cropper",components:{CropperWrapper:Go},props:{src:{type:String,default:null},stencilComponent:{type:[Object,String],default:function(){return Jo}},stencilProps:{type:Object,default:function(){return{}}},autoZoom:{type:Boolean,default:!1},imageClass:{type:String},boundariesClass:{type:String},backgroundClass:{type:String},foregroundClass:{type:String},minWidth:{type:[Number,String]},minHeight:{type:[Number,String]},maxWidth:{type:[Number,String]},maxHeight:{type:[Number,String]},debounce:{type:[Boolean,Number],default:500},transitions:{type:Boolean,default:!0},checkOrientation:{type:Boolean,default:!0},canvas:{type:[Object,Boolean],default:!0},crossOrigin:{type:[Boolean,String],default:void 0},transitionTime:{type:Number,default:300},imageRestriction:{type:String,default:"fit-area",validator:function(t){return-1!==Wr.indexOf(t)}},roundResult:{type:Boolean,default:!0},defaultSize:{type:[Function,Object]},defaultPosition:{type:[Function,Object],default:function(t){var e=t.imageSize,i=t.visibleArea,n=t.coordinates,r=i||e;return{left:(i?i.left:0)+r.width/2-n.width/2,top:(i?i.top:0)+r.height/2-n.height/2}}},defaultVisibleArea:{type:[Function,Object],default:function(t){var e=t.getAreaRestrictions,i=t.coordinates,n=t.imageSize,r=Jr(t.boundaries);if(i){var o={height:Math.max(i.height,n.height),width:Math.max(i.width,n.width)},s=io({width:Jr(o)>r?o.width:o.height*r,height:Jr(o)>r?o.width/r:o.height},ao(e())),a={left:i.left+i.width/2-s.width/2,top:i.top+i.height/2-s.height/2,width:s.width,height:s.height},c=Gr(i,Xr(pr({left:0,top:0},n))),l={};return!c.left&&!c.right&&a.width<=n.width&&(l.left=0,l.right=n.width),!c.top&&!c.bottom&&a.height<=n.height&&(l.top=0,l.bottom=n.height),so(a,l)}var h=Jr(n);return s={height:h>r?n.height:n.width/r,width:h>r?n.height*r:n.width},{left:n.width/2-s.width/2,top:n.height/2-s.height/2,width:s.width,height:s.height}}},defaultBoundaries:{type:[Function,String],validator:function(t){return!("string"==typeof t&&"fill"!==t&&"fit"!==t)}},priority:{type:String,default:"coordinates"},stencilSize:{type:[Object,Function]},resizeImage:{type:[Boolean,Object],default:!0},moveImage:{type:[Boolean,Object],default:!0},autoZoomAlgorithm:{type:Function},resizeAlgorithm:{type:Function,default:function(t){var e=t.event,i=t.coordinates,n=t.aspectRatio,r=t.positionRestrictions,o=t.sizeRestrictions,s=pr(pr({},i),{right:i.left+i.width,bottom:i.top+i.height}),a=e.params||{},c=pr({},e.directions),l=a.allowedDirections||{left:!0,right:!0,bottom:!0,top:!0};o.widthFrozen&&(c.left=0,c.right=0),o.heightFrozen&&(c.top=0,c.bottom=0),Lr.forEach((function(t){l[t]||(c[t]=0)}));var h=$r(s,c=Oo({coordinates:s,directions:c,sizeRestrictions:o,positionRestrictions:r})).width,u=$r(s,c).height,f=a.preserveRatio?Jr(s):eo(h/u,n);if(f){var d=a.respectDirection;if(d||(d=s.width>=s.height||1===f?"width":"height"),"width"===d){var p=h/f-s.height;if(l.top&&l.bottom){var g=c.top,v=c.bottom;c.bottom=ko(p,v,g),c.top=ko(p,g,v)}else l.bottom?c.bottom=p:l.top?c.top=p:l.right?c.right=0:l.left&&(c.left=0)}else if("height"===d){var m=s.width-u*f;if(l.left&&l.right){var y=c.left,b=c.right;c.left=-ko(m,y,b),c.right=-ko(m,b,y)}else l.left?c.left=-m:l.right?c.right=-m:l.top?c.top=0:l.bottom&&(c.bottom=0)}c=Oo({directions:c,coordinates:s,sizeRestrictions:o,positionRestrictions:r,preserveRatio:!0,compensate:a.compensate})}return h=$r(s,c).width,u=$r(s,c).height,(f=a.preserveRatio?Jr(s):eo(h/u,n))&&Math.abs(f-h/u)>.001&&Lr.forEach((function(t){l[t]||(c[t]=0)})),go({event:new Ar({left:-c.left,top:-c.top}),coordinates:{width:i.width+c.right+c.left,height:i.height+c.top+c.bottom,left:i.left,top:i.top},positionRestrictions:r})}},moveAlgorithm:{type:Function,default:go},initStretcher:{type:Function,default:function(t){var e=t.stretcher,i=t.imageSize,n=Jr(i);e.style.width=i.width+"px",e.style.height=e.clientWidth/n+"px",e.style.width=e.clientWidth+"px"}},fitCoordinates:{type:Function,default:function(t){var e=t.visibleArea,i=t.coordinates,n=t.aspectRatio,r=t.sizeRestrictions,o=t.positionRestrictions,s=pr(pr({},i),po({width:i.width,height:i.height,aspectRatio:n,sizeRestrictions:{maxWidth:e.width,maxHeight:e.height,minHeight:Math.min(e.height,r.minHeight),minWidth:Math.min(e.width,r.minWidth)}}));return so(s=Kr(s,Ur(Vr(i),Vr(s))),ho(Xr(e),o))}},fitVisibleArea:{type:Function,default:function(t){var e=t.visibleArea,i=t.boundaries,n=t.getAreaRestrictions,r=t.coordinates,o=pr({},e);o.height=o.width/Jr(i),o.top+=(e.height-o.height)/2,(r.height-o.height>0||r.width-o.width>0)&&(o=Zr(o,Math.max(r.height/o.height,r.width/o.width)));var s=qr(to(r,Xr(o=Zr(o,oo(o,n({visibleArea:o,type:"resize"}))))));return o.width<r.width&&(s.left=0),o.height<r.height&&(s.top=0),so(o=Kr(o,s),n({visibleArea:o,type:"move"}))}},areaRestrictionsAlgorithm:{type:Function,default:function(t){var e=t.visibleArea,i=t.boundaries,n=t.imageSize,r=t.imageRestriction,o=t.type,s={};return"fill-area"===r?s={left:0,top:0,right:n.width,bottom:n.height}:"fit-area"===r&&(Jr(i)>Jr(n)?(s={top:0,bottom:n.height},e&&"move"===o&&(e.width>n.width?(s.left=-(e.width-n.width)/2,s.right=n.width-s.left):(s.left=0,s.right=n.width))):(s={left:0,right:n.width},e&&"move"===o&&(e.height>n.height?(s.top=-(e.height-n.height)/2,s.bottom=n.height-s.top):(s.top=0,s.bottom=n.height)))),s}},sizeRestrictionsAlgorithm:{type:Function,default:function(t){return{minWidth:t.minWidth,minHeight:t.minHeight,maxWidth:t.maxWidth,maxHeight:t.maxHeight}}},positionRestrictionsAlgorithm:{type:Function,default:function(t){var e=t.imageSize,i={};return"none"!==t.imageRestriction&&(i={left:0,top:0,right:e.width,bottom:e.height}),i}},maxCanvasSize:{type:Number,validator:function(t){return br(t),!0}}},data:function(){return{transitionsActive:!1,imageLoaded:!1,imageAttributes:{width:null,height:null,crossOrigin:!1,src:null},customImageTransforms:{rotate:0,flip:{horizontal:!1,vertical:!1}},basicImageTransforms:{rotate:0,flip:{horizontal:!1,vertical:!1}},boundaries:{width:0,height:0},visibleArea:null,coordinates:rr({},Hr)}},computed:{image:function(){return{src:this.imageAttributes.src,width:this.imageAttributes.width,height:this.imageAttributes.height,transforms:this.imageTransforms}},imageTransforms:function(){return{rotate:this.basicImageTransforms.rotate+this.customImageTransforms.rotate,flip:{horizontal:Boolean(this.basicImageTransforms.flip.horizontal^this.customImageTransforms.flip.horizontal),vertical:Boolean(this.basicImageTransforms.flip.vertical^this.customImageTransforms.flip.vertical)},translateX:this.visibleArea?this.visibleArea.left/this.coefficient:0,translateY:this.visibleArea?this.visibleArea.top/this.coefficient:0,scaleX:1/this.coefficient,scaleY:1/this.coefficient}},imageSize:function(){var t=function(t){return t*Math.PI/180}(this.imageTransforms.rotate);return{width:Math.abs(this.imageAttributes.width*Math.cos(t))+Math.abs(this.imageAttributes.height*Math.sin(t)),height:Math.abs(this.imageAttributes.width*Math.sin(t))+Math.abs(this.imageAttributes.height*Math.cos(t))}},initialized:function(){return Boolean(this.visibleArea&&this.imageLoaded)},settings:function(){var t=xr(this.resizeImage,{touch:!0,wheel:{ratio:.1},adjustStencil:!0},{touch:!1,wheel:!1,adjustStencil:!1});return{moveImage:xr(this.moveImage,{touch:!0,mouse:!0},{touch:!1,mouse:!1}),resizeImage:t}},coefficient:function(){return this.visibleArea?this.visibleArea.width/this.boundaries.width:0},areaRestrictions:function(){return this.imageLoaded?this.areaRestrictionsAlgorithm({imageSize:this.imageSize,imageRestriction:this.imageRestriction,boundaries:this.boundaries}):{}},transitionsOptions:function(){return{enabled:this.transitionsActive,timingFunction:"ease-in-out",time:350}},sizeRestrictions:function(){if(this.boundaries.width&&this.boundaries.height&&this.imageSize.width&&this.imageSize.height){var t=this.sizeRestrictionsAlgorithm({imageSize:this.imageSize,minWidth:br(this.minWidth)?0:_r(this.minWidth),minHeight:br(this.minHeight)?0:_r(this.minHeight),maxWidth:br(this.maxWidth)?1/0:_r(this.maxWidth),maxHeight:br(this.maxHeight)?1/0:_r(this.maxHeight)});if(t=function(t){var e=t.areaRestrictions,i=t.sizeRestrictions,n=(t.imageSize,t.boundaries),r=t.positionRestrictions,o=(t.imageRestriction,pr(pr({},i),{minWidth:void 0!==i.minWidth?i.minWidth:0,minHeight:void 0!==i.minHeight?i.minHeight:0,maxWidth:void 0!==i.maxWidth?i.maxWidth:1/0,maxHeight:void 0!==i.maxHeight?i.maxHeight:1/0}));void 0!==r.left&&void 0!==r.right&&(o.maxWidth=Math.min(o.maxWidth,r.right-r.left)),void 0!==r.bottom&&void 0!==r.top&&(o.maxHeight=Math.min(o.maxHeight,r.bottom-r.top));var s=ao(e),a=io(n,s);return s.width<1/0&&(!o.maxWidth||o.maxWidth>a.width)&&(o.maxWidth=Math.min(o.maxWidth,a.width)),s.height<1/0&&(!o.maxHeight||o.maxHeight>a.height)&&(o.maxHeight=Math.min(o.maxHeight,a.height)),o.minWidth>o.maxWidth&&(o.minWidth=o.maxWidth,o.widthFrozen=!0),o.minHeight>o.maxHeight&&(o.minHeight=o.maxHeight,o.heightFrozen=!0),o}({sizeRestrictions:t,areaRestrictions:this.getAreaRestrictions({visibleArea:this.visibleArea,type:"resize"}),imageSize:this.imageSize,boundaries:this.boundaries,positionRestrictions:this.positionRestrictions,imageRestriction:this.imageRestriction,visibleArea:this.visibleArea,stencilSize:this.getStencilSize()}),this.visibleArea&&this.stencilSize){var e=this.getStencilSize(),i=ao(this.getAreaRestrictions({visibleArea:this.visibleArea,type:"resize"}));t.maxWidth=Math.min(t.maxWidth,i.width*e.width/this.boundaries.width),t.maxHeight=Math.min(t.maxHeight,i.height*e.height/this.boundaries.height),t.maxWidth<t.minWidth&&(t.minWidth=t.maxWidth),t.maxHeight<t.minHeight&&(t.minHeight=t.maxHeight)}return t}return{minWidth:0,minHeight:0,maxWidth:0,maxHeight:0}},positionRestrictions:function(){return this.positionRestrictionsAlgorithm({imageSize:this.imageSize,imageRestriction:this.imageRestriction})},classes:function(){return{cropper:es(),image:hr(es("image"),this.imageClass),stencil:es("stencil"),boundaries:hr(es("boundaries"),this.boundariesClass),stretcher:hr(es("stretcher")),background:hr(es("background"),this.backgroundClass),foreground:hr(es("foreground"),this.foregroundClass),imageWrapper:hr(es("image-wrapper")),cropperWrapper:hr(es("cropper-wrapper"))}},stencilCoordinates:function(){if(this.initialized){var t=this.coordinates,e=t.width,i=t.height,n=t.left,r=t.top;return{width:e/this.coefficient,height:i/this.coefficient,left:(n-this.visibleArea.left)/this.coefficient,top:(r-this.visibleArea.top)/this.coefficient}}return this.defaultCoordinates()},boundariesStyle:function(){var t={width:this.boundaries.width?"".concat(Math.round(this.boundaries.width),"px"):"auto",height:this.boundaries.height?"".concat(Math.round(this.boundaries.height),"px"):"auto",transition:"opacity ".concat(this.transitionTime,"ms"),pointerEvents:this.imageLoaded?"all":"none"};return this.imageLoaded||(t.opacity="0"),t},imageStyle:function(){var t=this.imageAttributes.width>this.imageAttributes.height?{width:Math.min(1024,this.imageAttributes.width),height:Math.min(1024,this.imageAttributes.width)/(this.imageAttributes.width/this.imageAttributes.height)}:{height:Math.min(1024,this.imageAttributes.height),width:Math.min(1024,this.imageAttributes.height)*(this.imageAttributes.width/this.imageAttributes.height)},e={left:(t.width-this.imageSize.width)/(2*this.coefficient),top:(t.height-this.imageSize.height)/(2*this.coefficient)},i={left:(1-1/this.coefficient)*t.width/2,top:(1-1/this.coefficient)*t.height/2},n=rr(rr({},this.imageTransforms),{},{scaleX:this.imageTransforms.scaleX*(this.imageAttributes.width/t.width),scaleY:this.imageTransforms.scaleY*(this.imageAttributes.height/t.height)}),r={width:"".concat(t.width,"px"),height:"".concat(t.height,"px"),left:"0px",top:"0px",transform:"translate(".concat(-e.left-i.left-this.imageTransforms.translateX,"px, ").concat(-e.top-i.top-this.imageTransforms.translateY,"px)")+Yo(n)};return this.transitionsOptions.enabled&&(r.transition="".concat(this.transitionsOptions.time,"ms ").concat(this.transitionsOptions.timingFunction)),r}},watch:{src:function(){this.onChangeImage()},stencilComponent:function(){var t=this;this.$nextTick((function(){t.resetCoordinates(),t.runAutoZoom("setCoordinates"),t.onChange()}))},minWidth:function(){this.onPropsChange()},maxWidth:function(){this.onPropsChange()},minHeight:function(){this.onPropsChange()},maxHeight:function(){this.onPropsChange()},imageRestriction:function(){this.reset()},stencilProps:function(t,e){["aspectRatio","minAspectRatio","maxAspectRatio"].find((function(i){return t[i]!==e[i]}))&&this.$nextTick(this.onPropsChange)}},created:function(){this.debouncedUpdate=dr(this.update,this.debounce),this.debouncedDisableTransitions=dr(this.disableTransitions,this.transitionsOptions.time),this.awaiting=!1},mounted:function(){this.$refs.image.addEventListener("load",this.onSuccessLoadImage),this.$refs.image.addEventListener("error",this.onFailLoadImage),this.onChangeImage(),window.addEventListener("resize",this.refresh),window.addEventListener("orientationchange",this.refresh)},destroyed:function(){window.removeEventListener("resize",this.refresh),window.removeEventListener("orientationchange",this.refresh),this.imageAttributes.revoke&&this.imageAttributes.src&&URL.revokeObjectURL(this.imageAttributes.src)},methods:{getResult:function(){var t=this.initialized?this.prepareResult(rr({},this.coordinates)):this.defaultCoordinates(),e={rotate:this.imageTransforms.rotate%360,flip:rr({},this.imageTransforms.flip)};if(this.src&&this.imageLoaded){var i=this;return{image:this.image,coordinates:t,visibleArea:this.visibleArea?rr({},this.visibleArea):null,imageTransforms:e,get canvas(){return i.canvas?(i.updateCanvas(),i.$refs.canvas):void 0}}}return{image:this.image,coordinates:t,visibleArea:this.visibleArea?rr({},this.visibleArea):null,canvas:void 0,imageTransforms:e}},zoom:function(t,e){var i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},n=i.transitions,r=void 0===n||n;this.onManipulateImage(new kr({},{factor:1/t,center:e}),{normalize:!1,transitions:r})},move:function(t,e){var i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},n=i.transitions,r=void 0===n||n;this.onManipulateImage(new kr({left:t||0,top:e||0}),{normalize:!1,transitions:r})},setCoordinates:function(t){var e=this,i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=i.autoZoom,r=void 0===n||n,o=i.transitions,s=void 0===o||o;this.$nextTick((function(){e.imageLoaded?e.transitionsActive||(s&&e.enableTransitions(),e.coordinates=e.applyTransform(t),r&&e.runAutoZoom("setCoordinates"),s&&e.debouncedDisableTransitions()):e.delayedTransforms=t}))},refresh:function(){var t=this.$refs.image;if(this.src&&t)return this.initialized?this.updateVisibleArea():this.reset()},reset:function(){return this.resetVisibleArea()},awaitRender:function(t){var e=this;this.awaiting||(this.awaiting=!0,this.$nextTick((function(){t(),e.awaiting=!1})))},prepareResult:function(t){return this.roundResult?function(t){var e=t.coordinates,i=t.sizeRestrictions,n=t.positionRestrictions,r={width:Math.round(e.width),height:Math.round(e.height),left:Math.round(e.left),top:Math.round(e.top)};return r.width>i.maxWidth?r.width=Math.floor(e.width):r.width<i.minWidth&&(r.width=Math.ceil(e.width)),r.height>i.maxHeight?r.height=Math.floor(e.height):r.height<i.minHeight&&(r.height=Math.ceil(e.height)),so(r,n)}(rr(rr({},this.getPublicProperties()),{},{positionRestrictions:_o(this.positionRestrictions,this.visibleArea),coordinates:t})):t},processAutoZoom:function(t,e,i,n){var r=this.autoZoomAlgorithm;r||(r=this.stencilSize?mo:this.autoZoom?yo:bo);var o=r({event:{type:t,params:n},visibleArea:e,coordinates:i,boundaries:this.boundaries,aspectRatio:this.getAspectRatio(),positionRestrictions:this.positionRestrictions,getAreaRestrictions:this.getAreaRestrictions,sizeRestrictions:this.sizeRestrictions,stencilSize:this.getStencilSize()});return rr(rr({},o),{},{changed:!Yr(o.visibleArea,e)||!Yr(o.coordinates,i)})},runAutoZoom:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},i=e.transitions,n=void 0!==i&&i,r=or(e,["transitions"]),o=this.processAutoZoom(t,this.visibleArea,this.coordinates,r),s=o.visibleArea,a=o.coordinates,c=o.changed;n&&c&&this.enableTransitions(),this.visibleArea=s,this.coordinates=a,n&&c&&this.debouncedDisableTransitions()},normalizeEvent:function(t){return function(t){var e=t.event,i=t.visibleArea,n=t.coefficient;if("manipulateImage"===e.type)return pr(pr({},e),{move:{left:e.move&&e.move.left?n*e.move.left:0,top:e.move&&e.move.top?n*e.move.top:0},scale:{factor:e.scale&&e.scale.factor?e.scale.factor:1,center:e.scale&&e.scale.center?{left:e.scale.center.left*n+i.left,top:e.scale.center.top*n+i.top}:null}});if("resize"===e.type){var r=pr(pr({},e),{directions:pr({},e.directions)});return Lr.forEach((function(t){r.directions[t]*=n})),r}if("move"===e.type){var o=pr(pr({},e),{directions:pr({},e.directions)});return Nr.forEach((function(t){o.directions[t]*=n})),o}return e}(rr(rr({},this.getPublicProperties()),{},{event:t}))},updateCanvas:function(){if(this.$refs.canvas){var t=this.$refs.canvas,e=this.$refs.image,i=0!==this.imageTransforms.rotate||this.imageTransforms.flip.horizontal||this.imageTransforms.flip.vertical?function(t,e,i){var n=i.rotate,r=i.flip,o={width:e.naturalWidth,height:e.naturalHeight},s=no(o,n),a=t.getContext("2d");t.height=s.height,t.width=s.width,a.save();var c=ro(Vr(pr({left:0,top:0},o)),n);return a.translate(-(c.left-s.width/2),-(c.top-s.height/2)),a.rotate(n*Math.PI/180),a.translate(r.horizontal?o.width:0,r.vertical?o.height:0),a.scale(r.horizontal?-1:1,r.vertical?-1:1),a.drawImage(e,0,0,o.width,o.height),a.restore(),t}(this.$refs.sourceCanvas,e,this.imageTransforms):e,n=rr({minWidth:0,minHeight:0,maxWidth:1/0,maxHeight:1/0,maxArea:this.maxCanvasSize,imageSmoothingEnabled:!0,imageSmoothingQuality:"medium"},this.canvas),r=po({sizeRestrictions:{minWidth:Cr(n.minWidth)?n.minWidth:0,minHeight:Cr(n.minHeight)?n.minHeight:0,maxWidth:Cr(n.maxWidth)?n.maxWidth:1/0,maxHeight:Cr(n.maxHeight)?n.maxHeight:1/0},width:this.coordinates.width,height:this.coordinates.height,aspectRatio:{minimum:this.coordinates.width/this.coordinates.height,maximum:this.coordinates.width/this.coordinates.height}});if(n.maxArea&&r.width*r.height>n.maxArea){var o=Math.sqrt(n.maxArea/(r.width*r.height));r={width:Math.round(o*r.width),height:Math.round(o*r.height)}}!function(t,e,i,n,r){t.width=n?n.width:i.width,t.height=n?n.height:i.height;var o=t.getContext("2d");r&&(r.imageSmoothingEnabled&&(o.imageSmoothingEnabled=r.imageSmoothingEnabled),r.imageSmoothingQuality&&(o.imageSmoothingQuality=r.imageSmoothingQuality)),o.clearRect(0,0,t.width,t.height),o.drawImage(e,i.left,i.top,i.width,i.height,0,0,t.width,t.height)}(t,i,this.coordinates,r)}},update:function(){this.$emit("change",this.getResult())},applyTransform:function(t){var e=arguments.length>1&&void 0!==arguments[1]&&arguments[1],i=this.visibleArea&&e?co(this.sizeRestrictions,this.visibleArea):this.sizeRestrictions,n=this.visibleArea&&e?_o(this.positionRestrictions,this.visibleArea):this.positionRestrictions;return vo({transform:t,coordinates:this.coordinates,imageSize:this.imageSize,sizeRestrictions:i,positionRestrictions:n,aspectRatio:this.getAspectRatio(),visibleArea:this.visibleArea})},resetCoordinates:function(){var t=this;if(this.$refs.image){this.$refs.cropper,this.$refs.image;var e=this.defaultSize;e||(e=this.stencilSize?xo:wo);var i=this.sizeRestrictions,n=(i.minWidth,i.minHeight,i.maxWidth,i.maxHeight,[yr(e)?e({boundaries:this.boundaries,imageSize:this.imageSize,aspectRatio:this.getAspectRatio(),sizeRestrictions:this.sizeRestrictions,stencilSize:this.getStencilSize(),visibleArea:this.visibleArea}):e,function(e){var i=e.coordinates;return rr({},yr(t.defaultPosition)?t.defaultPosition({coordinates:i,imageSize:t.imageSize,visibleArea:t.visibleArea}):t.defaultPosition)}]);this.delayedTransforms&&n.push.apply(n,sr(Array.isArray(this.delayedTransforms)?this.delayedTransforms:[this.delayedTransforms])),this.coordinates=this.applyTransform(n,!0),this.delayedTransforms=null}},clearImage:function(){var t=this;this.imageLoaded=!1,setTimeout((function(){var e=t.$refs.stretcher;e&&(e.style.height="auto",e.style.width="auto"),t.coordinates=t.defaultCoordinates(),t.boundaries={width:0,height:0}}),this.transitionTime)},enableTransitions:function(){this.transitions&&(this.transitionsActive=!0)},disableTransitions:function(){this.transitionsActive=!1},updateBoundaries:function(){var t=this,e=this.$refs.stretcher,i=this.$refs.cropper;return this.initStretcher({cropper:i,stretcher:e,imageSize:this.imageSize}),this.$nextTick().then((function(){var e={cropper:i,imageSize:t.imageSize};if(yr(t.defaultBoundaries)?t.boundaries=t.defaultBoundaries(e):"fit"===t.defaultBoundaries?t.boundaries=function(t){var e=t.cropper,i=t.imageSize,n=e.clientHeight,r=e.clientWidth,o=n,s=i.width*n/i.height;return s>r&&(s=r,o=i.height*r/i.width),{width:s,height:o}}(e):t.boundaries=function(t){var e=t.cropper;return{width:e.clientWidth,height:e.clientHeight}}(e),!t.boundaries.width||!t.boundaries.height)throw new Error("It's impossible to fit the cropper in the current container")}))},resetVisibleArea:function(){var t=this;return this.updateBoundaries().then((function(){var e,i,n,r,o,s;"visible-area"!==t.priority&&(t.visibleArea=null,t.resetCoordinates()),t.visibleArea=yr(t.defaultVisibleArea)?t.defaultVisibleArea({imageSize:t.imageSize,boundaries:t.boundaries,coordinates:"visible-area"!==t.priority?t.coordinates:null,getAreaRestrictions:t.getAreaRestrictions,stencilSize:t.getStencilSize()}):t.defaultVisibleArea,t.visibleArea=(e={visibleArea:t.visibleArea,boundaries:t.boundaries,getAreaRestrictions:t.getAreaRestrictions},i=e.visibleArea,n=e.boundaries,r=e.getAreaRestrictions,o=pr({},i),s=Jr(n),o.width/o.height!==s&&(o.height=o.width/s),so(o,r({visibleArea:o,type:"move"}))),"visible-area"===t.priority?t.resetCoordinates():t.coordinates=t.fitCoordinates({visibleArea:t.visibleArea,coordinates:t.coordinates,aspectRatio:t.getAspectRatio(),positionRestrictions:t.positionRestrictions,sizeRestrictions:t.sizeRestrictions}),t.runAutoZoom("resetVisibleArea")})).catch((function(){t.visibleArea=null}))},updateVisibleArea:function(){var t=this;return this.updateBoundaries().then((function(){t.visibleArea=t.fitVisibleArea({imageSize:t.imageSize,boundaries:t.boundaries,visibleArea:t.visibleArea,coordinates:t.coordinates,getAreaRestrictions:t.getAreaRestrictions}),t.coordinates=t.fitCoordinates({visibleArea:t.visibleArea,coordinates:t.coordinates,aspectRatio:t.getAspectRatio(),positionRestrictions:t.positionRestrictions,sizeRestrictions:t.sizeRestrictions}),t.runAutoZoom("updateVisibleArea")})).catch((function(){t.visibleArea=null}))},onChange:function(){var t=!(arguments.length>0&&void 0!==arguments[0])||arguments[0];this.$listeners&&this.$listeners.change&&(t&&this.debounce?this.debouncedUpdate():this.update())},onChangeImage:function(){var t,e=this;if(this.imageLoaded=!1,this.delayedTransforms=null,this.src){if(function(t){if(mr(t))return!1;var e=window.location,i=/(\w+:)?(?:\/\/)([\w.-]+)?(?::(\d+))?\/?/.exec(t)||[],n={protocol:i[1]||"",host:i[2]||"",port:i[3]||""},r=function(t){return t.port||("http"===(t.protocol||e.protocol)?80:433)};return!(!n.protocol&&!n.host&&!n.port||Boolean(n.protocol&&n.protocol==e.protocol&&n.host&&n.host==e.host&&n.host&&r(n)==r(e)))}(this.src)){var i=br(this.crossOrigin)?this.canvas:this.crossOrigin;!0===i&&(i="anonymous"),this.imageAttributes.crossOrigin=i}if(this.checkOrientation){var n=(t=this.src,new Promise((function(e){Ho(t).then((function(i){var n=Xo(i);e(i?{source:t,arrayBuffer:i,orientation:n}:{source:t,arrayBuffer:null,orientation:null})})).catch((function(i){console.warn(i),e({source:t,arrayBuffer:null,orientation:null})}))})));setTimeout((function(){n.then(e.onParseImage)}),this.transitionTime)}else setTimeout((function(){e.onParseImage({source:e.src})}),this.transitionTime)}else this.clearImage()},onFailLoadImage:function(){this.clearImage(),this.$emit("error")},onSuccessLoadImage:function(){var t=this,e=this.$refs.image;e&&!this.imageLoaded&&(this.imageAttributes.height=e.naturalHeight,this.imageAttributes.width=e.naturalWidth,this.imageLoaded=!0,this.reset().then((function(){t.$emit("ready"),t.onChange(!1)})))},onParseImage:function(t){var e=this,i=t.source,n=t.arrayBuffer,r=t.orientation;this.imageAttributes.revoke&&this.imageAttributes.src&&URL.revokeObjectURL(this.imageAttributes.src),this.imageAttributes.revoke=!1,n&&r&&r>1&&mr(i)?vr(i)?(this.imageAttributes.src=URL.createObjectURL(new Blob([n])),this.imageAttributes.revoke=!0):this.imageAttributes.src=function(t){for(var e=[],i=new Uint8Array(t);i.length>0;){var n=i.subarray(0,8192);e.push(String.fromCharCode.apply(null,Array.from?Array.from(n):n.slice())),i=i.subarray(8192)}return"data:image/jpeg;base64,"+btoa(e.join(""))}(n):this.imageAttributes.src=i,this.customImageTransforms={rotate:0,flip:{horizontal:!1,vertical:!1}},this.basicImageTransforms=rr(rr({},this.customImageTransforms),function(t){var e={flip:{horizontal:!1,vertical:!1},rotate:0};if(t)switch(t){case 2:e.flip.horizontal=!0;break;case 3:e.rotate=-180;break;case 4:e.flip.vertical=!0;break;case 5:e.rotate=90,e.flip.vertical=!0;break;case 6:e.rotate=90;break;case 7:e.rotate=90,e.flip.horizontal=!0;break;case 8:e.rotate=-90}return e}(r)),this.$nextTick((function(){var t=e.$refs.image;t&&t.complete&&(function(t){return Boolean(t.naturalWidth)}(t)?e.onSuccessLoadImage():e.onFailLoadImage())}))},onResizeEnd:function(){this.runAutoZoom("resize",{transitions:!0})},onMoveEnd:function(){this.runAutoZoom("move",{transitions:!0})},onMove:function(t){var e=this;this.transitionsOptions.enabled||this.awaitRender((function(){e.coordinates=e.moveAlgorithm(rr(rr({},e.getPublicProperties()),{},{positionRestrictions:_o(e.positionRestrictions,e.visibleArea),coordinates:e.coordinates,event:e.normalizeEvent(t)})),e.onChange()}))},onResize:function(t){var e=this;this.transitionsOptions.enabled||this.stencilSize&&!this.autoZoom||this.awaitRender((function(){var i=e.sizeRestrictions,n=Math.min(e.coordinates.width,e.coordinates.height,20*e.coefficient);e.coordinates=e.resizeAlgorithm(rr(rr({},e.getPublicProperties()),{},{positionRestrictions:_o(e.positionRestrictions,e.visibleArea),sizeRestrictions:{maxWidth:Math.min(i.maxWidth,e.visibleArea.width),maxHeight:Math.min(i.maxHeight,e.visibleArea.height),minWidth:Math.max(i.minWidth,n),minHeight:Math.max(i.minHeight,n)},event:e.normalizeEvent(t)})),e.onChange(),e.ticking=!1}))},onManipulateImage:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};if(!this.transitionsOptions.enabled){var i=e.transitions,n=void 0!==i&&i,r=e.normalize,o=void 0===r||r;n&&this.enableTransitions();var s=So(rr(rr({},this.getPublicProperties()),{},{event:o?this.normalizeEvent(t):t,getAreaRestrictions:this.getAreaRestrictions,imageRestriction:this.imageRestriction,adjustStencil:!this.stencilSize&&this.settings.resizeImage.adjustStencil})),a=s.visibleArea,c=s.coordinates;this.visibleArea=a,this.coordinates=c,this.runAutoZoom("manipulateImage"),this.onChange(),n&&this.debouncedDisableTransitions()}},onPropsChange:function(){this.coordinates=this.applyTransform(this.coordinates,!0),this.onChange(!1)},getAreaRestrictions:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},e=t.visibleArea,i=t.type,n=void 0===i?"move":i;return this.areaRestrictionsAlgorithm({boundaries:this.boundaries,imageSize:this.imageSize,imageRestriction:this.imageRestriction,visibleArea:e,type:n})},getAspectRatio:function(t){var e,i,n=this.stencilProps,r=n.aspectRatio,o=n.minAspectRatio,s=n.maxAspectRatio;if(this.$refs.stencil.aspectRatios){var a=this.$refs.stencil.aspectRatios();e=a.minimum,i=a.maximum}if(br(e)&&(e=br(r)?o:r),br(i)&&(i=br(r)?s:r),!t&&(br(e)||br(i))){var c=this.getStencilSize(),l=c?Jr(c):null;br(e)&&(e=Sr(l)?l:void 0),br(i)&&(i=Sr(l)?l:void 0)}return{minimum:e,maximum:i}},getStencilSize:function(){if(this.stencilSize)return t={currentStencilSize:{width:this.stencilCoordinates.width,height:this.stencilCoordinates.height},stencilSize:this.stencilSize,boundaries:this.boundaries,coefficient:this.coefficient,coordinates:this.coordinates,aspectRatio:this.getAspectRatio(!0)},e=t.boundaries,i=t.stencilSize,n=t.aspectRatio,eo(Jr(r=yr(i)?i({boundaries:e,aspectRatio:n}):i),n)&&(r=po({sizeRestrictions:{maxWidth:e.width,maxHeight:e.height,minWidth:0,minHeight:0},width:r.width,height:r.height,aspectRatio:{minimum:n.minimum,maximum:n.maximum}})),(r.width>e.width||r.height>e.height)&&(r=po({sizeRestrictions:{maxWidth:e.width,maxHeight:e.height,minWidth:0,minHeight:0},width:r.width,height:r.height,aspectRatio:{minimum:Jr(r),maximum:Jr(r)}})),r;var t,e,i,n,r},getPublicProperties:function(){return{coefficient:this.coefficient,visibleArea:this.visibleArea,coordinates:this.coordinates,boundaries:this.boundaries,sizeRestrictions:this.sizeRestrictions,positionRestrictions:this.positionRestrictions,aspectRatio:this.getAspectRatio(),imageRestriction:this.imageRestriction}},defaultCoordinates:function(){return rr({},Hr)},flip:function(t,e){var i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},n=i.transitions,r=void 0===n||n;if(!this.transitionsActive){r&&this.enableTransitions();var o=rr({},this.imageTransforms.flip),s=To({flip:{horizontal:t?!o.horizontal:o.horizontal,vertical:e?!o.vertical:o.vertical},previousFlip:o,rotate:this.imageTransforms.rotate,visibleArea:this.visibleArea,coordinates:this.coordinates,imageSize:this.imageSize,positionRestrictions:this.positionRestrictions,sizeRestrictions:this.sizeRestrictions,getAreaRestrictions:this.getAreaRestrictions,aspectRatio:this.getAspectRatio()}),a=s.visibleArea,c=s.coordinates;t&&(this.customImageTransforms.flip.horizontal=!this.customImageTransforms.flip.horizontal),e&&(this.customImageTransforms.flip.vertical=!this.customImageTransforms.flip.vertical),this.visibleArea=a,this.coordinates=c,this.onChange(),r&&this.debouncedDisableTransitions()}},rotate:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},i=e.transitions,n=void 0===i||i;if(!this.transitionsActive){n&&this.enableTransitions();var r=rr({},this.imageSize);this.customImageTransforms.rotate+=t;var o=Co({visibleArea:this.visibleArea,coordinates:this.coordinates,previousImageSize:r,imageSize:this.imageSize,angle:t,positionRestrictions:this.positionRestrictions,sizeRestrictions:this.sizeRestrictions,getAreaRestrictions:this.getAreaRestrictions,aspectRatio:this.getAspectRatio()}),s=o.visibleArea,a=o.coordinates,c=this.processAutoZoom("rotateImage",s,a);s=c.visibleArea,a=c.coordinates,this.visibleArea=s,this.coordinates=a,this.onChange(),n&&this.debouncedDisableTransitions()}}}},void 0,!1,void 0,!1,void 0,void 0,void 0);_.a.component("cropper",is),_.a.component("rectangle-stencil",Jo),_.a.component("circle-stencil",ts),_.a.component("simple-handler",Po),_.a.component("simple-line",jo);i("f7aa");var ns=function(t){var e={icon:"rotate_left",label:"Rotate left",rounded:!0,name:"vuoz:cropper:rotate:left",target:t,onDown:function(t){t.rotate(-90)}},i={icon:"rotate_right",label:"Rotate right",rounded:!0,name:"vuoz:cropper:rotate:right",target:t,onDown:function(t){t.rotate(90)}},n={icon:"flip",label:"Flip horizontal",rounded:!0,name:"vuoz:toolbar:flip:horizontal",target:t,onDown:function(t){t.flip(!0,!1)}},r={icon:"<div style='transform: rotate(-90deg);'>flip</span>",label:"Flip vertical",rounded:!0,name:"vuoz:toolbar:flip:vertical",target:t,onDown:function(t){t.flip(!1,!0)}},o={icon:"refresh",label:"Reset",rounded:!0,name:"vuoz:toolbar:reset",target:t,onDown:function(t){t.reset()}};return[e,i,{role:"separator"},n,r,{role:"spacer"},o]},rs=function(t){f(i,t);var e=b(i);function i(){var t;return c(this,i),t=e.apply(this,arguments),t.toolbarItems=ns(m(t)),t.stencilComponent=Jo,t.handlers={eastNorth:!0,north:!0,westNorth:!0,west:!0,westSouth:!0,south:!0,eastSouth:!0,east:!0},t.handlersClasses={default:"vuoz-cropper-handler",eastNorth:"vuoz-cropper-handler--east-north",westNorth:"vuoz-cropper-handler--west-north",eastSouth:"vuoz-cropper-handler--east-south",westSouth:"vuoz-cropper-handler--west-south"},t.lines={north:!0,west:!0,south:!0,east:!0},t.img="",t}return h(i,[{key:"onSrcChange",value:function(){var t=this;this.$nextTick((function(){t.img=t.src}))}},{key:"onStencilChange",value:function(){switch(this.stencil){case"rectangle":this.stencilComponent=Jo,this.showHandlers&&(this.lines={north:!0,west:!0,south:!0,east:!0});break;case"circle":this.stencilComponent=ts,this.lines={north:!1,west:!1,south:!1,east:!1};break}}},{key:"onHandlersChange",value:function(){!0===this.showHandlers?"rectangle"===this.stencil?(this.handlers={eastNorth:!0,north:!0,westNorth:!0,west:!0,westSouth:!0,south:!0,eastSouth:!0,east:!0},this.lines={north:!0,west:!0,south:!0,east:!0}):this.handlers={eastNorth:!1,north:!0,westNorth:!1,west:!0,westSouth:!1,south:!0,eastSouth:!1,east:!0}:(this.handlers={eastNorth:!1,north:!1,westNorth:!1,west:!1,westSouth:!1,south:!1,eastSouth:!1,east:!1},this.lines={north:!1,west:!1,south:!1,east:!1})}},{key:"onChange",value:function(t){this.$emit("change",{coordinates:t.coordinates,canvas:t.canvas})}},{key:"refresh",value:function(){this.$refs.cropper.refresh()}},{key:"reset",value:function(){this.$refs.cropper.reset()}},{key:"rotate",value:function(t){this.$refs.cropper.rotate(t)}},{key:"flip",value:function(t,e){this.$refs.cropper.flip(t,e)}},{key:"getResult",value:function(){return this.$refs.cropper.getResult()}}]),i}(_.a);w([V({type:String})],rs.prototype,"cropperClass",void 0),w([V({type:String,required:!0})],rs.prototype,"src",void 0),w([V({type:String,default:"rectangle"})],rs.prototype,"stencil",void 0),w([V({type:Boolean,default:!0})],rs.prototype,"showHandlers",void 0),w([V({type:Boolean,default:!0})],rs.prototype,"showToolbar",void 0),w([V({type:Object,default:function(){return{}}})],rs.prototype,"options",void 0),w([G("src",{immediate:!0})],rs.prototype,"onSrcChange",null),w([G("stencil",{immediate:!0})],rs.prototype,"onStencilChange",null),w([G("showHandlers",{immediate:!0})],rs.prototype,"onHandlersChange",null),rs=w([Y({name:"VuozCropper",components:{Cropper:is,CircleStencil:ts,RectangleStencil:Jo,VuozToolbar:er}})],rs);var os=rs,ss=os,as=(i("b0f7"),on(ss,Xn,Un,!1,null,null,null)),cs=as.exports,ls=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"vuoz-loading__bar is-fullwidth has-background-medium-grey",class:"is-"+t.size},[i("div",{ref:"progress",staticClass:"vuoz-loading__bar-progress",class:"is-"+t.size})])},hs=[],us=(i("a9e3"),function(t){f(i,t);var e=b(i);function i(){return c(this,i),e.apply(this,arguments)}return h(i,[{key:"onProgressChange",value:function(){this.$refs.progress.style.setProperty("--vuoz-progress__bar","".concat(Math.ceil(100*this.progress),"%"))}}]),i}(_.a));w([V({type:String,default:"normal"})],us.prototype,"size",void 0),w([V({type:Number,required:!0})],us.prototype,"progress",void 0),w([G("progress")],us.prototype,"onProgressChange",null),us=w([Y({name:"VuozLoadingBar"})],us);var fs=us,ds=fs,ps=(i("e679"),on(ds,ls,hs,!1,null,"2d914f95",null)),gs=ps.exports,vs=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"vuoz-tabs has-background-darker-grey"},[i("vuoz-tab-bar",{attrs:{size:t.size,showAdd:t.showAdd,draggable:t.draggable,tabs:t.tabs,selected:t.selected},on:{select:t.onSelect,close:t.onClose,addtab:t.onAddTab,dragged:t.onTabDragged}}),i("keep-alive",[i("vuoz-tab-content",{key:t.getKey(),attrs:{selected:t.selected,component:t.getComponent(),content:t.getContent()}})],1)],1)},ms=[],ys=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"vuoz-tab-bar",class:t.getClasses()},[i("div",{staticClass:"vuoz-tabs-container"},[i("draggable",{staticClass:"draggable",attrs:{value:t.tabs,delayOnTouchOnly:"true",draggable:".vuoz-tab",filter:".not-draggable",disabled:!this.draggable},on:{start:t.onStartDrag,end:t.onEndDrag}},[t._l(t.tabs,(function(e,n){return[i("vuoz-tab",{key:e.id,attrs:{title:e.title,id:e.id,selected:t.selected===e.id,closable:e.closable,divider:t.selected!==e.id&&void 0!==t.tabs[n+1]&&t.tabs[n+1].id!==t.selected||t.selected!==e.id&&n===t.tabs.length-1},on:{select:t.onSelect,close:t.onClose}})]}))],2),!0===t.showAdd?i("div",{staticClass:"plus-button not-draggable"},[i("vuoz-button",{attrs:{type:"push",size:t.getButtonSize(),border:!1,shape:"circle",color:"transparent"},on:{click:t.onAddTab},scopedSlots:t._u([{key:"shaped",fn:function(){return[i("span",{staticClass:"material-icons"},[t._v("add")])]},proxy:!0}],null,!1,2481801972)})],1):t._e()],1)])},bs=[],ws=i("b76a"),xs=i.n(ws),_s=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"vuoz-tab",class:t.getClasses(),on:{mousedown:t.onSelect}},[i("div",{staticClass:"title"},[t._v(t._s(t.title))]),!0===t.selected&&!0===t.closable?i("div",{staticClass:"close",on:{click:function(e){return e.stopPropagation(),t.onClose(e)}}},[i("vuoz-button",{attrs:{type:"push",size:"tiny",shape:"square",color:"transparent"},scopedSlots:t._u([{key:"shaped",fn:function(){return[i("span",{staticClass:"material-icons"},[t._v("close")])]},proxy:!0}],null,!1,1373312195)})],1):t._e(),!t.selected&&t.divider?i("div",{staticClass:"divider"}):t._e()])},Ss=[],Cs=function(t){f(i,t);var e=b(i);function i(){return c(this,i),e.apply(this,arguments)}return h(i,[{key:"getClasses",value:function(){var t="";return this.selected&&(t+="is-selected"),t}},{key:"onSelect",value:function(){this.$emit("select",this.id)}},{key:"onClose",value:function(){this.$emit("close",this.id)}}]),i}(_.a);w([V({type:String,required:!0})],Cs.prototype,"title",void 0),w([V({type:String,default:"small"})],Cs.prototype,"size",void 0),w([V({type:[String,Number],required:!0})],Cs.prototype,"id",void 0),w([V({type:Boolean,default:!1})],Cs.prototype,"selected",void 0),w([V({type:Boolean,default:!0})],Cs.prototype,"closable",void 0),w([V({type:Boolean,default:!0})],Cs.prototype,"divider",void 0),Cs=w([Y({name:"VuozTab",components:{VuozButton:dn}})],Cs);var Ts=Cs,Os=Ts,ks=on(Os,_s,Ss,!1,null,null,null),Es=ks.exports,As=function(t){f(i,t);var e=b(i);function i(){return c(this,i),e.apply(this,arguments)}return h(i,[{key:"getClasses",value:function(){var t="is-".concat(this.size);return t+="",t}},{key:"getButtonSize",value:function(){var t="tiny";switch(this.size){case"small":t="tiny";break;case"normal":t="small";break;case"large":t="normal";break}return t}},{key:"onSelect",value:function(t){this.$emit("select",t)}},{key:"onClose",value:function(t){this.$emit("close",t)}},{key:"onAddTab",value:function(){this.$emit("addtab")}},{key:"onStartDrag",value:function(t){}},{key:"onEndDrag",value:function(t){var e=t.oldIndex,i=t.newIndex;this.$emit("dragged",{oldIndex:e,newIndex:i})}}]),i}(_.a);w([V({type:String,default:"normal"})],As.prototype,"size",void 0),w([V({type:Boolean,default:!0})],As.prototype,"showAdd",void 0),w([V({type:Boolean,default:!0})],As.prototype,"draggable",void 0),w([V({type:Array,default:[]})],As.prototype,"tabs",void 0),w([V({type:Number,default:0})],As.prototype,"selected",void 0),As=w([Y({name:"VuozTabBar",components:{Draggable:xs.a,VuozTab:Es,VuozButton:dn}})],As);var Ps=As,Ds=Ps,Ms=on(Ds,ys,bs,!1,null,null,null),js=Ms.exports,Rs=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"vuoz-tab-content has-border-left-medium-grey"},[t.component?i(t.component.object,t._b({key:t.component.key,tag:"component"},"component",t.component.props,!1)):t._e(),t.component?t._e():i("div",[t._v(t._s(t.content))])],1)},Is=[],zs=function(t){f(i,t);var e=b(i);function i(){return c(this,i),e.apply(this,arguments)}return i}(_.a);w([V({type:[Object,String]})],zs.prototype,"component",void 0),w([V({type:String,default:"No content"})],zs.prototype,"content",void 0),zs=w([Y({name:"VuozTabContent"})],zs);var Ls=zs,Fs=Ls,Bs=on(Fs,Rs,Is,!1,null,null,null),Ns=Bs.exports,Ws=function(t){f(i,t);var e=b(i);function i(){var t;return c(this,i),t=e.apply(this,arguments),t.selected=-1,t}return h(i,[{key:"onTabsChanged",value:function(){this.tabs.length>0&&(this.selected<0||this.tabs.length<=this.selected)&&(this.selected=this.tabs[0].id)}},{key:"onSelectChanged",value:function(){this.tabs.length>0&&this.select<this.tabs.length&&(this.selected=this.select)}},{key:"created",value:function(){this.tabs.length>0&&(this.selected=this.tabs[0].id)}},{key:"getComponent",value:function(){var t=this;if(this.tabs.length>0){var e=this.tabs.find((function(e){return e.id===t.selected}));if(e&&e.component)return e.component.key=e.id,e.component}return null}},{key:"getContent",value:function(){var t=this;if(this.tabs.length>0){var e=this.tabs.find((function(e){return e.id===t.selected}));return void 0!==e?e.content:null}return this.placeholder}},{key:"getKey",value:function(){var t=this;if(this.tabs.length>0){var e=this.tabs.find((function(e){return e.id===t.selected}));return e?e.id:-1}return-1}},{key:"onSelect",value:function(t){this.selected=t,this.$emit("select",t)}},{key:"onClose",value:function(t){if(this.selected===t){var e=this.tabs.find((function(e){return e.id===t}));if(void 0===e)throw new TypeError("No corresponding tab to close.");var i=this.tabs.indexOf(e);i>0?this.selected=this.tabs[i-1].id:this.tabs.length>1&&(this.selected=this.tabs[i+1].id)}this.$emit("close",t)}},{key:"onAddTab",value:function(){var t=this;this.$emit("addtab"),this.$nextTick((function(){t.selected=t.tabs[t.tabs.length-1].id}))}},{key:"onTabDragged",value:function(t){this.$emit("dragged",t)}}]),i}(_.a);w([V({type:String,default:"normal"})],Ws.prototype,"size",void 0),w([V({type:Boolean,default:!0})],Ws.prototype,"showAdd",void 0),w([V({type:Boolean,default:!0})],Ws.prototype,"draggable",void 0),w([V({type:Array,default:function(){return[]}})],Ws.prototype,"tabs",void 0),w([V({type:Number})],Ws.prototype,"select",void 0),w([V({type:String,default:"No tab"})],Ws.prototype,"placeholder",void 0),w([G("tabs",{immediate:!0})],Ws.prototype,"onTabsChanged",null),w([G("select",{immediate:!0})],Ws.prototype,"onSelectChanged",null),Ws=w([Y({name:"VuozTabs",components:{VuozTabBar:js,VuozTabContent:Ns}})],Ws);var Hs=Ws,Ys=Hs,Xs=on(Ys,vs,ms,!1,null,null,null),Us=Xs.exports,Vs=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"vuoz-console__container",class:"has-toolbar-"+t.toolbarPosition},[!0!==t.toolbar||"left"!==t.toolbarPosition&&"top"!==t.toolbarPosition?t._e():i("div",[i("vuoz-toolbar",{attrs:{type:"fixed",position:t.toolbarPosition,border:t.toolbarBorder,size:"small"===t.size?"tiny":"small",items:t.toolbarItems},on:{click:t.onToolbar}})],1),i("div",{ref:"console",staticClass:"vuoz-console__content flex-grow"},["table"===t.type?[i("table",{staticClass:"vuoz-table"},[i("colgroup",[!0===t.date?i("col",{attrs:{span:"1"}}):t._e(),i("col",{attrs:{span:"1"}}),!0===t.showCaller?i("col",{attrs:{span:"1"}}):t._e()]),i("tbody",[t._l(t.lines,(function(e,n){return[i("vuoz-console-item",{attrs:{line:e,size:t.size,caller:t.showCaller,date:t.date,format:t.format,bordered:t.bordered}})]}))],2)])]:t._e(),"stack"===t.type?t._l(t.lines,(function(e,n){return i("div",{staticClass:"flex-grow",class:t.getStackLineClasses()},[t._v(t._s(e.content))])})):t._e()],2),!0!==t.toolbar||"right"!==t.toolbarPosition&&"bottom"!==t.toolbarPosition?t._e():i("div",[i("vuoz-toolbar",{attrs:{type:"fixed",position:t.toolbarPosition,border:t.toolbarBorder,size:"small"===t.size?"tiny":"small",items:t.toolbarItems},on:{click:t.onToolbar}})],1)])},Gs=[],$s=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("tr",{class:t.getClasses("main")},[!0===t.date?i("td",[i("div",{staticClass:"accessory-cell",class:t.getClasses("time:content")},[t._v(t._s(t.getFormattedDate()))])]):t._e(),i("td",{staticClass:"flex-grow"},[i("div",{staticClass:"has-text-regular",class:t.getClasses("line:content")},[t._v(t._s(t.getContent()))])]),!0===t.caller?i("td",[t.line.caller?i("div",{staticClass:"accessory-cell",class:t.getClasses("caller")},[t._v(t._s(t.line.caller))]):t._e()]):t._e()])},qs=[],Ks=(i("25f0"),function(t){f(i,t);var e=b(i);function i(){return c(this,i),e.apply(this,arguments)}return h(i,[{key:"parseDays",value:function(t){var e=t.getFullYear().toString();return e+="/".concat(this.formatToTen(t.getMonth()+1)),e+="/".concat(this.formatToTen(t.getDate())),e}},{key:"parseTime",value:function(t){var e=""+"".concat(this.formatToTen(t.getHours()),":")+"".concat(this.formatToTen(t.getMinutes()),":")+"".concat(this.formatToTen(t.getSeconds()),":")+"".concat(this.formatToHundred(t.getMilliseconds()));return e}},{key:"parseFullReadable",value:function(t){return"".concat(this.parseDays(t),"-").concat(this.parseTime(t))}},{key:"parseMilliseconds",value:function(t){var e=t/36e5,i=Math.floor(e),n=this.formatToTen(i),r=60*(e-i),o=Math.floor(r),s=this.formatToTen(o),a=60*(r-o),c=Math.floor(a),l=this.formatToTen(c),h=1e3*(a-c),u=Math.floor(h),f=this.formatToHundred(u);return n+":"+s+":"+l+":"+f}},{key:"formatToTen",value:function(t){return t>9?t:"0"+t}},{key:"formatToHundred",value:function(t){return(t>99?t:t>9?"0"+t:"00"+t).toString()}}]),i}(_.a));Ks=w([Y],Ks);var Zs=function(t){f(i,t);var e=b(i);function i(){return c(this,i),e.apply(this,arguments)}return h(i,[{key:"created",value:function(){}},{key:"getClasses",value:function(t){switch(t){case"main":return"item-height-".concat(this.size," ").concat(this.bordered?"has-border-bottom-medium-grey":"");case"line:content":switch(this.size){case"small":return"has-text-small has-padding-left-sm has-padding-right-sm";case"normal":return"has-text-normal has-padding-left-ms has-padding-right-ms";case"large":return"has-text-large has-padding-left-md has-padding-right-md"}break;case"time:content":var e="";switch(this.size){case"small":e+="has-text-mono-ultra-small has-padding-left-s has-padding-right-s has-padding-top-xxs has-padding-bottom-xxs has-margin-left-s"+" time-line-height-".concat(this.size);break;case"normal":e+="has-text-mono-small has-padding-left-sm has-padding-right-sm has-padding-top-xxs has-padding-bottom-xxs has-margin-left-sm"+" time-line-height-".concat(this.size);break;case"large":e+="has-text-mono-normal has-padding-left-ms has-padding-right-ms has-padding-top-xs has-padding-bottom-xs has-margin-left-ms"+" time-line-height-".concat(this.size);break}return e;case"caller":var i="";switch(this.size){case"small":i+="has-text-mono-ultra-small has-padding-left-s has-padding-right-s has-padding-top-xxs has-padding-bottom-xxs has-margin-right-s";break;case"normal":i+="has-text-mono-small has-padding-left-sm has-padding-right-sm has-padding-top-xxs has-padding-bottom-xxs has-margin-right-sm";break;case"large":i+="has-text-mono-normal has-padding-left-ms has-padding-right-ms has-padding-top-xs has-padding-bottom-xs has-margin-right-ms";break}return i}}},{key:"getContent",value:function(){return this.line.content}},{key:"getFormattedDate",value:function(){switch(this.format){case"readable":return this.parseFullReadable(this.line.date);case"time":return this.parseTime(this.line.date);case"interval":var t=this.$parent,e=t.lines,i=e.indexOf(this.line),n=t.sort;switch(n){case"asc":var r=0;if(i-1>=0){var o=e[i-1].date;r=this.line.date.getTime()-o.getTime()}return this.parseMilliseconds(r);case"desc":var s=0;if(i+1<e.length){var a=e[i+1].date;s=this.line.date.getTime()-a.getTime()}return this.parseMilliseconds(s)}break;case"iso":return this.line.date.toISOString();default:case"raw":return this.line.date.toString()}}}]),i}(I(_.a,Ks));w([V({type:String,default:"normal"})],Zs.prototype,"size",void 0),w([V({type:String,default:"darker-grey"})],Zs.prototype,"color",void 0),w([V({type:Object,required:!0})],Zs.prototype,"line",void 0),w([V({type:Boolean,default:!0})],Zs.prototype,"caller",void 0),w([V({type:Boolean,default:!0})],Zs.prototype,"date",void 0),w([V({type:Boolean,default:!0})],Zs.prototype,"bordered",void 0),w([V({type:String,default:"iso"})],Zs.prototype,"format",void 0),Zs=w([Y({name:"VuozConsoleItem"})],Zs);var Js=Zs,Qs=Js,ta=on(Qs,$s,qs,!1,null,null,null),ea=ta.exports,ia={border:!0,rounded:!0,buttons:[{icon:"swap_vert",label:"Sort",name:"vuoz:console:sort"},{icon:"functions",label:"Show / Hide caller",type:"toggle",toggle:"secondary",toggled:!0,name:"vuoz:console:caller"},{role:"spacer"},{icon:"save",label:"Save",name:"vuoz:toolbar:save"}]},na=function(t){f(i,t);var e=b(i);function i(){var t;return c(this,i),t=e.apply(this,arguments),t.lines=[],t.order="asc",t.showCaller=!0,t.toolbarItems=ia,t}return h(i,[{key:"onSortChanged",value:function(){this.order=this.sort,this.sortLines()}},{key:"onCallerChanged",value:function(){this.showCaller=this.caller}},{key:"getStackLineClasses",value:function(){var t="";switch(this.size){case"small":t+="has-text-small has-padding-left-s has-padding-right-s has-padding-top-xxs has-padding-bottom-xxs has-margin-left-s has-margin-right-s"+" time-line-height-".concat(this.size);break;case"normal":t+="has-text-normal has-padding-left-sm has-padding-right-sm has-padding-top-xxs has-padding-bottom-xxs has-margin-left-sm has-margin-right-sm"+" time-line-height-".concat(this.size);break;case"large":t+="has-text-large has-padding-left-ms has-padding-right-ms has-padding-top-xs has-padding-bottom-xs has-margin-left-ms has-margin-right-ms"+" time-line-height-".concat(this.size);break}return t}},{key:"sortLines",value:function(){"desc"===this.order?this.lines.sort((function(t,e){return new Date(e.date)-new Date(t.date)})):this.lines.sort((function(t,e){return new Date(t.date)-new Date(e.date)}))}},{key:"push",value:function(t){var e=this.$refs.console;"desc"===this.order?(this.lines.push(t),this.$nextTick((function(){e.scrollTop=0}))):(this.lines.splice(0,0,t),this.$nextTick((function(){e.scrollTop=e.scrollHeight}))),this.sortLines()}},{key:"replaceLast",value:function(t){var e=this.$refs.console;"desc"===this.order?(this.lines.splice(0,1,t),this.$nextTick((function(){e.scrollTop=0}))):(this.lines.splice(this.lines.length-1,1,t),this.$nextTick((function(){e.scrollTop=e.scrollHeight}))),this.sortLines()}},{key:"onToolbar",value:function(t,e){switch(t){case"vuoz:console:sort":if(e){this.order="asc"===this.order?"desc":"asc";var i=this.$refs.console;"desc"===this.order?this.$nextTick((function(){i.scrollTop=0})):this.$nextTick((function(){i.scrollTop=i.scrollHeight})),this.sortLines()}break;case"vuoz:console:caller":this.showCaller=e;break}}}]),i}(_.a);w([V({type:String,default:"table"})],na.prototype,"type",void 0),w([V({type:Boolean,default:!0})],na.prototype,"toolbar",void 0),w([V({type:String,default:"top"})],na.prototype,"toolbarPosition",void 0),w([V({type:String,default:"medium-grey"})],na.prototype,"toolbarBorder",void 0),w([V({type:String,default:"small"})],na.prototype,"size",void 0),w([V({type:String,default:"asc"})],na.prototype,"sort",void 0),w([V({type:Boolean,default:!0})],na.prototype,"caller",void 0),w([V({type:Boolean,default:!0})],na.prototype,"bordered",void 0),w([V({type:Boolean,default:!0})],na.prototype,"date",void 0),w([V({type:String,default:"iso"})],na.prototype,"format",void 0),w([G("sort",{immediate:!0})],na.prototype,"onSortChanged",null),w([G("caller",{immediate:!0})],na.prototype,"onCallerChanged",null),na=w([Y({name:"VuozConsole",components:{VuozConsoleItem:ea,VuozToolbar:er}})],na);var ra=na,oa=ra,sa=on(oa,Vs,Gs,!1,null,null,null),aa=sa.exports,ca=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{ref:"container",staticClass:"vuoz-split-view__container",class:{"is-vertical":"vertical"===t.direction,"is-horizontal":"horizontal"===t.direction,dragging:!0===t.dragging},on:{mousemove:t.onMouseMove,mouseup:t.onMouseUp}},[i("div",{ref:"first",staticClass:"vuoz-split-view__view is-flex flex-grow",staticStyle:{position:"relative"}},[i("div",{staticStyle:{width:"100%",height:"100%"}},[t._t("first",[t._v("First")])],2)]),i("div",{ref:"second",staticClass:"vuoz-split-view__view is-flex flex-grow",staticStyle:{position:"relative"}},[i("div",{staticStyle:{width:"100%",height:"100%"}},[t._t("second",[t._v("Second")])],2)]),i("div",{ref:"separator",staticClass:"vuoz-split-view__separator",class:{"is-vertical":"vertical"===t.direction,"is-horizontal":"horizontal"===t.direction,hovered:!0===t.hovered||!0===t.dragging},on:{mousedown:t.onSeparatorMouseDown,mouseover:function(e){return t.onToggleOver(!0)},mouseout:function(e){return t.onToggleOver(!1)},mouseup:t.onMouseUp}},[i("div",{ref:"displayed",staticClass:"vuoz-split-view__separator-displayed",on:{mousedown:t.onSeparatorMouseDown,mouseup:t.onMouseUp}})])])},la=[],ha=function(t){f(i,t);var e=b(i);function i(){var t;return c(this,i),t=e.apply(this,arguments),t.hovered=!1,t.dragging=!1,t.limits={min:0,max:100},t}return h(i,[{key:"onDirectionChanged",value:function(){var t=this;this.$nextTick((function(){t.setup()}))}},{key:"onActiveSizeChanged",value:function(){var t=this;this.$nextTick((function(){t.setup()}))}},{key:"onSettingsChanged",value:function(){var t=this;this.$nextTick((function(){t.setup()}))}},{key:"created",value:function(){window.addEventListener("resize",this.setup)}},{key:"beforeDestroy",value:function(){window.removeEventListener("resize",this.setup)}},{key:"onToggleOver",value:function(t){this.hovered=t}},{key:"onSeparatorMouseDown",value:function(t){if(0===t.button){this.dragging=!0;var e=this.$refs.first,i=this.$refs.second;e.classList.add("vuoz-split-view__unselectable"),i.classList.add("vuoz-split-view__unselectable")}}},{key:"onMouseUp",value:function(){if(this.dragging){this.dragging=!1;var t,e,i=this.$refs.container,n=this.$refs.first,r=this.$refs.second;switch(n.classList.remove("vuoz-split-view__unselectable"),r.classList.remove("vuoz-split-view__unselectable"),this.direction){case"vertical":t=n.clientWidth,e=t/i.clientWidth*100;break;case"horizontal":t=n.clientHeight,e=t/i.clientHeight*100;break}this.$emit("change",{pixels:t,percents:e})}}},{key:"onMouseMove",value:function(t){if(this.dragging){var e=this.$refs.container;switch(this.direction){case"vertical":var i=t.clientX/e.clientWidth*100;if(i>this.limits.min&&i<this.limits.max){var n=100-i;this.setSeparatorPosition(t.clientX-this.activeSize/2),this.setItemsPosition("width",i,n)}break;case"horizontal":var r=t.clientY/e.clientHeight*100;if(r>this.limits.min&&r<this.limits.max){var o=100-r;this.setSeparatorPosition(t.clientY-this.activeSize/2),this.setItemsPosition("height",r,o)}break}}}},{key:"setup",value:function(){var t=this;this.parseSettings();var e=this.$refs.separator,i=this.$refs.first,n=this.$refs.second;i.style.removeProperty("min-width"),i.style.removeProperty("max-width"),i.style.removeProperty("width"),i.style.removeProperty("min-height"),i.style.removeProperty("max-height"),i.style.removeProperty("height"),n.style.removeProperty("min-width"),n.style.removeProperty("max-width"),n.style.removeProperty("width"),n.style.removeProperty("min-height"),n.style.removeProperty("max-height"),n.style.removeProperty("height");var r,o=this.limits.min+(this.limits.max-this.limits.min)/2;switch(this.direction){case"vertical":this.setItemsPosition("width",o,100-o),this.$nextTick((function(){var o=t.$refs.first;r=o.clientWidth-t.activeSize/2,e.style.setProperty("width","".concat(t.activeSize,"px")),e.style.setProperty("height","100%"),e.style.setProperty("cursor","col-resize"),i.style.setProperty("min-width","".concat(t.limits.min,"%")),i.style.setProperty("max-width","".concat(t.limits.max,"%")),i.style.setProperty("height","100%"),n.style.setProperty("height","100%"),t.setSeparatorPosition(r)}));break;case"horizontal":this.setItemsPosition("height",o,100-o),this.$nextTick((function(){var o=t.$refs.first;r=o.clientHeight-t.activeSize/2,e.style.setProperty("height","".concat(t.activeSize,"px")),e.style.setProperty("width","100%"),e.style.setProperty("cursor","row-resize"),i.style.setProperty("min-height","".concat(t.limits.min,"%")),i.style.setProperty("max-height","".concat(t.limits.max,"%")),i.style.setProperty("width","100%"),n.style.setProperty("width","100%"),t.setSeparatorPosition(r)}));break}}},{key:"setItemsPosition",value:function(t,e,i){var n=this.$refs.first,r=this.$refs.second;n.style.setProperty(t,"".concat(e,"%")),r.style.setProperty(t,"".concat(i,"%"))}},{key:"setSeparatorPosition",value:function(t){var e=this.$refs.separator,i=this.$refs.displayed;switch(this.direction){case"vertical":e.style.setProperty("left","".concat(t,"px")),e.style.setProperty("top","0"),e.style.setProperty("height","100%"),i.style.setProperty("left","".concat(this.activeSize/2-1,"px")),i.style.setProperty("top","0");break;case"horizontal":e.style.setProperty("top","".concat(t,"px")),e.style.setProperty("left","0"),e.style.setProperty("width","100%"),i.style.setProperty("top","".concat(this.activeSize/2-1,"px")),i.style.setProperty("left","0");break}}},{key:"parseSettings",value:function(){this.limits.min=this.settings.min||0,this.limits.max=this.settings.max||100}}]),i}(_.a);w([V({type:String,default:"vertical"})],ha.prototype,"direction",void 0),w([V({type:Number,default:21})],ha.prototype,"activeSize",void 0),w([V({type:Object,default:function(){return{min:0,max:100}}})],ha.prototype,"settings",void 0),w([G("direction",{immediate:!0})],ha.prototype,"onDirectionChanged",null),w([G("activeSize",{immediate:!0})],ha.prototype,"onActiveSizeChanged",null),w([G("settings",{immediate:!0})],ha.prototype,"onSettingsChanged",null),ha=w([Y({name:"VuozSplitView"})],ha);var ua=ha,fa=ua,da=on(fa,ca,la,!1,null,null,null),pa=da.exports,ga=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"vuoz-title-bar has-text-semi-bold",class:t.getClasses()},[t._v(t._s(t.title))])},va=[],ma=function(t){f(i,t);var e=b(i);function i(){return c(this,i),e.apply(this,arguments)}return h(i,[{key:"getClasses",value:function(){var t="is-".concat(this.size," has-background-").concat(this.color," has-border-bottom-").concat(this.border," ");return t}}]),i}(_.a);w([V({type:String,default:"normal"})],ma.prototype,"size",void 0),w([V({type:String,default:"dark-grey"})],ma.prototype,"color",void 0),w([V({type:String,default:"none"})],ma.prototype,"border",void 0),w([V({type:String,default:"Untitled"})],ma.prototype,"title",void 0),ma=w([Y({name:"VuozTitleBar"})],ma);var ya=ma,ba=ya,wa=on(ba,ga,va,!1,null,null,null),xa=wa.exports,_a=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("table",{staticClass:"vuoz-table",class:"has-background-"+t.color,staticStyle:{"overflow-y":"scroll"},attrs:{tabindex:"0",cellspacing:"0"},on:{keydown:t.onKeyDown,blur:t.unselect}},[i("tbody",[t._t("headers",null,{border:t.border,selectable:t.selectable}),t._l(t.items,(function(e,i){return t._t("rows",null,{row:e,id:i,size:t.size,border:t.border,delimiter:t.delimiter,selected:t.selection[i],highlight:t.highlight,selectable:t.selectable})}))],2)])},Sa=[],Ca=(i("cb29"),function(t){f(i,t);var e=b(i);function i(){var t;return c(this,i),t=e.apply(this,arguments),t.selection=[],t.firstSelected=-1,t.selectionRange=1,t.modifier="none",t}return h(i,[{key:"mounted",value:function(){this.$on("cell",this.onCellSelected)}},{key:"beforeDestroy",value:function(){this.$off("cell",this.onCellSelected)}},{key:"onItemsChanged",value:function(){this.selection=new Array(this.items.length).fill(!1)}},{key:"onKeyDown",value:function(t){if("none"!==this.selectable&&t.key.toLowerCase().includes("arrow")&&this.firstSelected>=0){var e=t.shiftKey;switch(t.key){case"ArrowUp":"multiple"===this.selectable&&e?this.firstSelected>=1&&(this.firstSelected-=1,this.selectionRange+=1,this.handleSelection(),this.emitMulti()):this.firstSelected>=1?(this.firstSelected-=1,this.selectionRange=1,this.handleSelection(),this.emitRow()):(this.selectionRange=1,this.handleSelection(),this.emitRow());break;case"ArrowDown":"multiple"===this.selectable&&e?this.firstSelected+this.selectionRange<this.selection.length&&(this.selectionRange+=1,this.handleSelection(),this.emitMulti()):this.firstSelected<this.selection.length-1&&(this.firstSelected+this.selectionRange===this.selection.length?(this.firstSelected=this.selection.length-1,this.selectionRange=1,this.handleSelection(),this.emitRow()):(this.firstSelected+=1,this.selectionRange=1,this.handleSelection(),this.emitRow()))}}}},{key:"onCellSelected",value:function(t){if("none"!==this.selectable)if("multiple"===this.selectable&&"shift"===t.modifier&&this.firstSelected>=0){var e=this.firstSelected,i=t.row;e===i?this.selectionRange=1:i>e?(this.selectionRange=t.row-this.firstSelected+1,this.emitMulti()):(this.firstSelected=t.row,this.selectionRange=e-this.firstSelected+1,this.emitMulti()),this.handleSelection()}else"multiple"===this.selectable&&"ctrl"===t.modifier&&this.firstSelected>=0?this.selection.splice(t.row,1,!this.selection[t.row]):!0===this.selection[t.row]?this.unselect():(this.firstSelected=t.row,this.selectionRange=1,this.handleSelection(),this.emitRow())}},{key:"unselect",value:function(){this.firstSelected=-1,this.selectionRange=1,this.selection=new Array(this.items.length).fill(!1),this.$emit("unselect")}},{key:"handleSelection",value:function(){this.selection.fill(!1);for(var t=this.firstSelected;t<this.firstSelected+this.selectionRange;t++)this.selection.splice(t,1,!0)}},{key:"emitRow",value:function(){var t={row:this.firstSelected,item:this.items[this.firstSelected]};this.$emit("row",t)}},{key:"emitMulti",value:function(){for(var t=[],e=[],i=0;i<this.selection.length;i++)!0===this.selection[i]&&(t.push(i),e.push(this.items[i]));var n={rows:t,items:e};this.$emit("multi",n)}}]),i}(_.a));w([V({type:[Array,Object],required:!0})],Ca.prototype,"items",void 0),w([V({type:String,default:"small"})],Ca.prototype,"size",void 0),w([V({type:String,default:"transparent"})],Ca.prototype,"color",void 0),w([V({type:String,default:"none"})],Ca.prototype,"border",void 0),w([V({type:String,default:"none"})],Ca.prototype,"delimiter",void 0),w([V({type:String,default:"none"})],Ca.prototype,"highlight",void 0),w([V({type:String,default:"none"})],Ca.prototype,"selectable",void 0),w([G("items",{immediate:!0})],Ca.prototype,"onItemsChanged",null),Ca=w([Y({name:"VuozTable"})],Ca);var Ta=Ca,Oa=Ta,ka=on(Oa,_a,Sa,!1,null,null,null),Ea=ka.exports,Aa=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("tr",{class:t.getClasses("row")},t._l(t.row,(function(e,n){return i("th",{class:t.getClasses("cell",n),style:"width: "+100/t.row.length+"%;",on:{mousedown:function(e){return t.onClick(n)}}},[t._v(t._s(e))])})),0)},Pa=[],Da=function(t){f(i,t);var e=b(i);function i(){return c(this,i),e.apply(this,arguments)}return h(i,[{key:"getClasses",value:function(t,e){var i="";switch(t){case"row":i+="has-border-bottom-".concat(this.border," has-background-").concat(this.color," "),i+="item-height-".concat(this.size," ");break;case"cell":"undefined"!==typeof e&&e<this.row.length-1&&(i+="has-border-right-".concat(this.border," ")),i+="has-text-".concat(this.size," ");break}return i}},{key:"onClick",value:function(t){if("none"!==this.selectable){var e={col:t,content:this.row[t]};this.$emit("click",e),this.$parent.$emit("header",e)}}}]),i}(_.a);w([V({type:Array,required:!0})],Da.prototype,"row",void 0),w([V({type:String,default:"small"})],Da.prototype,"size",void 0),w([V({type:String,default:"transparent"})],Da.prototype,"color",void 0),w([V({type:String,default:"none"})],Da.prototype,"border",void 0),w([V({type:String,default:"none"})],Da.prototype,"selectable",void 0),Da=w([Y({name:"VuozTableHeader"})],Da);var Ma=Da,ja=Ma,Ra=on(ja,Aa,Pa,!1,null,null,null),Ia=Ra.exports,za=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("tr",{staticClass:"is-flex-column",class:"has-background-"+this.background+" "+t.getClasses("row"),staticStyle:{height:"auto"}},[t._l(t.row,(function(e,n){return Array.isArray(t.row)?i("td",{staticClass:"is-flex flex-grow",class:t.getClasses("cell",t.isObject(e),n,t.row.length),style:"width: "+100/t.row.length+"%;",attrs:{id:n},on:{mousedown:function(i){return t.onClick(n,e,i)}}},[t.isObject(e)?t._e():[i("div",{staticClass:"flex-grow is-flex align-center is-fullheight"},[t._v(t._s(e))])],t.isObject(e)?[i(e.component,t._b({tag:"component"},"component",e.props,!1))]:t._e()],2):t._e()})),Array.isArray(t.row)?t._e():i("td",{staticClass:"is-fullwidth is-flex-column",class:t.getClasses("cell",t.isObject(t.row)),on:{mousedown:function(e){return t.onClick(0,t.row,e)}}},[t.isObject(t.row)?t._e():[t._v(t._s(t.row))],t.isObject(t.row)?[i(t.row.component,t._b({tag:"component"},"component",t.row.props,!1))]:t._e()],2)],2)},La=[];i("e01a"),i("d28b"),i("3ca3"),i("e260"),i("ddb0");function Fa(t){return Fa="function"===typeof Symbol&&"symbol"===typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"===typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Fa(t)}i("1276");var Ba=function(t){f(i,t);var e=b(i);function i(){var t;return c(this,i),t=e.apply(this,arguments),t.background="transparent",t.ctrl="ctrl",t}return h(i,[{key:"onSelectedChange",value:function(){this.background=this.selected?this.highlight:this.color}},{key:"mounted",value:function(){this.ctrl=navigator.platform.toLowerCase().includes("mac")?"meta":"ctrl"}},{key:"getClasses",value:function(t,e,i,n){var r="";switch(t){case"row":var o=this.size.split("-")[0];r+="has-border-bottom-".concat(this.border," "),r+="item-height-".concat(this.size," has-text-").concat(o," ");break;case"cell":if("undefined"!==typeof i&&"undefined"!==typeof n&&i<n-1&&(r+="has-border-right-".concat(this.cellBorder," ")),!1===e)switch(this.size){case"small-thin":case"small":r+="has-padding-left-sm has-padding-right-sm";break;case"normal":case"large":r+="has-padding-left-md has-padding-right-md";break}}return r}},{key:"onClick",value:function(t,e,i){if("none"!==this.selectable){var n=void 0;i.shiftKey?n="shift":("ctrl"===this.ctrl&&i.ctrlKey||"meta"===this.ctrl&&i.metaKey)&&(n="ctrl");var r={row:this.id,col:t,modifier:n,item:e};return this.$emit("cell",r),this.$parent.$emit("cell",r),!1}}},{key:"isObject",value:function(t){return"object"===Fa(t)}}]),i}(_.a);w([V({type:[Array,String,Number,Object],required:!0})],Ba.prototype,"row",void 0),w([V({type:Number,required:!0})],Ba.prototype,"id",void 0),w([V({type:String,default:"small"})],Ba.prototype,"size",void 0),w([V({type:String,default:"transparent"})],Ba.prototype,"color",void 0),w([V({type:String,default:"none"})],Ba.prototype,"border",void 0),w([V({type:String,default:"none"})],Ba.prototype,"cellBorder",void 0),w([V({type:String,default:"primary"})],Ba.prototype,"highlight",void 0),w([V({type:Boolean,default:!1})],Ba.prototype,"selected",void 0),w([V({type:String,default:"none"})],Ba.prototype,"selectable",void 0),w([G("selected",{immediate:!0})],Ba.prototype,"onSelectedChange",null),Ba=w([Y({name:"VuozTableRow"})],Ba);var Na=Ba,Wa=Na,Ha=on(Wa,za,La,!1,null,null,null),Ya=Ha.exports,Xa=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"is-flex align-center is-small is-unselectable"},[i("div",{staticClass:"material-icons has-padding-left-sm"},[t._v(t._s(t.icon))]),i("div",{staticClass:"has-padding-left-ms has-padding-right-sm"},[t._v(t._s(t.title))])])},Ua=[],Va=function(t){f(i,t);var e=b(i);function i(){return c(this,i),e.apply(this,arguments)}return i}(_.a);w([V({type:String,default:"error"})],Va.prototype,"icon",void 0),w([V({type:String,required:!0})],Va.prototype,"title",void 0),Va=w([Y({name:"VuozPreferencesItem"})],Va);var Ga=Va,$a=Ga,qa=on($a,Xa,Ua,!1,null,null,null),Ka=qa.exports,Za=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"flex-grow is-flex"},[t._t("default")],2)},Ja=[],Qa=function(t){f(i,t);var e=b(i);function i(){return c(this,i),e.apply(this,arguments)}return i}(_.a);Qa=w([Y({name:"VuozPreferencesPanel"})],Qa);var tc=Qa,ec=tc,ic=on(ec,Za,Ja,!1,null,null,null),nc=ic.exports,rc=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{ref:"container",staticClass:"is-fullsize"},[i("canvas",{attrs:{id:"monitor"}})])},oc=[],sc=i("7a94"),ac=function(t){f(i,t);var e=b(i);function i(){var t;return c(this,i),t=e.apply(this,arguments),t.interval=null,t.previous={x:0,y:0},t.current={x:0,y:0},t}return h(i,[{key:"mounted",value:function(){var t=this;window.addEventListener("resize",this.onResize);var e=this.$refs.container.ownerDocument!==document,i=this.$refs.container;this.width=i.clientWidth,this.height=i.clientHeight,e&&i.parentNode&&i.parentNode.parentNode&&(this.width=i.parentNode.parentNode.clientWidth,this.height=i.parentNode.parentNode.clientHeight),this.canvas=new sc["fabric"].Canvas("monitor",{width:this.width,height:this.height,backgroundColor:"#fff",selection:!1,preserveObjectStacking:!0,targetFindTolerance:5,fireRightClick:!0,fireMiddleClick:!0,stopContextMenu:!0}),this.previous.y=this.height,this.debug&&this.$refs.container.addEventListener("mousemove",this.onEvent),this.monitor=this.monitor.bind(this),this.interval=setInterval((function(){t.monitor()}),100)}},{key:"beforeDestroy",value:function(){window.removeEventListener("resize",this.onResize),this.$refs.container.addEventListener("mousemove",this.onEvent)}},{key:"monitor",value:function(){var t=this.previous.x+1;this.canvas.add(new sc["fabric"].Line([this.previous.x,this.previous.y,t,this.current.y],{stroke:"black"})),this.previous={x:t,y:this.height},this.current.y=this.height,this.canvas.renderAll()}},{key:"onEvent",value:function(t){this.current.y=t.pageY}},{key:"onResize",value:function(){var t=this.$refs.container;this.width=t.clientWidth,this.height=t.clientHeight,this.canvas.setWidth(this.width),this.canvas.setHeight(this.height),this.canvas.calcOffset(),this.previous.y=this.height}}]),i}(_.a);w([V({type:Boolean,default:!1})],ac.prototype,"debug",void 0),ac=w([Y({name:"VuozMonitorView"})],ac);var cc=ac,lc=cc,hc=on(lc,rc,oc,!1,null,null,null),uc=hc.exports,fc=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{directives:[{name:"resize",rawName:"v-resize"}],staticClass:"is-flex-column",staticStyle:{width:"100%",height:"100%"},on:{resize:t.onResize}},[i("vuoz-toolbar",{attrs:{items:t.toolbarItems,type:"fixed",position:"top",size:"small",color:"dark-grey",border:"medium-grey",shadow:!1},on:{click:t.onToolbar,menu:t.onMenuSelect}}),i("div",{staticClass:"is-flex flex-grow",staticStyle:{position:"relative"}},[i("div",{ref:"container",staticStyle:{position:"absolute",left:"0",right:"0",top:"0",bottom:"0",overflow:"auto"},on:{scroll:function(e){return t.canvas.calcOffset.bind(t.canvas)}}},[i("canvas",{attrs:{id:"whiteboard"}})])])],1)},dc=[],pc=i("2374"),gc=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"vuoz-color-menu"},[i("h3",{staticClass:"has-border-bottom-dark-grey has-padding-bottom-sm"},[t._v("Brush")]),i("v-swatches",{attrs:{inline:"","show-fallback":"","fallback-input-type":"color","background-color":"rgba(0, 0, 0, 0)","show-border":"","swatch-size":"30","spacing-size":7,shapes:"circles","fallback-input-class":"vuoz-color-menu-fallback"},model:{value:t.brushColor,callback:function(e){t.brushColor=e},expression:"brushColor"}}),i("div",{staticClass:"has-border-top-dark-grey has-margin-top-sm has-padding-top-sm is-flex flex-grow align-center",staticStyle:{"justify-content":"space-between"}},[i("div",[t._v("Size (px) ")]),i("vuoz-input",{attrs:{type:"uinteger",color:"dark-grey",initial:t.brushSize,rounded:""},on:{change:t.onSizeChange}})],1)],1)},vc=[],mc=i("7f75"),yc=i.n(mc),bc=(i("b3a4"),function(t){f(i,t);var e=b(i);function i(){var t;return c(this,i),t=e.apply(this,arguments),t.brushColor="#000",t.brushSize="2",t}return h(i,[{key:"onBrushColorChange",value:function(){this.$emit("select",{type:"brush:color",value:this.brushColor})}},{key:"onSizeChange",value:function(t){this.$emit("select",{type:"brush:size",value:parseInt(t.value)})}}]),i}(_.a));w([V({type:Boolean,default:!1})],bc.prototype,"disabled",void 0),w([V({type:Boolean,default:!1})],bc.prototype,"loading",void 0),w([V({type:String,default:"push"})],bc.prototype,"type",void 0),w([V({type:String,default:"normal"})],bc.prototype,"size",void 0),w([V({type:String,default:"free"})],bc.prototype,"shape",void 0),w([V({type:String,default:"regular"})],bc.prototype,"weight",void 0),w([V({type:Boolean,default:!1})],bc.prototype,"rounded",void 0),w([V({type:Boolean,default:!0})],bc.prototype,"border",void 0),w([V({type:Boolean,default:!1})],bc.prototype,"uppercase",void 0),w([V({type:Boolean,default:!1})],bc.prototype,"smallcaps",void 0),w([V({type:String,default:"medium-grey"})],bc.prototype,"color",void 0),w([V({type:String,default:"danger"})],bc.prototype,"toggle",void 0),w([V({type:Boolean,default:!1})],bc.prototype,"toggled",void 0),w([V({type:Boolean,default:!1})],bc.prototype,"shadow",void 0),w([V({type:String,default:"close"})],bc.prototype,"icon",void 0),w([G("brushColor",{immediate:!0})],bc.prototype,"onBrushColorChange",null),bc=w([Y({name:"VuozBrushMenu",components:{VSwatches:yc.a,VuozInput:kn}})],bc);var wc=bc,xc=wc,_c=on(xc,gc,vc,!1,null,null,null),Sc=_c.exports,Cc=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"is-flex-column has-padding-sm has-padding-left-ms has-background-medium-grey",staticStyle:{width:"296px"}},[i("h3",{staticClass:"has-border-bottom-dark-grey has-padding-bottom-sm"},[t._v("Background")]),i("v-swatches",{attrs:{inline:"","show-fallback":"","fallback-input-type":"color","background-color":"rgba(0, 0, 0, 0)","show-border":"","swatch-size":"30","spacing-size":7,shapes:"circles","fallback-input-class":"vuoz-color-menu-fallback"},model:{value:t.backgroundColor,callback:function(e){t.backgroundColor=e},expression:"backgroundColor"}})],1)},Tc=[],Oc=function(t){f(i,t);var e=b(i);function i(){var t;return c(this,i),t=e.apply(this,arguments),t.backgroundColor="#fff",t}return h(i,[{key:"onBackgroundColorChange",value:function(){this.$emit("select",{type:"background:color",value:this.backgroundColor})}}]),i}(_.a);w([V({type:Boolean,default:!1})],Oc.prototype,"disabled",void 0),w([V({type:Boolean,default:!1})],Oc.prototype,"loading",void 0),w([V({type:String,default:"push"})],Oc.prototype,"type",void 0),w([V({type:String,default:"normal"})],Oc.prototype,"size",void 0),w([V({type:String,default:"free"})],Oc.prototype,"shape",void 0),w([V({type:String,default:"regular"})],Oc.prototype,"weight",void 0),w([V({type:Boolean,default:!1})],Oc.prototype,"rounded",void 0),w([V({type:Boolean,default:!0})],Oc.prototype,"border",void 0),w([V({type:Boolean,default:!1})],Oc.prototype,"uppercase",void 0),w([V({type:Boolean,default:!1})],Oc.prototype,"smallcaps",void 0),w([V({type:String,default:"medium-grey"})],Oc.prototype,"color",void 0),w([V({type:String,default:"danger"})],Oc.prototype,"toggle",void 0),w([V({type:Boolean,default:!1})],Oc.prototype,"toggled",void 0),w([V({type:Boolean,default:!1})],Oc.prototype,"shadow",void 0),w([V({type:String,default:"close"})],Oc.prototype,"icon",void 0),w([G("backgroundColor",{immediate:!0})],Oc.prototype,"onBackgroundColorChange",null),Oc=w([Y({name:"VuozBackgroundMenu",components:{VSwatches:yc.a}})],Oc);var kc=Oc,Ec=kc,Ac=on(Ec,Cc,Tc,!1,null,null,null),Pc=Ac.exports,Dc={icon:"brush",label:"Brush",type:"dropdown",toggle:"medium-grey",rounded:!0,name:"vuoz:whiteboard:brush",menu:Sc,onDown:function(t,e){this.$parent.toggleBrushPanel(!0)},onUp:function(t,e){this.$parent.toggleBrushPanel(!1)}},Mc={icon:"format_paint",label:"Background",rounded:!0,type:"dropdown",toggle:"medium-grey",name:"vuoz:whiteboard:background",menu:Pc,onDown:function(t,e){this.$parent.toggleBackgroundPanel(!0)},onUp:function(t,e){this.$parent.toggleBackgroundPanel(!1)}},jc={icon:"delete",label:"Clear",rounded:!0,name:"vuoz:whiteboard:clear",onDown:function(){this.$parent.clear()}},Rc={icon:"north_west",label:"Select",rounded:!0,type:"toggle",toggle:"primary",name:"vuoz:whiteboard:select",onDown:function(){this.unselect("vuoz:whiteboard:erase"),this.unselect("vuoz:whiteboard:draw")}},Ic={icon:"gesture",label:"Draw",rounded:!0,type:"toggle",toggle:"primary",toggled:!0,name:"vuoz:whiteboard:draw",onDown:function(){this.unselect("vuoz:whiteboard:erase"),this.unselect("vuoz:whiteboard:select")}},zc={icon:"layers_clear",label:"Eraser",rounded:!0,type:"toggle",toggle:"primary",name:"vuoz:whiteboard:erase",onDown:function(){this.unselect("vuoz:whiteboard:draw"),this.unselect("vuoz:whiteboard:select")}},Lc={icon:"circle",label:"Circle",rounded:!0,name:"vuoz:whiteboard:circle",onDown:function(){console.warn("TODO: CIRCLE")}},Fc={icon:"crop_square",label:"Square",rounded:!0,name:"vuoz:whiteboard:square",onDown:function(){console.warn("TODO: SQUARE")}},Bc={icon:"change_history",label:"Triangle",rounded:!0,name:"vuoz:whiteboard:triangle",onDown:function(){console.warn("TODO: TRIANGLE")}},Nc={icon:"show_chart",label:"Line / Polygon",rounded:!0,name:"vuoz:whiteboard:line",onDown:function(){console.warn("TODO: LINE")}},Wc={icon:"title",label:"Text",rounded:!0,name:"vuoz:whiteboard:text",onDown:function(){console.warn("TODO: TEXT")}},Hc={icon:"file_download",label:"Import",rounded:!0,name:"vuoz:toolbar:import",onDown:function(){console.warn("TODO: IMPORT")}},Yc={icon:"file_upload",label:"Export",rounded:!0,name:"vuoz:toolbar:export",onDown:function(){console.warn("TODO: EXPORT")}},Xc={icon:"save",label:"Save",rounded:!0,name:"vuoz:whiteboard:save",onDown:function(){console.warn("TODO: SAVE")}},Uc={role:"spacer"},Vc={role:"separator"},Gc=[jc,Vc,Dc,Mc,Vc,Rc,Ic,zc,Vc,Lc,Fc,Bc,Nc,Vc,Wc,Uc,Hc,Yc,Xc],$c=i("06aa"),qc=function(t){f(i,t);var e=b(i);function i(){var t;return c(this,i),t=e.apply(this,arguments),t.backgroundColor="#fff",t.brushColor="#000",t.isDrawing=!1,t.mode="draw",t.previousMode="draw",t.toolbarItems=Gc,t.pressure=0,t.objects=[],t}return h(i,[{key:"mounted",value:function(){var t=this;this.$nextTick((function(){var e=t.$refs.container;t.width=e.clientWidth,t.height=e.clientHeight;var i=e.ownerDocument!==document;i&&e.parentNode&&e.parentNode.parentNode&&(t.width=e.parentNode.parentNode.clientWidth,t.height=e.parentNode.parentNode.clientHeight),t.canvas=new sc["fabric"].Canvas("whiteboard",{width:t.width,height:t.height,backgroundColor:t.backgroundColor,preserveObjectStacking:!0,targetFindTolerance:5,fireRightClick:!0,fireMiddleClick:!0,stopContextMenu:!0,isDrawingMode:!0,enablePointerEvents:!0}),t.brush=new pc["PSBrush"](t.canvas),t.brush.width=2,t.brush.color=t.brushColor,t.brush.simplifyHighestQuality=!0,t.canvas.freeDrawingBrush=t.brush,t.canvas.on("mouse:down",t.onMouseDown),t.canvas.on("mouse:down:before",t.onMouseDownBefore),t.canvas.on("mouse:move",t.onMouseMove),t.canvas.on("mouse:up",t.onMouseUp),t.canvas.on("object:moving",t.onObjectMoving)}))}},{key:"beforeDestroy",value:function(){this.canvas.off("mouse:down",this.onMouseDown),this.canvas.off("mouse:down:before",this.onMouseDownBefore),this.canvas.off("mouse:move",this.onMouseMove),this.canvas.off("mouse:up",this.onMouseUp),this.canvas.off("object:moving",this.onObjectMoving)}},{key:"onBackgroundColorChange",value:function(){this.canvas.backgroundColor=this.backgroundColor,this.canvas.renderAll()}},{key:"onBrushColorChange",value:function(){this.brush.color=this.brushColor}},{key:"getClasses",value:function(){var t="is-".concat(this.size," has-background-").concat(this.color," has-border-bottom-").concat(this.border," ");return t}},{key:"toggleBrushPanel",value:function(t){}},{key:"toggleBackgroundPanel",value:function(t){}},{key:"clear",value:function(){this.canvas.clear(),this.canvas.backgroundColor=this.backgroundColor,this.canvas.renderAll()}},{key:"onMouseDownBefore",value:function(t){if("select"!==this.mode)switch(t.e.buttons){case 1:this.brush.color="draw"===this.mode?this.brushColor:this.backgroundColor;break;case 32:this.previousMode=this.mode,this.mode="erase",this.brush.color=this.backgroundColor}}},{key:"onMouseDown",value:function(t){this.isDrawing="select"!==this.mode}},{key:"onMouseUp",value:function(t){this.mode=this.previousMode,this.isDrawing=!1,this.brush.color="draw"===this.mode?this.brushColor:this.backgroundColor,this.canvas.isDrawingMode=!1,this.objects=this.canvas.getObjects(),this.canvas.isDrawingMode="select"!==this.mode}},{key:"onMouseMove",value:function(t){this.isDrawing&&"select"!==this.mode&&(this.pressure=t.e.pressure)}},{key:"onObjectMoving",value:function(t){var e=this.$refs.container;t.target.left+t.target.width>this.width&&(this.width+=50,this.canvas.setWidth(this.width),this.canvas.calcOffset(),e.scrollLeft=this.width-t.target.left),t.target.top+t.target.height>this.height&&(this.height+=50,this.canvas.setHeight(this.height),this.canvas.calcOffset(),e.scrollTop=this.height-t.target.top)}},{key:"onResize",value:function(){var t=this;this.$nextTick((function(){var e=t.$refs.container;t.canvas.width<e.clientWidth&&t.canvas.setWidth(e.clientWidth),t.canvas.height<e.clientHeight&&t.canvas.setHeight(e.clientHeight),t.width=t.canvas.width,t.height=t.canvas.height,t.canvas.calcOffset()}))}},{key:"onToolbar",value:function(t,e){switch(t){case"vuoz:whiteboard:select":e&&(this.mode="select",this.previousMode="select",this.canvas.isDrawingMode=!1);break;case"vuoz:whiteboard:draw":e&&(this.mode="draw",this.previousMode="draw",this.canvas.isDrawingMode=e,this.brush.color=this.brushColor);break;case"vuoz:whiteboard:erase":e&&(this.mode="erase",this.previousMode="erase",this.canvas.isDrawingMode=e,this.brush.color=this.backgroundColor);break}}},{key:"onMenuSelect",value:function(t){switch(t.type){case"brush:color":this.brushColor=t.value;break;case"brush:size":this.brush.width=t.value;break;case"background:color":this.backgroundColor=t.value;break}}}]),i}(_.a);w([V({type:String,default:"normal"})],qc.prototype,"size",void 0),w([V({type:String,default:"dark-grey"})],qc.prototype,"color",void 0),w([V({type:String,default:"none"})],qc.prototype,"border",void 0),w([G("backgroundColor",{immediate:!1})],qc.prototype,"onBackgroundColorChange",null),w([G("brushColor",{immediate:!1})],qc.prototype,"onBrushColorChange",null),qc=w([Y({name:"VuozWhiteBoard",components:{VuozToolbar:er},directives:{resize:$c["resize"]}})],qc);var Kc=qc,Zc=Kc,Jc=on(Zc,fc,dc,!1,null,null,null),Qc=Jc.exports,tl=i("cd3b")},fc6a:function(t,e,i){var n=i("44ad"),r=i("1d80");t.exports=function(t){return n(r(t))}},fdbc:function(t,e){t.exports={CSSRuleList:0,CSSStyleDeclaration:0,CSSValueList:0,ClientRectList:0,DOMRectList:0,DOMStringList:0,DOMTokenList:1,DataTransferItemList:0,FileList:0,HTMLAllCollection:0,HTMLCollection:0,HTMLFormElement:0,HTMLSelectElement:0,MediaList:0,MimeTypeArray:0,NamedNodeMap:0,NodeList:1,PaintRequestList:0,Plugin:0,PluginArray:0,SVGLengthList:0,SVGNumberList:0,SVGPathSegList:0,SVGPointList:0,SVGStringList:0,SVGTransformList:0,SourceBufferList:0,StyleSheetList:0,TextTrackCueList:0,TextTrackList:0,TouchList:0}},fdbf:function(t,e,i){var n=i("4930");t.exports=n&&!Symbol.sham&&"symbol"==typeof Symbol.iterator},fea9:function(t,e,i){var n=i("da84");t.exports=n.Promise}})}));
//# sourceMappingURL=vuoz.components.umd.min.js.map